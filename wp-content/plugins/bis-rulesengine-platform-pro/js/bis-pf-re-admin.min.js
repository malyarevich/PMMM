/*
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(d){var c=d.fn.jquery.split(" ")[0].split(".");if(c[0]<2&&c[1]<9||1==c[0]&&9==c[1]&&c[2]<1||c[0]>3){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}}(jQuery),+function(d){function c(){var f=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var g in e){if(void 0!==f.style[g]){return{end:e[g]}}}return !1}d.fn.emulateTransitionEnd=function(a){var h=!1,g=this;d(this).one("bsTransitionEnd",function(){h=!0});var f=function(){h||d(g).trigger(d.support.transition.end)};return setTimeout(f,a),this},d(function(){d.support.transition=c(),d.support.transition&&(d.event.special.bsTransitionEnd={bindType:d.support.transition.end,delegateType:d.support.transition.end,handle:function(a){if(d(a.target).is(this)){return a.handleObj.handler.apply(this,arguments)}}})})}(jQuery),+function(g){function f(a){return this.each(function(){var d=g(this),b=d.data("bs.alert");b||d.data("bs.alert",b=new j(this)),"string"==typeof a&&b[a].call(d)})}var k='[data-dismiss="alert"]',j=function(a){g(a).on("click",k,this.close)};j.VERSION="3.3.7",j.TRANSITION_DURATION=150,j.prototype.close=function(a){function n(){d.detach().trigger("closed.bs.alert").remove()}var m=g(this),l=m.attr("data-target");l||(l=m.attr("href"),l=l&&l.replace(/.*(?=#[^\s]*$)/,""));var d=g("#"===l?[]:l);a&&a.preventDefault(),d.length||(d=m.closest(".alert")),d.trigger(a=g.Event("close.bs.alert")),a.isDefaultPrevented()||(d.removeClass("in"),g.support.transition&&d.hasClass("fade")?d.one("bsTransitionEnd",n).emulateTransitionEnd(j.TRANSITION_DURATION):n())};var h=g.fn.alert;g.fn.alert=f,g.fn.alert.Constructor=j,g.fn.alert.noConflict=function(){return g.fn.alert=h,this},g(document).on("click.bs.alert.data-api",k,j.prototype.close)}(jQuery),+function(f){function e(a){return this.each(function(){var j=f(this),c=j.data("bs.button"),b="object"==typeof a&&a;c||j.data("bs.button",c=new h(this,b)),"toggle"==a?c.toggle():a&&c.setState(a)})}var h=function(a,c){this.$element=f(a),this.options=f.extend({},h.DEFAULTS,c),this.isLoading=!1};h.VERSION="3.3.7",h.DEFAULTS={loadingText:"loading..."},h.prototype.setState=function(a){var m="disabled",l=this.$element,k=l.is("input")?"val":"html",j=l.data();a+="Text",null==j.resetText&&l.data("resetText",l[k]()),setTimeout(f.proxy(function(){l[k](null==j[a]?this.options[a]:j[a]),"loadingText"==a?(this.isLoading=!0,l.addClass(m).attr(m,m).prop(m,!0)):this.isLoading&&(this.isLoading=!1,l.removeClass(m).removeAttr(m).prop(m,!1))},this),0)},h.prototype.toggle=function(){var j=!0,d=this.$element.closest('[data-toggle="buttons"]');if(d.length){var k=this.$element.find("input");"radio"==k.prop("type")?(k.prop("checked")&&(j=!1),d.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==k.prop("type")&&(k.prop("checked")!==this.$element.hasClass("active")&&(j=!1),this.$element.toggleClass("active")),k.prop("checked",this.$element.hasClass("active")),j&&k.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")}};var g=f.fn.button;f.fn.button=e,f.fn.button.Constructor=h,f.fn.button.noConflict=function(){return f.fn.button=g,this},f(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(b){var a=f(b.target).closest(".btn");e.call(a,"toggle"),f(b.target).is('input[type="radio"], input[type="checkbox"]')||(b.preventDefault(),a.is("input,button")?a.trigger("focus"):a.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(a){f(a.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(a.type))})}(jQuery),+function(g){function f(a){return this.each(function(){var m=g(this),l=m.data("bs.carousel"),c=g.extend({},k.DEFAULTS,m.data(),"object"==typeof a&&a),b="string"==typeof a?a:c.slide;l||m.data("bs.carousel",l=new k(this,c)),"number"==typeof a?l.to(a):b?l[b]():c.interval&&l.pause().cycle()})}var k=function(a,d){this.$element=g(a),this.$indicators=this.$element.find(".carousel-indicators"),this.options=d,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",g.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart" in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",g.proxy(this.pause,this)).on("mouseleave.bs.carousel",g.proxy(this.cycle,this))};k.VERSION="3.3.7",k.TRANSITION_DURATION=600,k.DEFAULTS={interval:5000,pause:"hover",wrap:!0,keyboard:!0},k.prototype.keydown=function(b){if(!/input|textarea/i.test(b.target.tagName)){switch(b.which){case 37:this.prev();break;case 39:this.next();break;default:return}b.preventDefault()}},k.prototype.cycle=function(a){return a||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(g.proxy(this.next,this),this.options.interval)),this},k.prototype.getItemIndex=function(b){return this.$items=b.parent().children(".item"),this.$items.index(b||this.$active)},k.prototype.getItemForDirection=function(m,l){var r=this.getItemIndex(l),p="prev"==m&&0===r||"next"==m&&r==this.$items.length-1;if(p&&!this.options.wrap){return l}var o="prev"==m?-1:1,n=(r+o)%this.$items.length;return this.$items.eq(n)},k.prototype.to=function(e){var d=this,l=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0)){return this.sliding?this.$element.one("slid.bs.carousel",function(){d.to(e)}):l==e?this.pause().cycle():this.slide(e>l?"next":"prev",this.$items.eq(e))}},k.prototype.pause=function(a){return a||(this.paused=!0),this.$element.find(".next, .prev").length&&g.support.transition&&(this.$element.trigger(g.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},k.prototype.next=function(){if(!this.sliding){return this.slide("next")}},k.prototype.prev=function(){if(!this.sliding){return this.slide("prev")}},k.prototype.slide=function(w,v){var u=this.$element.find(".item.active"),t=v||this.getItemForDirection(w,u),s=this.interval,r="next"==w?"left":"right",p=this;if(t.hasClass("active")){return this.sliding=!1}var o=t[0],n=g.Event("slide.bs.carousel",{relatedTarget:o,direction:r});if(this.$element.trigger(n),!n.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=g(this.$indicators.children()[this.getItemIndex(t)]);c&&c.addClass("active")}var a=g.Event("slid.bs.carousel",{relatedTarget:o,direction:r});return g.support.transition&&this.$element.hasClass("slide")?(t.addClass(w),t[0].offsetWidth,u.addClass(r),t.addClass(r),u.one("bsTransitionEnd",function(){t.removeClass([w,r].join(" ")).addClass("active"),u.removeClass(["active",r].join(" ")),p.sliding=!1,setTimeout(function(){p.$element.trigger(a)},0)}).emulateTransitionEnd(k.TRANSITION_DURATION)):(u.removeClass("active"),t.addClass("active"),this.sliding=!1,this.$element.trigger(a)),s&&this.cycle(),this}};var j=g.fn.carousel;g.fn.carousel=f,g.fn.carousel.Constructor=k,g.fn.carousel.noConflict=function(){return g.fn.carousel=j,this};var h=function(o){var n,m=g(this),l=g(m.attr("data-target")||(n=m.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(l.hasClass("carousel")){var b=g.extend({},l.data(),m.data()),a=m.attr("data-slide-to");a&&(b.interval=!1),f.call(l,b),a&&l.data("bs.carousel").to(a),o.preventDefault()}};g(document).on("click.bs.carousel.data-api","[data-slide]",h).on("click.bs.carousel.data-api","[data-slide-to]",h),g(window).on("load",function(){g('[data-ride="carousel"]').each(function(){var a=g(this);f.call(a,a.data())})})}(jQuery),+function(g){function f(a){var l,e=a.attr("data-target")||(l=a.attr("href"))&&l.replace(/.*(?=#[^\s]+$)/,"");return g(e)}function k(a){return this.each(function(){var l=g(this),d=l.data("bs.collapse"),b=g.extend({},j.DEFAULTS,l.data(),"object"==typeof a&&a);!d&&b.toggle&&/show|hide/.test(a)&&(b.toggle=!1),d||l.data("bs.collapse",d=new j(this,b)),"string"==typeof a&&d[a]()})}var j=function(a,d){this.$element=g(a),this.options=g.extend({},j.DEFAULTS,d),this.$trigger=g('[data-toggle="collapse"][href="#'+a.id+'"],[data-toggle="collapse"][data-target="#'+a.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};j.VERSION="3.3.7",j.TRANSITION_DURATION=350,j.DEFAULTS={toggle:!0},j.prototype.dimension=function(){var b=this.$element.hasClass("width");return b?"width":"height"},j.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var a,n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(n&&n.length&&(a=n.data("bs.collapse"),a&&a.transitioning))){var m=g.Event("show.bs.collapse");if(this.$element.trigger(m),!m.isDefaultPrevented()){n&&n.length&&(k.call(n,"hide"),a||n.data("bs.collapse",null));var l=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[l](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var d=function(){this.$element.removeClass("collapsing").addClass("collapse in")[l](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!g.support.transition){return d.call(this)}var c=g.camelCase(["scroll",l].join("-"));this.$element.one("bsTransitionEnd",g.proxy(d,this)).emulateTransitionEnd(j.TRANSITION_DURATION)[l](this.$element[0][c])}}}},j.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var a=g.Event("hide.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){var l=this.dimension();this.$element[l](this.$element[l]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return g.support.transition?void this.$element[l](0).one("bsTransitionEnd",g.proxy(d,this)).emulateTransitionEnd(j.TRANSITION_DURATION):d.call(this)}}},j.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},j.prototype.getParent=function(){return g(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(g.proxy(function(l,b){var a=g(b);this.addAriaAndCollapsedClass(f(a),a)},this)).end()},j.prototype.addAriaAndCollapsedClass=function(e,d){var l=e.hasClass("in");e.attr("aria-expanded",l),d.toggleClass("collapsed",!l).attr("aria-expanded",l)};var h=g.fn.collapse;g.fn.collapse=k,g.fn.collapse.Constructor=j,g.fn.collapse.noConflict=function(){return g.fn.collapse=h,this},g(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(m){var l=g(this);l.attr("data-target")||m.preventDefault();var c=f(l),b=c.data("bs.collapse"),a=b?"toggle":l.data();k.call(c,a)})}(jQuery),+function(k){function j(a){var f=a.attr("data-target");f||(f=a.attr("href"),f=f&&/#[A-Za-z]/.test(f)&&f.replace(/.*(?=#[^\s]*$)/,""));var e=f&&k(f);return e&&e.length?e:a.parent()}function r(a){a&&3===a.which||(k(o).remove(),k(n).each(function(){var g=k(this),c=j(g),b={relatedTarget:this};c.hasClass("open")&&(a&&"click"==a.type&&/input|textarea/i.test(a.target.tagName)&&k.contains(c[0],a.target)||(c.trigger(a=k.Event("hide.bs.dropdown",b)),a.isDefaultPrevented()||(g.attr("aria-expanded","false"),c.removeClass("open").trigger(k.Event("hidden.bs.dropdown",b)))))}))}function p(a){return this.each(function(){var e=k(this),b=e.data("bs.dropdown");b||e.data("bs.dropdown",b=new m(this)),"string"==typeof a&&b[a].call(e)})}var o=".dropdown-backdrop",n='[data-toggle="dropdown"]',m=function(a){k(a).on("click.bs.dropdown",this.toggle)};m.VERSION="3.3.7",m.prototype.toggle=function(t){var s=k(this);if(!s.is(".disabled, :disabled")){var c=j(s),b=c.hasClass("open");if(r(),!b){"ontouchstart" in document.documentElement&&!c.closest(".navbar-nav").length&&k(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(k(this)).on("click",r);var a={relatedTarget:this};if(c.trigger(t=k.Event("show.bs.dropdown",a)),t.isDefaultPrevented()){return}s.trigger("focus").attr("aria-expanded","true"),c.toggleClass("open").trigger(k.Event("shown.bs.dropdown",a))}return !1}},m.prototype.keydown=function(v){if(/(38|40|27|32)/.test(v.which)&&!/input|textarea/i.test(v.target.tagName)){var u=k(this);if(v.preventDefault(),v.stopPropagation(),!u.is(".disabled, :disabled")){var t=j(u),s=t.hasClass("open");if(!s&&27!=v.which||s&&27==v.which){return 27==v.which&&t.find(n).trigger("focus"),u.trigger("click")}var f=" li:not(.disabled):visible a",b=t.find(".dropdown-menu"+f);if(b.length){var a=b.index(v.target);38==v.which&&a>0&&a--,40==v.which&&a<b.length-1&&a++,~a||(a=0),b.eq(a).trigger("focus")}}}};var l=k.fn.dropdown;k.fn.dropdown=p,k.fn.dropdown.Constructor=m,k.fn.dropdown.noConflict=function(){return k.fn.dropdown=l,this},k(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(b){b.stopPropagation()}).on("click.bs.dropdown.data-api",n,m.prototype.toggle).on("keydown.bs.dropdown.data-api",n,m.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",m.prototype.keydown)}(jQuery),+function(f){function e(a,c){return this.each(function(){var j=f(this),d=j.data("bs.modal"),b=f.extend({},h.DEFAULTS,j.data(),"object"==typeof a&&a);d||j.data("bs.modal",d=new h(this,b)),"string"==typeof a?d[a](c):b.show&&d.show(c)})}var h=function(a,d){this.options=d,this.$body=f(document.body),this.$element=f(a),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,f.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};h.VERSION="3.3.7",h.TRANSITION_DURATION=300,h.BACKDROP_TRANSITION_DURATION=150,h.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},h.prototype.toggle=function(b){return this.isShown?this.hide():this.show(b)},h.prototype.show=function(a){var j=this,c=f.Event("show.bs.modal",{relatedTarget:a});this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',f.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){j.$element.one("mouseup.dismiss.bs.modal",function(d){f(d.target).is(j.$element)&&(j.ignoreBackdropClick=!0)})}),this.backdrop(function(){var d=f.support.transition&&j.$element.hasClass("fade");j.$element.parent().length||j.$element.appendTo(j.$body),j.$element.show().scrollTop(0),j.adjustDialog(),d&&j.$element[0].offsetWidth,j.$element.addClass("in"),j.enforceFocus();var b=f.Event("shown.bs.modal",{relatedTarget:a});d?j.$dialog.one("bsTransitionEnd",function(){j.$element.trigger("focus").trigger(b)}).emulateTransitionEnd(h.TRANSITION_DURATION):j.$element.trigger("focus").trigger(b)}))},h.prototype.hide=function(a){a&&a.preventDefault(),a=f.Event("hide.bs.modal"),this.$element.trigger(a),this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),f(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),f.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",f.proxy(this.hideModal,this)).emulateTransitionEnd(h.TRANSITION_DURATION):this.hideModal())},h.prototype.enforceFocus=function(){f(document).off("focusin.bs.modal").on("focusin.bs.modal",f.proxy(function(b){document===b.target||this.$element[0]===b.target||this.$element.has(b.target).length||this.$element.trigger("focus")},this))},h.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",f.proxy(function(b){27==b.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},h.prototype.resize=function(){this.isShown?f(window).on("resize.bs.modal",f.proxy(this.handleUpdate,this)):f(window).off("resize.bs.modal")},h.prototype.hideModal=function(){var b=this;this.$element.hide(),this.backdrop(function(){b.$body.removeClass("modal-open"),b.resetAdjustments(),b.resetScrollbar(),b.$element.trigger("hidden.bs.modal")})},h.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},h.prototype.backdrop=function(a){var l=this,k=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var j=f.support.transition&&k;if(this.$backdrop=f(document.createElement("div")).addClass("modal-backdrop "+k).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",f.proxy(function(b){return this.ignoreBackdropClick?void (this.ignoreBackdropClick=!1):void (b.target===b.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),j&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!a){return}j?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(h.BACKDROP_TRANSITION_DURATION):a()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var c=function(){l.removeBackdrop(),a&&a()};f.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",c).emulateTransitionEnd(h.BACKDROP_TRANSITION_DURATION):c()}else{a&&a()}}},h.prototype.handleUpdate=function(){this.adjustDialog()},h.prototype.adjustDialog=function(){var b=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&b?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!b?this.scrollbarWidth:""})},h.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},h.prototype.checkScrollbar=function(){var d=window.innerWidth;if(!d){var c=document.documentElement.getBoundingClientRect();d=c.right-Math.abs(c.left)}this.bodyIsOverflowing=document.body.clientWidth<d,this.scrollbarWidth=this.measureScrollbar()},h.prototype.setScrollbar=function(){var b=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",b+this.scrollbarWidth)},h.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},h.prototype.measureScrollbar=function(){var d=document.createElement("div");d.className="modal-scrollbar-measure",this.$body.append(d);var c=d.offsetWidth-d.clientWidth;return this.$body[0].removeChild(d),c};var g=f.fn.modal;f.fn.modal=e,f.fn.modal.Constructor=h,f.fn.modal.noConflict=function(){return f.fn.modal=g,this},f(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(l){var k=f(this),j=k.attr("href"),b=f(k.attr("data-target")||j&&j.replace(/.*(?=#[^\s]+$)/,"")),a=b.data("bs.modal")?"toggle":f.extend({remote:!/#/.test(j)&&j},b.data(),k.data());k.is("a")&&l.preventDefault(),b.one("show.bs.modal",function(c){c.isDefaultPrevented()||b.one("hidden.bs.modal",function(){k.is(":visible")&&k.trigger("focus")})}),e.call(b,a,this)})}(jQuery),+function(f){function e(a){return this.each(function(){var j=f(this),c=j.data("bs.tooltip"),b="object"==typeof a&&a;!c&&/destroy|hide/.test(a)||(c||j.data("bs.tooltip",c=new h(this,b)),"string"==typeof a&&c[a]())})}var h=function(d,c){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",d,c)};h.VERSION="3.3.7",h.TRANSITION_DURATION=150,h.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},h.prototype.init=function(a,p,o){if(this.enabled=!0,this.type=a,this.$element=f(p),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&f(f.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0] instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}for(var n=this.options.trigger.split(" "),m=n.length;m--;){var l=n[m];if("click"==l){this.$element.on("click."+this.type,this.options.selector,f.proxy(this.toggle,this))}else{if("manual"!=l){var k="hover"==l?"mouseenter":"focusin",j="hover"==l?"mouseleave":"focusout";this.$element.on(k+"."+this.type,this.options.selector,f.proxy(this.enter,this)),this.$element.on(j+"."+this.type,this.options.selector,f.proxy(this.leave,this))}}}this.options.selector?this._options=f.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},h.prototype.getDefaults=function(){return h.DEFAULTS},h.prototype.getOptions=function(a){return a=f.extend({},this.getDefaults(),this.$element.data(),a),a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),a},h.prototype.getDelegateOptions=function(){var a={},d=this.getDefaults();return this._options&&f.each(this._options,function(b,c){d[b]!=c&&(a[b]=c)}),a},h.prototype.enter=function(a){var d=a instanceof this.constructor?a:f(a.currentTarget).data("bs."+this.type);return d||(d=new this.constructor(a.currentTarget,this.getDelegateOptions()),f(a.currentTarget).data("bs."+this.type,d)),a instanceof f.Event&&(d.inState["focusin"==a.type?"focus":"hover"]=!0),d.tip().hasClass("in")||"in"==d.hoverState?void (d.hoverState="in"):(clearTimeout(d.timeout),d.hoverState="in",d.options.delay&&d.options.delay.show?void (d.timeout=setTimeout(function(){"in"==d.hoverState&&d.show()},d.options.delay.show)):d.show())},h.prototype.isInStateTrue=function(){for(var b in this.inState){if(this.inState[b]){return !0}}return !1},h.prototype.leave=function(a){var d=a instanceof this.constructor?a:f(a.currentTarget).data("bs."+this.type);if(d||(d=new this.constructor(a.currentTarget,this.getDelegateOptions()),f(a.currentTarget).data("bs."+this.type,d)),a instanceof f.Event&&(d.inState["focusout"==a.type?"focus":"hover"]=!1),!d.isInStateTrue()){return clearTimeout(d.timeout),d.hoverState="out",d.options.delay&&d.options.delay.hide?void (d.timeout=setTimeout(function(){"out"==d.hoverState&&d.hide()},d.options.delay.hide)):d.hide()}},h.prototype.show=function(){var D=f.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(D);var C=f.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(D.isDefaultPrevented()||!C){return}var B=this,A=this.tip(),z=this.getUID(this.type);this.setContent(),A.attr("id",z),this.$element.attr("aria-describedby",z),this.options.animation&&A.addClass("fade");var y="function"==typeof this.options.placement?this.options.placement.call(this,A[0],this.$element[0]):this.options.placement,x=/\s?auto?\s?/i,w=x.test(y);w&&(y=y.replace(x,"")||"top"),A.detach().css({top:0,left:0,display:"block"}).addClass(y).data("bs."+this.type,this),this.options.container?A.appendTo(this.options.container):A.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var v=this.getPosition(),u=A[0].offsetWidth,t=A[0].offsetHeight;if(w){var s=y,r=this.getPosition(this.$viewport);y="bottom"==y&&v.bottom+t>r.bottom?"top":"top"==y&&v.top-t<r.top?"bottom":"right"==y&&v.right+u>r.width?"left":"left"==y&&v.left-u<r.left?"right":y,A.removeClass(s).addClass(y)}var c=this.getCalculatedOffset(y,v,u,t);this.applyPlacement(c,y);var a=function(){var b=B.hoverState;B.$element.trigger("shown.bs."+B.type),B.hoverState=null,"out"==b&&B.leave(B)};f.support.transition&&this.$tip.hasClass("fade")?A.one("bsTransitionEnd",a).emulateTransitionEnd(h.TRANSITION_DURATION):a()}},h.prototype.applyPlacement=function(A,z){var y=this.tip(),x=y[0].offsetWidth,w=y[0].offsetHeight,v=parseInt(y.css("margin-top"),10),u=parseInt(y.css("margin-left"),10);isNaN(v)&&(v=0),isNaN(u)&&(u=0),A.top+=v,A.left+=u,f.offset.setOffset(y[0],f.extend({using:function(b){y.css({top:Math.round(b.top),left:Math.round(b.left)})}},A),0),y.addClass("in");var t=y[0].offsetWidth,s=y[0].offsetHeight;"top"==z&&s!=w&&(A.top=A.top+w-s);var r=this.getViewportAdjustedDelta(z,A,t,s);r.left?A.left+=r.left:A.top+=r.top;var p=/top|bottom/.test(z),o=p?2*r.left-x+t:2*r.top-w+s,a=p?"offsetWidth":"offsetHeight";y.offset(A),this.replaceArrow(o,y[0][a],p)},h.prototype.replaceArrow=function(j,d,k){this.arrow().css(k?"left":"top",50*(1-j/d)+"%").css(k?"top":"left","")},h.prototype.setContent=function(){var d=this.tip(),c=this.getTitle();d.find(".tooltip-inner")[this.options.html?"html":"text"](c),d.removeClass("fade in top bottom left right")},h.prototype.hide=function(a){function l(){"in"!=k.hoverState&&j.detach(),k.$element&&k.$element.removeAttr("aria-describedby").trigger("hidden.bs."+k.type),a&&a()}var k=this,j=f(this.$tip),c=f.Event("hide.bs."+this.type);if(this.$element.trigger(c),!c.isDefaultPrevented()){return j.removeClass("in"),f.support.transition&&j.hasClass("fade")?j.one("bsTransitionEnd",l).emulateTransitionEnd(h.TRANSITION_DURATION):l(),this.hoverState=null,this}},h.prototype.fixTitle=function(){var b=this.$element;(b.attr("title")||"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").attr("title","")},h.prototype.hasContent=function(){return this.getTitle()},h.prototype.getPosition=function(a){a=a||this.$element;var p=a[0],o="BODY"==p.tagName,n=p.getBoundingClientRect();null==n.width&&(n=f.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var m=window.SVGElement&&p instanceof window.SVGElement,l=o?{top:0,left:0}:m?null:a.offset(),k={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:a.scrollTop()},j=o?{width:f(window).width(),height:f(window).height()}:null;return f.extend({},n,k,j,l)},h.prototype.getCalculatedOffset=function(k,j,m,l){return"bottom"==k?{top:j.top+j.height,left:j.left+j.width/2-m/2}:"top"==k?{top:j.top-l,left:j.left+j.width/2-m/2}:"left"==k?{top:j.top+j.height/2-l/2,left:j.left-m}:{top:j.top+j.height/2-l/2,left:j.left+j.width}},h.prototype.getViewportAdjustedDelta=function(w,v,u,t){var s={top:0,left:0};if(!this.$viewport){return s}var r=this.options.viewport&&this.options.viewport.padding||0,p=this.getPosition(this.$viewport);if(/right|left/.test(w)){var o=v.top-r-p.scroll,n=v.top+r-p.scroll+t;o<p.top?s.top=p.top-o:n>p.top+p.height&&(s.top=p.top+p.height-n)}else{var m=v.left-r,l=v.left+r+u;m<p.left?s.left=p.left-m:l>p.right&&(s.left=p.left+p.width-l)}return s},h.prototype.getTitle=function(){var j,d=this.$element,k=this.options;return j=d.attr("data-original-title")||("function"==typeof k.title?k.title.call(d[0]):k.title)},h.prototype.getUID=function(b){do{b+=~~(1000000*Math.random())}while(document.getElementById(b));return b},h.prototype.tip=function(){if(!this.$tip&&(this.$tip=f(this.options.template),1!=this.$tip.length)){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}return this.$tip},h.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},h.prototype.enable=function(){this.enabled=!0},h.prototype.disable=function(){this.enabled=!1},h.prototype.toggleEnabled=function(){this.enabled=!this.enabled},h.prototype.toggle=function(a){var d=this;a&&(d=f(a.currentTarget).data("bs."+this.type),d||(d=new this.constructor(a.currentTarget,this.getDelegateOptions()),f(a.currentTarget).data("bs."+this.type,d))),a?(d.inState.click=!d.inState.click,d.isInStateTrue()?d.enter(d):d.leave(d)):d.tip().hasClass("in")?d.leave(d):d.enter(d)},h.prototype.destroy=function(){var b=this;clearTimeout(this.timeout),this.hide(function(){b.$element.off("."+b.type).removeData("bs."+b.type),b.$tip&&b.$tip.detach(),b.$tip=null,b.$arrow=null,b.$viewport=null,b.$element=null})};var g=f.fn.tooltip;f.fn.tooltip=e,f.fn.tooltip.Constructor=h,f.fn.tooltip.noConflict=function(){return f.fn.tooltip=g,this}}(jQuery),+function(f){function e(a){return this.each(function(){var j=f(this),c=j.data("bs.popover"),b="object"==typeof a&&a;!c&&/destroy|hide/.test(a)||(c||j.data("bs.popover",c=new h(this,b)),"string"==typeof a&&c[a]())})}var h=function(d,c){this.init("popover",d,c)};if(!f.fn.tooltip){throw new Error("Popover requires tooltip.js")}h.VERSION="3.3.7",h.DEFAULTS=f.extend({},f.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),h.prototype=f.extend({},f.fn.tooltip.Constructor.prototype),h.prototype.constructor=h,h.prototype.getDefaults=function(){return h.DEFAULTS},h.prototype.setContent=function(){var j=this.tip(),d=this.getTitle(),k=this.getContent();j.find(".popover-title")[this.options.html?"html":"text"](d),j.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof k?"html":"append":"text"](k),j.removeClass("fade top bottom left right in"),j.find(".popover-title").html()||j.find(".popover-title").hide()},h.prototype.hasContent=function(){return this.getTitle()||this.getContent()},h.prototype.getContent=function(){var d=this.$element,c=this.options;return d.attr("data-content")||("function"==typeof c.content?c.content.call(d[0]):c.content)},h.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var g=f.fn.popover;f.fn.popover=e,f.fn.popover.Constructor=h,f.fn.popover.noConflict=function(){return f.fn.popover=g,this}}(jQuery),+function(f){function e(b,a){this.$body=f(document.body),this.$scrollElement=f(f(b).is(document.body)?window:b),this.options=f.extend({},e.DEFAULTS,a),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",f.proxy(this.process,this)),this.refresh(),this.process()}function h(a){return this.each(function(){var j=f(this),c=j.data("bs.scrollspy"),b="object"==typeof a&&a;c||j.data("bs.scrollspy",c=new e(this,b)),"string"==typeof a&&c[a]()})}e.VERSION="3.3.7",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var a=this,k="offset",j=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),f.isWindow(this.$scrollElement[0])||(k="position",j=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var c=f(this),l=c.data("target")||c.attr("href"),d=/^#./.test(l)&&f(l);return d&&d.length&&d.is(":visible")&&[[d[k]().top+j,l]]||null}).sort(function(d,c){return d[0]-c[0]}).each(function(){a.offsets.push(this[0]),a.targets.push(this[1])})},e.prototype.process=function(){var k,j=this.$scrollElement.scrollTop()+this.options.offset,p=this.getScrollHeight(),o=this.options.offset+p-this.$scrollElement.height(),n=this.offsets,m=this.targets,l=this.activeTarget;if(this.scrollHeight!=p&&this.refresh(),j>=o){return l!=(k=m[m.length-1])&&this.activate(k)}if(l&&j<n[0]){return this.activeTarget=null,this.clear()}for(k=n.length;k--;){l!=m[k]&&j>=n[k]&&(void 0===n[k+1]||j<n[k+1])&&this.activate(m[k])}},e.prototype.activate=function(a){this.activeTarget=a,this.clear();var k=this.selector+'[data-target="'+a+'"],'+this.selector+'[href="'+a+'"]',j=f(k).parents("li").addClass("active");j.parent(".dropdown-menu").length&&(j=j.closest("li.dropdown").addClass("active")),j.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){f(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var g=f.fn.scrollspy;f.fn.scrollspy=h,f.fn.scrollspy.Constructor=e,f.fn.scrollspy.noConflict=function(){return f.fn.scrollspy=g,this},f(window).on("load.bs.scrollspy.data-api",function(){f('[data-spy="scroll"]').each(function(){var a=f(this);h.call(a,a.data())})})}(jQuery),+function(g){function f(a){return this.each(function(){var c=g(this),b=c.data("bs.tab");b||c.data("bs.tab",b=new k(this)),"string"==typeof a&&b[a]()})}var k=function(a){this.element=g(a)};k.VERSION="3.3.7",k.TRANSITION_DURATION=150,k.prototype.show=function(){var a=this.element,r=a.closest("ul:not(.dropdown-menu)"),p=a.data("target");if(p||(p=a.attr("href"),p=p&&p.replace(/.*(?=#[^\s]*$)/,"")),!a.parent("li").hasClass("active")){var o=r.find(".active:last a"),n=g.Event("hide.bs.tab",{relatedTarget:a[0]}),m=g.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(n),a.trigger(m),!m.isDefaultPrevented()&&!n.isDefaultPrevented()){var l=g(p);this.activate(a.closest("li"),r),this.activate(l,l.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:a[0]}),a.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},k.prototype.activate=function(a,o,n){function m(){l.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),a.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),c?(a[0].offsetWidth,a.addClass("in")):a.removeClass("fade"),a.parent(".dropdown-menu").length&&a.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var l=o.find("> .active"),c=n&&g.support.transition&&(l.length&&l.hasClass("fade")||!!o.find("> .fade").length);l.length&&c?l.one("bsTransitionEnd",m).emulateTransitionEnd(k.TRANSITION_DURATION):m(),l.removeClass("in")};var j=g.fn.tab;g.fn.tab=f,g.fn.tab.Constructor=k,g.fn.tab.noConflict=function(){return g.fn.tab=j,this};var h=function(a){a.preventDefault(),f.call(g(this),"show")};g(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',h).on("click.bs.tab.data-api",'[data-toggle="pill"]',h)}(jQuery),+function(f){function e(a){return this.each(function(){var j=f(this),c=j.data("bs.affix"),b="object"==typeof a&&a;c||j.data("bs.affix",c=new h(this,b)),"string"==typeof a&&c[a]()})}var h=function(a,c){this.options=f.extend({},h.DEFAULTS,c),this.$target=f(this.options.target).on("scroll.bs.affix.data-api",f.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",f.proxy(this.checkPositionWithEventLoop,this)),this.$element=f(a),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};h.VERSION="3.3.7",h.RESET="affix affix-top affix-bottom",h.DEFAULTS={offset:0,target:window},h.prototype.getState=function(u,t,s,r){var p=this.$target.scrollTop(),o=this.$element.offset(),n=this.$target.height();if(null!=s&&"top"==this.affixed){return p<s&&"top"}if("bottom"==this.affixed){return null!=s?!(p+this.unpin<=o.top)&&"bottom":!(p+n<=u-r)&&"bottom"}var m=null==this.affixed,l=m?p:o.top,k=m?n:t;return null!=s&&p<=s?"top":null!=r&&l+k>=u-r&&"bottom"},h.prototype.getPinnedOffset=function(){if(this.pinnedOffset){return this.pinnedOffset}this.$element.removeClass(h.RESET).addClass("affix");var d=this.$target.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-d},h.prototype.checkPositionWithEventLoop=function(){setTimeout(f.proxy(this.checkPosition,this),1)},h.prototype.checkPosition=function(){if(this.$element.is(":visible")){var a=this.$element.height(),p=this.options.offset,o=p.top,n=p.bottom,m=Math.max(f(document).height(),f(document.body).height());"object"!=typeof p&&(n=o=p),"function"==typeof o&&(o=p.top(this.$element)),"function"==typeof n&&(n=p.bottom(this.$element));var l=this.getState(m,a,o,n);if(this.affixed!=l){null!=this.unpin&&this.$element.css("top","");var k="affix"+(l?"-"+l:""),c=f.Event(k+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented()){return}this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(h.RESET).addClass(k).trigger(k.replace("affix","affixed")+".bs.affix")}"bottom"==l&&this.$element.offset({top:m-a-n})}};var g=f.fn.affix;f.fn.affix=e,f.fn.affix.Constructor=h,f.fn.affix.noConflict=function(){return f.fn.affix=g,this},f(window).on("load",function(){f('[data-spy="affix"]').each(function(){var b=f(this),a=b.data();a.offset=a.offset||{},null!=a.offsetBottom&&(a.offset.bottom=a.offsetBottom),null!=a.offsetTop&&(a.offset.top=a.offsetTop),e.call(b,a)})})}(jQuery);
/*

 handlebars v1.3.0

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/
var Handlebars=(function(){var a=(function(){var n;function o(p){this.string=p}o.prototype.toString=function(){return""+this.string};n=o;return n})();var l=(function(x){var y={};var r=x;var z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var n=/[&<>"'`]/g;var s=/[&<>"'`]/;function A(B){return z[B]||"&amp;"}function w(D,C){for(var B in C){if(Object.prototype.hasOwnProperty.call(C,B)){D[B]=C[B]}}}y.extend=w;var p=Object.prototype.toString;y.toString=p;var o=function(B){return typeof B==="function"};if(o(/x/)){o=function(B){return typeof B==="function"&&p.call(B)==="[object Function]"}}var o;y.isFunction=o;var v=Array.isArray||function(B){return(B&&typeof B==="object")?p.call(B)==="[object Array]":false};y.isArray=v;function u(B){if(B instanceof r){return B.toString()}else{if(!B&&B!==0){return""}}B=""+B;if(!s.test(B)){return B}return B.replace(n,A)}y.escapeExpression=u;function t(B){if(!B&&B!==0){return true}else{if(v(B)&&B.length===0){return true}else{return false}}}y.isEmpty=t;return y})(a);var d=(function(){var o;var p=["description","fileName","lineNumber","message","name","number","stack"];function n(v,u){var s;if(u&&u.firstLine){s=u.firstLine;v+=" - "+s+":"+u.firstColumn}var t=Error.prototype.constructor.call(this,v);for(var r=0;r<p.length;r++){this[p[r]]=t[p[r]]}if(s){this.lineNumber=s;this.column=u.firstColumn}}n.prototype=new Error();o=n;return o})();var j=(function(z,C){var B={};var x=z;var v=C;var E="1.3.0";B.VERSION=E;var o=4;B.COMPILER_REVISION=o;var s={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};B.REVISION_CHANGES=s;var w=x.isArray,r=x.isFunction,p=x.toString,n="[object Object]";function u(G,F){this.helpers=G||{};this.partials=F||{};y(this)}B.HandlebarsEnvironment=u;u.prototype={constructor:u,logger:A,log:t,registerHelper:function(G,H,F){if(p.call(G)===n){if(F||H){throw new v("Arg not supported with multiple helpers")}x.extend(this.helpers,G)}else{if(F){H.not=F}this.helpers[G]=H}},registerPartial:function(F,G){if(p.call(F)===n){x.extend(this.partials,F)}else{this.partials[F]=G}}};function y(F){F.registerHelper("helperMissing",function(G){if(arguments.length===2){return undefined}else{throw new v("Missing helper: '"+G+"'")}});F.registerHelper("blockHelperMissing",function(I,H){var G=H.inverse||function(){},J=H.fn;if(r(I)){I=I.call(this)}if(I===true){return J(this)}else{if(I===false||I==null){return G(this)}else{if(w(I)){if(I.length>0){return F.helpers.each(I,H)}else{return G(this)}}else{return J(I)}}}});F.registerHelper("each",function(G,O){var M=O.fn,I=O.inverse;var K=0,L="",J;if(r(G)){G=G.call(this)}if(O.data){J=D(O.data)}if(G&&typeof G==="object"){if(w(G)){for(var H=G.length;K<H;K++){if(J){J.index=K;J.first=(K===0);J.last=(K===(G.length-1))}L=L+M(G[K],{data:J})}}else{for(var N in G){if(G.hasOwnProperty(N)){if(J){J.key=N;J.index=K;J.first=(K===0)}L=L+M(G[N],{data:J});K++}}}}if(K===0){L=I(this)}return L});F.registerHelper("if",function(H,G){if(r(H)){H=H.call(this)}if((!G.hash.includeZero&&!H)||x.isEmpty(H)){return G.inverse(this)}else{return G.fn(this)}});F.registerHelper("unless",function(H,G){return F.helpers["if"].call(this,H,{fn:G.inverse,inverse:G.fn,hash:G.hash})});F.registerHelper("with",function(H,G){if(r(H)){H=H.call(this)}if(!x.isEmpty(H)){return G.fn(H)}});F.registerHelper("log",function(H,G){var I=G.data&&G.data.level!=null?parseInt(G.data.level,10):1;F.log(I,H)})}var A={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(H,F){if(A.level<=H){var G=A.methodMap[H];if(typeof console!=="undefined"&&console[G]){console[G].call(console,F)}}}};B.logger=A;function t(G,F){A.log(G,F)}B.log=t;var D=function(F){var G={};x.extend(G,F);return G};B.createFrame=D;return B})(l,d);var g=(function(x,B,r){var z={};var w=x;var u=B;var p=r.COMPILER_REVISION;var t=r.REVISION_CHANGES;function o(E){var D=E&&E[0]||1,G=p;if(D!==G){if(D<G){var C=t[G],F=t[D];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+C+") or downgrade your runtime to an older version ("+F+").")}else{throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+E[1]+").")}}}z.checkRevision=o;function y(C,F){if(!F){throw new u("No environment passed to template")}var E=function(H,J,L,M,K,N){var G=F.VM.invokePartial.apply(this,arguments);if(G!=null){return G}if(F.compile){var I={helpers:M,partials:K,data:N};K[J]=F.compile(H,{data:N!==undefined},F);return K[J](L,I)}else{throw new u("The partial "+J+" could not be compiled when running in runtime-only mode")}};var D={escapeExpression:w.escapeExpression,invokePartial:E,programs:[],program:function(H,I,J){var G=this.programs[H];if(J){G=v(H,I,J)}else{if(!G){G=this.programs[H]=v(H,I)}}return G},merge:function(I,H){var G=I||H;if(I&&H&&(I!==H)){G={};w.extend(G,H);w.extend(G,I)}return G},programWithDepth:F.VM.programWithDepth,noop:F.VM.noop,compilerInfo:null};return function(J,H){H=H||{};var K=H.partial?H:F,L,I;if(!H.partial){L=H.helpers;I=H.partials}var G=C.call(D,K,J,L,I,H.data);if(!H.partial){F.VM.checkRevision(D.compilerInfo)}return G}}z.template=y;function s(D,E,F){var C=Array.prototype.slice.call(arguments,3);var G=function(I,H){H=H||{};return E.apply(this,[I,H.data||F].concat(C))};G.program=D;G.depth=C.length;return G}z.programWithDepth=s;function v(C,D,E){var F=function(H,G){G=G||{};return D(H,G.data||E)};F.program=C;F.depth=0;return F}z.program=v;function n(C,E,G,H,F,I){var D={partial:true,helpers:H,partials:F,data:I};if(C===undefined){throw new u("The partial "+E+" could not be found")}else{if(C instanceof Function){return C(G,D)}}}z.invokePartial=n;function A(){return""}z.noop=A;return z})(l,d,j);var f=(function(y,A,p,u,x){var z;var n=y;var r=A;var t=p;var w=u;var s=x;var v=function(){var B=new n.HandlebarsEnvironment();w.extend(B,n);B.SafeString=r;B.Exception=t;B.Utils=w;B.VM=s;B.template=function(C){return s.template(C,B)};return B};var o=v();o.create=v;z=o;return z})(j,a,d,l,g);var k=(function(s){var p;var o=s;function n(t){t=t||{};this.firstLine=t.first_line;this.firstColumn=t.first_column;this.lastColumn=t.last_column;this.lastLine=t.last_line}var r={ProgramNode:function(v,x,u,w){var t,y;if(arguments.length===3){w=u;u=null}else{if(arguments.length===2){w=x;x=null}}n.call(this,w);this.type="program";this.statements=v;this.strip={};if(u){y=u[0];if(y){t={first_line:y.firstLine,last_line:y.lastLine,last_column:y.lastColumn,first_column:y.firstColumn};this.inverse=new r.ProgramNode(u,x,t)}else{this.inverse=new r.ProgramNode(u,x)}this.strip.right=x.left}else{if(x){this.strip.left=x.right}}},MustacheNode:function(y,x,t,v,u){n.call(this,u);this.type="mustache";this.strip=v;if(t!=null&&t.charAt){var w=t.charAt(3)||t.charAt(2);this.escaped=w!=="{"&&w!=="&"}else{this.escaped=!!t}if(y instanceof r.SexprNode){this.sexpr=y}else{this.sexpr=new r.SexprNode(y,x)}this.sexpr.isRoot=true;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(y,v,t){n.call(this,t);this.type="sexpr";this.hash=v;var x=this.id=y[0];var w=this.params=y.slice(1);var u=this.eligibleHelper=x.isSimple;this.isHelper=u&&(w.length||v)},PartialNode:function(t,v,w,u){n.call(this,u);this.type="partial";this.partialName=t;this.context=v;this.strip=w},BlockNode:function(w,u,t,x,v){n.call(this,v);if(w.sexpr.id.original!==x.path.original){throw new o(w.sexpr.id.original+" doesn't match "+x.path.original,this)}this.type="block";this.mustache=w;this.program=u;this.inverse=t;this.strip={left:w.strip.left,right:x.strip.right};(u||t).strip.left=w.strip.right;(t||u).strip.right=x.strip.left;if(t&&!u){this.isInverse=true}},ContentNode:function(t,u){n.call(this,u);this.type="content";this.string=t},HashNode:function(u,t){n.call(this,t);this.type="hash";this.pairs=u},IdNode:function(z,y){n.call(this,y);this.type="ID";var x="",v=[],A=0;for(var w=0,t=z.length;w<t;w++){var u=z[w].part;x+=(z[w].separator||"")+u;if(u===".."||u==="."||u==="this"){if(v.length>0){throw new o("Invalid path: "+x,this)}else{if(u===".."){A++}else{this.isScoped=true}}}else{v.push(u)}}this.original=x;this.parts=v;this.string=v.join(".");this.depth=A;this.isSimple=z.length===1&&!this.isScoped&&A===0;this.stringModeValue=this.string},PartialNameNode:function(t,u){n.call(this,u);this.type="PARTIAL_NAME";this.name=t.original},DataNode:function(u,t){n.call(this,t);this.type="DATA";this.id=u},StringNode:function(t,u){n.call(this,u);this.type="STRING";this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,u){n.call(this,u);this.type="INTEGER";this.original=this.integer=t;this.stringModeValue=Number(t)},BooleanNode:function(t,u){n.call(this,u);this.type="BOOLEAN";this.bool=t;this.stringModeValue=t==="true"},CommentNode:function(u,t){n.call(this,t);this.type="comment";this.comment=u}};p=r;return p})(d);var b=(function(){var o;var n=(function(){var x={trace:function t(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function s(y,B,C,F,E,A,D){var z=A.length-1;switch(E){case 1:return new F.ProgramNode(A[z-1],this._$);break;case 2:return new F.ProgramNode([],this._$);break;case 3:this.$=new F.ProgramNode([],A[z-1],A[z],this._$);break;case 4:this.$=new F.ProgramNode(A[z-2],A[z-1],A[z],this._$);break;case 5:this.$=new F.ProgramNode(A[z-1],A[z],[],this._$);break;case 6:this.$=new F.ProgramNode(A[z],this._$);break;case 7:this.$=new F.ProgramNode([],this._$);break;case 8:this.$=new F.ProgramNode([],this._$);break;case 9:this.$=[A[z]];break;case 10:A[z-1].push(A[z]);this.$=A[z-1];break;case 11:this.$=new F.BlockNode(A[z-2],A[z-1].inverse,A[z-1],A[z],this._$);break;case 12:this.$=new F.BlockNode(A[z-2],A[z-1],A[z-1].inverse,A[z],this._$);break;case 13:this.$=A[z];break;case 14:this.$=A[z];break;case 15:this.$=new F.ContentNode(A[z],this._$);break;case 16:this.$=new F.CommentNode(A[z],this._$);break;case 17:this.$=new F.MustacheNode(A[z-1],null,A[z-2],p(A[z-2],A[z]),this._$);break;case 18:this.$=new F.MustacheNode(A[z-1],null,A[z-2],p(A[z-2],A[z]),this._$);break;case 19:this.$={path:A[z-1],strip:p(A[z-2],A[z])};break;case 20:this.$=new F.MustacheNode(A[z-1],null,A[z-2],p(A[z-2],A[z]),this._$);break;case 21:this.$=new F.MustacheNode(A[z-1],null,A[z-2],p(A[z-2],A[z]),this._$);break;case 22:this.$=new F.PartialNode(A[z-2],A[z-1],p(A[z-3],A[z]),this._$);break;case 23:this.$=p(A[z-1],A[z]);break;case 24:this.$=new F.SexprNode([A[z-2]].concat(A[z-1]),A[z],this._$);break;case 25:this.$=new F.SexprNode([A[z]],null,this._$);break;case 26:this.$=A[z];break;case 27:this.$=new F.StringNode(A[z],this._$);break;case 28:this.$=new F.IntegerNode(A[z],this._$);break;case 29:this.$=new F.BooleanNode(A[z],this._$);break;case 30:this.$=A[z];break;case 31:A[z-1].isHelper=true;this.$=A[z-1];break;case 32:this.$=new F.HashNode(A[z],this._$);break;case 33:this.$=[A[z-2],A[z]];break;case 34:this.$=new F.PartialNameNode(A[z],this._$);break;case 35:this.$=new F.PartialNameNode(new F.StringNode(A[z],this._$),this._$);break;case 36:this.$=new F.PartialNameNode(new F.IntegerNode(A[z],this._$));break;case 37:this.$=new F.DataNode(A[z],this._$);break;case 38:this.$=new F.IdNode(A[z],this._$);break;case 39:A[z-2].push({part:A[z],separator:A[z-1]});this.$=A[z-2];break;case 40:this.$=[{part:A[z]}];break;case 43:this.$=[];break;case 44:A[z-1].push(A[z]);break;case 47:this.$=[A[z]];break;case 48:A[z-1].push(A[z]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function u(z,y){throw new Error(z)},parse:function w(H){var O=this,E=[0],X=[null],J=[],Y=this.table,z="",I=0,V=0,B=0,G=2,L=1;this.lexer.setInput(H);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var A=this.lexer.yylloc;J.push(A);var C=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function N(aa){E.length=E.length-2*aa;X.length=X.length-aa;J.length=J.length-aa}function M(){var aa;aa=O.lexer.lex()||1;if(typeof aa!=="number"){aa=O.symbols_[aa]||aa}return aa}var U,Q,D,T,Z,K,S={},P,W,y,F;while(true){D=E[E.length-1];if(this.defaultActions[D]){T=this.defaultActions[D]}else{if(U===null||typeof U=="undefined"){U=M()}T=Y[D]&&Y[D][U]}if(typeof T==="undefined"||!T.length||!T[0]){var R="";if(!B){F=[];for(P in Y[D]){if(this.terminals_[P]&&P>2){F.push("'"+this.terminals_[P]+"'")}}if(this.lexer.showPosition){R="Parse error on line "+(I+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+F.join(", ")+", got '"+(this.terminals_[U]||U)+"'"}else{R="Parse error on line "+(I+1)+": Unexpected "+(U==1?"end of input":"'"+(this.terminals_[U]||U)+"'")}this.parseError(R,{text:this.lexer.match,token:this.terminals_[U]||U,line:this.lexer.yylineno,loc:A,expected:F})}}if(T[0] instanceof Array&&T.length>1){throw new Error("Parse Error: multiple actions possible at state: "+D+", token: "+U)}switch(T[0]){case 1:E.push(U);X.push(this.lexer.yytext);J.push(this.lexer.yylloc);E.push(T[1]);U=null;if(!Q){V=this.lexer.yyleng;z=this.lexer.yytext;I=this.lexer.yylineno;A=this.lexer.yylloc;if(B>0){B--}}else{U=Q;Q=null}break;case 2:W=this.productions_[T[1]][1];S.$=X[X.length-W];S._$={first_line:J[J.length-(W||1)].first_line,last_line:J[J.length-1].last_line,first_column:J[J.length-(W||1)].first_column,last_column:J[J.length-1].last_column};if(C){S._$.range=[J[J.length-(W||1)].range[0],J[J.length-1].range[1]]}K=this.performAction.call(S,z,V,I,this.yy,T[1],X,J);if(typeof K!=="undefined"){return K}if(W){E=E.slice(0,-1*W*2);X=X.slice(0,-1*W);J=J.slice(0,-1*W)}E.push(this.productions_[T[1]][0]);X.push(S.$);J.push(S._$);y=Y[E[E.length-2]][E[E.length-1]];E.push(y);break;case 3:return true}}return true}};function p(y,z){return{left:y.charAt(2)==="~",right:z.charAt(0)==="~"||z.charAt(1)==="~"}}var r=(function(){var B=({EOF:1,parseError:function D(G,F){if(this.yy.parser){this.yy.parser.parseError(G,F)}else{throw new Error(G)}},setInput:function(F){this._input=F;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var G=this._input[0];this.yytext+=G;this.yyleng++;this.offset++;this.match+=G;this.matched+=G;var F=G.match(/(?:\r\n?|\n).*/g);if(F){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return G},unput:function(H){var F=H.length;var G=H.split(/(?:\r\n?|\n)/g);this._input=H+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-F-1);this.offset-=F;var J=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(G.length-1){this.yylineno-=G.length-1}var I=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:G?(G.length===J.length?this.yylloc.first_column:0)+J[J.length-G.length].length-G[0].length:this.yylloc.first_column-F};if(this.options.ranges){this.yylloc.range=[I[0],I[0]+this.yyleng-F]}return this},more:function(){this._more=true;return this},less:function(F){this.unput(this.match.slice(F))},pastInput:function(){var F=this.matched.substr(0,this.matched.length-this.match.length);return(F.length>20?"...":"")+F.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var F=this.match;if(F.length<20){F+=this._input.substr(0,20-F.length)}return(F.substr(0,20)+(F.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var F=this.pastInput();var G=new Array(F.length+1).join("-");return F+this.upcomingInput()+"\n"+G+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var L,J,G,I,H,F;if(!this._more){this.yytext="";this.match=""}var M=this._currentRules();for(var K=0;K<M.length;K++){G=this._input.match(this.rules[M[K]]);if(G&&(!J||G[0].length>J[0].length)){J=G;I=K;if(!this.options.flex){break}}}if(J){F=J[0].match(/(?:\r\n?|\n).*/g);if(F){this.yylineno+=F.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:F?F[F.length-1].length-F[F.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+J[0].length};this.yytext+=J[0];this.match+=J[0];this.matches=J;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(J[0].length);this.matched+=J[0];L=this.performAction.call(this,this.yy,this,M[I],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(L){return L}else{return}}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function y(){var F=this.next();if(typeof F!=="undefined"){return F}else{return this.lex()}},begin:function z(F){this.conditionStack.push(F)},popState:function E(){return this.conditionStack.pop()},_currentRules:function C(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function z(F){this.begin(F)}});B.options={};B.performAction=function A(K,G,J,F){function H(M,L){return G.yytext=G.yytext.substr(M,G.yyleng-L)}var I=F;switch(J){case 0:if(G.yytext.slice(-2)==="\\\\"){H(0,1);this.begin("mu")}else{if(G.yytext.slice(-1)==="\\"){H(0,1);this.begin("emu")}else{this.begin("mu")}}if(G.yytext){return 14}break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:H(0,4);this.popState();return 15;break;case 4:return 35;break;case 5:return 36;break;case 6:return 25;break;case 7:return 16;break;case 8:return 20;break;case 9:return 19;break;case 10:return 19;break;case 11:return 23;break;case 12:return 22;break;case 13:this.popState();this.begin("com");break;case 14:H(3,5);this.popState();return 15;break;case 15:return 22;break;case 16:return 41;break;case 17:return 40;break;case 18:return 40;break;case 19:return 44;break;case 20:break;case 21:this.popState();return 24;break;case 22:this.popState();return 18;break;case 23:G.yytext=H(1,2).replace(/\\"/g,'"');return 32;break;case 24:G.yytext=H(1,2).replace(/\\'/g,"'");return 32;break;case 25:return 42;break;case 26:return 34;break;case 27:return 34;break;case 28:return 33;break;case 29:return 40;break;case 30:G.yytext=H(1,2);return 40;break;case 31:return"INVALID";break;case 32:return 5;break}};B.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];B.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return B})();x.lexer=r;function v(){this.yy={}}v.prototype=x;x.Parser=v;return new v})();o=n;return o})();var m=(function(s,n){var o={};var t=s;var p=n;o.parser=t;function r(u){if(u.constructor===p.ProgramNode){return u}t.yy=p;return t.parse(u)}o.parse=r;return o})(b,k);var e=(function(t){var s={};var n=t;function p(){}s.Compiler=p;p.prototype={compiler:p,disassemble:function(){var z=this.opcodes,y,w=[],B,A;for(var x=0,u=z.length;x<u;x++){y=z[x];if(y.opcode==="DECLARE"){w.push("DECLARE "+y.name+"="+y.value)}else{B=[];for(var v=0;v<y.args.length;v++){A=y.args[v];if(typeof A==="string"){A='"'+A.replace("\n","\\n")+'"'}B.push(A)}w.push(y.opcode+" "+B.join(" "))}}return w.join("\n")},equals:function(v){var u=this.opcodes.length;if(v.opcodes.length!==u){return false}for(var y=0;y<u;y++){var z=this.opcodes[y],w=v.opcodes[y];if(z.opcode!==w.opcode||z.args.length!==w.args.length){return false}for(var x=0;x<z.args.length;x++){if(z.args[x]!==w.args[x]){return false}}}u=this.children.length;if(v.children.length!==u){return false}for(y=0;y<u;y++){if(!this.children[y].equals(v.children[y])){return false}}return true},guid:0,compile:function(u,w){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=w;var x=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(x){for(var v in x){this.options.knownHelpers[v]=x[v]}}return this.accept(u)},accept:function(w){var v=w.strip||{},u;if(v.left){this.opcode("strip")}u=this[w.type](w);if(v.right){this.opcode("strip")}return u},program:function(w){var v=w.statements;for(var x=0,u=v.length;x<u;x++){this.accept(v[x])}this.isSimple=u===1;this.depths.list=this.depths.list.sort(function(z,y){return z-y});return this},compileProgram:function(w){var u=new this.compiler().compile(w,this.options);var x=this.guid++,z;this.usePartial=this.usePartial||u.usePartial;this.children[x]=u;for(var y=0,v=u.depths.list.length;y<v;y++){z=u.depths.list[y];if(z<2){continue}else{this.addDepth(z-1)}}return x},block:function(z){var y=z.mustache,v=z.program,u=z.inverse;if(v){v=this.compileProgram(v)}if(u){u=this.compileProgram(u)}var x=y.sexpr;var w=this.classifySexpr(x);if(w==="helper"){this.helperSexpr(x,v,u)}else{if(w==="simple"){this.simpleSexpr(x);this.opcode("pushProgram",v);this.opcode("pushProgram",u);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousSexpr(x,v,u);this.opcode("pushProgram",v);this.opcode("pushProgram",u);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}}this.opcode("append")},hash:function(x){var w=x.pairs,z,y;this.opcode("pushHash");for(var v=0,u=w.length;v<u;v++){z=w[v];y=z[1];if(this.options.stringParams){if(y.depth){this.addDepth(y.depth)}this.opcode("getContext",y.depth||0);this.opcode("pushStringParam",y.stringModeValue,y.type);if(y.type==="sexpr"){this.sexpr(y)}}else{this.accept(y)}this.opcode("assignToHash",z[0])}this.opcode("popHash")},partial:function(u){var v=u.partialName;this.usePartial=true;if(u.context){this.ID(u.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",v.name);this.opcode("append")},content:function(u){this.opcode("appendContent",u.string)},mustache:function(u){this.sexpr(u.sexpr);if(u.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousSexpr:function(y,w,v){var z=y.id,x=z.parts[0],u=w!=null||v!=null;this.opcode("getContext",z.depth);this.opcode("pushProgram",w);this.opcode("pushProgram",v);this.opcode("invokeAmbiguous",x,u)},simpleSexpr:function(u){var v=u.id;if(v.type==="DATA"){this.DATA(v)}else{if(v.parts.length){this.ID(v)}else{this.addDepth(v.depth);this.opcode("getContext",v.depth);this.opcode("pushContext")}}this.opcode("resolvePossibleLambda")},helperSexpr:function(x,v,u){var y=this.setupFullMustacheParams(x,v,u),w=x.id.parts[0];if(this.options.knownHelpers[w]){this.opcode("invokeKnownHelper",y.length,w)}else{if(this.options.knownHelpersOnly){throw new n("You specified knownHelpersOnly, but used the unknown helper "+w,x)}else{this.opcode("invokeHelper",y.length,w,x.isRoot)}}},sexpr:function(v){var u=this.classifySexpr(v);if(u==="simple"){this.simpleSexpr(v)}else{if(u==="helper"){this.helperSexpr(v)}else{this.ambiguousSexpr(v)}}},ID:function(x){this.addDepth(x.depth);this.opcode("getContext",x.depth);var v=x.parts[0];if(!v){this.opcode("pushContext")}else{this.opcode("lookupOnContext",x.parts[0])}for(var w=1,u=x.parts.length;w<u;w++){this.opcode("lookup",x.parts[w])}},DATA:function(w){this.options.data=true;if(w.id.isScoped||w.id.depth){throw new n("Scoped data references are not supported: "+w.original,w)}this.opcode("lookupData");var x=w.id.parts;for(var v=0,u=x.length;v<u;v++){this.opcode("lookup",x[v])}},STRING:function(u){this.opcode("pushString",u.string)},INTEGER:function(u){this.opcode("pushLiteral",u.integer)},BOOLEAN:function(u){this.opcode("pushLiteral",u.bool)},comment:function(){},opcode:function(u){this.opcodes.push({opcode:u,args:[].slice.call(arguments,1)})},declare:function(u,v){this.opcodes.push({opcode:"DECLARE",name:u,value:v})},addDepth:function(u){if(u===0){return}if(!this.depths[u]){this.depths[u]=true;this.depths.list.push(u)}},classifySexpr:function(x){var w=x.isHelper;var y=x.eligibleHelper;var v=this.options;if(y&&!w){var u=x.id.parts[0];if(v.knownHelpers[u]){w=true}else{if(v.knownHelpersOnly){y=false}}}if(w){return"helper"}else{if(y){return"ambiguous"}else{return"simple"}}},pushParams:function(w){var u=w.length,v;while(u--){v=w[u];if(this.options.stringParams){if(v.depth){this.addDepth(v.depth)}this.opcode("getContext",v.depth||0);this.opcode("pushStringParam",v.stringModeValue,v.type);if(v.type==="sexpr"){this.sexpr(v)}}else{this[v.type](v)}}},setupFullMustacheParams:function(w,v,u){var x=w.params;this.pushParams(x);this.opcode("pushProgram",v);this.opcode("pushProgram",u);if(w.hash){this.hash(w.hash)}else{this.opcode("emptyHash")}return x}};function o(w,x,y){if(w==null||(typeof w!=="string"&&w.constructor!==y.AST.ProgramNode)){throw new n("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+w)}x=x||{};if(!("data" in x)){x.data=true}var v=y.parse(w);var u=new y.Compiler().compile(v,x);return new y.JavaScriptCompiler().compile(u,x)}s.precompile=o;function r(u,v,w){if(u==null||(typeof u!=="string"&&u.constructor!==w.AST.ProgramNode)){throw new n("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+u)}v=v||{};if(!("data" in v)){v.data=true}var y;function x(){var B=w.parse(u);var A=new w.Compiler().compile(B,v);var z=new w.JavaScriptCompiler().compile(A,v,undefined,true);return w.template(z)}return function(A,z){if(!y){y=x()}return y.call(this,A,z)}}s.compile=r;return s})(d);var h=(function(w,z){var y;var n=w.COMPILER_REVISION;var s=w.REVISION_CHANGES;var t=w.log;var u=z;function p(B){this.value=B}function A(){}A.prototype={nameLookup:function(E,C){var D,B;if(E.indexOf("depth")===0){D=true}if(/^[0-9]+$/.test(C)){B=E+"["+C+"]"}else{if(A.isValidJavaScriptVariableName(C)){B=E+"."+C}else{B=E+"['"+C+"']"}}if(D){return"("+E+" && "+B+")"}else{return B}},compilerInfo:function(){var C=n,B=s[C];return"this.compilerInfo = ["+C+",'"+B+"'];\n"},appendToBuffer:function(B){if(this.environment.isSimple){return"return "+B+";"}else{return{appendToBuffer:true,content:B,toString:function(){return"buffer += "+B+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(B,D,F,E){this.environment=B;this.options=D||{};t("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!F;this.context=F||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(B,D);var H=B.opcodes,G;this.i=0;for(var C=H.length;this.i<C;this.i++){G=H[this.i];if(G.opcode==="DECLARE"){this[G.name]=G.value}else{this[G.opcode].apply(this,G.args)}if(G.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new u("Compile completed with content left on stack")}return this.createFunctionContext(E)},preamble:function(){var B=[];if(!this.isChild){var C=this.namespace;var D="helpers = this.merge(helpers, "+C+".helpers);";if(this.environment.usePartial){D=D+" partials = this.merge(partials, "+C+".partials);"}if(this.options.data){D=D+" data = data || {};"}B.push(D)}else{B.push("")}if(!this.environment.isSimple){B.push(", buffer = "+this.initializeBuffer())}else{B.push("")}this.lastContext=0;this.source=B},createFunctionContext:function(F){var H=this.stackVars.concat(this.registers.list);if(H.length>0){this.source[1]=this.source[1]+", "+H.join(", ")}if(!this.isChild){for(var E in this.context.aliases){if(this.context.aliases.hasOwnProperty(E)){this.source[1]=this.source[1]+", "+E+"="+this.context.aliases[E]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var I=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var D=0,B=this.environment.depths.list.length;D<B;D++){I.push("depth"+this.environment.depths.list[D])}var G=this.mergeSource();if(!this.isChild){G=this.compilerInfo()+G}if(F){I.push(G);return Function.apply(this,I)}else{var C="function "+(this.name||"")+"("+I.join(",")+") {\n  "+G+"}";t("debug",C+"\n\n");return C}},mergeSource:function(){var F="",D;for(var E=0,B=this.source.length;E<B;E++){var C=this.source[E];if(C.appendToBuffer){if(D){D=D+"\n    + "+C.content}else{D=C.content}}else{if(D){F+="buffer += "+D+";\n  ";D=undefined}F+=C+"\n  "}}return F},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var B=["depth0"];this.setupParams(0,B);this.replaceStack(function(C){B.splice(1,0,C);return"blockHelperMissing.call("+B.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var C=["depth0"];this.setupParams(0,C);var B=this.topStack();C.splice(1,0,B);this.pushSource("if (!"+this.lastHelper+") { "+B+" = blockHelperMissing.call("+C.join(", ")+"); }")},appendContent:function(B){if(this.pendingContent){B=this.pendingContent+B}if(this.stripNext){B=B.replace(/^\s+/,"")}this.pendingContent=B},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var B=this.popStack();this.pushSource("if("+B+" || "+B+" === 0) { "+this.appendToBuffer(B)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(B){if(this.lastContext!==B){this.lastContext=B}},lookupOnContext:function(B){this.push(this.nameLookup("depth"+this.lastContext,B,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(B){return"typeof "+B+" === functionType ? "+B+".apply(depth0) : "+B})},lookup:function(B){this.replaceStack(function(C){return C+" == null || "+C+" === false ? "+C+" : "+this.nameLookup(C,B,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(B,C){this.pushStackLiteral("depth"+this.lastContext);this.pushString(C);if(C!=="sexpr"){if(typeof B==="string"){this.pushString(B)}else{this.pushStackLiteral(B)}}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[]}},popHash:function(){var B=this.hash;this.hash=this.hashes.pop();if(this.options.stringParams){this.push("{"+B.contexts.join(",")+"}");this.push("{"+B.types.join(",")+"}")}this.push("{\n    "+B.values.join(",\n    ")+"\n  }")},pushString:function(B){this.pushStackLiteral(this.quotedString(B))},push:function(B){this.inlineStack.push(B);return B},pushLiteral:function(B){this.pushStackLiteral(B)},pushProgram:function(B){if(B!=null){this.pushStackLiteral(this.programExpression(B))}else{this.pushStackLiteral(null)}},invokeHelper:function(F,C,B){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var D=this.lastHelper=this.setupHelper(F,C,true);var G=this.nameLookup("depth"+this.lastContext,C,"context");var E="helper = "+D.name+" || "+G;if(D.paramsInit){E+=","+D.paramsInit}this.push("("+E+",helper ? helper.call("+D.callParams+") : helperMissing.call("+D.helperMissingParams+"))");if(!B){this.flushInline()}},invokeKnownHelper:function(D,B){var C=this.setupHelper(D,B);this.push(C.name+".call("+C.callParams+")")},invokeAmbiguous:function(B,F){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var C=this.setupHelper(0,B,F);var D=this.lastHelper=this.nameLookup("helpers",B,"helper");var G=this.nameLookup("depth"+this.lastContext,B,"context");var E=this.nextStack();if(C.paramsInit){this.pushSource(C.paramsInit)}this.pushSource("if (helper = "+D+") { "+E+" = helper.call("+C.callParams+"); }");this.pushSource("else { helper = "+G+"; "+E+" = typeof helper === functionType ? helper.call("+C.callParams+") : helper; }")},invokePartial:function(B){var C=[this.nameLookup("partials",B,"partial"),"'"+B+"'",this.popStack(),"helpers","partials"];if(this.options.data){C.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+C.join(", ")+")")},assignToHash:function(C){var E=this.popStack(),B,D;if(this.options.stringParams){D=this.popStack();B=this.popStack()}var F=this.hash;if(B){F.contexts.push("'"+C+"': "+B)}if(D){F.types.push("'"+C+"': "+D)}F.values.push("'"+C+"': ("+E+")")},compiler:A,compileChildren:function(B,E){var G=B.children,I,H;for(var F=0,C=G.length;F<C;F++){I=G[F];H=new this.compiler();var D=this.matchExistingProgram(I);if(D==null){this.context.programs.push("");D=this.context.programs.length;I.index=D;I.name="program"+D;this.context.programs[D]=H.compile(I,E,this.context);this.context.environments[D]=I}else{I.index=D;I.name="program"+D}}},matchExistingProgram:function(E){for(var D=0,C=this.context.environments.length;D<C;D++){var B=this.context.environments[D];if(B&&B.equals(E)){return D}}},programExpression:function(C){this.context.aliases.self="this";if(C==null){return"self.noop"}var H=this.environment.children[C],G=H.depths.list,F;var E=[H.index,H.name,"data"];for(var D=0,B=G.length;D<B;D++){F=G[D];if(F===1){E.push("depth0")}else{E.push("depth"+(F-1))}}return(G.length===0?"self.program(":"self.programWithDepth(")+E.join(", ")+")"},register:function(B,C){this.useRegister(B);this.pushSource(B+" = "+C+";")},useRegister:function(B){if(!this.registers[B]){this.registers[B]=true;this.registers.list.push(B)}},pushStackLiteral:function(B){return this.push(new p(B))},pushSource:function(B){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(B){this.source.push(B)}},pushStack:function(C){this.flushInline();var B=this.incrStack();if(C){this.pushSource(B+" = "+C+";")}this.compileStack.push(B);return B},replaceStack:function(I){var D="",E=this.isInline(),H,C,F;if(E){var G=this.popStack(true);if(G instanceof p){H=G.value;F=true}else{C=!this.stackSlot;var B=!C?this.topStackName():this.incrStack();D="("+this.push(B)+" = "+G+"),";H=this.topStack()}}else{H=this.topStack()}var J=I.call(this,H);if(E){if(!F){this.popStack()}if(C){this.stackSlot--}this.push("("+D+J+")")}else{if(!/^stack/.test(H)){H=this.nextStack()}this.pushSource(H+" = ("+D+J+");")}return H},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var D=this.inlineStack;if(D.length){this.inlineStack=[];for(var C=0,B=D.length;C<B;C++){var E=D[C];if(E instanceof p){this.compileStack.push(E)}else{this.pushStack(E)}}}},isInline:function(){return this.inlineStack.length},popStack:function(B){var D=this.isInline(),C=(D?this.inlineStack:this.compileStack).pop();if(!B&&(C instanceof p)){return C.value}else{if(!D){if(!this.stackSlot){throw new u("Invalid stack pop")}this.stackSlot--}return C}},topStack:function(C){var B=(this.isInline()?this.inlineStack:this.compileStack),D=B[B.length-1];if(!C&&(D instanceof p)){return D.value}else{return D}},quotedString:function(B){return'"'+B.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(F,D,C){var E=[],G=this.setupParams(F,E,C);var B=this.nameLookup("helpers",D,"helper");return{params:E,paramsInit:G,name:B,callParams:["depth0"].concat(E).join(", "),helperMissingParams:C&&["depth0",this.quotedString(D)].concat(E).join(", ")}},setupOptions:function(D,C){var J=[],G=[],I=[],B,E,H;J.push("hash:"+this.popStack());if(this.options.stringParams){J.push("hashTypes:"+this.popStack());J.push("hashContexts:"+this.popStack())}E=this.popStack();H=this.popStack();if(H||E){if(!H){this.context.aliases.self="this";H="self.noop"}if(!E){this.context.aliases.self="this";E="self.noop"}J.push("inverse:"+E);J.push("fn:"+H)}for(var F=0;F<D;F++){B=this.popStack();C.push(B);if(this.options.stringParams){I.push(this.popStack());G.push(this.popStack())}}if(this.options.stringParams){J.push("contexts:["+G.join(",")+"]");J.push("types:["+I.join(",")+"]")}if(this.options.data){J.push("data:data")}return J},setupParams:function(E,D,C){var B="{"+this.setupOptions(E,D).join(",")+"}";if(C){this.useRegister("options");D.push("options");return"options="+B}else{D.push(B);return""}}};var o=("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield").split(" ");var x=A.RESERVED_WORDS={};for(var v=0,r=o.length;v<r;v++){x[o[v]]=true}A.isValidJavaScriptVariableName=function(B){if(!A.RESERVED_WORDS[B]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(B)){return true}return false};y=A;return y})(j,d);var c=(function(x,C,o,t,w){var z;var n=x;var v=C;var s=o.parser;var r=o.parse;var y=t.Compiler;var B=t.compile;var p=t.precompile;var D=w;var A=n.create;var u=function(){var E=A();E.compile=function(F,G){return B(F,G,E)};E.precompile=function(F,G){return p(F,G,E)};E.AST=v;E.Compiler=y;E.JavaScriptCompiler=D;E.Parser=s;E.parse=r;return E};n=u();n.create=u;z=n;return z})(f,k,m,e,h);return c})();Handlebars.registerHelper("compare",function(b,e,d){if(arguments.length<3){throw new Error("Handlerbars Helper 'compare' needs 2 parameters")}operator=d.hash.operator||"==";var c={"==":function(f,g){return f==g},"===":function(f,g){return f===g},"!=":function(f,g){return f!=g},"<":function(f,g){return f<g},">":function(f,g){return f>g},"<=":function(f,g){return f<=g},">=":function(f,g){return f>=g},"typeof":function(f,g){return typeof f==g}};if(!c[operator]){throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+operator)}var a=c[operator](b,e);if(a){return d.fn(this)}else{return d.inverse(this)}});Handlebars.registerHelper("escape",function(a){return a.replace(/\\/g,"")});!function(a){jQuery.fn.multiselect.Constructor.prototype.selectAll=(function(){var b=jQuery.fn.multiselect.Constructor.prototype.selectAll;return function(){var c=Array.prototype.slice.call(arguments);c[0]=(this.options.enableCollapsibleOptGroups&&this.options.multiple)?false:c[0];b.apply(this,c)}}());jQuery.fn.multiselect.Constructor.prototype.deselectAll=(function(){var b=jQuery.fn.multiselect.Constructor.prototype.deselectAll;return function(){var c=Array.prototype.slice.call(arguments);c[0]=(this.options.enableCollapsibleOptGroups&&this.options.multiple)?false:c[0];b.apply(this,c)}}());jQuery.fn.multiselect.Constructor.prototype.createOptgroup=(function(){var b=jQuery.fn.multiselect.Constructor.prototype.createOptgroup;return function(){var d=Array.prototype.slice.call(arguments);var e=d[0];if(this.options.enableCollapsibleOptGroups&&this.options.multiple){var g=a(e).attr("label");var c=a(e).attr("value");var f=a('<li class="multiselect-item multiselect-group"><a href="javascript:void(0);"><input type="checkbox" value="'+c+'"/><b> '+g+'<b class="caret"></b></b></a></li>');if(this.options.enableClickableOptGroups){f.addClass("multiselect-group-clickable")}this.$ul.append(f);if(a(e).is(":disabled")){f.addClass("disabled")}a("option",e).each(a.proxy(function(j,h){this.createOptionValue(h)},this))}else{b.apply(this,arguments)}}}());jQuery.fn.multiselect.Constructor.prototype.buildDropdownOptions=(function(){var b=jQuery.fn.multiselect.Constructor.prototype.buildDropdownOptions;return function(){b.apply(this,arguments);if(this.options.enableCollapsibleOptGroups&&this.options.multiple){a("li.multiselect-group input",this.$ul).off();a("li.multiselect-group",this.$ul).siblings().not("li.multiselect-group, li.multiselect-all",this.$ul).each(function(){$(this).toggleClass("hidden",true)});a("li.multiselect-group",this.$ul).on("click",a.proxy(function(c){c.stopPropagation()},this));a("li.multiselect-group > a > b",this.$ul).on("click",a.proxy(function(d){d.stopPropagation();var f=a(d.target).closest("li");var e=f.nextUntil("li.multiselect-group");var c=true;e.each(function(){c=c&&a(this).hasClass("hidden")});e.toggleClass("hidden",!c)},this));a("li.multiselect-group > a > input",this.$ul).on("change",a.proxy(function(d){d.stopPropagation();var g=a(d.target).closest("li");var f=g.nextUntil("li.multiselect-group");var c=true;var e=f.find("input");e.each(function(){c=c&&a(this).prop("checked")});e.prop("checked",!c).trigger("change")},this));a("li.multiselect-all",this.$ul).css("background","#f3f3f3").css("border-bottom","1px solid #eaeaea");a("li.multiselect-group > a, li.multiselect-all > a > label.checkbox",this.$ul).css("padding","3px 20px 3px 35px");a("li.multiselect-group > a > input",this.$ul).css("margin","4px 0px 5px -20px")}}}())}(window.jQuery);var q=null;window.PR_SHOULD_USE_CONTINUATION=!0;(function(){function d(F){function w(J){var K=J.charCodeAt(0);if(K!==92){return K}var I=J.charAt(1);return(K=k[I])?K:"0"<=I&&I<="7"?parseInt(J.substring(1),8):I==="u"||I==="x"?parseInt(J.substring(2),16):J.charCodeAt(1)}function C(I){if(I<32){return(I<16?"\\x0":"\\x")+I.toString(16)}I=String.fromCharCode(I);if(I==="\\"||I==="-"||I==="["||I==="]"){I="\\"+I}return I}function A(J){for(var M=J.substring(1,J.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),J=[],I=[],O=M[0]==="^",Q=O?1:0,L=M.length;Q<L;++Q){var K=M[Q];if(/\\[bdsw]/i.test(K)){J.push(K)}else{var K=w(K),N;Q+2<L&&"-"===M[Q+1]?(N=w(M[Q+2]),Q+=2):N=K;I.push([K,N]);N<65||K>122||(N<65||K>90||I.push([Math.max(65,K)|32,Math.min(N,90)|32]),N<97||K>122||I.push([Math.max(97,K)&-33,Math.min(N,122)&-33]))}}I.sort(function(R,S){return R[0]-S[0]||S[1]-R[1]});M=[];K=[NaN,NaN];for(Q=0;Q<I.length;++Q){L=I[Q],L[0]<=K[1]+1?K[1]=Math.max(K[1],L[1]):M.push(K=L)}I=["["];O&&I.push("^");I.push.apply(I,J);for(Q=0;Q<M.length;++Q){L=M[Q],I.push(C(L[0])),L[1]>L[0]&&(L[1]+1>L[0]&&I.push("-"),I.push(C(L[1])))}I.push("]");return I.join("")}function E(J){for(var M=J.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),I=M.length,N=[],O=0,L=0;O<I;++O){var K=M[O];K==="("?++L:"\\"===K.charAt(0)&&(K=+K.substring(1))&&K<=L&&(N[K]=-1)}for(O=1;O<N.length;++O){-1===N[O]&&(N[O]=++G)}for(L=O=0;O<I;++O){K=M[O],K==="("?(++L,N[L]===void 0&&(M[O]="(?:")):"\\"===K.charAt(0)&&(K=+K.substring(1))&&K<=L&&(M[O]="\\"+N[L])}for(L=O=0;O<I;++O){"^"===M[O]&&"^"!==M[O+1]&&(M[O]="")}if(J.ignoreCase&&H){for(O=0;O<I;++O){K=M[O],J=K.charAt(0),K.length>=2&&J==="["?M[O]=A(K):J!=="\\"&&(M[O]=K.replace(/[A-Za-z]/g,function(Q){Q=Q.charCodeAt(0);return"["+String.fromCharCode(Q&-33,Q|32)+"]"}))}}return M.join("")}for(var G=0,H=!1,x=!1,u=0,D=F.length;u<D;++u){var B=F[u];if(B.ignoreCase){x=!0}else{if(/[a-z]/i.test(B.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){H=!0;x=!1;break}}}for(var k={b:8,t:9,n:10,v:11,f:12,r:13},v=[],u=0,D=F.length;u<D;++u){B=F[u];if(B.global||B.multiline){throw Error(""+B)}v.push("(?:"+E(B)+")")}return RegExp(v.join("|"),x?"gi":"g")}function c(B){function u(E){switch(E.nodeType){case 1:if(x.test(E.className)){break}for(var F=E.firstChild;F;F=F.nextSibling){u(F)}F=E.nodeName;if("BR"===F||"LI"===F){w[D]="\n",C[D<<1]=A++,C[D++<<1|1]=E}break;case 3:case 4:F=E.nodeValue,F.length&&(F=k?F.replace(/\r\n?/g,"\n"):F.replace(/[\t\n\r ]+/g," "),w[D]=F,C[D<<1]=A,A+=F.length,C[D++<<1|1]=E)}}var x=/(?:^|\s)nocode(?:\s|$)/,w=[],A=0,C=[],D=0,v;B.currentStyle?v=B.currentStyle.whiteSpace:window.getComputedStyle&&(v=document.defaultView.getComputedStyle(B,q).getPropertyValue("white-space"));var k=v&&"pre"===v.substring(0,3);u(B);return{a:w.join("").replace(/\n$/,""),c:C}}function y(u,k,w,v){k&&(u={a:k,d:u},w(u),v.push.apply(v,u.e))}function h(u,k){function x(Q){for(var F=Q.d,C=[F,"pln"],L=0,J=Q.a.match(A)||[],B={},E=0,N=J.length;E<N;++E){var K=J[E],O=B[K],D=void 0,M;if(typeof O==="string"){M=!1}else{var I=w[K.charAt(0)];if(I){D=K.match(I[1]),O=I[0]}else{for(M=0;M<v;++M){if(I=k[M],D=K.match(I[1])){O=I[0];break}}D||(O="pln")}if((M=O.length>=5&&"lang-"===O.substring(0,5))&&!(D&&typeof D[1]==="string")){M=!1,O="src"}M||(B[K]=O)}I=L;L+=K.length;if(M){M=D[1];var H=K.indexOf(M),G=H+M.length;D[2]&&(G=K.length-D[2].length,H=G-M.length);O=O.substring(5);y(F+I,K.substring(0,H),x,C);y(F+I+H,M,t(O,M),C);y(F+I+G,K.substring(G),x,C)}else{C.push(F+I,O)}}Q.e=C}var w={},A;(function(){for(var G=u.concat(k),B=[],F={},H=0,E=G.length;H<E;++H){var D=G[H],I=D[3];if(I){for(var C=I.length;--C>=0;){w[I.charAt(C)]=D}}D=D[1];I=""+D;F.hasOwnProperty(I)||(B.push(D),F[I]=q)}B.push(/[\S\s]/);A=d(B)})();var v=k.length;return x}function p(u){var k=[],w=[];u.tripleQuotedStrings?k.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):u.multiLineStrings?k.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):k.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]);u.verbatimStrings&&w.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var v=u.hashComments;v&&(u.cStyleComments?(v>1?k.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):k.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),w.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):k.push(["com",/^#[^\n\r]*/,q,"#"]));u.cStyleComments&&(w.push(["com",/^\/\/[^\n\r]*/,q]),w.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q]));u.regexLiterals&&w.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*/])(?:[^/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]);(v=u.types)&&w.push(["typ",v]);u=(""+u.keywords).replace(/^ | $/g,"");u.length&&w.push(["kwd",RegExp("^(?:"+u.replace(/[\s,]+/g,"|")+")\\b"),q]);k.push(["pln",/^\s+/,q," \r\n\t\xa0"]);w.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'./@\\`]*/,q]);return h(k,w)}function s(H,x){function E(K){switch(K.nodeType){case 1:if(B.test(K.className)){break}if("BR"===K.nodeName){C(K),K.parentNode&&K.parentNode.removeChild(K)}else{for(K=K.firstChild;K;K=K.nextSibling){E(K)}}break;case 3:case 4:if(v){var k=K.nodeValue,L=k.match(I);if(L){var M=k.substring(0,L.index);K.nodeValue=M;(k=k.substring(L.index+L[0].length))&&K.parentNode.insertBefore(J.createTextNode(k),K.nextSibling);C(K);M||K.parentNode.removeChild(K)}}}}function C(K){function k(M,S){var R=S?M.cloneNode(!1):M,Q=M.parentNode;if(Q){var Q=k(Q,1),O=M.nextSibling;Q.appendChild(R);for(var N=O;N;N=O){O=N.nextSibling,Q.appendChild(N)}}return R}for(;!K.nextSibling;){if(K=K.parentNode,!K){return}}for(var K=k(K.nextSibling,0),L;(L=K.parentNode)&&L.nodeType===1;){K=L}F.push(K)}var B=/(?:^|\s)nocode(?:\s|$)/,I=/\r\n?|\n/,J=H.ownerDocument,A;H.currentStyle?A=H.currentStyle.whiteSpace:window.getComputedStyle&&(A=J.defaultView.getComputedStyle(H,q).getPropertyValue("white-space"));var v=A&&"pre"===A.substring(0,3);for(A=J.createElement("LI");H.firstChild;){A.appendChild(H.firstChild)}for(var F=[A],D=0;D<F.length;++D){E(F[D])}x===(x|0)&&F[0].setAttribute("value",x);var u=J.createElement("OL");u.className="linenums";for(var w=Math.max(0,x-1|0)||0,D=0,G=F.length;D<G;++D){A=F[D],A.className="L"+(D+w)%10,A.firstChild||A.appendChild(J.createTextNode("\xa0")),u.appendChild(A)}H.appendChild(u)}function P(u,k){for(var w=k.length;--w>=0;){var v=k[w];z.hasOwnProperty(v)?window.console&&console.warn("cannot override language handler %s",v):z[v]=u}}function t(u,k){if(!u||!z.hasOwnProperty(u)){u=/^\s*</.test(k)?"default-markup":"default-code"}return z[u]}function r(Y){var L=Y.g;try{var U=c(Y.h),R=U.a;Y.a=R;Y.c=U.c;Y.d=0;t(L,R)(Y);var N=/\bMSIE\b/.test(navigator.userAgent),L=/\n/g,F=Y.a,G=F.length,U=0,M=Y.c,I=M.length,R=0,V=Y.e,S=V.length,Y=0;V[S]=G;var H,K;for(K=H=0;K<S;){V[K]!==V[K+2]?(V[H++]=V[K++],V[H++]=V[K++]):K+=2}S=H;for(K=H=0;K<S;){for(var A=V[K],T=V[K+1],X=K+2;X+2<=S&&V[X+1]===T;){X+=2}V[H++]=A;V[H++]=T;K=X}for(V.length=H;R<I;){var J=M[R+2]||G,W=V[Y+2]||G,X=Math.min(J,W),Q=M[R+1],O;if(Q.nodeType!==1&&(O=F.substring(U,X))){N&&(O=O.replace(L,"\r"));Q.nodeValue=O;var E=Q.ownerDocument,D=E.createElement("SPAN");D.className=V[Y+1];var B=Q.parentNode;B.replaceChild(D,Q);D.appendChild(Q);U<J&&(M[R+1]=Q=E.createTextNode(F.substring(X,J)),B.insertBefore(Q,D.nextSibling))}U=X;U>=J&&(R+=2);U>=W&&(Y+=2)}}catch(C){"console" in window&&console.log(C&&C.stack?C.stack:C)}}var n=["break,continue,do,else,for,if,return,while"],l=[[n,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],o=[l,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],m=[l,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],j=[m,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],l=[l,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],g=[n,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],f=[n,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],n=[n,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],e=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,b=/\S/,a=p({keywords:[o,j,l,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+g,f,n],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),z={};P(a,["default-code"]);P(h([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);P(h([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);P(h([],[["atv",/^[\S\s]+/]]),["uq.val"]);P(p({keywords:o,hashComments:!0,cStyleComments:!0,types:e}),["c","cc","cpp","cxx","cyc","m"]);P(p({keywords:"null,true,false"}),["json"]);P(p({keywords:j,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:e}),["cs"]);P(p({keywords:m,cStyleComments:!0}),["java"]);P(p({keywords:n,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]);P(p({keywords:g,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]);P(p({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]);P(p({keywords:f,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]);P(p({keywords:l,cStyleComments:!0,regexLiterals:!0}),["js"]);P(p({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);P(h([],[["str",/^[\S\s]+/]]),["regex"]);window.prettyPrintOne=function(u,k,w){var v=document.createElement("PRE");v.innerHTML=u;w&&s(v,w);r({g:k,i:w,h:v});return v.innerHTML};window.prettyPrint=function(E){function v(){for(var L=window.PR_SHOULD_USE_CONTINUATION?w.now()+250:Infinity;u<A.length&&w.now()<L;u++){var O=A[u],I=O.className;if(I.indexOf("prettyprint")>=0){var I=I.match(B),K,H;if(H=!I){H=O;for(var M=void 0,N=H.firstChild;N;N=N.nextSibling){var J=N.nodeType,M=J===1?M?H:N:J===3?b.test(N.nodeValue)?H:M:M}H=(K=M===H?void 0:M)&&"CODE"===K.tagName}H&&(I=K.className.match(B));I&&(I=I[1]);H=!1;for(M=O.parentNode;M;M=M.parentNode){if((M.tagName==="pre"||M.tagName==="code"||M.tagName==="xmp")&&M.className&&M.className.indexOf("prettyprint")>=0){H=!0;break}}H||((H=(H=O.className.match(/\blinenums\b(?::(\d+))?/))?H[1]&&H[1].length?+H[1]:!0:!1)&&s(O,H),D={g:I,h:O,i:H},r(D))}}u<A.length?setTimeout(v,250):E&&E()}for(var C=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],A=[],x=0;x<C.length;++x){for(var F=0,G=C[x].length;F<G;++F){A.push(C[x][F])}}var C=q,w=Date;w.now||(w={now:function(){return +new Date}});var u=0,D,B=/\blang(?:uage)?-([\w.]+)(?!\S)/;v()};window.PR={createSimpleLexer:h,registerLangHandler:P,sourceDecorator:p,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}})();(function(e){var c={method:"GET",contentType:"json",queryParam:"q",searchDelay:300,minChars:1,propertyToSearch:"name",jsonContainer:null,hintText:"Type in a search term",noResultsText:"No results",searchingText:"Searching...",deleteText:"&times;",animateDropdown:true,tokenLimit:null,tokenDelimiter:",",preventDuplicates:false,tokenValue:"id",prePopulate:null,processPrePopulate:false,idPrefix:"token-input-",resultsFormatter:function(g){return"<li>"+g[this.propertyToSearch]+"</li>"},tokenFormatter:function(g){return"<li><p>"+g[this.propertyToSearch]+"</p></li>"},onResult:null,onAdd:null,onDelete:null,onReady:null};var f={tokenList:"token-input-list",token:"token-input-token",tokenDelete:"token-input-delete-token",selectedToken:"token-input-selected-token",highlightedToken:"token-input-highlighted-token",dropdown:"token-input-dropdown",dropdownItem:"token-input-dropdown-item",dropdownItem2:"token-input-dropdown-item2",selectedDropdownItem:"token-input-selected-dropdown-item",inputToken:"token-input-input-token"};var d={BEFORE:0,AFTER:1,END:2};var a={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUMPAD_ENTER:108,COMMA:188};var b={init:function(g,h){var j=e.extend({},c,h||{});return this.each(function(){e(this).data("tokenInputObject",new e.TokenList(this,g,j))})},clear:function(){this.data("tokenInputObject").clear();return this},add:function(g){this.data("tokenInputObject").add(g);return this},remove:function(g){this.data("tokenInputObject").remove(g);return this},get:function(){return this.data("tokenInputObject").getTokens()}};e.fn.tokenInput=function(g){if(b[g]){return b[g].apply(this,Array.prototype.slice.call(arguments,1))}else{return b.init.apply(this,arguments)}};e.TokenList=function(j,u,S){if(e.type(u)==="string"||e.type(u)==="function"){S.url=u;var n=z();if(S.crossDomain===undefined){if(n.indexOf("://")===-1){S.crossDomain=false}else{S.crossDomain=(location.href.split(/\/+/g)[1]!==n.split(/\/+/g)[1])}}}else{if(typeof(u)==="object"){S.local_data=u}}if(S.classes){S.classes=e.extend({},f,S.classes)}else{if(S.theme){S.classes={};e.each(f,function(X,Y){S.classes[X]=Y+"-"+S.theme})}else{S.classes=f}}var G=[];var x=0;var t=new e.TokenList.Cache();var Q;var N;var B=e('<input type="text"  autocomplete="off">').css({outline:"none"}).attr("id",S.idPrefix+j.id).focus(function(){if(S.tokenLimit===null||S.tokenLimit!==x){m()}}).blur(function(){H();e(this).val("")}).bind("keyup keydown blur update",g).keydown(function(Y){var aa;var X;switch(Y.keyCode){case a.LEFT:case a.RIGHT:case a.UP:case a.DOWN:if(!e(this).val()){aa=o.prev();X=o.next();if((aa.length&&aa.get(0)===E)||(X.length&&X.get(0)===E)){if(Y.keyCode===a.LEFT||Y.keyCode===a.UP){K(e(E),d.BEFORE)}else{K(e(E),d.AFTER)}}else{if((Y.keyCode===a.LEFT||Y.keyCode===a.UP)&&aa.length){T(e(aa.get(0)))}else{if((Y.keyCode===a.RIGHT||Y.keyCode===a.DOWN)&&X.length){T(e(X.get(0)))}}}}else{var Z=null;if(Y.keyCode===a.DOWN||Y.keyCode===a.RIGHT){Z=e(P).next()}else{Z=e(P).prev()}if(Z.length){W(Z)}return false}break;case a.BACKSPACE:aa=o.prev();if(!e(this).val().length){if(E){l(e(E));F.change()}else{if(aa.length){T(e(aa.get(0)))}}return false}else{if(e(this).val().length===1){H()}else{setTimeout(function(){D()},5)}}break;case a.TAB:case a.ENTER:case a.NUMPAD_ENTER:case a.COMMA:if(P){M(e(P).data("tokeninput"));F.change();return false}break;case a.ESCAPE:H();return true;default:if(String.fromCharCode(Y.which)){setTimeout(function(){D()},5)}break}});var F=e(j).hide().val("").focus(function(){B.focus()}).blur(function(){B.blur()});var E=null;var I=0;var P=null;var r=e("<ul />").addClass(S.classes.tokenList).click(function(Y){var X=e(Y.target).closest("li");if(X&&X.get(0)&&e.data(X.get(0),"tokeninput")){V(X)}else{if(E){K(e(E),d.END)}B.focus()}}).mouseover(function(Y){var X=e(Y.target).closest("li");if(X&&E!==this){X.addClass(S.classes.highlightedToken)}}).mouseout(function(Y){var X=e(Y.target).closest("li");if(X&&E!==this){X.removeClass(S.classes.highlightedToken)}}).insertBefore(F);var o=e("<li />").addClass(S.classes.inputToken).appendTo(r).append(B);var U=e("<div>").addClass(S.classes.dropdown).appendTo("body").hide();var L=e("<tester/>").insertAfter(B).css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:B.css("fontSize"),fontFamily:B.css("fontFamily"),fontWeight:B.css("fontWeight"),letterSpacing:B.css("letterSpacing"),whiteSpace:"nowrap"});F.val("");var A=S.prePopulate||F.data("pre");if(S.processPrePopulate&&e.isFunction(S.onResult)){A=S.onResult.call(F,A)}if(A&&A.length){e.each(A,function(X,Y){k(Y);J()})}if(e.isFunction(S.onReady)){S.onReady.call()}this.clear=function(){r.children("li").each(function(){if(e(this).children("input").length===0){l(e(this))}})};this.add=function(X){M(X)};this.remove=function(X){r.children("li").each(function(){if(e(this).children("input").length===0){var aa=e(this).data("tokeninput");var Y=true;for(var Z in X){if(X[Z]!==aa[Z]){Y=false;break}}if(Y){l(e(this))}}})};this.getTokens=function(){return G};function J(){if(S.tokenLimit!==null&&x>=S.tokenLimit){B.hide();H();return}}function g(){if(N===(N=B.val())){return}var X=N.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");L.html(X);B.width(L.width()+30)}function R(X){return((X>=48&&X<=90)||(X>=96&&X<=111)||(X>=186&&X<=192)||(X>=219&&X<=222))}function k(X){var Z=S.tokenFormatter(X);Z=e(Z).addClass(S.classes.token).insertBefore(o);e("<span>"+S.deleteText+"</span>").addClass(S.classes.tokenDelete).appendTo(Z).click(function(){l(e(this).parent());F.change();return false});var Y={id:X.id};Y[S.propertyToSearch]=X[S.propertyToSearch];e.data(Z.get(0),"tokeninput",X);G=G.slice(0,I).concat([Y]).concat(G.slice(I));I++;y(G,F);x+=1;if(S.tokenLimit!==null&&x>=S.tokenLimit){B.hide();H()}return Z}function M(X){var Z=S.onAdd;if(x>0&&S.preventDuplicates){var Y=null;r.children().each(function(){var ab=e(this);var aa=e.data(ab.get(0),"tokeninput");if(aa&&aa.id===X.id){Y=ab;return false}});if(Y){T(Y);o.insertAfter(Y);B.focus();return}}if(S.tokenLimit==null||x<S.tokenLimit){k(X);J()}B.val("");H();if(e.isFunction(Z)){Z.call(F,X)}}function T(X){X.addClass(S.classes.selectedToken);E=X.get(0);B.val("");H()}function K(Y,X){Y.removeClass(S.classes.selectedToken);E=null;if(X===d.BEFORE){o.insertBefore(Y);I--}else{if(X===d.AFTER){o.insertAfter(Y);I++}else{o.appendTo(r);I=x}}B.focus()}function V(Y){var X=E;if(E){K(e(E),d.END)}if(X===Y.get(0)){K(Y,d.END)}else{T(Y)}}function l(Y){var Z=e.data(Y.get(0),"tokeninput");var aa=S.onDelete;var X=Y.prevAll().length;if(X>I){X--}Y.remove();E=null;B.focus();G=G.slice(0,X).concat(G.slice(X+1));if(X<I){I--}y(G,F);x-=1;if(S.tokenLimit!==null){B.show().val("").focus()}if(e.isFunction(aa)){aa.call(F,Z)}}function y(Z,X){var Y=e.map(Z,function(aa){return aa[S.tokenValue]});X.val(Y.join(S.tokenDelimiter))}function H(){U.hide().empty();P=null}function s(){U.css({position:"absolute",top:e(r).offset().top+e(r).outerHeight(),left:e(r).offset().left,zindex:999}).show()}function p(){if(S.searchingText){U.html("<p>"+S.searchingText+"</p>");s()}}function m(){if(S.hintText){U.html("<p>"+S.hintText+"</p>");s()}}function w(Y,X){return Y.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+X+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>")}function C(Y,Z,X){return Y.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+Z+")(?![^<>]*>)(?![^&;]+;)","g"),w(Z,X))}function O(Z,X){if(X&&X.length){U.empty();var Y=e("<ul>").appendTo(U).mouseover(function(aa){W(e(aa.target).closest("li"))}).mousedown(function(aa){M(e(aa.target).closest("li").data("tokeninput"));F.change();return false}).hide();e.each(X,function(aa,ab){var ac=S.resultsFormatter(ab);ac=C(ac,ab[S.propertyToSearch],Z);ac=e(ac).appendTo(Y);if(aa%2){ac.addClass(S.classes.dropdownItem)}else{ac.addClass(S.classes.dropdownItem2)}if(aa===0){W(ac)}e.data(ac.get(0),"tokeninput",ab)});s();if(S.animateDropdown){Y.slideDown("fast")}else{Y.show()}}else{if(S.noResultsText){U.html("<p>"+S.noResultsText+"</p>");s()}}}function W(X){if(X){if(P){h(e(P))}X.addClass(S.classes.selectedDropdownItem);P=X.get(0)}}function h(X){X.removeClass(S.classes.selectedDropdownItem);P=null}function D(){var X=B.val().toLowerCase();if(X&&X.length){if(E){K(e(E),d.AFTER)}if(X.length>=S.minChars){p();clearTimeout(Q);Q=setTimeout(function(){v(X)},S.searchDelay)}else{H()}}}function v(ad){var Z=ad+z();var X=t.get(Z);if(X){O(ad,X)}else{if(S.url){var ab=z();var aa={};aa.data={};if(ab.indexOf("?")>-1){var ae=ab.split("?");aa.url=ae[0];var Y=ae[1].split("&");e.each(Y,function(af,ah){var ag=ah.split("=");aa.data[ag[0]]=ag[1]})}else{aa.url=ab}aa.data[S.queryParam]=ad;aa.type=S.method;aa.dataType=S.contentType;if(S.crossDomain){aa.dataType="jsonp"}aa.success=function(af){if(e.isFunction(S.onResult)){af=S.onResult.call(F,af)}t.add(Z,S.jsonContainer?af[S.jsonContainer]:af);if(B.val().toLowerCase()===ad){O(ad,S.jsonContainer?af[S.jsonContainer]:af)}};e.ajax(aa)}else{if(S.local_data){var ac=e.grep(S.local_data,function(af){return af[S.propertyToSearch].toLowerCase().indexOf(ad.toLowerCase())>-1});if(e.isFunction(S.onResult)){ac=S.onResult.call(F,ac)}t.add(Z,ac);O(ad,ac)}}}}function z(){var X=S.url;if(typeof S.url=="function"){X=S.url.call()}return X}};e.TokenList.Cache=function(h){var k=e.extend({max_size:500},h);var l={};var j=0;var g=function(){l={};j=0};this.add=function(n,m){if(j>k.max_size){g()}if(!l[n]){j+=1}l[n]=m};this.get=function(m){return l[m]}}}(jQuery));(function(a){var b={i18n:{ar:{months:[" ","","","","","","","",""," "," "," "],dayOfWeek:["","","","","","",""]},ro:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],dayOfWeek:["l","ma","mi","j","v","s","d"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeek:["Sen","Sel","Rab","Kam","Jum","Sab","Min"]},bg:{months:["","","","?","","","","??","","","?",""],dayOfWeek:["?","","","","","",""]},fa:{months:["?","","","","","","","","","","","?"],dayOfWeek:["",""," ","","","",""]},ru:{months:["","","","?","","","","??","?","?","??",""],dayOfWeek:["?","","","","","",""]},uk:{months:["","","","","","","","","?","","?",""],dayOfWeek:["?","","","","","",""]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["?","??","?","?","","?","?","?","?","?","??","?"],dayOfWeek:["?","","?","","","?",""]},de:{months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],dayOfWeek:["Paz","Pts","Sal","ar","Per","Cum","Cts"]},fr:{months:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mi","Jue","Vie","Sb"]},th:{months:["?","?","","","","","??","","?","","?",""],dayOfWeek:[".",".",".",".",".",".","."]},pl:{months:["stycze","luty","marzec","kwiecie","maj","czerwiec","lipiec","sierpie","wrzesie","padziernik","listopad","grudzie"],dayOfWeek:["nd","pn","wt","r","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["","","","","","","","","?","??","??","??"],dayOfWeek:["","","","","","",""]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"]},kr:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["?","","","","","",""]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Sn","Man","Tir","Ons","Tor","Fre","Lr"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Sn","Man","Tir","Ons","Tor","Fre","Lr"]},ja:{months:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","?","","","",""]},vi:{months:["Thng 1","Thng 2","Thng 3","Thng 4","Thng 5","Thng 6","Thng 7","Thng 8","Thng 9","Thng 10","Thng 11","Thng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","et","Pet","Sob"]},cs:{months:["Leden","nor","Bezen","Duben","Kvten","erven","ervenec","Srpen","Z","jen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","t","St","t","P","So"]},hu:{months:["Janur","Februr","Mrcius","?prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],dayOfWeek:["Va","H","Ke","Sze","Cs","P","Szo"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:false,step:60,monthChangeSpinner:true,closeOnDateSelect:false,closeOnWithoutClick:true,closeOnInputClick:true,timepicker:true,datepicker:true,weeks:false,defaultTime:false,defaultDate:false,minDate:false,maxDate:false,minTime:false,maxTime:false,allowTimes:[],opened:false,initTime:true,inline:false,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:true,inverseButton:false,hours12:false,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:true,todayButton:true,defaultSelect:true,scrollMonth:true,scrollTime:true,scrollInput:true,lazyInit:false,mask:false,validateOnBlur:true,allowBlank:true,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:false,roundTime:"round",className:"",weekends:[],yearOffset:0,beforeShowDay:null};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,f){for(var d=(f||0),c=this.length;d<c;d++){if(this[d]===e){return d}}return -1}}Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()};a.fn.xdsoftScroller=function(c){return this.each(function(){var h=a(this);if(!a(this).hasClass("xdsoft_scroller_box")){var j=function(p){var o={x:0,y:0};if(p.type=="touchstart"||p.type=="touchmove"||p.type=="touchend"||p.type=="touchcancel"){var r=p.originalEvent.touches[0]||p.originalEvent.changedTouches[0];o.x=r.pageX;o.y=r.pageY}else{if(p.type=="mousedown"||p.type=="mouseup"||p.type=="mousemove"||p.type=="mouseover"||p.type=="mouseout"||p.type=="mouseenter"||p.type=="mouseleave"){o.x=p.pageX;o.y=p.pageY}}return o},e=0,l=h.children().eq(0),g=h[0].clientHeight,m=l[0].offsetHeight,n=a('<div class="xdsoft_scrollbar"></div>'),f=a('<div class="xdsoft_scroller"></div>'),k=100,d=false;n.append(f);h.addClass("xdsoft_scroller_box").append(n);f.on("mousedown.xdsoft_scroller",function(s){if(!g){h.trigger("resize_scroll.xdsoft_scroller",[c])}var r=s.pageY,t=parseInt(f.css("margin-top")),p=n[0].offsetHeight;a(document.body).addClass("xdsoft_noselect");a([document.body,window]).on("mouseup.xdsoft_scroller",function o(){a([document.body,window]).off("mouseup.xdsoft_scroller",o).off("mousemove.xdsoft_scroller",e).removeClass("xdsoft_noselect")});a(document.body).on("mousemove.xdsoft_scroller",e=function(u){var v=u.pageY-r+t;if(v<0){v=0}if(v+f[0].offsetHeight>p){v=p-f[0].offsetHeight}h.trigger("scroll_element.xdsoft_scroller",[k?v/k:0])})});h.on("scroll_element.xdsoft_scroller",function(p,o){if(!g){h.trigger("resize_scroll.xdsoft_scroller",[o,true])}o=o>1?1:(o<0||isNaN(o))?0:o;f.css("margin-top",k*o);setTimeout(function(){l.css("marginTop",-parseInt((l[0].offsetHeight-g)*o))},10)}).on("resize_scroll.xdsoft_scroller",function(t,p,o){g=h[0].clientHeight;m=l[0].offsetHeight;var s=g/m,r=s*n[0].offsetHeight;if(s>1){f.hide()}else{f.show();f.css("height",parseInt(r>10?r:10));k=n[0].offsetHeight-f[0].offsetHeight;if(o!==true){h.trigger("scroll_element.xdsoft_scroller",[p?p:Math.abs(parseInt(l.css("marginTop")))/(m-g)])}}});h.mousewheel&&h.mousewheel(function(r,t,p,o){var s=Math.abs(parseInt(l.css("marginTop")));h.trigger("scroll_element.xdsoft_scroller",[(s-t*20)/(m-g)]);r.stopPropagation();return false});h.on("touchstart",function(o){d=j(o)});h.on("touchmove",function(o){if(d){var r=j(o),p=Math.abs(parseInt(l.css("marginTop")));h.trigger("scroll_element.xdsoft_scroller",[(p-(r.y-d.y))/(m-g)]);o.stopPropagation();o.preventDefault();d=j(o)}});h.on("touchend touchcancel",function(o){d=false})}h.trigger("resize_scroll.xdsoft_scroller",[c])})};a.fn.datetimepicker=function(e){var v=48,p=57,j=96,c=105,m=17,s=46,n=13,E=27,A=8,w=37,t=38,C=39,D=40,h=9,x=116,y=65,d=67,B=86,r=90,l=89,z=false,g=(a.isPlainObject(e)||!e)?a.extend(true,{},b,e):a.extend(true,{},b),o=0,k=function(G){G.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function F(H){if(G.is(":disabled")||G.is(":hidden")||!G.is(":visible")||G.data("xdsoft_datetimepicker")){return}clearTimeout(o);o=setTimeout(function(){if(!G.data("xdsoft_datetimepicker")){f(G)}G.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",F).trigger("open.xdsoft")},100)})},f=function(P){var R=a("<div "+(g.id?'id="'+g.id+'"':"")+" "+(g.style?'style="'+g.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_'+g.theme+" xdsoft_noselect "+(g.weeks?" xdsoft_showweeks":"")+g.className+'"></div>'),U=a('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),N=a('<div class="xdsoft_datepicker active"></div>'),V=a('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),S=a('<div class="xdsoft_calendar"></div>'),X=a('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),J=X.find(".xdsoft_time_box").eq(0),I=a('<div class="xdsoft_time_variant"></div>'),F=a('<div class="xdsoft_scrollbar"></div>'),Z=a('<div class="xdsoft_scroller"></div>'),H=a('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),W=a('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>');V.find(".xdsoft_month span").after(H);V.find(".xdsoft_year span").after(W);V.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(af){var ac=a(this).find(".xdsoft_select").eq(0),ai=0,ag=0,ah=ac.is(":visible");V.find(".xdsoft_select").hide();if(Q.currentTime){ai=Q.currentTime[a(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()}ac[ah?"hide":"show"]();for(var ad=ac.find("div.xdsoft_option"),ae=0;ae<ad.length;ae++){if(ad.eq(ae).data("value")==ai){break}else{ag+=ad[0].offsetHeight}}ac.xdsoftScroller(ag/(ac.children()[0].offsetHeight-(ac[0].clientHeight)));af.stopPropagation();return false});V.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(ac){ac.stopPropagation();ac.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(ad){var ac=Q.currentTime.getFullYear();if(Q&&Q.currentTime){Q.currentTime[a(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](a(this).data("value"))}a(this).parent().parent().hide();R.trigger("xchange.xdsoft");g.onChangeMonth&&g.onChangeMonth.call&&g.onChangeMonth.call(R,Q.currentTime,R.data("input"));if(ac!=Q.currentTime.getFullYear()&&a.isFunction(g.onChangeYear)){g.onChangeYear.call(R,Q.currentTime,R.data("input"))}});R.setOptions=function(ac){g=a.extend(true,{},g,ac);if(ac.allowTimes&&a.isArray(ac.allowTimes)&&ac.allowTimes.length){g.allowTimes=a.extend(true,[],ac.allowTimes)}if(ac.weekends&&a.isArray(ac.weekends)&&ac.weekends.length){g.weekends=a.extend(true,[],ac.weekends)}if((g.open||g.opened)&&(!g.inline)){P.trigger("open.xdsoft")}if(g.inline){T=true;R.addClass("xdsoft_inline");P.after(R).hide()}if(g.inverseButton){g.next="xdsoft_prev";g.prev="xdsoft_next"}if(g.datepicker){N.addClass("active")}else{N.removeClass("active")}if(g.timepicker){X.addClass("active")}else{X.removeClass("active")}if(g.value){P&&P.val&&P.val(g.value);Q.setCurrentTime(g.value)}if(isNaN(g.dayOfWeekStart)){g.dayOfWeekStart=0}else{g.dayOfWeekStart=parseInt(g.dayOfWeekStart)%7}if(!g.timepickerScrollbar){F.hide()}if(g.minDate&&/^-(.*)$/.test(g.minDate)){g.minDate=Q.strToDateTime(g.minDate).dateFormat(g.formatDate)}if(g.maxDate&&/^\+(.*)$/.test(g.maxDate)){g.maxDate=Q.strToDateTime(g.maxDate).dateFormat(g.formatDate)}V.find(".xdsoft_today_button").css("visibility",!g.todayButton?"hidden":"visible");if(g.mask){var ae,af=function(ai){try{if(document.selection&&document.selection.createRange){var ah=document.selection.createRange();return ah.getBookmark().charCodeAt(2)-2}else{if(ai.setSelectionRange){return ai.selectionStart}}}catch(aj){return 0}},ad=function(ai,aj){ai=(typeof ai=="string"||ai instanceof String)?document.getElementById(ai):ai;if(!ai){return false}else{if(ai.createTextRange){var ah=ai.createTextRange();ah.collapse(true);ah.moveEnd(aj);ah.moveStart(aj);ah.select();return true}else{if(ai.setSelectionRange){ai.setSelectionRange(aj,aj);return true}}}return false},ag=function(ah,aj){var ai=ah.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return RegExp(ai).test(aj)};P.off("keydown.xdsoft");switch(true){case (g.mask===true):g.mask=g.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59");case (a.type(g.mask)=="string"):if(!ag(g.mask,P.val())){P.val(g.mask.replace(/[0-9]/g,"_"))}P.on("keydown.xdsoft",function(ai){var aj=this.value,ah=ai.which;switch(true){case ((ah>=v&&ah<=p)||(ah>=j&&ah<=c))||(ah==A||ah==s):var al=af(this),ak=(ah!=A&&ah!=s)?String.fromCharCode((j<=ah&&ah<=c)?ah-v:ah):"_";if((ah==A||ah==s)&&al){al--;ak="_"}while(/[^0-9_]/.test(g.mask.substr(al,1))&&al<g.mask.length&&al>0){al+=(ah==A||ah==s)?-1:1}aj=aj.substr(0,al)+ak+aj.substr(al+1);if(a.trim(aj)==""){aj=g.mask.replace(/[0-9]/g,"_")}else{if(al==g.mask.length){break}}al+=(ah==A||ah==s)?0:1;while(/[^0-9_]/.test(g.mask.substr(al,1))&&al<g.mask.length&&al>0){al+=(ah==A||ah==s)?-1:1}if(ag(g.mask,aj)){this.value=aj;ad(this,al)}else{if(a.trim(aj)==""){this.value=g.mask.replace(/[0-9]/g,"_")}else{P.trigger("error_input.xdsoft")}}break;case (!!~([y,d,B,r,l].indexOf(ah))&&z):case !!~([E,t,D,w,C,x,m,h,n].indexOf(ah)):return true}ai.preventDefault();return false});break}}if(g.validateOnBlur){P.off("blur.xdsoft").on("blur.xdsoft",function(){if(g.allowBlank&&!a.trim(a(this).val()).length){a(this).val(null);R.data("xdsoft_datetime").empty()}else{if(!Date.parseDate(a(this).val(),g.format)){a(this).val((Q.now()).dateFormat(g.format));R.data("xdsoft_datetime").setCurrentTime(a(this).val())}else{R.data("xdsoft_datetime").setCurrentTime(a(this).val())}}R.trigger("changedatetime.xdsoft")})}g.dayOfWeekStartPrev=(g.dayOfWeekStart==0)?6:g.dayOfWeekStart-1;R.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")};R.data("options",g).on("mousedown.xdsoft",function(ac){ac.stopPropagation();ac.preventDefault();W.hide();H.hide();return false});var Y=X.find(".xdsoft_time_box");Y.append(I);Y.xdsoftScroller();R.on("afterOpen.xdsoft",function(){Y.xdsoftScroller()});R.append(N).append(X);if(g.withoutCopyright!==true){R.append(U)}N.append(V).append(S);a(g.parentID).append(R);var Q=new function(){var ac=this;ac.now=function(af){var ag=new Date();if(!af&&g.defaultDate){var ad=ac.strToDate(g.defaultDate);ag.setFullYear(ad.getFullYear());ag.setMonth(ad.getMonth());ag.setDate(ad.getDate())}if(g.yearOffset){ag.setFullYear(ag.getFullYear()+g.yearOffset)}if(!af&&g.defaultTime){var ae=ac.strtotime(g.defaultTime);ag.setHours(ae.getHours());ag.setMinutes(ae.getMinutes())}return ag};ac.isValidDate=function(ad){if(Object.prototype.toString.call(ad)!=="[object Date]"){return false}return !isNaN(ad.getTime())};ac.setCurrentTime=function(ad){ac.currentTime=(typeof ad=="string")?ac.strToDateTime(ad):ac.isValidDate(ad)?ad:ac.now();R.trigger("xchange.xdsoft")};ac.empty=function(){ac.currentTime=null};ac.getCurrentTime=function(ad){return ac.currentTime};ac.nextMonth=function(){var ae=ac.currentTime.getMonth()+1;if(ae==12){ac.currentTime.setFullYear(ac.currentTime.getFullYear()+1);ae=0}var ad=ac.currentTime.getFullYear();ac.currentTime.setDate(Math.min(new Date(ac.currentTime.getFullYear(),ae+1,0).getDate(),ac.currentTime.getDate()));ac.currentTime.setMonth(ae);g.onChangeMonth&&g.onChangeMonth.call&&g.onChangeMonth.call(R,Q.currentTime,R.data("input"));if(ad!=ac.currentTime.getFullYear()&&a.isFunction(g.onChangeYear)){g.onChangeYear.call(R,Q.currentTime,R.data("input"))}R.trigger("xchange.xdsoft");return ae};ac.prevMonth=function(){var ad=ac.currentTime.getMonth()-1;if(ad==-1){ac.currentTime.setFullYear(ac.currentTime.getFullYear()-1);ad=11}ac.currentTime.setDate(Math.min(new Date(ac.currentTime.getFullYear(),ad+1,0).getDate(),ac.currentTime.getDate()));ac.currentTime.setMonth(ad);g.onChangeMonth&&g.onChangeMonth.call&&g.onChangeMonth.call(R,Q.currentTime,R.data("input"));R.trigger("xchange.xdsoft");return ad};ac.getWeekOfYear=function(ae){var ad=new Date(ae.getFullYear(),0,1);return Math.ceil((((ae-ad)/86400000)+ad.getDay()+1)/7)};ac.strToDateTime=function(ag){if(ag&&ag instanceof Date&&ac.isValidDate(ag)){return ag}var ae=[],ad,af;if((ae=/^(\+|\-)(.*)$/.exec(ag))&&(ae[2]=Date.parseDate(ae[2],g.formatDate))){ad=ae[2].getTime()-(ae[2].getTimezoneOffset())*60000;af=new Date((Q.now()).getTime()+parseInt(ae[1]+"1")*ad)}else{af=ag?Date.parseDate(ag,g.format):ac.now()}if(!ac.isValidDate(af)){af=ac.now()}return af};ac.strToDate=function(ae){if(ae&&ae instanceof Date&&ac.isValidDate(ae)){return ae}var ad=ae?Date.parseDate(ae,g.formatDate):ac.now(true);if(!ac.isValidDate(ad)){ad=ac.now(true)}return ad};ac.strtotime=function(ad){if(ad&&ad instanceof Date&&ac.isValidDate(ad)){return ad}var ae=ad?Date.parseDate(ad,g.formatTime):ac.now(true);if(!ac.isValidDate(ae)){ae=ac.now(true)}return ae};ac.str=function(){return ac.currentTime.dateFormat(g.format)};ac.currentTime=this.now()};V.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){R.data("changed",true);Q.setCurrentTime(0);R.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){P.val(Q.str());R.trigger("close.xdsoft")});V.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var ad=a(this),ag=0,ac=false;(function af(ah){var ai=Q.currentTime.getMonth();if(ad.hasClass(g.next)){Q.nextMonth()}else{if(ad.hasClass(g.prev)){Q.prevMonth()}}if(g.monthChangeSpinner){!ac&&(ag=setTimeout(af,ah?ah:100))}})(500);a([document.body,window]).on("mouseup.xdsoft",function ae(){clearTimeout(ag);ac=true;a([document.body,window]).off("mouseup.xdsoft",ae)})});X.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var af=a(this),ah=0,ac=false,ag=110;(function ae(aj){var al=J[0].clientHeight,ai=I[0].offsetHeight,ak=Math.abs(parseInt(I.css("marginTop")));if(af.hasClass(g.next)&&(ai-al)-g.timeHeightInTimePicker>=ak){I.css("marginTop","-"+(ak+g.timeHeightInTimePicker)+"px")}else{if(af.hasClass(g.prev)&&ak-g.timeHeightInTimePicker>=0){I.css("marginTop","-"+(ak-g.timeHeightInTimePicker)+"px")}}J.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(I.css("marginTop"))/(ai-al))]);ag=(ag>10)?10:ag-10;!ac&&(ah=setTimeout(ae,aj?aj:ag))})(500);a([document.body,window]).on("mouseup.xdsoft",function ad(){clearTimeout(ah);ac=true;a([document.body,window]).off("mouseup.xdsoft",ad)})});var K=0;R.on("xchange.xdsoft",function(ac){clearTimeout(K);K=setTimeout(function(){var ar="",ah=new Date(Q.currentTime.getFullYear(),Q.currentTime.getMonth(),1,12,0,0),ap=0,at=Q.now();while(ah.getDay()!=g.dayOfWeekStart){ah.setDate(ah.getDate()-1)}ar+="<table><thead><tr>";if(g.weeks){ar+="<th></th>"}for(var ao=0;ao<7;ao++){ar+="<th>"+g.i18n[g.lang].dayOfWeek[(ao+g.dayOfWeekStart)%7]+"</th>"}ar+="</tr></thead>";ar+="<tbody>";var am=false,ai=false;if(g.maxDate!==false){am=Q.strToDate(g.maxDate);am=new Date(am.getFullYear(),am.getMonth(),am.getDate(),23,59,59,999)}if(g.minDate!==false){ai=Q.strToDate(g.minDate);ai=new Date(ai.getFullYear(),ai.getMonth(),ai.getDate())}var au,ak,an,al,av=[],af,ag=true;while(ap<Q.currentTime.countDaysInMonth()||ah.getDay()!=g.dayOfWeekStart||Q.currentTime.getMonth()==ah.getMonth()){av=[];ap++;au=ah.getDate();ak=ah.getFullYear();an=ah.getMonth();al=Q.getWeekOfYear(ah);av.push("xdsoft_date");if(g.beforeShowDay&&g.beforeShowDay.call){af=g.beforeShowDay.call(R,ah)}else{af=null}if((am!==false&&ah>am)||(ai!==false&&ah<ai)||(af&&af[0]===false)){av.push("xdsoft_disabled")}if(af&&af[1]!=""){av.push(af[1])}if(Q.currentTime.getMonth()!=an){av.push("xdsoft_other_month")}if((g.defaultSelect||R.data("changed"))&&Q.currentTime.dateFormat(g.formatDate)==ah.dateFormat(g.formatDate)){av.push("xdsoft_current")}if(at.dateFormat(g.formatDate)==ah.dateFormat(g.formatDate)){av.push("xdsoft_today")}if(ah.getDay()==0||ah.getDay()==6||~g.weekends.indexOf(ah.dateFormat(g.formatDate))){av.push("xdsoft_weekend")}if(g.beforeShowDay&&typeof g.beforeShowDay=="function"){av.push(g.beforeShowDay(ah))}if(ag){ar+="<tr>";ag=false;if(g.weeks){ar+="<th>"+al+"</th>"}}ar+='<td data-date="'+au+'" data-month="'+an+'" data-year="'+ak+'" class="xdsoft_date xdsoft_day_of_week'+ah.getDay()+" "+av.join(" ")+'"><div>'+au+"</div></td>";if(ah.getDay()==g.dayOfWeekStartPrev){ar+="</tr>";ag=true}ah.setDate(au+1)}ar+="</tbody></table>";S.html(ar);V.find(".xdsoft_label span").eq(0).text(g.i18n[g.lang].months[Q.currentTime.getMonth()]);V.find(".xdsoft_label span").eq(1).text(Q.currentTime.getFullYear());var aj="",aq="",an="",ad=function ad(ay,aw){var ax=Q.now();ax.setHours(ay);ay=parseInt(ax.getHours());ax.setMinutes(aw);aw=parseInt(ax.getMinutes());av=[];if((g.maxTime!==false&&Q.strtotime(g.maxTime).getTime()<ax.getTime())||(g.minTime!==false&&Q.strtotime(g.minTime).getTime()>ax.getTime())){av.push("xdsoft_disabled")}if((g.initTime||g.defaultSelect||R.data("changed"))&&parseInt(Q.currentTime.getHours())==parseInt(ay)&&(g.step>59||Math[g.roundTime](Q.currentTime.getMinutes()/g.step)*g.step==parseInt(aw))){if(g.defaultSelect||R.data("changed")){av.push("xdsoft_current")}else{if(g.initTime){av.push("xdsoft_init_time")}}}if(parseInt(at.getHours())==parseInt(ay)&&parseInt(at.getMinutes())==parseInt(aw)){av.push("xdsoft_today")}aj+='<div class="xdsoft_time '+av.join(" ")+'" data-hour="'+ay+'" data-minute="'+aw+'">'+ax.dateFormat(g.formatTime)+"</div>"};if(!g.allowTimes||!a.isArray(g.allowTimes)||!g.allowTimes.length){for(var ap=0,ao=0;ap<(g.hours12?12:24);ap++){for(ao=0;ao<60;ao+=g.step){aq=(ap<10?"0":"")+ap;an=(ao<10?"0":"")+ao;ad(aq,an)}}}else{for(var ap=0;ap<g.allowTimes.length;ap++){aq=Q.strtotime(g.allowTimes[ap]).getHours();an=Q.strtotime(g.allowTimes[ap]).getMinutes();ad(aq,an)}}I.html(aj);var ae="",ap=0;for(ap=parseInt(g.yearStart,10)+g.yearOffset;ap<=parseInt(g.yearEnd,10)+g.yearOffset;ap++){ae+='<div class="xdsoft_option '+(Q.currentTime.getFullYear()==ap?"xdsoft_current":"")+'" data-value="'+ap+'">'+ap+"</div>"}W.children().eq(0).html(ae);for(ap=0,ae="";ap<=11;ap++){ae+='<div class="xdsoft_option '+(Q.currentTime.getMonth()==ap?"xdsoft_current":"")+'" data-value="'+ap+'">'+g.i18n[g.lang].months[ap]+"</div>"}H.children().eq(0).html(ae);a(R).trigger("generate.xdsoft")},10);ac.stopPropagation()}).on("afterOpen.xdsoft",function(){if(g.timepicker){var ad;if(I.find(".xdsoft_current").length){ad=".xdsoft_current"}else{if(I.find(".xdsoft_init_time").length){ad=".xdsoft_init_time"}}if(ad){var af=J[0].clientHeight,ac=I[0].offsetHeight,ae=I.find(ad).index()*g.timeHeightInTimePicker+1;if((ac-af)<ae){ae=ac-af}J.trigger("scroll_element.xdsoft_scroller",[parseInt(ae)/(ac-af)])}else{J.trigger("scroll_element.xdsoft_scroller",[0])}}});var G=0;S.on("click.xdsoft","td",function(ac){ac.stopPropagation();G++;var ae=a(this),ad=Q.currentTime;if(ad===undefined||ad===null){Q.currentTime=Q.now();ad=Q.currentTime}if(ae.hasClass("xdsoft_disabled")){return false}ad.setDate(1);ad.setFullYear(ae.data("year"));ad.setMonth(ae.data("month"));ad.setDate(ae.data("date"));R.trigger("select.xdsoft",[ad]);P.val(Q.str());if((G>1||(g.closeOnDateSelect===true||(g.closeOnDateSelect===0&&!g.timepicker)))&&!g.inline){R.trigger("close.xdsoft")}if(g.onSelectDate&&g.onSelectDate.call){g.onSelectDate.call(R,Q.currentTime,R.data("input"))}R.data("changed",true);R.trigger("xchange.xdsoft");R.trigger("changedatetime.xdsoft");setTimeout(function(){G=0},200)});I.on("click.xdsoft","div",function(ac){ac.stopPropagation();var ae=a(this),ad=Q.currentTime;if(ad===undefined||ad===null){Q.currentTime=Q.now();ad=Q.currentTime}if(ae.hasClass("xdsoft_disabled")){return false}ad.setHours(ae.data("hour"));ad.setMinutes(ae.data("minute"));R.trigger("select.xdsoft",[ad]);R.data("input").val(Q.str());!g.inline&&R.trigger("close.xdsoft");if(g.onSelectTime&&g.onSelectTime.call){g.onSelectTime.call(R,Q.currentTime,R.data("input"))}R.data("changed",true);R.trigger("xchange.xdsoft");R.trigger("changedatetime.xdsoft")});R.mousewheel&&N.mousewheel(function(ae,af,ad,ac){if(!g.scrollMonth){return true}if(af<0){Q.nextMonth()}else{Q.prevMonth()}return false});R.mousewheel&&J.unmousewheel().mousewheel(function(af,aj,ae,ad){if(!g.scrollTime){return true}var ai=J[0].clientHeight,ac=I[0].offsetHeight,ah=Math.abs(parseInt(I.css("marginTop"))),ag=true;if(aj<0&&(ac-ai)-g.timeHeightInTimePicker>=ah){I.css("marginTop","-"+(ah+g.timeHeightInTimePicker)+"px");ag=false}else{if(aj>0&&ah-g.timeHeightInTimePicker>=0){I.css("marginTop","-"+(ah-g.timeHeightInTimePicker)+"px");ag=false}}J.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(I.css("marginTop"))/(ac-ai))]);af.stopPropagation();return ag});var T=false;R.on("changedatetime.xdsoft",function(){if(g.onChangeDateTime&&g.onChangeDateTime.call){var ac=R.data("input");g.onChangeDateTime.call(R,Q.currentTime,ac);delete g.value;ac.trigger("change")}}).on("generate.xdsoft",function(){if(g.onGenerate&&g.onGenerate.call){g.onGenerate.call(R,Q.currentTime,R.data("input"))}if(T){R.trigger("afterOpen.xdsoft");T=false}}).on("click.xdsoft",function(ac){ac.stopPropagation()});var ab=0;P.mousewheel&&P.mousewheel(function(ae,af,ad,ac){if(!g.scrollInput){return true}if(!g.datepicker&&g.timepicker){ab=I.find(".xdsoft_current").length?I.find(".xdsoft_current").eq(0).index():0;if(ab+af>=0&&ab+af<I.children().length){ab+=af}I.children().eq(ab).length&&I.children().eq(ab).trigger("mousedown");return false}else{if(g.datepicker&&!g.timepicker){N.trigger(ae,[af,ad,ac]);P.val&&P.val(Q.str());R.trigger("changedatetime.xdsoft");return false}}});var L=function(){var af=R.data("input").offset(),ae=af.top+R.data("input")[0].offsetHeight-1,ad=af.left,ac="absolute";if(g.fixed){ae-=a(window).scrollTop();ad-=a(window).scrollLeft();ac="fixed"}else{if(ae+R[0].offsetHeight>a(window).height()+a(window).scrollTop()){ae=af.top-R[0].offsetHeight+1}if(ae<0){ae=0}if(ad+R[0].offsetWidth>a(window).width()){ad=a(window).width()-R[0].offsetWidth}}R.css({left:ad,top:ae,position:ac})};R.on("open.xdsoft",function(){var ad=true;if(g.onShow&&g.onShow.call){ad=g.onShow.call(R,Q.currentTime,R.data("input"))}if(ad!==false){R.show();L();a(window).off("resize.xdsoft",L).on("resize.xdsoft",L);if(g.closeOnWithoutClick){a([document.body,window]).on("mousedown.xdsoft",function ac(){R.trigger("close.xdsoft");a([document.body,window]).off("mousedown.xdsoft",ac)})}}}).on("close.xdsoft",function(ad){var ac=true;V.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide();if(g.onClose&&g.onClose.call){ac=g.onClose.call(R,Q.currentTime,R.data("input"))}if(ac!==false&&!g.opened&&!g.inline){R.hide()}ad.stopPropagation()}).data("input",P);var O=0,aa=0;R.data("xdsoft_datetime",Q);R.setOptions(g);function M(){var ac=false;if(g.startDate){ac=Q.strToDate(g.startDate)}else{ac=g.value?g.value:(P&&P.val&&P.val())?P.val():"";if(ac){ac=Q.strToDateTime(ac)}else{if(g.defaultDate){ac=Q.strToDate(g.defaultDate);if(g.defaultTime){var ad=Q.strtotime(g.defaultTime);ac.setHours(ad.getHours());ac.setMinutes(ad.getMinutes())}}}}if(ac&&Q.isValidDate(ac)){R.data("changed",true)}else{ac=""}return ac?ac:0}Q.setCurrentTime(M());P.data("xdsoft_datetimepicker",R).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(ac){if(P.is(":disabled")||P.is(":hidden")||!P.is(":visible")||(P.data("xdsoft_datetimepicker").is(":visible")&&g.closeOnInputClick)){return}clearTimeout(O);O=setTimeout(function(){if(P.is(":disabled")||P.is(":hidden")||!P.is(":visible")){return}T=true;Q.setCurrentTime(M());R.trigger("open.xdsoft")},100)}).on("keydown.xdsoft",function(ae){var af=this.value,ac=ae.which;switch(true){case !!~([n].indexOf(ac)):var ad=a("input:visible,textarea:visible");R.trigger("close.xdsoft");ad.eq(ad.index(this)+1).focus();return false;case !!~[h].indexOf(ac):R.trigger("close.xdsoft");return true}})},u=function(F){var G=F.data("xdsoft_datetimepicker");if(G){G.data("xdsoft_datetime",null);G.remove();F.data("xdsoft_datetimepicker",null).off("open.xdsoft focusin.xdsoft focusout.xdsoft mousedown.xdsoft blur.xdsoft keydown.xdsoft");a(window).off("resize.xdsoft");a([window,document.body]).off("mousedown.xdsoft");F.unmousewheel&&F.unmousewheel()}};a(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(F){if(F.keyCode==m){z=true}}).on("keyup.xdsoftctrl",function(F){if(F.keyCode==m){z=false}});return this.each(function(){var F;if(F=a(this).data("xdsoft_datetimepicker")){if(a.type(e)==="string"){switch(e){case"show":a(this).select().focus();F.trigger("open.xdsoft");break;case"hide":F.trigger("close.xdsoft");break;case"destroy":u(a(this));break;case"reset":this.value=this.defaultValue;if(!this.value||!F.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,g.format))){F.data("changed",false)}F.data("xdsoft_datetime").setCurrentTime(this.value);break}}else{F.setOptions(e)}return 0}else{if((a.type(e)!=="string")){if(!g.lazyInit||g.open||g.inline){f(a(this))}else{k(a(this))}}}})};a.fn.datetimepicker.defaults=b})(jQuery);(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a}else{a(jQuery)}}}(function(e){var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"];var g="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];var f,a;if(e.event.fixHooks){for(var b=d.length;b;){e.event.fixHooks[d[--b]]=e.event.mouseHooks}}e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var h=g.length;h;){this.addEventListener(g[--h],c,false)}}else{this.onmousewheel=c}},teardown:function(){if(this.removeEventListener){for(var h=g.length;h;){this.removeEventListener(g[--h],c,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(h){return h?this.bind("mousewheel",h):this.trigger("mousewheel")},unmousewheel:function(h){return this.unbind("mousewheel",h)}});function c(h){var j=h||window.event,o=[].slice.call(arguments,1),r=0,l=0,k=0,n=0,m=0,p;h=e.event.fix(j);h.type="mousewheel";if(j.wheelDelta){r=j.wheelDelta}if(j.detail){r=j.detail*-1}if(j.deltaY){k=j.deltaY*-1;r=k}if(j.deltaX){l=j.deltaX;r=l*-1}if(j.wheelDeltaY!==undefined){k=j.wheelDeltaY}if(j.wheelDeltaX!==undefined){l=j.wheelDeltaX*-1}n=Math.abs(r);if(!f||n<f){f=n}m=Math.max(Math.abs(k),Math.abs(l));if(!a||m<a){a=m}p=r>0?"floor":"ceil";r=Math[p](r/f);l=Math[p](l/a);k=Math[p](k/a);o.unshift(h,r,l,k);return(e.event.dispatch||e.event.handle).apply(this,o)}}));Date.parseFunctions={count:0};Date.parseRegexes=[];Date.formatFunctions={count:0};Date.prototype.dateFormat=function(c){if(c=="unixtime"){return parseInt(this.getTime()/1000)}if(Date.formatFunctions[c]==null){Date.createNewFormat(c)}var d=Date.formatFunctions[c];return this[d]()};Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;var code="Date.prototype."+funcName+" = function() {return ";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;code+="'"+String.escape(ch)+"' + "}else{code+=Date.getFormatCode(ch)}}}eval(code.substring(0,code.length-3)+";}")};Date.getFormatCode=function(b){switch(b){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(b)+"' + "}};Date.parseDate=function(e,f){if(f=="unixtime"){return new Date(!isNaN(parseInt(e))?parseInt(e)*1000:0)}if(Date.parseFunctions[f]==null){Date.createParser(f)}var d=Date.parseFunctions[f];return Date[d](e)};Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++;var regexNum=Date.parseRegexes.length;var currentGroup=1;Date.parseFunctions[format]=funcName;var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {";var regex="";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;regex+=String.escape(ch)}else{obj=Date.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g;regex+=obj.s;if(obj.g&&obj.c){code+=obj.c}}}}code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}";code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}";Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$");eval(code)};Date.formatCodeToRegex=function(c,d){switch(c){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+d+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+d+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+d+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+d+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+d+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+d+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+d+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+d+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+d+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+d+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+d+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+d+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(c)}}};Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")};Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")};Date.prototype.getDayOfYear=function(){var d=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var c=0;c<this.getMonth();++c){d+=Date.daysInMonth[c]}return d+this.getDate()};Date.prototype.getWeekOfYear=function(){var d=this.getDayOfYear()+(4-this.getDay());var e=new Date(this.getFullYear(),0,1);var f=(7-e.getDay()+4);return String.leftPad(Math.ceil((d-f)/7)+1,2,"0")};Date.prototype.isLeapYear=function(){var b=this.getFullYear();return((b&3)==0&&(b%100||(b%400==0&&b)))};Date.prototype.getFirstDayOfMonth=function(){var b=(this.getDay()-(this.getDate()-1))%7;return(b<0)?(b+7):b};Date.prototype.getLastDayOfMonth=function(){var b=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return(b<0)?(b+7):b};Date.prototype.getDaysInMonth=function(){Date.daysInMonth[1]=this.isLeapYear()?29:28;return Date.daysInMonth[this.getMonth()]};Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};String.escape=function(b){return b.replace(/('|\\)/g,"\\$1")};String.leftPad=function(g,e,h){var f=new String(g);if(h==null){h=" "}while(f.length<e){f=h+f}return f};Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.y2kYear=50;Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};(function(d,c){if(typeof module!=="undefined"&&module.exports){module.exports=c(require("jquery")(d))}else{if(typeof define==="function"&&define.amd){define("bootstrap-dialog",["jquery"],function(a){return c(a)})}else{d.BootstrapDialog=c(d.jQuery)}}}(this,function(g){var e=g.fn.modal.Constructor;var h=function(a,b){e.call(this,a,b)};h.getModalVersion=function(){var a=null;if(typeof g.fn.modal.Constructor.VERSION==="undefined"){a="v3.1"}else{if(/3\.2\.\d+/.test(g.fn.modal.Constructor.VERSION)){a="v3.2"}else{a="v3.3"}}return a};h.ORIGINAL_BODY_PADDING=g("body").css("padding-right")||0;h.METHODS_TO_OVERRIDE={};h.METHODS_TO_OVERRIDE["v3.1"]={};h.METHODS_TO_OVERRIDE["v3.2"]={hide:function(a){if(a){a.preventDefault()}a=g.Event("hide.bs.modal");this.$element.trigger(a);if(!this.isShown||a.isDefaultPrevented()){return}this.isShown=false;var b=this.getGlobalOpenedDialogs();if(b.length===0){this.$body.removeClass("modal-open")}this.resetScrollbar();this.escape();g(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.bs.modal");g.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",g.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()}};h.METHODS_TO_OVERRIDE["v3.3"]={setScrollbar:function(){var a=h.ORIGINAL_BODY_PADDING;if(this.bodyIsOverflowing){this.$body.css("padding-right",a+this.scrollbarWidth)}},resetScrollbar:function(){var a=this.getGlobalOpenedDialogs();if(a.length===0){this.$body.css("padding-right",h.ORIGINAL_BODY_PADDING)}},hideModal:function(){this.$element.hide();this.backdrop(g.proxy(function(){var a=this.getGlobalOpenedDialogs();if(a.length===0){this.$body.removeClass("modal-open")}this.resetAdjustments();this.resetScrollbar();this.$element.trigger("hidden.bs.modal")},this))}};h.prototype={constructor:h,getGlobalOpenedDialogs:function(){var a=[];g.each(f.dialogs,function(b,c){if(c.isRealized()&&c.isOpened()){a.push(c)}});return a}};h.prototype=g.extend(h.prototype,e.prototype,h.METHODS_TO_OVERRIDE[h.getModalVersion()]);var f=function(a){this.defaultOptions=g.extend(true,{id:f.newGuid(),buttons:[],data:{},onshow:null,onshown:null,onhide:null,onhidden:null},f.defaultOptions);this.indexedButtons={};this.registeredButtonHotkeys={};this.draggableData={isMouseDown:false,mouseOffset:{}};this.realized=false;this.opened=false;this.initOptions(a);this.holdThisInstance()};f.NAMESPACE="bootstrap-dialog";f.TYPE_DEFAULT="type-default";f.TYPE_INFO="type-info";f.TYPE_PRIMARY="type-primary";f.TYPE_SUCCESS="type-success";f.TYPE_WARNING="type-warning";f.TYPE_DANGER="type-danger";f.DEFAULT_TEXTS={};f.DEFAULT_TEXTS[f.TYPE_DEFAULT]="Information";f.DEFAULT_TEXTS[f.TYPE_INFO]="Information";f.DEFAULT_TEXTS[f.TYPE_PRIMARY]="Information";f.DEFAULT_TEXTS[f.TYPE_SUCCESS]="Success";f.DEFAULT_TEXTS[f.TYPE_WARNING]="Warning";f.DEFAULT_TEXTS[f.TYPE_DANGER]="Danger";f.DEFAULT_TEXTS.OK="OK";f.DEFAULT_TEXTS.CANCEL="Cancel";f.SIZE_NORMAL="size-normal";f.SIZE_SMALL="size-small";f.SIZE_WIDE="size-wide";f.SIZE_LARGE="size-large";f.BUTTON_SIZES={};f.BUTTON_SIZES[f.SIZE_NORMAL]="";f.BUTTON_SIZES[f.SIZE_SMALL]="";f.BUTTON_SIZES[f.SIZE_WIDE]="";f.BUTTON_SIZES[f.SIZE_LARGE]="btn-lg";f.ICON_SPINNER="glyphicon glyphicon-asterisk";f.defaultOptions={type:f.TYPE_PRIMARY,size:f.SIZE_NORMAL,cssClass:"",title:null,message:null,nl2br:true,closable:true,closeByBackdrop:true,closeByKeyboard:true,spinicon:f.ICON_SPINNER,autodestroy:true,draggable:false,animate:true,description:""};f.configDefaultOptions=function(a){f.defaultOptions=g.extend(true,f.defaultOptions,a)};f.dialogs={};f.openAll=function(){g.each(f.dialogs,function(a,b){b.open()})};f.closeAll=function(){g.each(f.dialogs,function(a,b){b.close()})};f.moveFocus=function(){var a=null;g.each(f.dialogs,function(b,c){a=c});if(a!==null&&a.isRealized()){a.getModal().focus()}};f.METHODS_TO_OVERRIDE={};f.METHODS_TO_OVERRIDE["v3.1"]={handleModalBackdropEvent:function(){this.getModal().on("click",{dialog:this},function(a){a.target===this&&a.data.dialog.isClosable()&&a.data.dialog.canCloseByBackdrop()&&a.data.dialog.close()});return this},updateZIndex:function(){var c=1040;var b=1050;var a=0;g.each(f.dialogs,function(m,l){a++});var d=this.getModal();var j=d.data("bs.modal").$backdrop;d.css("z-index",b+(a-1)*20);j.css("z-index",c+(a-1)*20);return this},open:function(){!this.isRealized()&&this.realize();this.getModal().modal("show");this.updateZIndex();this.setOpened(true);return this}};f.METHODS_TO_OVERRIDE["v3.2"]={handleModalBackdropEvent:f.METHODS_TO_OVERRIDE["v3.1"]["handleModalBackdropEvent"],updateZIndex:f.METHODS_TO_OVERRIDE["v3.1"]["updateZIndex"],open:f.METHODS_TO_OVERRIDE["v3.1"]["open"]};f.METHODS_TO_OVERRIDE["v3.3"]={};f.prototype={constructor:f,initOptions:function(a){this.options=g.extend(true,this.defaultOptions,a);return this},holdThisInstance:function(){f.dialogs[this.getId()]=this;return this},initModalStuff:function(){this.setModal(this.createModal()).setModalDialog(this.createModalDialog()).setModalContent(this.createModalContent()).setModalHeader(this.createModalHeader()).setModalBody(this.createModalBody()).setModalFooter(this.createModalFooter());this.getModal().append(this.getModalDialog());this.getModalDialog().append(this.getModalContent());this.getModalContent().append(this.getModalHeader()).append(this.getModalBody()).append(this.getModalFooter());return this},createModal:function(){var a=g('<div class="modal" tabindex="-1" role="dialog" aria-hidden="true"></div>');a.prop("id",this.getId()).attr("aria-labelledby",this.getId()+"_title");return a},getModal:function(){return this.$modal},setModal:function(a){this.$modal=a;return this},createModalDialog:function(){return g('<div class="modal-dialog"></div>')},getModalDialog:function(){return this.$modalDialog},setModalDialog:function(a){this.$modalDialog=a;return this},createModalContent:function(){return g('<div class="modal-content"></div>')},getModalContent:function(){return this.$modalContent},setModalContent:function(a){this.$modalContent=a;return this},createModalHeader:function(){return g('<div class="modal-header"></div>')},getModalHeader:function(){return this.$modalHeader},setModalHeader:function(a){this.$modalHeader=a;return this},createModalBody:function(){return g('<div class="modal-body"></div>')},getModalBody:function(){return this.$modalBody},setModalBody:function(a){this.$modalBody=a;return this},createModalFooter:function(){return g('<div class="modal-footer"></div>')},getModalFooter:function(){return this.$modalFooter},setModalFooter:function(a){this.$modalFooter=a;return this},createDynamicContent:function(a){var b=null;if(typeof a==="function"){b=a.call(a,this)}else{b=a}if(typeof b==="string"){b=this.formatStringContent(b)}return b},formatStringContent:function(a){if(this.options.nl2br){return a.replace(/\r\n/g,"<br />").replace(/[\r\n]/g,"<br />")}return a},setData:function(b,a){this.options.data[b]=a;return this},getData:function(a){return this.options.data[a]},setId:function(a){this.options.id=a;return this},getId:function(){return this.options.id},getType:function(){return this.options.type},setType:function(a){this.options.type=a;this.updateType();return this},updateType:function(){if(this.isRealized()){var a=[f.TYPE_DEFAULT,f.TYPE_INFO,f.TYPE_PRIMARY,f.TYPE_SUCCESS,f.TYPE_WARNING,f.TYPE_DANGER];this.getModal().removeClass(a.join(" ")).addClass(this.getType())}return this},getSize:function(){return this.options.size},setSize:function(a){this.options.size=a;this.updateSize();return this},updateSize:function(){if(this.isRealized()){var a=this;this.getModal().removeClass(f.SIZE_NORMAL).removeClass(f.SIZE_SMALL).removeClass(f.SIZE_WIDE).removeClass(f.SIZE_LARGE);this.getModal().addClass(this.getSize());this.getModalDialog().removeClass("modal-sm");if(this.getSize()===f.SIZE_SMALL){this.getModalDialog().addClass("modal-sm")}this.getModalDialog().removeClass("modal-lg");if(this.getSize()===f.SIZE_WIDE){this.getModalDialog().addClass("modal-lg")}g.each(this.options.buttons,function(m,d){var b=a.getButton(d.id);var n=["btn-lg","btn-sm","btn-xs"];var c=false;if(typeof d.cssClass==="string"){var l=d.cssClass.split(" ");g.each(l,function(k,j){if(g.inArray(j,n)!==-1){c=true}})}if(!c){b.removeClass(n.join(" "));b.addClass(a.getButtonSize())}})}return this},getCssClass:function(){return this.options.cssClass},setCssClass:function(a){this.options.cssClass=a;return this},getTitle:function(){return this.options.title},setTitle:function(a){this.options.title=a;this.updateTitle();return this},updateTitle:function(){if(this.isRealized()){var a=this.getTitle()!==null?this.createDynamicContent(this.getTitle()):this.getDefaultText();this.getModalHeader().find("."+this.getNamespace("title")).html("").append(a).prop("id",this.getId()+"_title")}return this},getMessage:function(){return this.options.message},setMessage:function(a){this.options.message=a;this.updateMessage();return this},updateMessage:function(){if(this.isRealized()){var a=this.createDynamicContent(this.getMessage());this.getModalBody().find("."+this.getNamespace("message")).html("").append(a)}return this},isClosable:function(){return this.options.closable},setClosable:function(a){this.options.closable=a;this.updateClosable();return this},setCloseByBackdrop:function(a){this.options.closeByBackdrop=a;return this},canCloseByBackdrop:function(){return this.options.closeByBackdrop},setCloseByKeyboard:function(a){this.options.closeByKeyboard=a;return this},canCloseByKeyboard:function(){return this.options.closeByKeyboard},isAnimate:function(){return this.options.animate},setAnimate:function(a){this.options.animate=a;return this},updateAnimate:function(){if(this.isRealized()){this.getModal().toggleClass("fade",this.isAnimate())}return this},getSpinicon:function(){return this.options.spinicon},setSpinicon:function(a){this.options.spinicon=a;return this},addButton:function(a){this.options.buttons.push(a);return this},addButtons:function(a){var b=this;g.each(a,function(d,c){b.addButton(c)});return this},getButtons:function(){return this.options.buttons},setButtons:function(a){this.options.buttons=a;this.updateButtons();return this},getButton:function(a){if(typeof this.indexedButtons[a]!=="undefined"){return this.indexedButtons[a]}return null},getButtonSize:function(){if(typeof f.BUTTON_SIZES[this.getSize()]!=="undefined"){return f.BUTTON_SIZES[this.getSize()]}return""},updateButtons:function(){if(this.isRealized()){if(this.getButtons().length===0){this.getModalFooter().hide()}else{this.getModalFooter().find("."+this.getNamespace("footer")).html("").append(this.createFooterButtons())}}return this},isAutodestroy:function(){return this.options.autodestroy},setAutodestroy:function(a){this.options.autodestroy=a},getDescription:function(){return this.options.description},setDescription:function(a){this.options.description=a;return this},getDefaultText:function(){return f.DEFAULT_TEXTS[this.getType()]},getNamespace:function(a){return f.NAMESPACE+"-"+a},createHeaderContent:function(){var a=g("<div></div>");a.addClass(this.getNamespace("header"));a.append(this.createTitleContent());a.prepend(this.createCloseButton());return a},createTitleContent:function(){var a=g("<div></div>");a.addClass(this.getNamespace("title"));return a},createCloseButton:function(){var a=g("<div></div>");a.addClass(this.getNamespace("close-button"));var b=g('<button class="close">&times;</button>');a.append(b);a.on("click",{dialog:this},function(c){c.data.dialog.close()});return a},createBodyContent:function(){var a=g("<div></div>");a.addClass(this.getNamespace("body"));a.append(this.createMessageContent());return a},createMessageContent:function(){var a=g("<div></div>");a.addClass(this.getNamespace("message"));return a},createFooterContent:function(){var a=g("<div></div>");a.addClass(this.getNamespace("footer"));return a},createFooterButtons:function(){var b=this;var a=g("<div></div>");a.addClass(this.getNamespace("footer-buttons"));this.indexedButtons={};g.each(this.options.buttons,function(j,d){if(!d.id){d.id=f.newGuid()}var c=b.createButton(d);b.indexedButtons[d.id]=c;a.append(c)});return a},createButton:function(b){var a=g('<button class="btn"></button>');a.prop("id",b.id);if(typeof b.icon!=="undefined"&&g.trim(b.icon)!==""){a.append(this.createButtonIcon(b.icon))}if(typeof b.label!=="undefined"){a.append(b.label)}if(typeof b.cssClass!=="undefined"&&g.trim(b.cssClass)!==""){a.addClass(b.cssClass)}else{a.addClass("btn-default")}if(typeof b.hotkey!=="undefined"){this.registeredButtonHotkeys[b.hotkey]=a}a.on("click",{dialog:this,$button:a,button:b},function(d){var k=d.data.dialog;var c=d.data.$button;var l=d.data.button;if(typeof l.action==="function"){l.action.call(c,k)}if(l.autospin){c.toggleSpin(true)}});this.enhanceButton(a);return a},enhanceButton:function(a){a.dialog=this;a.toggleEnable=function(c){var b=this;if(typeof c!=="undefined"){b.prop("disabled",!c).toggleClass("disabled",!c)}else{b.prop("disabled",!b.prop("disabled"))}return b};a.enable=function(){var b=this;b.toggleEnable(true);return b};a.disable=function(){var b=this;b.toggleEnable(false);return b};a.toggleSpin=function(b){var c=this;var d=c.dialog;var j=c.find("."+d.getNamespace("button-icon"));if(typeof b==="undefined"){b=!(a.find(".icon-spin").length>0)}if(b){j.hide();a.prepend(d.createButtonIcon(d.getSpinicon()).addClass("icon-spin"))}else{j.show();a.find(".icon-spin").remove()}return c};a.spin=function(){var b=this;b.toggleSpin(true);return b};a.stopSpin=function(){var b=this;b.toggleSpin(false);return b};return this},createButtonIcon:function(a){var b=g("<span></span>");b.addClass(this.getNamespace("button-icon")).addClass(a);return b},enableButtons:function(a){g.each(this.indexedButtons,function(b,c){c.toggleEnable(a)});return this},updateClosable:function(){if(this.isRealized()){this.getModalHeader().find("."+this.getNamespace("close-button")).toggle(this.isClosable())}return this},onShow:function(a){this.options.onshow=a;return this},onShown:function(a){this.options.onshown=a;return this},onHide:function(a){this.options.onhide=a;return this},onHidden:function(a){this.options.onhidden=a;return this},isRealized:function(){return this.realized},setRealized:function(a){this.realized=a;return this},isOpened:function(){return this.opened},setOpened:function(a){this.opened=a;return this},handleModalEvents:function(){this.getModal().on("show.bs.modal",{dialog:this},function(a){var b=a.data.dialog;if(b.isModalEvent(a)&&typeof b.options.onshow==="function"){return b.options.onshow(b)}});this.getModal().on("shown.bs.modal",{dialog:this},function(a){var b=a.data.dialog;b.isModalEvent(a)&&typeof b.options.onshown==="function"&&b.options.onshown(b)});this.getModal().on("hide.bs.modal",{dialog:this},function(a){var b=a.data.dialog;if(b.isModalEvent(a)&&typeof b.options.onhide==="function"){return b.options.onhide(b)}});this.getModal().on("hidden.bs.modal",{dialog:this},function(a){var b=a.data.dialog;b.isModalEvent(a)&&typeof b.options.onhidden==="function"&&b.options.onhidden(b);b.isAutodestroy()&&g(this).remove();f.moveFocus()});this.handleModalBackdropEvent();this.getModal().on("keyup",{dialog:this},function(a){a.which===27&&a.data.dialog.isClosable()&&a.data.dialog.canCloseByKeyboard()&&a.data.dialog.close()});this.getModal().on("keyup",{dialog:this},function(b){var c=b.data.dialog;if(typeof c.registeredButtonHotkeys[b.which]!=="undefined"){var a=g(c.registeredButtonHotkeys[b.which]);!a.prop("disabled")&&a.focus().trigger("click")}});return this},handleModalBackdropEvent:function(){this.getModal().on("click",{dialog:this},function(a){g(a.target).hasClass("modal-backdrop")&&a.data.dialog.isClosable()&&a.data.dialog.canCloseByBackdrop()&&a.data.dialog.close()});return this},isModalEvent:function(a){return typeof a.namespace!=="undefined"&&a.namespace==="bs.modal"},makeModalDraggable:function(){if(this.options.draggable){this.getModalHeader().addClass(this.getNamespace("draggable")).on("mousedown",{dialog:this},function(a){var b=a.data.dialog;b.draggableData.isMouseDown=true;var c=b.getModalDialog().offset();b.draggableData.mouseOffset={top:a.clientY-c.top,left:a.clientX-c.left}});this.getModal().on("mouseup mouseleave",{dialog:this},function(a){a.data.dialog.draggableData.isMouseDown=false});g("body").on("mousemove",{dialog:this},function(a){var b=a.data.dialog;if(!b.draggableData.isMouseDown){return}b.getModalDialog().offset({top:a.clientY-b.draggableData.mouseOffset.top,left:a.clientX-b.draggableData.mouseOffset.left})})}return this},realize:function(){this.initModalStuff();this.getModal().addClass(f.NAMESPACE).addClass(this.getCssClass());this.updateSize();if(this.getDescription()){this.getModal().attr("aria-describedby",this.getDescription())}this.getModalFooter().append(this.createFooterContent());this.getModalHeader().append(this.createHeaderContent());this.getModalBody().append(this.createBodyContent());this.getModal().data("bs.modal",new h(this.getModal(),{backdrop:"static",keyboard:false,show:false}));this.makeModalDraggable();this.handleModalEvents();this.setRealized(true);this.updateButtons();this.updateType();this.updateTitle();this.updateMessage();this.updateClosable();this.updateAnimate();this.updateSize();return this},open:function(){!this.isRealized()&&this.realize();this.getModal().modal("show");this.setOpened(true);return this},close:function(){if(this.isAutodestroy()){delete f.dialogs[this.getId()]}this.getModal().modal("hide");this.setOpened(false);return this}};f.prototype=g.extend(f.prototype,f.METHODS_TO_OVERRIDE[h.getModalVersion()]);f.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0,c=a==="x"?b:(b&3|8);return c.toString(16)})};f.show=function(a){return new f(a).open()};f.alert=function(){var a={};var b={type:f.TYPE_PRIMARY,title:null,message:null,closable:true,buttonLabel:f.DEFAULT_TEXTS.OK,callback:null};if(typeof arguments[0]==="object"&&arguments[0].constructor==={}.constructor){a=g.extend(true,b,arguments[0])}else{a=g.extend(true,b,{message:arguments[0],closable:false,buttonLabel:f.DEFAULT_TEXTS.OK,callback:typeof arguments[1]!=="undefined"?arguments[1]:null})}return new f({type:a.type,title:a.title,message:a.message,closable:a.closable,data:{callback:a.callback},onhide:function(c){!c.getData("btnClicked")&&c.isClosable()&&typeof c.getData("callback")==="function"&&c.getData("callback")(false)},buttons:[{label:a.buttonLabel,action:function(c){c.setData("btnClicked",true);typeof c.getData("callback")==="function"&&c.getData("callback")(true);c.close()}}]}).open()};f.confirm=function(b,a){return new f({title:"Confirmation",message:b,closable:false,data:{callback:a},buttons:[{label:f.DEFAULT_TEXTS.CANCEL,action:function(c){typeof c.getData("callback")==="function"&&c.getData("callback")(false);c.close()}},{label:f.DEFAULT_TEXTS.OK,cssClass:"btn-primary",action:function(c){typeof c.getData("callback")==="function"&&c.getData("callback")(true);c.close()}}]}).open()};f.warning=function(b,a){return new f({type:f.TYPE_WARNING,message:b}).open()};f.danger=function(b,a){return new f({type:f.TYPE_DANGER,message:b}).open()};f.success=function(b,a){return new f({type:f.TYPE_SUCCESS,message:b}).open()};return f}));!function(){function h5(a){return a&&(a.ownerDocument||a.document||a).documentElement}function hX(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function iy(b,a){return a>b?-1:b>a?1:b>=a?0:0/0}function h0(a){return null===a?0/0:+a}function hV(a){return !isNaN(a)}function ik(a){return{left:function(d,g,f,b){for(arguments.length<3&&(f=0),arguments.length<4&&(b=d.length);b>f;){var c=f+b>>>1;a(d[c],g)<0?f=c+1:b=c}return f},right:function(d,g,f,b){for(arguments.length<3&&(f=0),arguments.length<4&&(b=d.length);b>f;){var c=f+b>>>1;a(d[c],g)>0?b=c:f=c+1}return f}}}function h4(a){return a.length}function iF(b){for(var a=1;b*a%1;){a*=10}return a}function iB(c,a){for(var b in a){Object.defineProperty(c.prototype,b,{value:a[b],enumerable:!1})}}function ib(){this._=Object.create(null)}function hY(a){return(a+="")===dA||a[0]===bh?bh+a:a}function iv(a){return(a+="")[0]===bh?a.slice(1):a}function ip(a){return hY(a) in this._}function iq(a){return(a=hY(a)) in this._&&delete this._[a]}function h3(){var b=[];for(var a in this._){b.push(iv(a))}return b}function hT(){var b=0;for(var a in this._){++b}return b}function iA(){for(var a in this._){return !1}return !0}function h8(){this._=Object.create(null)}function hQ(a){return a}function i4(c,a,b){return function(){var d=b.apply(a,arguments);return d===a?c:d}}function hR(f,b){if(b in f){return b}b=b.charAt(0).toUpperCase()+b.slice(1);for(var d=0,c=hK.length;c>d;++d){var a=hK[d]+b;if(a in f){return a}}}function iE(){}function iG(){}function hS(d){function a(){for(var g,h=c,e=-1,f=h.length;++e<f;){(g=h[e].on)&&g.apply(this,arguments)}return d}var c=[],b=new ib;return a.on=function(g,e){var f,h=b.get(g);return arguments.length<2?h&&h.on:(h&&(h.on=null,c=c.slice(0,f=c.indexOf(h)).concat(c.slice(f+1)),b.remove(g)),e&&c.push(b.set(g,{on:e})),d)},a}function iU(){bX.event.preventDefault()}function id(){for(var b,a=bX.event;b=a.sourceEvent;){a=b}return a}function jn(d){for(var a=new iG,c=0,b=arguments.length;++c<b;){a[arguments[c]]=hS(a)}return a.of=function(g,f){return function(e){try{var h=e.sourceEvent=bX.event;e.target=d,bX.event=e,a[e.type].apply(g,f)}finally{bX.event=h}}},a}function jx(a){return kh(a,aG),a}function i2(a){return"function"==typeof a?a:function(){return g7(a,this)}}function jv(a){return"function"==typeof a?a:function(){return aA(a,this)}}function hO(k,f){function h(){this.removeAttribute(k)}function g(){this.removeAttributeNS(k.space,k.local)}function c(){this.setAttribute(k,f)}function d(){this.setAttributeNS(k.space,k.local,f)}function j(){var a=f.apply(this,arguments);null==a?this.removeAttribute(k):this.setAttribute(k,a)}function b(){var a=f.apply(this,arguments);null==a?this.removeAttributeNS(k.space,k.local):this.setAttributeNS(k.space,k.local,a)}return k=bX.ns.qualify(k),null==f?k.local?g:h:"function"==typeof f?k.local?b:j:k.local?d:c}function h1(a){return a.trim().replace(/\s+/g," ")}function i5(a){return new RegExp("(?:^|\\s+)"+bX.requote(a)+"(?:\\s+|$)","g")}function iS(a){return(a+"").trim().split(/^|\s+/)}function iV(f,b){function d(){for(var g=-1;++g<a;){f[g](this,b)}}function c(){for(var h=-1,g=b.apply(this,arguments);++h<a;){f[h](this,g)}}f=iS(f).map(jp);var a=f.length;return"function"==typeof b?c:d}function jp(b){var a=i5(b);return function(f,d){if(c=f.classList){return d?c.add(b):c.remove(b)}var c=f.getAttribute("class")||"";d?(a.lastIndex=0,a.test(c)||f.setAttribute("class",h1(c+" "+b))):f.setAttribute("class",h1(c.replace(a," ")))}}function iY(g,c,f){function d(){this.style.removeProperty(g)}function a(){this.style.setProperty(g,c,f)}function b(){var e=c.apply(this,arguments);null==e?this.style.removeProperty(g):this.style.setProperty(g,e,f)}return null==c?d:"function"==typeof c?b:a}function iR(f,b){function d(){delete this[f]}function c(){this[f]=b}function a(){var g=b.apply(this,arguments);null==g?delete this[f]:this[f]=g}return null==b?d:"function"==typeof b?a:c}function ih(c){function a(){var d=this.ownerDocument,f=this.namespaceURI;return f?d.createElementNS(f,c):d.createElement(c)}function b(){return this.ownerDocument.createElementNS(c.space,c.local)}return"function"==typeof c?c:(c=bX.ns.qualify(c)).local?b:a}function jk(){var a=this.parentNode;a&&a.removeChild(this)}function jf(a){return{__data__:a}}function iZ(a){return function(){return jq(this,a)}}function jd(a){return arguments.length||(a=iy),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function iL(k,f){for(var h=0,g=k.length;g>h;h++){for(var c,d=k[h],j=0,b=d.length;b>j;j++){(c=d[j])&&f(c,j,h)}}return k}function iK(a){return kh(a,e6),a}function iP(c){var a,b;return function(g,e,f){var h,d=c[f].update,j=d.length;for(f!=b&&(b=f,a=0),e>=a&&(a=e+1);!(h=d[a])&&++a<j;){}return h}}function iM(f,s,j){function b(){var a=this[d];a&&(this.removeEventListener(f,a,a.$),delete this[d])}function p(){var a=k(s,cR(arguments));b.call(this),this.addEventListener(f,this[d]=a,a.$=j),a._=s}function h(){var c,n=new RegExp("^__on([^.]+)"+bX.requote(f)+"$");for(var l in this){if(c=l.match(n)){var a=this[l];this.removeEventListener(c[1],a,a.$),delete this[l]}}}var d="__on"+f,m=f.indexOf("."),k=jZ;m>0&&(f=f.slice(0,m));var g=fq.get(f);return g&&(f=g,k=jw),m?s?p:b:s?iE:h}function jZ(b,a){return function(d){var c=bX.event;bX.event=d,a[0]=this.__data__;try{b.apply(this,a)}finally{bX.event=c}}}function jw(c,a){var b=jZ(c,a);return function(f){var d=this,e=f.relatedTarget;e&&(e===d||8&e.compareDocumentPosition(d))||b.call(d,f)}}function iN(g){var f=".dragsuppress-"+ ++cG,c="click"+f,d=bX.select(hX(g)).on("touchmove"+f,iU).on("dragstart"+f,iU).on("selectstart"+f,iU);if(null==a5&&(a5="onselectstart" in g?!1:hR(g.style,"userSelect")),a5){var h=h5(g).style,b=h[a5];h[a5]="none"}return function(e){if(d.on(f,null),a5&&(h[a5]=b),e){var a=function(){d.on(c,null)};d.on(c,function(){iU(),a()},!0),setTimeout(a,0)}}}function i9(j,g){g.changedTouches&&(g=g.changedTouches[0]);var f=j.ownerSVGElement||j;if(f.createSVGPoint){var c=f.createSVGPoint();if(0>gP){var d=hX(j);if(d.scrollX||d.scrollY){f=bX.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var h=f[0][0].getScreenCTM();gP=!(h.f||h.e),f.remove()}}return gP?(c.x=g.pageX,c.y=g.pageY):(c.x=g.clientX,c.y=g.clientY),c=c.matrixTransform(j.getScreenCTM().inverse()),[c.x,c.y]}var b=j.getBoundingClientRect();return[g.clientX-b.left-j.clientLeft,g.clientY-b.top-j.clientTop]}function jg(){return bX.event.changedTouches[0].identifier}function i8(a){return a>0?1:0>a?-1:0}function iX(c,a,b){return(a[0]-c[0])*(b[1]-c[1])-(a[1]-c[1])*(b[0]-c[0])}function d2(a){return a>1?0:-1>a?c9:Math.acos(a)}function bL(a){return a>1?fx:-1>a?-fx:Math.asin(a)}function g9(a){return((a=Math.exp(a))-1/a)/2}function cD(a){return((a=Math.exp(a))+1/a)/2}function bq(a){return((a=Math.exp(2*a))-1)/(a+1)}function fQ(a){return(a=Math.sin(a/2))*a}function dG(){}function jH(c,a,b){return this instanceof jH?(this.h=+c,this.s=+a,void (this.l=+b)):arguments.length<2?c instanceof jH?new jH(c.h,c.s,c.l):iQ(""+c,ak,jH):new jH(c,a,b)}function hW(h,c,f){function d(e){return e>360?e-=360:0>e&&(e+=360),60>e?b+(g-b)*e/60:180>e?g:240>e?b+(g-b)*(240-e)/60:b}function a(e){return Math.round(255*d(e))}var b,g;return h=isNaN(h)?0:(h%=360)<0?h+360:h,c=isNaN(c)?0:0>c?0:c>1?1:c,f=0>f?0:f>1?1:f,g=0.5>=f?f*(1+c):f+c-f*c,b=2*f-g,new ey(a(h+120),a(h),a(h-120))}function eQ(c,a,b){return this instanceof eQ?(this.h=+c,this.c=+a,void (this.l=+b)):arguments.length<2?c instanceof eQ?new eQ(c.h,c.c,c.l):c instanceof gR?gz(c.l,c.a,c.b):gz((c=aK((c=bX.rgb(c)).r,c.g,c.b)).l,c.a,c.b):new eQ(c,a,b)}function b3(c,a,b){return isNaN(c)&&(c=0),isNaN(a)&&(a=0),new gR(b,Math.cos(c*=bw)*a,Math.sin(c)*a)}function gR(c,a,b){return this instanceof gR?(this.l=+c,this.a=+a,void (this.b=+b)):arguments.length<2?c instanceof gR?new gR(c.l,c.a,c.b):c instanceof eQ?b3(c.h,c.c,c.l):aK((c=ey(c)).r,c.g,c.b):new gR(c,a,b)}function f8(g,c,f){var d=(g+16)/116,a=d+c/500,b=d-f/200;return a=dj(a)*dg,d=dj(d)*eh,b=dj(b)*b6,new ey(hA(3.2404542*a-1.5371385*d-0.4985314*b),hA(-0.969266*a+1.8760108*d+0.041556*b),hA(0.0556434*a-0.2040259*d+1.0572252*b))}function gz(c,a,b){return c>0?new eQ(Math.atan2(b,a)*f6,Math.sqrt(a*a+b*b),c):new eQ(0/0,0/0,c)}function dj(a){return a>0.206893034?a*a*a:(a-4/29)/7.787037}function a2(a){return a>0.008856?Math.pow(a,1/3):7.787037*a+4/29}function hA(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function ey(c,a,b){return this instanceof ey?(this.r=~~c,this.g=~~a,void (this.b=~~b)):arguments.length<2?c instanceof ey?new ey(c.r,c.g,c.b):iQ(""+c,ey,hW):new ey(c,a,b)}function j2(a){return new ey(a>>16,a>>8&255,255&a)}function gW(a){return j2(a)+""}function kp(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function iQ(f,m,h){var b,l,g,d=0,k=0,j=0;if(b=/([a-z]+)\((.*)\)/.exec(f=f.toLowerCase())){switch(l=b[2].split(","),b[1]){case"hsl":return h(parseFloat(l[0]),parseFloat(l[1])/100,parseFloat(l[2])/100);case"rgb":return m(e8(l[0]),e8(l[1]),e8(l[2]))}}return(g=af.get(f))?m(g.r,g.g,g.b):(null==f||"#"!==f.charAt(0)||isNaN(g=parseInt(f.slice(1),16))||(4===f.length?(d=(3840&g)>>4,d=d>>4|d,k=240&g,k=k>>4|k,j=15&g,j=j<<4|j):7===f.length&&(d=(16711680&g)>>16,k=(65280&g)>>8,j=255&g)),m(d,k,j))}function ak(f,m,h){var b,l,g=Math.min(f/=255,m/=255,h/=255),d=Math.max(f,m,h),k=d-g,j=(d+g)/2;return k?(l=0.5>j?k/(d+g):k/(2-d-g),b=f==d?(m-h)/k+(h>m?6:0):m==d?(h-f)/k+2:(f-m)/k+4,b*=60):(b=0/0,l=j>0&&1>j?0:b),new jH(b,l,j)}function aK(g,c,f){g=eV(g),c=eV(c),f=eV(f);var d=a2((0.4124564*g+0.3575761*c+0.1804375*f)/dg),a=a2((0.2126729*g+0.7151522*c+0.072175*f)/eh),b=a2((0.0193339*g+0.119192*c+0.9503041*f)/b6);return gR(116*a-16,500*(d-a),200*(a-b))}function eV(a){return(a/=255)<=0.04045?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function e8(b){var a=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*a):a}function aT(a){return"function"==typeof a?a:function(){return a}}function cm(a){return function(b,d,c){return 2===arguments.length&&"function"==typeof d&&(c=d,d=null),gE(b,d,a,c)}}function gE(f,s,j,b){function p(){var e,a=k.status;if(!a&&jA(k)||a>=200&&300>a||304===a){try{e=j.call(h,k)}catch(c){return void d.error.call(h,c)}d.load.call(h,e)}else{d.error.call(h,k)}}var h={},d=bX.dispatch("beforesend","progress","load","error"),m={},k=new XMLHttpRequest,g=null;return !this.XDomainRequest||"withCredentials" in k||!/^(http(s)?:)?\/\//.test(f)||(k=new XDomainRequest),"onload" in k?k.onload=k.onerror=p:k.onreadystatechange=function(){k.readyState>3&&p()},k.onprogress=function(c){var a=bX.event;bX.event=c;try{d.progress.call(h,k)}finally{bX.event=a}},h.header=function(c,a){return c=(c+"").toLowerCase(),arguments.length<2?m[c]:(null==a?delete m[c]:m[c]=a+"",h)},h.mimeType=function(a){return arguments.length?(s=null==a?null:a+"",h):s},h.responseType=function(a){return arguments.length?(g=a,h):g},h.response=function(a){return j=a,h},["get","post"].forEach(function(a){h[a]=function(){return h.send.apply(h,[a].concat(cR(arguments)))}}),h.send=function(n,l,a){if(2===arguments.length&&"function"==typeof l&&(a=l,l=null),k.open(n,f,!0),null==s||"accept" in m||(m.accept=s+",*/*"),k.setRequestHeader){for(var c in m){k.setRequestHeader(c,m[c])}}return null!=s&&k.overrideMimeType&&k.overrideMimeType(s),null!=g&&(k.responseType=g),null!=a&&h.on("error",a).on("load",function(e){a(null,e)}),d.beforesend.call(h,k),k.send(null==l?null:l),h},h.abort=function(){return k.abort(),h},bX.rebind(h,d,"on"),null==b?h:h.get(bC(b))}function bC(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function jA(b){var a=b.responseType;return a&&"text"!==a?b.response:b.responseText}function cX(){var b=hh(),a=eD()-b;a>24?(isFinite(a)&&(clearTimeout(bV),bV=setTimeout(cX,a)),en=0):(en=1,cQ(cX))}function hh(){var a=Date.now();for(hq=hP;hq;){a>=hq.t&&(hq.f=hq.c(a-hq.t)),hq=hq.n}return a}function eD(){for(var c,a=hP,b=1/0;a;){a.f?a=c?c.n=a.n:hP=a.n:(a.t<b&&(b=a.t),a=(c=a).n)}return fO=c,b}function fg(b,a){return a-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function bd(c,a){var b=Math.pow(10,3*gL(8-a));return{scale:a>8?function(d){return d/b}:function(d){return d*b},symbol:c}}function fV(g){var c=g.decimal,f=g.thousands,d=g.grouping,a=g.currency,b=d&&f?function(p,k){for(var h=p.length,j=[],l=0,e=d[0],m=0;h>0&&e>0&&(m+e+1>k&&(e=Math.max(1,k-m)),j.push(p.substring(h-=e,h+e)),!((m+=e+1)>k));){e=d[l=(l+1)%d.length]}return j.reverse().join(f)}:hQ;return function(u){var C=f1.exec(u),j=C[1]||" ",t=C[2]||">",H=C[3]||"-",F=C[4]||"",x=C[5],J=+C[6],B=C[7],z=C[8],A=C[9],k=1,I="",E="",w=!1,G=!0;switch(z&&(z=+z.substring(1)),(x||"0"===j&&"="===t)&&(x=j="0",t="="),A){case"n":B=!0,A="g";break;case"%":k=100,E="%",A="f";break;case"p":k=100,E="%",A="r";break;case"b":case"o":case"x":case"X":"#"===F&&(I="0"+A.toLowerCase());case"c":G=!1;case"d":w=!0,z=0;break;case"s":k=-1,A="r"}"$"===F&&(I=a[0],E=a[1]),"r"!=A||z||(A="g"),null!=z&&("g"==A?z=Math.max(1,Math.min(21,z)):("e"==A||"f"==A)&&(z=Math.max(0,Math.min(20,z)))),A=dR.get(A)||eb;var D=x&&B;return function(h){var o=E;if(w&&h%1){return""}var K=0>h||0===h&&0>1/h?(h=-h,"-"):"-"===H?"":H;if(0>k){var p=bX.formatPrefix(h,z);h=p.scale(h),o=p.symbol+E}else{h*=k}h=A(h,z);var s,r,y=h.lastIndexOf(".");if(0>y){var v=G?h.lastIndexOf("e"):-1;0>v?(s=h,r=""):(s=h.substring(0,v),r=h.substring(v))}else{s=h.substring(0,y),r=c+h.substring(y+1)}!x&&B&&(s=b(s,1/0));var m=I.length+s.length+r.length+(D?0:K.length),l=J>m?new Array(m=J-m+1).join(j):"";return D&&(s=b(l+s,l.length?J-r.length:1/0)),K+=I,h=s+r,("<"===t?K+h+l:">"===t?l+K+h:"^"===t?l.substring(0,m>>=1)+K+h+l.substring(m):K+(D?h:l+h))+o}}}function eb(a){return a+""}function fz(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ax(f,m,h){function b(a){var n=f(a),c=g(n,1);return c-a>a-n?n:c}function l(a){return m(a=f(new iz(a-1)),1),a}function g(c,a){return m(c=new iz(+c),a),c}function d(t,p,e){var s=l(t),c=[];if(e>1){for(;p>s;){h(s)%e||c.push(new Date(+s)),m(s,1)}}else{for(;p>s;){c.push(new Date(+s)),m(s,1)}}return c}function k(p,a,o){try{iz=fz;var c=new fz;return c._=p,d(c,a,o)}finally{iz=Date}}f.floor=f,f.round=b,f.ceil=l,f.offset=g,f.range=d;var j=f.utc=jO(f);return j.floor=j,j.round=jO(b),j.ceil=jO(l),j.offset=jO(g),j.range=k,f}function jO(a){return function(b,d){try{iz=fz;var c=new fz;return c._=b,a(c,d)._}finally{iz=Date}}}function gg(U){function K(c){function a(h){for(var k,f,g,l=[],d=-1,m=0;++d<b;){37===c.charCodeAt(d)&&(l.push(c.slice(m,d)),null!=(f=cn[k=c.charAt(++d)])&&(k=c.charAt(++d)),(g=z[k])&&(k=g(h,null==f?"e"===k?" ":"0":f)),l.push(k),m=d+1)}return l.push(c.slice(m,d)),l.join("")}var b=c.length;return a.parse=function(f){var g={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},d=ae(g,c,f,0);if(d!=f.length){return null}"p" in g&&(g.H=g.H%12+12*g.p);var e=null!=g.Z&&iz!==fz,h=new (e?fz:iz);return"j" in g?h.setFullYear(g.y,0,g.j):"w" in g&&("W" in g||"U" in g)?(h.setFullYear(g.y,0,1),h.setFullYear(g.y,0,"W" in g?(g.w+6)%7+7*g.W-(h.getDay()+5)%7:g.w+7*g.U-(h.getDay()+6)%7)):h.setFullYear(g.y,g.m,g.d),h.setHours(g.H+(g.Z/100|0),g.M+g.Z%100,g.S,g.L),e?h._:h},a.toString=function(){return c},a}function ae(f,v,k,b){for(var s,h,d,p=0,m=v.length,g=k.length;m>p;){if(b>=g){return -1}if(s=v.charCodeAt(p++),37===s){if(d=v.charAt(p++),h=O[d in cn?v.charAt(p++):d],!h||(b=h(f,k,b))<0){return -1}}else{if(s!=k.charCodeAt(b++)){return -1}}}return b}function P(d,a,c){at.lastIndex=0;var b=at.exec(a.slice(c));return b?(d.w=G.get(b[0].toLowerCase()),c+b[0].length):-1}function I(d,a,c){F.lastIndex=0;var b=F.exec(a.slice(c));return b?(d.w=ao.get(b[0].toLowerCase()),c+b[0].length):-1}function Y(d,a,c){J.lastIndex=0;var b=J.exec(a.slice(c));return b?(d.m=Q.get(b[0].toLowerCase()),c+b[0].length):-1}function T(d,a,c){j.lastIndex=0;var b=j.exec(a.slice(c));return b?(d.m=X.get(b[0].toLowerCase()),c+b[0].length):-1}function ar(c,a,b){return ae(c,z.c.toString(),a,b)}function al(c,a,b){return ae(c,z.x.toString(),a,b)}function W(c,a,b){return ae(c,z.X.toString(),a,b)}function L(d,a,c){var b=B.get(a.slice(c,c+=2).toLowerCase());return null==b?-1:(d.p=b,c)}var ac=U.dateTime,Z=U.date,aa=U.time,R=U.periods,H=U.days,ai=U.shortDays,V=U.months,D=U.shortMonths;K.utc=function(c){function b(e){try{iz=fz;var d=new iz;return d._=e,a(d)}finally{iz=Date}}var a=K(c);return b.parse=function(e){try{iz=fz;var d=a.parse(e);return d&&d._}finally{iz=Date}},b.toString=a.toString,b},K.multi=K.utc.multi=jU;var B=bX.map(),F=cK(H),ao=cb(H),at=cK(ai),G=cb(ai),j=cK(V),X=cb(V),J=cK(D),Q=cb(D);R.forEach(function(b,a){B.set(b.toLowerCase(),a)});var z={a:function(a){return ai[a.getDay()]},A:function(a){return H[a.getDay()]},b:function(a){return D[a.getMonth()]},B:function(a){return V[a.getMonth()]},c:K(ac),d:function(b,a){return i3(b.getDate(),a,2)},e:function(b,a){return i3(b.getDate(),a,2)},H:function(b,a){return i3(b.getHours(),a,2)},I:function(b,a){return i3(b.getHours()%12||12,a,2)},j:function(b,a){return i3(1+jW.dayOfYear(b),a,3)},L:function(b,a){return i3(b.getMilliseconds(),a,3)},m:function(b,a){return i3(b.getMonth()+1,a,2)},M:function(b,a){return i3(b.getMinutes(),a,2)},p:function(a){return R[+(a.getHours()>=12)]},S:function(b,a){return i3(b.getSeconds(),a,2)},U:function(b,a){return i3(jW.sundayOfYear(b),a,2)},w:function(a){return a.getDay()},W:function(b,a){return i3(jW.mondayOfYear(b),a,2)},x:K(Z),X:K(aa),y:function(b,a){return i3(b.getFullYear()%100,a,2)},Y:function(b,a){return i3(b.getFullYear()%10000,a,4)},Z:fZ,"%":function(){return"%"}},O={a:P,A:I,b:Y,B:T,c:ar,d:fE,e:fE,H:bT,I:bT,j:ek,L:bB,m:hE,M:hn,p:L,S:cO,U:c2,w:dL,W:dW,x:al,X:W,y:dq,Y:bU,Z:h9,"%":dP};return K}function i3(g,c,f){var d=0>g?"-":"",a=(d?-g:g)+"",b=a.length;return d+(f>b?new Array(f-b+1).join(c)+a:a)}function cK(a){return new RegExp("^(?:"+a.map(bX.requote).join("|")+")","i")}function cb(d){for(var a=new ib,c=-1,b=d.length;++c<b;){a.set(d[c].toLowerCase(),c)}return a}function dL(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c,c+1));return b?(d.w=+b[0],c+b[0].length):-1}function c2(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c));return b?(d.U=+b[0],c+b[0].length):-1}function dW(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c));return b?(d.W=+b[0],c+b[0].length):-1}function bU(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c,c+4));return b?(d.y=+b[0],c+b[0].length):-1}function dq(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c,c+2));return b?(d.y=kd(+b[0]),c+b[0].length):-1}function h9(c,a,b){return/^[+-]\d{4}$/.test(a=a.slice(b,b+5))?(c.Z=-a,b+5):-1}function kd(a){return a+(a>68?1900:2000)}function hE(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c,c+2));return b?(d.m=b[0]-1,c+b[0].length):-1}function fE(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c,c+2));return b?(d.d=+b[0],c+b[0].length):-1}function ek(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c,c+3));return b?(d.j=+b[0],c+b[0].length):-1}function bT(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c,c+2));return b?(d.H=+b[0],c+b[0].length):-1}function hn(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c,c+2));return b?(d.M=+b[0],c+b[0].length):-1}function cO(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c,c+2));return b?(d.S=+b[0],c+b[0].length):-1}function bB(d,a,c){g2.lastIndex=0;var b=g2.exec(a.slice(c,c+3));return b?(d.L=+b[0],c+b[0].length):-1}function fZ(f){var b=f.getTimezoneOffset(),d=b>0?"-":"+",c=gL(b)/60|0,a=gL(b)%60;return d+i3(c,"0",2)+i3(a,"0",2)}function dP(d,a,c){gp.lastIndex=0;var b=gp.exec(a.slice(c,c+1));return b?c+b[0].length:-1}function jU(c){for(var a=c.length,b=-1;++b<a;){c[b][0]=this(c[b][0])}return function(d){for(var g=0,f=c[g];!f[1](d);){f=c[++g]}return f[0](d)}}function iw(){}function eZ(g,c,f){var d=f.s=g+c,a=d-g,b=d-a;f.t=g-b+(c-a)}function cj(b,a){b&&hJ.hasOwnProperty(b.type)&&hJ[b.type](b,a)}function g0(g,c,f){var d,a=-1,b=g.length-f;for(c.lineStart();++a<b;){d=g[a],c.point(d[0],d[1],d[2])}c.lineEnd()}function gm(d,a){var c=-1,b=d.length;for(a.polygonStart();++c<b;){g0(d[c],a,1)}a.polygonEnd()}function gI(){function g(k,x){k*=bw,x=x*bw/2+c9/4;var u=k-d,j=u>=0?1:-1,w=j*u,v=Math.cos(x),m=Math.sin(x),y=b*m,r=a*v+y*Math.cos(w),p=y*j*Math.sin(w);kf.add(Math.atan2(p,r)),d=k,a=v,b=m}var c,f,d,a,b;g6.point=function(h,e){g6.point=g,d=(c=h)*bw,a=Math.cos(e=(f=e)*bw/2+c9/4),b=Math.sin(e)},g6.lineEnd=function(){g(c,f)}}function dx(d){var a=d[0],c=d[1],b=Math.cos(c);return[b*Math.cos(a),b*Math.sin(a),Math.sin(c)]}function bb(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]}function hI(b,a){return[b[1]*a[2]-b[2]*a[1],b[2]*a[0]-b[0]*a[2],b[0]*a[1]-b[1]*a[0]]}function eH(b,a){b[0]+=a[0],b[1]+=a[1],b[2]+=a[2]}function kb(b,a){return[b[0]*a,b[1]*a,b[2]*a]}function g5(b){var a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=a,b[1]/=a,b[2]/=a}function av(a){return[Math.atan2(a[1],a[0]),bL(a[2])]}function jh(b,a){return gL(b[0]-a[0])<bO&&gL(b[1]-a[1])<bO}function aD(c,a){c*=bw;var b=Math.cos(a*=bw);aS(b*Math.cos(c),b*Math.sin(c),Math.sin(a))}function aS(c,a,b){++ay,aF+=(c-aF)/ay,aU+=(a-aU)/ay,e5+=(b-e5)/ay}function e4(){function d(m,g){m*=bw;var h=Math.cos(g*=bw),j=h*Math.cos(m),f=h*Math.sin(m),k=Math.sin(g),e=Math.atan2(Math.sqrt((e=c*k-b*f)*e+(e=b*j-a*k)*e+(e=a*f-c*j)*e),a*j+c*f+b*k);jm+=e,fp+=e*(a+(a=j)),a3+=e*(c+(c=f)),cE+=e*(b+(b=k)),aS(a,c,b)}var a,c,b;c8.point=function(e,f){e*=bw;var g=Math.cos(f*=bw);a=g*Math.cos(e),c=g*Math.sin(e),b=Math.sin(f),c8.point=d,aS(a,c,b)}}function fm(){c8.point=aD}function a1(){function g(m,C){m*=bw;var y=Math.cos(C*=bw),k=y*Math.cos(m),A=y*Math.sin(m),z=Math.sin(C),r=a*z-b*A,D=b*k-d*z,x=d*A-a*k,u=Math.sqrt(r*r+D*D+x*x),w=d*k+a*A+b*z,j=u&&-d2(w)/u,B=Math.atan2(u,w);gO+=j*r,bM+=j*D,jP+=j*x,jm+=B,fp+=B*(d+(d=k)),a3+=B*(a+(a=A)),cE+=B*(b+(b=z)),aS(d,a,b)}var c,f,d,a,b;c8.point=function(h,e){c=h,f=e,c8.point=g,h*=bw;var j=Math.cos(e*=bw);d=j*Math.cos(h),a=j*Math.sin(h),b=Math.sin(e),aS(d,a,b)},c8.lineEnd=function(){g(c,f),c8.lineEnd=fm,c8.point=aD}}function cC(c,a){function b(f,d){return f=c(f,d),a(f[0],f[1])}return c.invert&&a.invert&&(b.invert=function(f,d){return f=a.invert(f,d),f&&c.invert(f[0],f[1])}),b}function gN(){return !0}function bK(k,D,z,b,C){var v=[],j=[];if(k.forEach(function(u){if(!((h=u.length-1)<=0)){var h,p=u[0],o=u[h];if(jh(p,o)){C.lineStart();for(var g=0;h>g;++g){C.point((p=u[g])[0],p[1])}return void C.lineEnd()}var s=new c6(p,u,null,!0),f=new c6(p,null,s,!1);s.o=f,v.push(s),j.push(f),s=new c6(o,u,null,!1),f=new c6(o,null,s,!0),s.o=f,v.push(s),j.push(f)}}),j.sort(D),jM(v),jM(j),v.length){for(var B=0,A=z,m=j.length;m>B;++B){j[B].e=A=!A}for(var E,y,w=v[0];;){for(var x=w,d=!0;x.v;){if((x=x.n)===w){return}}E=x.z,C.lineStart();do{if(x.v=x.o.v=!0,x.e){if(d){for(var B=0,m=E.length;m>B;++B){C.point((y=E[B])[0],y[1])}}else{b(x.x,x.n.x,1,C)}x=x.n}else{if(d){E=x.p.z;for(var B=E.length-1;B>=0;--B){C.point((y=E[B])[0],y[1])}}else{b(x.x,x.p.x,-1,C)}x=x.p}x=x.o,E=x.z,d=!d}while(!x.v);C.lineEnd()}}}function jM(f){if(b=f.length){for(var b,d,c=0,a=f[0];++c<b;){a.n=d=f[c],d.p=a,a=d}a.n=d=f[0],d.p=a}}function c6(d,a,c,b){this.x=d,this.z=a,this.o=c,this.e=b,this.v=!1,this.n=this.p=null}function hw(d,a,c,b){return function(r,C){function z(f,h){var g=r(f,h);d(f=g[0],h=g[1])&&C.point(f,h)}function J(h,f){var g=r(h,f);G.point(g[0],g[1])}function H(){j.point=J,G.lineStart()}function B(){j.point=z,G.lineEnd()}function t(h,f){n.push([h,f]);var g=r(h,f);k.point(g[0],g[1])}function F(){k.lineStart(),n=[]}function D(){t(n[0][0],n[0][1]),k.lineEnd();var p,g=k.clean(),l=e.buffer(),h=l.length;if(n.pop(),w.push(n),n=null,h){if(1&g){p=l[0];var f,h=p.length-1,m=-1;if(h>0){for(I||(C.polygonStart(),I=!0),C.lineStart();++m<h;){C.point((f=p[m])[0],f[1])}C.lineEnd()}}else{h>1&&2&g&&l.push(l.pop().concat(l.shift())),E.push(l.filter(eM))}}}var E,w,n,G=a(C),A=r.invert(b[0],b[1]),j={point:z,lineStart:H,lineEnd:B,polygonStart:function(){j.point=t,j.lineStart=F,j.lineEnd=D,E=[],w=[]},polygonEnd:function(){j.point=z,j.lineStart=H,j.lineEnd=B,E=bX.merge(E);var f=aJ(A,w);E.length?(I||(C.polygonStart(),I=!0),bK(E,bp,f,c,C)):f&&(I||(C.polygonStart(),I=!0),C.lineStart(),c(null,null,1,C),C.lineEnd()),I&&(C.polygonEnd(),I=!1),E=w=null},sphere:function(){C.polygonStart(),C.lineStart(),c(null,null,1,C),C.lineEnd(),C.polygonEnd()}},e=fv(),k=a(e),I=!1;return j}}function eM(a){return a.length>1}function fv(){var b,a=[];return{lineStart:function(){a.push(b=[])},point:function(c,d){b.push([c,d])},lineEnd:iE,buffer:function(){var c=a;return a=[],b=null,c},rejoin:function(){a.length>1&&a.push(a.pop().concat(a.shift()))}}}function bp(b,a){return((b=b.x)[0]<0?b[1]-fx-bO:fx-b[1])-((a=a.x)[0]<0?a[1]-fx-bO:fx-a[1])}function f4(f){var b,d=0/0,c=0/0,a=0/0;return{lineStart:function(){f.lineStart(),b=1},point:function(g,h){var e=g>0?c9:-c9,j=gL(g-d);gL(j-c9)<bO?(f.point(d,c=(c+h)/2>0?fx:-fx),f.point(a,c),f.lineEnd(),f.lineStart(),f.point(e,c),f.point(g,c),b=0):a!==e&&j>=c9&&(gL(d-a)<bO&&(d-=a*bO),gL(g-e)<bO&&(g-=e*bO),c=es(d,c,g,h),f.point(a,c),f.lineEnd(),f.lineStart(),f.point(e,c),b=0),f.point(d=g,c=h),a=e},lineEnd:function(){f.lineEnd(),d=c=0/0},clean:function(){return 2-b}}}function es(h,c,f,d){var a,b,g=Math.sin(h-f);return gL(g)>bO?Math.atan((Math.sin(c)*(b=Math.cos(d))*Math.sin(f)-Math.sin(d)*(a=Math.cos(c))*Math.sin(h))/(a*b*g)):(c+d)/2}function fI(g,c,f,d){var a;if(null==g){a=f*fx,d.point(-c9,a),d.point(0,a),d.point(c9,a),d.point(c9,0),d.point(c9,-a),d.point(0,-a),d.point(-c9,-a),d.point(-c9,0),d.point(-c9,a)}else{if(gL(g[0]-c[0])>bO){var b=g[0]<c[0]?c9:-c9;a=f*b/2,d.point(-b,a),d.point(0,a),d.point(b,a)}else{d.point(c[0],c[1])}}}function aJ(R,J){var aa=R[0],L=R[1],H=[Math.sin(aa),-Math.cos(aa),0],W=0,Q=0;kf.reset();for(var al=0,ae=J.length;ae>al;++al){var U=J[al],K=U.length;if(K){for(var Z=U[0],X=Z[0],Y=Z[1]/2+c9/4,P=Math.sin(Y),G=Math.cos(Y),ac=1;;){ac===K&&(ac=0),R=U[ac];var T=R[0],C=R[1]/2+c9/4,B=Math.sin(C),D=Math.cos(C),ai=T-X,ao=ai>=0?1:-1,F=ao*ai,j=F>c9,V=P*B;if(kf.add(Math.atan2(V*ao*Math.sin(F),G*D+V*Math.cos(F))),W+=j?ai+ao*hy:ai,j^X>=aa^T>=aa){var I=hI(dx(Z),dx(R));g5(I);var O=hI(H,I);g5(O);var z=(j^ai>=0?-1:1)*bL(O[2]);(L>z||L===z&&(I[0]||I[1]))&&(Q+=j^ai>=0?1:-1)}if(!ac++){break}X=T,P=B,G=D,Z=R}}}return(-bO>W||bO>W&&0>kf)^1&Q}function j1(f){function m(c,a){return Math.cos(c)*Math.cos(a)>g}function h(u){var r,o,t,a,p;return{lineStart:function(){a=t=!1,p=1},point:function(w,n){var s,x=[w,n],e=m(w,n),y=d?e?0:l(w,n):e?l(w+(0>w?c9:-c9),n):0;if(!r&&(a=t=e)&&u.lineStart(),e!==t&&(s=b(r,x),(jh(r,s)||jh(x,s))&&(x[0]+=bO,x[1]+=bO,e=m(x[0],x[1]))),e!==t){p=0,e?(u.lineStart(),s=b(x,r),u.point(s[0],s[1])):(s=b(r,x),u.point(s[0],s[1]),u.lineEnd()),r=s}else{if(k&&r&&d^e){var c;y&o||!(c=b(x,r,!0))||(p=0,d?(u.lineStart(),u.point(c[0][0],c[0][1]),u.point(c[1][0],c[1][1]),u.lineEnd()):(u.point(c[1][0],c[1][1]),u.lineEnd(),u.lineStart(),u.point(c[0][0],c[0][1])))}}!e||r&&jh(r,x)||u.point(x[0],x[1]),r=x,t=e,o=y},lineEnd:function(){t&&u.lineEnd(),r=null},clean:function(){return p|(a&&t)<<1}}}function b(X,P,al){var T=dx(X),L=dx(P),W=[1,0,0],au=hI(T,L),ar=bb(au,au),Z=au[0],Q=ar-Z*Z;if(!Q){return !al&&X}var ai=g*ar/Q,ac=-g*Z/Q,ae=hI(W,au),V=kb(W,ai),K=kb(au,ac);eH(V,K);var ao=ae,Y=bb(V,ao),H=bb(ao,ao),F=Y*Y-H*(bb(V,V)-1);if(!(0>F)){var I=Math.sqrt(F),at=kb(ao,(-Y-I)/H);if(eH(at,V),at=av(at),!al){return at}var ba,J=X[0],B=P[0],aa=X[1],O=P[1];J>B&&(ba=J,J=B,B=ba);var U=B-J,D=gL(U-c9)<bO,R=D||bO>U;if(!D&&aa>O&&(ba=aa,aa=O,O=ba),R?D?aa+O>0^at[1]<(gL(at[0]-J)<bO?aa:O):aa<=at[1]&&at[1]<=O:U>c9^(J<=at[0]&&at[0]<=B)){var G=kb(ao,(-Y+I)/H);return eH(G,V),[at,av(G)]}}}function l(c,o){var n=d?f:c9-f,a=0;return -n>c?a|=1:c>n&&(a|=2),-n>o?a|=4:o>n&&(a|=8),a}var g=Math.cos(f),d=g>0,k=gL(g)>bO,j=gA(f,6*bw);return hw(m,h,j,d?[0,-f]:[-c9,f-c9])}function gv(d,a,c,b){return function(z){var m,j=z.a,x=z.b,w=j.x,k=j.y,A=x.x,t=x.y,n=0,r=1,e=A-w,y=t-k;if(m=d-w,e||!(m>0)){if(m/=e,0>e){if(n>m){return}r>m&&(r=m)}else{if(e>0){if(m>r){return}m>n&&(n=m)}}if(m=c-w,e||!(0>m)){if(m/=e,0>e){if(m>r){return}m>n&&(n=m)}else{if(e>0){if(n>m){return}r>m&&(r=m)}}if(m=a-k,y||!(m>0)){if(m/=y,0>y){if(n>m){return}r>m&&(r=m)}else{if(y>0){if(m>r){return}m>n&&(n=m)}}if(m=b-k,y||!(0>m)){if(m/=y,0>y){if(m>r){return}m>n&&(n=m)}else{if(y>0){if(n>m){return}r>m&&(r=m)}}return n>0&&(z.a={x:w+n*e,y:k+n*y}),1>r&&(z.b={x:w+r*e,y:k+r*y}),z}}}}}}function jz(h,c,f,d){function a(j,e){return gL(j[0]-h)<bO?e>0?0:3:gL(j[0]-f)<bO?e>0?2:1:gL(j[1]-c)<bO?e>0?1:0:e>0?3:2}function b(j,e){return g(j.x,e.x)}function g(m,j){var l=a(m,1),k=a(j,1);return l!==k?l-k:0===l?j[1]-m[1]:1===l?m[0]-j[0]:2===l?m[1]-j[1]:j[0]-m[0]}return function(T){function Q(p){for(var C=0,w=P.length,k=p[1],A=0;w>A;++A){for(var v,m=1,y=P[A],x=y.length,s=y[0];x>m;++m){v=y[m],s[1]<=k?v[1]>k&&iX(s,v,p)>0&&++C:v[1]<=k&&iX(s,v,p)<0&&--C,s=v}}return 0!==C}function I(p,m,x,k){var v=0,w=0;if(null==p||(v=a(p,x))!==(w=a(m,x))||g(p,m)<0^x>0){do{k.point(0===v||3===v?h:f,v>1?d:c)}while((v=(v+x+4)%4)!==w)}else{k.point(m[0],m[1])}}function B(k,l){return k>=h&&f>=k&&l>=c&&d>=l}function O(l,k){B(l,k)&&T.point(l,k)}function K(){D.point=G,P&&P.push(H=[]),e=!0,t=!1,R=U=0/0}function L(){u&&(G(o,n),r&&t&&F.rejoin(),u.push(F.buffer())),D.point=O,t&&T.lineEnd()}function G(p,k){p=Math.max(-eN,Math.min(eN,p)),k=Math.max(-eN,Math.min(eN,k));var m=B(p,k);if(P&&H.push([p,k]),e){o=p,n=k,r=m,e=!1,m&&(T.lineStart(),T.point(p,k))}else{if(m&&t){T.point(p,k)}else{var l={a:{x:R,y:U},b:{x:p,y:k}};j(l)?(t||(T.lineStart(),T.point(l.a.x,l.a.y)),T.point(l.b.x,l.b.y),m||T.lineEnd(),J=!1):m&&(T.lineStart(),T.point(p,k),J=!1)}}R=p,U=k,t=m}var u,P,H,o,n,r,R,U,t,e,J,z=T,F=fv(),j=gv(h,c,f,d),D={point:O,lineStart:K,lineEnd:L,polygonStart:function(){T=F,u=[],P=[],J=!0},polygonEnd:function(){T=z,u=bX.merge(u);var l=Q([h,d]),m=J&&l,k=u.length;(m||k)&&(T.polygonStart(),m&&(T.lineStart(),I(null,null,1,T),T.lineEnd()),k&&bK(u,b,l,I,T),T.polygonEnd()),u=P=H=null}};return D}}function cT(f){var b=0,d=c9/3,c=fR(f),a=c(b,d);return a.parallels=function(e){return arguments.length?c(b=e[0]*c9/180,d=e[1]*c9/180):[b/c9*180,d/c9*180]},a}function cw(h,c){function f(l,j){var k=Math.sqrt(b-2*a*Math.sin(j))/a;return[k*Math.sin(l*=a),g-k*Math.cos(l)]}var d=Math.sin(h),a=(d+Math.sin(c))/2,b=1+d*(2*a-d),g=Math.sqrt(b)/a;return f.invert=function(l,j){var k=g-j;return[Math.atan2(l,k)/a,bL((b-(l*l+k*k)*a*a)/(2*a))]},f}function dV(){function f(g,e){bs+=a*g-c*e,c=g,a=e}var b,d,c,a;j3.point=function(e,g){j3.point=f,b=c=e,d=a=g},j3.lineEnd=function(){f(b,d)}}function dd(b,a){f5>b&&(f5=b),b>fJ&&(fJ=b),ev>a&&(ev=a),a>aL&&(aL=a)}function d9(){function k(e,a){j.push("M",e,",",a,d)}function f(e,a){j.push("M",e,",",a),b.point=h}function h(e,a){j.push("L",e,",",a)}function g(){b.point=k}function c(){j.push("Z")}var d=b2(4.5),j=[],b={point:k,lineStart:function(){b.point=f},lineEnd:g,polygonStart:function(){b.lineEnd=c},polygonEnd:function(){b.lineEnd=g,b.point=k},pointRadius:function(a){return d=b2(a),b},result:function(){if(j.length){var a=j.join("");return j=[],a}}};return b}function b2(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function dC(b,a){aF+=b,aU+=a,++e5}function iH(){function c(h,f){var d=h-a,e=f-b,g=Math.sqrt(d*d+e*e);fp+=g*(a+h)/2,a3+=g*(b+f)/2,cE+=g,dC(a=h,b=f)}var a,b;jB.point=function(e,d){jB.point=c,dC(a=e,b=d)}}function kn(){jB.point=dC}function hM(){function f(l,h){var j=l-c,g=h-a,k=Math.sqrt(j*j+g*g);fp+=k*(c+l)/2,a3+=k*(a+h)/2,cE+=k,k=a*l-c*h,gO+=k*(c+l),bM+=k*(a+h),jP+=3*k,dC(c=l,a=h)}var b,d,c,a;jB.point=function(e,g){jB.point=f,dC(b=c=e,d=a=g)},jB.lineEnd=function(){f(b,d)}}function fM(k){function f(a,l){k.moveTo(a+j,l),k.arc(a,l,j,0,hy)}function h(a,l){k.moveTo(a,l),b.point=g}function g(a,l){k.lineTo(a,l)}function c(){b.point=f}function d(){k.closePath()}var j=4.5,b={point:f,lineStart:function(){b.point=h},lineEnd:c,polygonStart:function(){b.lineEnd=d},polygonEnd:function(){b.lineEnd=c,b.point=f},pointRadius:function(a){return j=a,b},result:iE};return b}function d4(k){function f(a){return(b?g:h)(a)}function h(a){return cF(a,function(m,l){m=k(m,l),a.point(m[0],m[1])})}function g(C){function O(m,l){m=k(m,l),C.point(m[0],m[1])}function E(){n=0/0,a.point=J,C.lineStart()}function J(p,m){var l=dx([p,m]),s=k(p,m);c(n,z,u,R,T,A,n=s[0],z=s[1],u=p,R=l[0],T=l[1],A=l[2],b,C),C.point(n,z)}function G(){a.point=O,C.lineEnd()}function Q(){E(),a.point=I,a.lineEnd=D}function I(l,e){J(N=l,K=e),L=n,F=z,B=R,P=T,H=A,a.point=J}function D(){c(n,z,u,R,T,A,L,F,N,B,P,H,b,C),a.lineEnd=G,G()}var N,K,L,F,B,P,H,u,n,z,R,T,A,a={point:O,lineStart:E,lineEnd:G,polygonStart:function(){C.polygonStart(),a.lineStart=Q},polygonEnd:function(){C.polygonEnd(),a.lineStart=E}};return a}function c(K,ac,Q,ao,ai,W,O,aa,Y,Z,U,I,ae,V){var F=O-K,u=aa-ac,G=F*F+u*u;if(G>4*d&&ae--){var al=ao+Z,ar=ai+U,H=W+I,n=Math.sqrt(al*al+ar*ar+H*H),X=Math.asin(H/=n),J=gL(gL(H)-1)<bO||gL(Q-Y)<bO?(Q+Y)/2:Math.atan2(ar,al),T=k(J,X),o=T[0],P=T[1],D=o-K,R=P-ac,B=u*D-F*R;(B*B/G>d||gL((F*D+u*R)/G-0.5)>0.3||j>ao*Z+ai*U+W*I)&&(c(K,ac,Q,ao,ai,W,o,P,J,al/=n,ar/=n,H,ae,V),V.point(o,P),c(o,P,J,al,ar,H,O,aa,Y,Z,U,I,ae,V))}}var d=0.5,j=Math.cos(30*bw),b=16;return f.precision=function(a){return arguments.length?(b=(d=a*a)>0&&16,f):Math.sqrt(d)},f}function bN(b){var a=d4(function(c,d){return b([c*f6,d*f6])});return function(c){return dH(a(c))}}function hb(a){this.stream=a}function cF(b,a){return{point:a,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function bv(a){return fR(function(){return a})()}function fR(H){function C(a){return a=U(a[0]*bw,a[1]*bw),[a[0]*L+R,J-a[1]*L]}function P(a){return a=U.invert((a[0]-R)/L,(J-a[1])/L),a&&[a[0]*f6,a[1]*f6]}function E(){U=cC(G=eR(I,k,y),K);var a=K(A,Q);return R=N-a[0]*L,J=F+a[1]*L,B()}function B(){return D&&(D.valid=!1,D=null),C}var K,G,U,R,J,D,O=d4(function(b,a){return b=K(b,a),[b[0]*L+R,J-b[1]*L]}),L=150,N=480,F=250,A=0,Q=0,I=0,k=0,y=0,T=hx,V=hQ,z=null,j=null;return C.stream=function(a){return D&&(D.valid=!1),D=dH(T(G,O(V(a)))),D.valid=!0,D},C.clipAngle=function(a){return arguments.length?(T=null==a?(z=a,hx):j1((z=+a)*bw),B()):z},C.clipExtent=function(a){return arguments.length?(j=a,V=a?jz(a[0][0],a[0][1],a[1][0],a[1][1]):hQ,B()):j},C.scale=function(a){return arguments.length?(L=+a,E()):L},C.translate=function(a){return arguments.length?(N=+a[0],F=+a[1],E()):[N,F]},C.center=function(a){return arguments.length?(A=a[0]%360*bw,Q=a[1]%360*bw,E()):[A*f6,Q*f6]},C.rotate=function(a){return arguments.length?(I=a[0]%360*bw,k=a[1]%360*bw,y=a.length>2?a[2]%360*bw:0,E()):[I*f6,k*f6,y*f6]},bX.rebind(C,O,"precision"),function(){return K=H.apply(this,arguments),C.invert=K.invert&&P,E()}}function dH(a){return cF(a,function(b,c){a.point(b*bw,c*bw)})}function jI(b,a){return[b,a]}function hZ(b,a){return[b>c9?b-hy:-c9>b?b+hy:b,a]}function eR(c,a,b){return c?a||b?cC(gS(c),f9(a,b)):gS(c):a||b?f9(a,b):hZ}function b5(a){return function(b,c){return b+=a,[b>c9?b-hy:-c9>b?b+hy:b,c]}}function gS(b){var a=b5(b);return a.invert=b5(-b),a}function f9(h,c){function f(u,m){var p=Math.cos(m),k=Math.cos(u)*p,r=Math.sin(u)*p,j=Math.sin(m),o=j*d+k*a;return[Math.atan2(r*b-o*g,k*d-j*a),bL(o*b+r*g)]}var d=Math.cos(h),a=Math.sin(h),b=Math.cos(c),g=Math.sin(c);return f.invert=function(u,m){var p=Math.cos(m),k=Math.cos(u)*p,r=Math.sin(u)*p,j=Math.sin(m),o=j*b-r*g;return[Math.atan2(r*b+j*g,k*d+o*a),bL(o*d-k*a)]},f}function gA(d,a){var c=Math.cos(d),b=Math.sin(d);return function(g,h,k,f){var m=k*a;null!=g?(g=dk(c,g),h=dk(c,h),(k>0?h>g:g>h)&&(g+=k*hy)):(g=d+k*hy,h=d-0.5*m);for(var e,j=g;k>0?j>h:h>j;j-=m){f.point((e=av([c,-b*Math.cos(j),-b*Math.sin(j)]))[0],e[1])}}}function dk(d,a){var c=dx(a);c[0]-=d,g5(c);var b=d2(-c[1]);return((-c[2]<0?-b:b)+2*Math.PI-bO)%(2*Math.PI)}function a4(d,a,c){var b=bX.range(d,a-bO,c).concat(a);return function(e){return b.map(function(f){return[e,f]})}}function hB(d,a,c){var b=bX.range(d,a-bO,c).concat(a);return function(e){return b.map(function(f){return[f,e]})}}function ez(a){return a.source}function j4(a){return a.target}function gX(k,D,z,b){var C=Math.cos(D),v=Math.sin(D),j=Math.cos(b),B=Math.sin(b),A=C*Math.cos(k),m=C*Math.sin(k),E=j*Math.cos(z),y=j*Math.sin(z),w=2*Math.asin(Math.sqrt(fQ(b-D)+C*j*fQ(z-k))),x=1/Math.sin(w),d=w?function(l){var c=Math.sin(l*=w)*x,g=Math.sin(w-l)*x,f=g*A+c*E,a=g*m+c*y,h=g*v+c*B;return[Math.atan2(a,f)*f6,Math.atan2(h,Math.sqrt(f*f+a*a))*f6]}:function(){return[k*f6,D*f6]};return d.distance=w,d}function ad(){function d(k,f){var g=Math.sin(f*=bw),h=Math.cos(f),e=gL((k*=bw)-a),j=Math.cos(e);cU+=Math.atan2(Math.sqrt((e=h*Math.sin(e))*e+(e=b*g-c*h*j)*e),c*g+b*h*j),a=k,c=g,b=h}var a,c,b;cy.point=function(e,f){a=e*bw,c=Math.sin(f*=bw),b=Math.cos(f),cy.point=d},cy.lineEnd=function(){cy.point=cy.lineEnd=iE}}function iT(c,a){function b(g,j){var h=Math.cos(g),d=Math.cos(j),f=c(h*d);return[f*d*Math.sin(g),f*Math.sin(j)]}return b.invert=function(k,h){var g=Math.sqrt(k*k+h*h),d=a(g),f=Math.sin(d),j=Math.cos(d);return[Math.atan2(k*f,g*j),Math.asin(g&&h*f/g)]},b}function am(h,c){function f(l,j){g>0?-fx+bO>j&&(j=-fx+bO):j>fx-bO&&(j=fx-bO);var k=g/Math.pow(a(j),b);return[k*Math.sin(b*l),g-k*Math.cos(b*l)]}var d=Math.cos(h),a=function(e){return Math.tan(c9/4+e/2)},b=h===c?Math.sin(h):Math.log(d/Math.cos(c))/Math.log(a(c)/a(h)),g=d*Math.pow(a(h),b)/b;return b?(f.invert=function(m,j){var l=g-j,k=i8(b)*Math.sqrt(m*m+l*l);return[Math.atan2(m,l)/b,2*Math.atan(Math.pow(g/k,1/b))-fx]},f):eW}function aM(g,c){function f(k,h){var j=b-h;return[j*Math.sin(a*k),b-j*Math.cos(a*k)]}var d=Math.cos(g),a=g===c?Math.sin(g):(d-Math.cos(c))/(c-g),b=d/a+g;return gL(a)<bO?jI:(f.invert=function(k,h){var j=b-h;return[Math.atan2(k,j)/a,b-i8(a)*Math.sqrt(k*k+j*j)]},f)}function eW(b,a){return[b,Math.log(Math.tan(c9/4+a/2))]}function e9(g){var c,f=bv(g),d=f.scale,a=f.translate,b=f.clipExtent;return f.scale=function(){var e=d.apply(f,arguments);return e===f?c?f.clipExtent(null):f:e},f.translate=function(){var e=a.apply(f,arguments);return e===f?c?f.clipExtent(null):f:e},f.clipExtent=function(k){var h=b.apply(f,arguments);if(h===f){if(c=null==k){var e=c9*d(),j=a();b([[j[0]-e,j[1]-e],[j[0]+e,j[1]+e]])}}else{c&&(h=null)}return h},f.clipExtent(null)}function aV(b,a){return[Math.log(Math.tan(c9/4+a/2)),-b]}function cp(a){return a[0]}function gF(a){return a[1]}function bE(f){for(var b=f.length,d=[0,1],c=2,a=2;b>a;a++){for(;c>1&&iX(f[d[c-2]],f[d[c-1]],f[a])<=0;){--c}d[c++]=a}return d.slice(0,c)}function jC(b,a){return b[0]-a[0]||b[1]-a[1]}function cY(c,a,b){return(b[0]-a[0])*(c[1]-a[1])<(b[1]-a[1])*(c[0]-a[0])}function hj(g,z,v,b){var y=g[0],k=v[0],d=z[0]-y,x=b[0]-k,w=g[1],j=v[1],A=z[1]-w,p=b[1]-j,m=(x*(w-j)-p*(y-k))/(p*d-x*A);return[y+m*d,w+m*A]}function eE(c){var a=c[0],b=c[c.length-1];return !(a[0]-b[0]||a[1]-b[1])}function fh(){bJ(this),this.edge=this.site=this.circle=null}function bg(b){var a=hg.pop()||new fh;return a.site=b,a}function fW(a){c3(a),fN.remove(a),hg.push(a),bJ(a)}function ef(g){var x=g.circle,m=x.x,b=x.cy,w={x:m,y:b},j=g.P,d=g.N,v=[g];fW(g);for(var p=j;p.circle&&gL(m-p.circle.x)<bO&&gL(b-p.circle.cy)<bO;){j=p.P,v.unshift(p),fW(p),p=j}v.unshift(p),c3(p);for(var h=d;h.circle&&gL(m-h.circle.x)<bO&&gL(b-h.circle.cy)<bO;){d=h.N,v.push(h),fW(h),h=d}v.push(h),c3(h);var y,k=v.length;for(y=1;k>y;++y){h=v[y],p=v[y-1],hF(h.edge,p.site,h.site,w)}p=v[0],h=v[k-1],h.edge=ig(p.site,h.site,null,w),dM(p),dM(h)}function fA(F){for(var A,N,C,z,I=F.x,E=F.y,Q=fN._;Q;){if(C=az(Q,E)-I,C>bO){Q=Q.L}else{if(z=I-jQ(Q,E),!(z>bO)){C>-bO?(A=Q.P,N=Q):z>-bO?(A=Q,N=Q.N):A=N=Q;break}if(!Q.R){A=Q;break}Q=Q.R}}var P=bg(F);if(fN.insert(A,P),A||N){if(A===N){return c3(A),N=bg(A.site),fN.insert(P,N),P.edge=N.edge=ig(A.site,P.site),dM(A),void dM(N)}if(!N){return void (P.edge=ig(A.site,P.site))}c3(A),c3(N);var H=A.site,B=H.x,L=H.y,J=F.x-B,K=F.y-L,D=N.site,w=D.x-B,O=D.y-L,G=2*(J*O-K*w),j=J*J+K*K,b=w*w+O*O,k={x:(O*j-K*b)/G+B,y:(J*b-w*j)/G+L};hF(N.edge,H,D,k),P.edge=ig(H,F,null,k),N.edge=ig(F,D,null,k),dM(A),dM(N)}}function az(g,z){var v=g.site,b=v.x,y=v.y,k=y-z;if(!k){return b}var d=g.P;if(!d){return -1/0}v=d.site;var x=v.x,w=v.y,j=w-z;if(!j){return x}var A=x-b,p=1/k-1/j,m=A/j;return p?(-m+Math.sqrt(m*m-2*p*(A*A/(-2*j)-w+j/2+y-k/2)))/p+b:(b+x)/2}function jQ(d,a){var c=d.N;if(c){return az(c,a)}var b=d.site;return b.y===a?b.x:1/0}function gh(a){this.site=a,this.edges=[]}function i6(m){for(var H,B,b,G,x,k,E,D,w,I,A=m[0][0],y=m[1][0],z=m[0][1],j=m[1][1],F=hN,C=F.length;C--;){if(x=F[C],x&&x.prepare()){for(E=x.edges,D=E.length,k=0;D>k;){I=E[k].end(),b=I.x,G=I.y,w=E[++k%D].start(),H=w.x,B=w.y,(gL(b-H)>bO||gL(G-B)>bO)&&(E.splice(k,0,new fF(kg(x.site,I,gL(b-A)<bO&&j-G>bO?{x:A,y:gL(H-A)<bO?B:j}:gL(G-j)<bO&&y-b>bO?{x:gL(B-j)<bO?H:y,y:j}:gL(b-y)<bO&&G-z>bO?{x:y,y:gL(H-y)<bO?B:z}:gL(G-z)<bO&&b-A>bO?{x:gL(B-z)<bO?H:A,y:z}:null),x.site,null)),++D)}}}}function cL(b,a){return a.angle-b.angle}function cd(){bJ(this),this.x=this.y=this.arc=this.site=this.cy=null}function dM(D){var x=D.P,K=D.N;if(x&&K){var A=x.site,w=D.site,G=K.site;if(A!==G){var C=w.x,O=w.y,N=A.x-C,F=A.y-O,z=G.x-C,J=G.y-O,H=2*(N*J-F*z);if(!(H>=-jR)){var I=N*N+F*F,B=z*z+J*J,k=(J*I-F*B)/H,L=(N*B-z*I)/H,J=L+O,E=cJ.pop()||new cd;E.arc=D,E.site=w,E.x=k+C,E.y=J+Math.sqrt(k*k+L*L),E.cy=J,D.circle=E;for(var j=null,b=bQ._;b;){if(E.y<b.y||E.y===b.y&&E.x<=b.x){if(!b.L){j=b.P;break}b=b.L}else{if(!b.R){j=b;break}b=b.R}}bQ.insert(j,E),j||(d8=E)}}}}function c3(b){var a=b.circle;a&&(a.P||(d8=a.N),bQ.remove(a),cJ.push(a),bJ(a),b.circle=null)}function dY(f){for(var b,d=ab,c=gv(f[0][0],f[0][1],f[1][0],f[1][1]),a=d.length;a--;){b=d[a],(!bW(b,f)||!c(b)||gL(b.a.x-b.b.x)<bO&&gL(b.a.y-b.b.y)<bO)&&(b.a=b.b=null,d.splice(a,1))}}function bW(A,k){var H=A.b;if(H){return !0}var x,j,D=A.a,z=k[0][0],K=k[1][0],J=k[0][1],C=k[1][1],w=A.l,G=A.r,E=w.x,F=w.y,y=G.x,b=G.y,I=(E+y)/2,B=(F+b)/2;if(b===F){if(z>I||I>=K){return}if(E>y){if(D){if(D.y>=C){return}}else{D={x:I,y:J}}H={x:I,y:C}}else{if(D){if(D.y<J){return}}else{D={x:I,y:C}}H={x:I,y:J}}}else{if(x=(E-y)/(b-F),j=B-x*I,-1>x||x>1){if(E>y){if(D){if(D.y>=C){return}}else{D={x:(J-j)/x,y:J}}H={x:(C-j)/x,y:C}}else{if(D){if(D.y<J){return}}else{D={x:(C-j)/x,y:C}}H={x:(J-j)/x,y:J}}}else{if(b>F){if(D){if(D.x>=K){return}}else{D={x:z,y:x*z+j}}H={x:K,y:x*K+j}}else{if(D){if(D.x<z){return}}else{D={x:K,y:x*K+j}}H={x:z,y:x*z+j}}}}return A.a=D,A.b=H,!0}function ds(b,a){this.l=b,this.r=a,this.a=this.b=null}function ig(f,b,d,c){var a=new ds(f,b);return ab.push(a),d&&hF(a,f,b,d),c&&hF(a,b,f,c),hN[f.i].edges.push(new fF(a,f,b)),hN[b.i].edges.push(new fF(a,b,f)),a}function kg(d,a,c){var b=new ds(d,null);return b.a=a,b.b=c,ab.push(b),b}function hF(d,a,c,b){d.a||d.b?d.l===c?d.b=b:d.a=b:(d.a=b,d.l=a,d.r=c)}function fF(f,b,d){var c=f.a,a=f.b;this.edge=f,this.site=b,this.angle=d?Math.atan2(d.y-b.y,d.x-b.x):f.l===b?Math.atan2(a.x-c.x,c.y-a.y):Math.atan2(c.x-a.x,a.y-c.y)}function d1(){this._=null}function bJ(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function g8(f,b){var d=b,c=b.R,a=d.U;a?a.L===d?a.L=c:a.R=c:f._=c,c.U=a,d.U=c,d.R=c.L,d.R&&(d.R.U=d),c.L=d}function cB(f,b){var d=b,c=b.L,a=d.U;a?a.L===d?a.L=c:a.R=c:f._=c,c.U=a,d.U=c,d.L=c.R,d.L&&(d.L.U=d),c.R=d}function bn(a){for(;a.L;){a=a.L}return a}function fP(h,c){var f,d,a,b=h.sort(dF).pop();for(ab=[],hN=new Array(h.length),fN=new d1,bQ=new d1;;){if(a=d8,b&&(!a||b.y<a.y||b.y===a.y&&b.x<a.x)){(b.x!==f||b.y!==d)&&(hN[b.i]=new gh(b),fA(b),f=b.x,d=b.y),b=h.pop()}else{if(!a){break}ef(a.arc)}}c&&(dY(c),i6(c));var g={cells:hN,edges:ab};return fN=bQ=ab=hN=null,g}function dF(b,a){return a.y-b.y||a.x-b.x}function jF(c,a,b){return(c.x-b.x)*(a.y-c.y)-(c.x-a.x)*(b.y-c.y)}function hU(a){return a.x}function eP(a){return a.y}function b1(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gQ(f,m,h,b,l,g){if(!f(m,h,b,l,g)){var d=0.5*(h+l),k=0.5*(b+g),j=m.nodes;j[0]&&gQ(f,j[0],h,b,d,k),j[1]&&gQ(f,j[1],d,b,l,k),j[2]&&gQ(f,j[2],h,k,d,g),j[3]&&gQ(f,j[3],d,k,l,g)}}function f7(f,s,j,b,p,h,d){var m,k=1/0;return function g(c,H,u,r,t){if(!(H>h||u>d||b>r||p>t)){if(a=c.point){var a,G=s-c.x,A=j-c.y,e=G*G+A*A;if(k>e){var C=Math.sqrt(k=e);b=s-C,p=j-C,h=s+C,d=j+C,m=a}}for(var z=c.nodes,D=0.5*(H+r),B=0.5*(u+t),F=s>=D,E=j>=B,o=E<<1|F,l=o+4;l>o;++o){if(c=z[3&o]){switch(3&o){case 0:g(c,H,u,D,B);break;case 1:g(c,D,u,r,B);break;case 2:g(c,H,B,D,t);break;case 3:g(c,D,B,r,t)}}}}}(f,b,p,h,d),m}function gy(k,f){k=bX.rgb(k),f=bX.rgb(f);var h=k.r,g=k.g,c=k.b,d=f.r-h,j=f.g-g,b=f.b-c;return function(a){return"#"+kp(Math.round(h+d*a))+kp(Math.round(g+j*a))+kp(Math.round(c+b*a))}}function dh(f,b){var d,c={},a={};for(d in f){d in b?c[d]=ex(f[d],b[d]):a[d]=f[d]}for(d in b){d in f||(a[d]=b[d])}return function(e){for(d in c){a[d]=c[d](e)}return a}}function a0(b,a){return b=+b,a=+a,function(c){return b*(1-c)+a*c}}function hz(f,m){var h,b,l,g=fU.lastIndex=dK.lastIndex=0,d=-1,k=[],j=[];for(f+="",m+="";(h=fU.exec(f))&&(b=dK.exec(m));){(l=b.index)>g&&(l=m.slice(g,l),k[d]?k[d]+=l:k[++d]=l),(h=h[0])===(b=b[0])?k[d]?k[d]+=b:k[++d]=b:(k[++d]=null,j.push({i:d,x:a0(h,b)})),g=dK.lastIndex}return g<m.length&&(l=m.slice(g),k[d]?k[d]+=l:k[++d]=l),k.length<2?j[0]?(m=j[0].x,function(a){return m(a)+""}):function(){return m}:(m=j.length,function(o){for(var c,a=0;m>a;++a){k[(c=j[a]).i]=c.x(o)}return k.join("")})}function ex(d,a){for(var c,b=bX.interpolators.length;--b>=0&&!(c=bX.interpolators[b](d,a));){}return c}function j0(k,f){var h,g=[],c=[],d=k.length,j=f.length,b=Math.min(k.length,f.length);for(h=0;b>h;++h){g.push(ex(k[h],f[h]))}for(;d>h;++h){c[h]=k[h]}for(;j>h;++h){c[h]=f[h]}return function(a){for(h=0;b>h;++h){c[h]=g[h](a)}return c}}function gU(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function km(a){return function(b){return 1-a(1-b)}}function iO(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function ah(a){return a*a}function aI(a){return a*a*a}function eT(c){if(0>=c){return 0}if(c>=1){return 1}var a=c*c,b=a*c;return 4*(0.5>c?b:3*(c-a)+b-0.75)}function e7(a){return function(b){return Math.pow(b,a)}}function aR(a){return 1-Math.cos(a*fx)}function ch(a){return Math.pow(2,10*(a-1))}function gC(a){return 1-Math.sqrt(1-a*a)}function bA(c,a){var b;return arguments.length<2&&(a=0.45),arguments.length?b=a/hy*Math.asin(1/c):(c=1,b=a/4),function(d){return 1+c*Math.pow(2,-10*d)*Math.sin((d-b)*hy/a)}}function jy(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function cW(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function hf(k,f){k=bX.hcl(k),f=bX.hcl(f);var h=k.h,g=k.c,c=k.l,d=f.h-h,j=f.c-g,b=f.l-c;return isNaN(j)&&(j=0,g=isNaN(g)?f.c:g),isNaN(d)?(d=0,h=isNaN(h)?f.h:h):d>180?d-=360:-180>d&&(d+=360),function(a){return b3(h+d*a,g+j*a,c+b*a)+""}}function eB(k,f){k=bX.hsl(k),f=bX.hsl(f);var h=k.h,g=k.s,c=k.l,d=f.h-h,j=f.s-g,b=f.l-c;return isNaN(j)&&(j=0,g=isNaN(g)?f.s:g),isNaN(d)?(d=0,h=isNaN(h)?f.h:h):d>180?d-=360:-180>d&&(d+=360),function(a){return hW(h+d*a,g+j*a,c+b*a)+""}}function fd(k,f){k=bX.lab(k),f=bX.lab(f);var h=k.l,g=k.a,c=k.b,d=f.l-h,j=f.a-g,b=f.b-c;return function(a){return f8(h+d*a,g+j*a,c+b*a)+""}}function a9(b,a){return a-=b,function(c){return Math.round(b+a*c)}}function fT(g){var c=[g.a,g.b],f=[g.c,g.d],d=fy(c),a=d7(c,f),b=fy(aq(f,c,-a))||0;c[0]*f[1]<f[0]*c[1]&&(c[0]*=-1,c[1]*=-1,d*=-1,a*=-1),this.rotate=(d?Math.atan2(c[1],c[0]):Math.atan2(-f[0],f[1]))*f6,this.translate=[g.e,g.f],this.scale=[d,b],this.skew=b?Math.atan2(a,b)*f6:0}function d7(b,a){return b[0]*a[0]+b[1]*a[1]}function fy(b){var a=Math.sqrt(d7(b,b));return a&&(b[0]/=a,b[1]/=a),a}function aq(c,a,b){return c[0]+=b*a[0],c[1]+=b*a[1],c}function jL(k,D){var z,b=[],C=[],v=bX.transform(k),j=bX.transform(D),B=v.translate,A=j.translate,m=v.rotate,E=j.rotate,y=v.skew,w=j.skew,x=v.scale,d=j.scale;return B[0]!=A[0]||B[1]!=A[1]?(b.push("translate(",null,",",null,")"),C.push({i:1,x:a0(B[0],A[0])},{i:3,x:a0(B[1],A[1])})):b.push(A[0]||A[1]?"translate("+A+")":""),m!=E?(m-E>180?E+=360:E-m>180&&(m+=360),C.push({i:b.push(b.pop()+"rotate(",null,")")-2,x:a0(m,E)})):E&&b.push(b.pop()+"rotate("+E+")"),y!=w?C.push({i:b.push(b.pop()+"skewX(",null,")")-2,x:a0(y,w)}):w&&b.push(b.pop()+"skewX("+w+")"),x[0]!=d[0]||x[1]!=d[1]?(z=b.push(b.pop()+"scale(",null,",",null,")"),C.push({i:z-4,x:a0(x[0],d[0])},{i:z-2,x:a0(x[1],d[1])})):(1!=d[0]||1!=d[1])&&b.push(b.pop()+"scale("+d+")"),z=C.length,function(e){for(var c,a=-1;++a<z;){b[(c=C[a]).i]=c.x(e)}return b.join("")}}function gd(b,a){return a=(a-=b=+b)||1/a,function(c){return(c-b)/a}}function i0(b,a){return a=(a-=b=+b)||1/a,function(c){return Math.max(0,Math.min(1,(c-b)/a))}}function cI(g){for(var c=g.source,f=g.target,d=dJ(c,f),a=[c];c!==d;){c=c.parent,a.push(c)}for(var b=a.length;f!==d;){a.splice(b,0,f),f=f.parent}return a}function b8(c){for(var a=[],b=c.parent;null!=b;){a.push(c),c=b,b=b.parent}return a.push(c),a}function dJ(h,c){if(h===c){return h}for(var f=b8(h),d=b8(c),a=f.pop(),b=d.pop(),g=null;a===b;){g=a,a=f.pop(),b=d.pop()}return g}function c0(a){a.fixed|=2}function dU(a){a.fixed&=-7}function bS(a){a.fixed|=4,a.px=a.x,a.py=a.y}function dn(a){a.fixed&=-5}function h6(f,s,j){var b=0,p=0;if(f.charge=0,!f.leaf){for(var h,d=f.nodes,m=d.length,k=-1;++k<m;){h=d[k],null!=h&&(h6(h,s,j),f.charge+=h.charge,b+=h.charge*h.cx,p+=h.charge*h.cy)}}if(f.point){f.leaf||(f.point.x+=Math.random()-0.5,f.point.y+=Math.random()-0.5);var g=s*j[f.point.index];f.charge+=f.pointCharge=g,b+=g*f.point.x,p+=g*f.point.y}f.cx=b/f.charge,f.cy=p/f.charge}function j9(b,a){return bX.rebind(b,a,"sort","children","value"),b.nodes=b,b.links=cM,b}function hC(f,b){for(var d=[f];null!=(f=d.pop());){if(b(f),(a=f.children)&&(c=a.length)){for(var c,a;--c>=0;){d.push(a[c])}}}}function fC(h,c){for(var f=[h],d=[];null!=(h=f.pop());){if(d.push(h),(b=h.children)&&(a=b.length)){for(var a,b,g=-1;++g<a;){f.push(b[g])}}}for(;null!=(h=d.pop());){c(h)}}function eg(a){return a.children}function bR(a){return a.value}function hk(b,a){return a.value-b.value}function cM(a){return bX.merge(a.map(function(b){return(b.children||[]).map(function(c){return{source:b,target:c}})}))}function bz(a){return a.x}function fX(a){return a.y}function dN(c,a,b){c.y0=a,c.y=b}function jS(a){return bX.range(a.length)}function ij(d){for(var a=-1,c=d[0].length,b=[];++a<c;){b[a]=0}return b}function eX(g){for(var c,f=1,d=0,a=g[0][1],b=g.length;b>f;++f){(c=g[f][1])>a&&(d=f,a=c)}return d}function cf(a){return a.reduce(gY,0)}function gY(b,a){return b+a[1]}function gj(b,a){return gG(b,Math.ceil(Math.log(a.length)/Math.LN2+1))}function gG(g,c){for(var f=-1,d=+g[0],a=(g[1]-d)/c,b=[];++f<=c;){b[f]=a*f+d}return b}function dv(a){return[bX.min(a),bX.max(a)]}function a8(b,a){return b.value-a.value}function hG(c,a){var b=c._pack_next;c._pack_next=a,a._pack_prev=c,a._pack_next=b,b._pack_prev=a}function eF(b,a){b._pack_next=a,a._pack_prev=b}function j8(f,b){var d=b.x-f.x,c=b.y-f.y,a=f.r+b.r;return 0.999*a*a>d*d+c*c}function g4(D){function x(a){z=Math.min(a.x-a.r,z),J=Math.max(a.x+a.r,J),H=Math.min(a.y-a.r,H),I=Math.max(a.y+a.r,I)}if((K=D.children)&&(F=K.length)){var K,A,w,G,C,O,N,F,z=1/0,J=-1/0,H=1/0,I=-1/0;if(K.forEach(an),A=K[0],A.x=-A.r,A.y=0,x(A),F>1&&(w=K[1],w.x=w.r,w.y=0,x(w),F>2)){for(G=K[2],aQ(A,w,G),x(G),hG(A,G),A._pack_prev=G,hG(G,w),w=A._pack_next,C=3;F>C;C++){aQ(A,w,G=K[C]);var B=0,k=1,L=1;for(O=w._pack_next;O!==w;O=O._pack_next,k++){if(j8(O,G)){B=1;break}}if(1==B){for(N=A._pack_prev;N!==O._pack_prev&&!j8(N,G);N=N._pack_prev,L++){}}B?(L>k||k==L&&w.r<A.r?eF(A,w=O):eF(A=N,w),C--):(hG(A,G),w=G,x(G))}}var E=(z+J)/2,j=(H+I)/2,b=0;for(C=0;F>C;C++){G=K[C],G.x-=E,G.y-=j,b=Math.max(b,G.r+Math.sqrt(G.x*G.x+G.y*G.y))}D.r=b,K.forEach(i7)}}function an(a){a._pack_next=a._pack_prev=a}function i7(a){delete a._pack_next,delete a._pack_prev}function aB(h,c,f,d){var a=h.children;if(h.x=c+=d*h.x,h.y=f+=d*h.y,h.r*=d,a){for(var b=-1,g=a.length;++b<g;){aB(a[b],c,f,d)}}}function aQ(f,s,j){var b=f.r+j.r,p=s.x-f.x,h=s.y-f.y;if(b&&(p||h)){var d=s.r+j.r,m=p*p+h*h;d*=d,b*=b;var k=0.5+(b-d)/(2*m),g=Math.sqrt(Math.max(0,2*d*(b+m)-(b-=m)*b-d*d))/(2*m);j.x=f.x+k*p+g*h,j.y=f.y+k*h-g*p}else{j.x=f.x+b,j.y=f.y}}function e3(b,a){return b.parent==a.parent?1:2}function fj(b){var a=b.children;return a.length?a[0]:b.t}function aZ(c){var a,b=c.children;return(a=b.length)?b[a-1]:c.t}function cA(d,a,c){var b=c/(a.i-d.i);a.c-=b,a.s+=c,d.c+=b,a.z+=c,a.m+=c}function gM(g){for(var c,f=0,d=0,a=g.children,b=a.length;--b>=0;){c=a[b],c.z+=f,c.m+=f,f+=c.s+(d+=c.c)}}function bI(c,a,b){return c.a.parent===a.parent?c.a:b}function jJ(a){return 1+bX.max(a,function(b){return b.y})}function c4(a){return a.reduce(function(c,b){return c+b.x},0)/a.length}function hv(b){var a=b.children;return a&&a.length?hv(a[0]):b}function eL(c){var a,b=c.children;return b&&(a=b.length)?eL(b[a-1]):c}function fs(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function bm(g,c){var f=g.x+c[3],d=g.y+c[0],a=g.dx-c[1]-c[3],b=g.dy-c[0]-c[2];return 0>a&&(f+=a/2,a=0),0>b&&(d+=b/2,b=0),{x:f,y:d,dx:a,dy:b}}function f3(c){var a=c[0],b=c[c.length-1];return b>a?[a,b]:[b,a]}function eq(a){return a.rangeExtent?a.rangeExtent():f3(a.range())}function fG(g,c,f,d){var a=f(g[0],g[1]),b=d(c[0],c[1]);return function(e){return b(a(e))}}function aH(h,c){var f,d=0,a=h.length-1,b=h[d],g=h[a];return b>g&&(f=d,d=a,a=f,f=b,b=g,g=f),h[d]=c.floor(b),h[a]=c.ceil(g),h}function jY(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:eC}function gs(k,f,h,g){var c=[],d=[],j=0,b=Math.min(k.length,f.length)-1;for(k[b]<k[0]&&(k=k.slice().reverse(),f=f.slice().reverse());++j<=b;){c.push(h(k[j-1],k[j])),d.push(g(f[j-1],f[j]))}return function(a){var l=bX.bisect(k,a,1,b)-1;return d[l](c[l](a))}}function js(k,f,h,g){function c(){var a=Math.min(k.length,f.length)>2?gs:fG,e=g?i0:gd;return j=a(k,f,e,h),b=a(f,k,e,ex),d}function d(a){return j(a)}var j,b;return d.invert=function(a){return b(a)},d.domain=function(a){return arguments.length?(k=a.map(Number),c()):k},d.range=function(a){return arguments.length?(f=a,c()):f},d.rangeRound=function(a){return d.range(a).interpolate(a9)},d.clamp=function(a){return arguments.length?(g=a,c()):g},d.interpolate=function(a){return arguments.length?(h=a,c()):h},d.ticks=function(a){return db(k,a)},d.tickFormat=function(a,l){return d5(k,a,l)},d.nice=function(a){return cs(k,a),c()},d.copy=function(){return js(k,f,h,g)},c()}function cS(b,a){return bX.rebind(b,a,"range","rangeRound","interpolate","clamp")}function cs(b,a){return aH(b,jY(dT(b,a)[2]))}function dT(g,c){null==c&&(c=10);var f=f3(g),d=f[1]-f[0],a=Math.pow(10,Math.floor(Math.log(d/c)/Math.LN10)),b=c/d*a;return 0.15>=b?a*=10:0.35>=b?a*=5:0.75>=b&&(a*=2),f[0]=Math.ceil(f[0]/a)*a,f[1]=Math.floor(f[1]/a)*a+0.5*a,f[2]=a,f}function db(b,a){return bX.range.apply(bX,dT(b,a))}function d5(g,c,f){var d=dT(g,c);if(f){var a=f1.exec(f);if(a.shift(),"s"===a[8]){var b=bX.formatPrefix(Math.max(gL(d[0]),gL(d[1])));return a[7]||(a[7]="."+b0(b.scale(d[2]))),a[8]="f",f=bX.format(a.join("")),function(e){return f(b.scale(e))+b.symbol}}a[7]||(a[7]="."+dB(a[8],d)),f=a.join("")}else{f=",."+b0(d[2])+"f"}return bX.format(f)}function b0(a){return -Math.floor(Math.log(a)/Math.LN10+0.01)}function dB(c,a){var b=b0(a[2]);return c in j7?Math.abs(b-b0(Math.max(gL(a[0]),gL(a[1]))))+ +("e"!==c):b-2*("%"===c)}function iD(h,c,f,d){function a(e){return(f?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(c)}function b(e){return f?Math.pow(c,e):-Math.pow(c,-e)}function g(e){return h(a(e))}return g.invert=function(e){return b(h.invert(e))},g.domain=function(e){return arguments.length?(f=e[0]>=0,h.domain((d=e.map(Number)).map(a)),g):d},g.base=function(j){return arguments.length?(c=+j,h.domain(d.map(a)),g):c},g.nice=function(){var e=aH(d.map(a),f?Math:aj);return h.domain(e),d=e.map(b),g},g.ticks=function(){var u=f3(d),r=[],j=u[0],t=u[1],e=Math.floor(a(j)),m=Math.ceil(a(t)),p=c%1?2:c;if(isFinite(m-e)){if(f){for(;m>e;e++){for(var k=1;p>k;k++){r.push(b(e)*k)}}r.push(b(e))}else{for(r.push(b(e));e++<m;){for(var k=p-1;k>0;k--){r.push(b(e)*k)}}}for(e=0;r[e]<j;e++){}for(m=r.length;r[m-1]>t;m--){}r=r.slice(e,m)}return r},g.tickFormat=function(m,j){if(!arguments.length){return g1}arguments.length<2?j=g1:"function"!=typeof j&&(j=bX.format(j));var k,e=Math.max(0.1,m/g.ticks().length),l=f?(k=1e-12,Math.ceil):(k=-1e-12,Math.floor);return function(o){return o/b(l(a(o)+k))<=e?j(o):""}},g.copy=function(){return iD(h.copy(),c,f,d)},cS(g,h)}function kk(g,c,f){function d(e){return g(a(e))}var a=hL(c),b=hL(1/c);return d.invert=function(e){return b(g.invert(e))},d.domain=function(e){return arguments.length?(g.domain((f=e.map(Number)).map(a)),d):f},d.ticks=function(e){return db(f,e)},d.tickFormat=function(h,e){return d5(f,h,e)},d.nice=function(e){return d.domain(cs(f,e))},d.exponent=function(e){return arguments.length?(a=hL(c=e),b=hL(1/c),g.domain(f.map(a)),d):c},d.copy=function(){return kk(g.copy(),c,f)},cS(d,g)}function hL(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function fL(h,c){function f(j){return b[((a.get(j)||("range"===c.t?a.set(j,h.push(j)):0/0))-1)%b.length]}function d(j,k){return bX.range(h.length).map(function(e){return j+k*e})}var a,b,g;return f.domain=function(k){if(!arguments.length){return h}h=[],a=new ib;for(var j,l=-1,e=k.length;++l<e;){a.has(j=k[l])||a.set(j,h.push(j))}return f[c.t].apply(f,c.a)},f.range=function(e){return arguments.length?(b=e,g=0,c={t:"range",a:arguments},f):b},f.rangePoints=function(k,j){arguments.length<2&&(j=0);var n=k[0],e=k[1],m=h.length<2?(n=(n+e)/2,0):(e-n)/(h.length-1+j);return b=d(n+m*j/2,m),g=0,c={t:"rangePoints",a:arguments},f},f.rangeRoundPoints=function(k,j){arguments.length<2&&(j=0);var n=k[0],e=k[1],m=h.length<2?(n=e=Math.round((n+e)/2),0):(e-n)/(h.length-1+j)|0;return b=d(n+Math.round(m*j/2+(e-n-(h.length-1+j)*m)/2),m),g=0,c={t:"rangeRoundPoints",a:arguments},f},f.rangeBands=function(k,j,p){arguments.length<2&&(j=0),arguments.length<3&&(p=j);var e=k[1]<k[0],n=k[e-0],o=k[1-e],m=(o-n)/(h.length-j+2*p);return b=d(n+m*p,m),e&&b.reverse(),g=m*(1-j),c={t:"rangeBands",a:arguments},f},f.rangeRoundBands=function(k,j,p){arguments.length<2&&(j=0),arguments.length<3&&(p=j);var e=k[1]<k[0],n=k[e-0],o=k[1-e],m=Math.floor((o-n)/(h.length-j+2*p));return b=d(n+Math.round((o-n-(h.length-j)*m)/2),m),e&&b.reverse(),g=Math.round(m*(1-j)),c={t:"rangeRoundBands",a:arguments},f},f.rangeBand=function(){return g},f.rangeExtent=function(){return f3(c.a[0])},f.copy=function(){return fL(h,c)},f.domain(h)}function d6(f,d){function c(){var g=0,a=d.length;for(b=[];++g<a;){b[g-1]=bX.quantile(f,g/a)}return e}function e(a){return isNaN(a=+a)?void 0:d[bX.bisect(b,a)]}var b;return e.domain=function(a){return arguments.length?(f=a.map(h0).filter(hV).sort(iy),c()):f},e.range=function(a){return arguments.length?(d=a,c()):d},e.quantiles=function(){return b},e.invertExtent=function(a){return a=d.indexOf(a),0>a?[0/0,0/0]:[a>0?b[a-1]:f[0],a<b.length?b[a]:f[f.length-1]]},e.copy=function(){return d6(f,d)},c()}function bP(h,c,f){function d(e){return f[Math.max(0,Math.min(g,Math.floor(b*(e-h))))]}function a(){return b=f.length/(c-h),g=f.length-1,d}var b,g;return d.domain=function(j){return arguments.length?(h=+j[0],c=+j[j.length-1],a()):[h,c]},d.range=function(e){return arguments.length?(f=e,a()):f},d.invertExtent=function(e){return e=f.indexOf(e),e=0>e?0/0:e/b+h,[e,e+1/b]},d.copy=function(){return bP(h,c,f)},a()}function hd(c,a){function b(d){return d>=d?a[bX.bisect(c,d)]:void 0}return b.domain=function(d){return arguments.length?(c=d,b):c},b.range=function(d){return arguments.length?(a=d,b):a},b.invertExtent=function(d){return d=a.indexOf(d),[c[d-1],c[d]]},b.copy=function(){return hd(c,a)},b}function cH(b){function a(c){return +c}return a.invert=a,a.domain=a.range=function(c){return arguments.length?(b=c.map(a),a):b},a.ticks=function(c){return db(b,c)},a.tickFormat=function(c,d){return d5(b,c,d)},a.copy=function(){return cH(b)},a}function bx(){return 0}function fS(a){return a.innerRadius}function dI(a){return a.outerRadius}function jK(a){return a.startAngle}function h2(a){return a.endAngle}function eS(a){return a&&a.padAngle}function b7(d,a,c,b){return(d-c)*a-(a-b)*d>0?0:1}function gT(U,K,ae,P,I){var Y=U[0]-K[0],T=U[1]-K[1],ar=(I?P:-P)/Math.sqrt(Y*Y+T*T),al=ar*T,W=-ar*Y,L=U[0]+al,ac=U[1]+W,Z=K[0]+al,aa=K[1]+W,R=(L+Z)/2,H=(ac+aa)/2,ai=Z-L,V=aa-ac,D=ai*ai+V*V,B=ae-P,F=L*aa-Z*ac,ao=(0>V?-1:1)*Math.sqrt(B*B*D-F*F),at=(F*V-ai*ao)/D,G=(-F*ai-V*ao)/D,j=(F*V+ai*ao)/D,X=(-F*ai+V*ao)/D,J=at-R,Q=G-H,z=j-R,O=X-H;return J*J+Q*Q>z*z+O*O&&(at=j,G=X),[[at-al,G-W],[at*ae/B,G*ae/B]]}function gb(k){function f(w){function e(){m.push("M",d(k(x),b))}for(var v,m=[],x=[],u=-1,n=w.length,r=aT(h),a=aT(g);++u<n;){c.call(this,v=w[u],u)?x.push([+r.call(this,v,u),+a.call(this,v,u)]):x.length&&(e(),x=[])}return x.length&&e(),m.length?m.join(""):null}var h=cp,g=gF,c=gN,d=gB,j=d.key,b=0.7;return f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(g=a,f):g},f.defined=function(a){return arguments.length?(c=a,f):c},f.interpolate=function(a){return arguments.length?(j="function"==typeof a?d=a:(d=aY.get(a)||gB).key,f):j},f.tension=function(a){return arguments.length?(b=a,f):b},f}function gB(a){return a.join("L")}function dm(a){return gB(a)+"Z"}function a6(f){for(var b=0,d=f.length,c=f[0],a=[c[0],",",c[1]];++b<d;){a.push("H",(c[0]+(c=f[b])[0])/2,"V",c[1])}return d>1&&a.push("H",c[0]),a.join("")}function eA(f){for(var b=0,d=f.length,c=f[0],a=[c[0],",",c[1]];++b<d;){a.push("V",(c=f[b])[1],"H",c[0])}return a.join("")}function j6(f){for(var b=0,d=f.length,c=f[0],a=[c[0],",",c[1]];++b<d;){a.push("H",(c=f[b])[0],"V",c[1])}return a.join("")}function gZ(b,a){return b.length<4?gB(b):b[1]+ap(b.slice(1,-1),aO(b,a))}function ag(b,a){return b.length<3?gB(b):b[0]+ap((b.push(b[0]),b),aO([b[b.length-2]].concat(b,[b[1]]),a))}function iW(b,a){return b.length<3?gB(b):b[0]+ap(b,aO(b,a))}function ap(f,v){if(v.length<1||f.length!=v.length&&f.length!=v.length+2){return gB(f)}var j=f.length!=v.length,b="",p=f[0],h=f[1],d=v[0],m=d,k=1;if(j&&(b+="Q"+(h[0]-2*d[0]/3)+","+(h[1]-2*d[1]/3)+","+h[0]+","+h[1],p=f[1],k=2),v.length>1){m=v[1],h=f[k],k++,b+="C"+(p[0]+d[0])+","+(p[1]+d[1])+","+(h[0]-m[0])+","+(h[1]-m[1])+","+h[0]+","+h[1];for(var g=2;g<v.length;g++,k++){h=f[k],m=v[g],b+="S"+(h[0]-m[0])+","+(h[1]-m[1])+","+h[0]+","+h[1]}}if(j){var w=f[k];b+="Q"+(h[0]+2*m[0]/3)+","+(h[1]+2*m[1]/3)+","+w[0]+","+w[1]}return b}function aO(f,m){for(var h,b=[],l=(1-m)/2,g=f[0],d=f[1],k=1,j=f.length;++k<j;){h=g,g=d,d=f[k],b.push([l*(d[0]-h[0]),l*(d[1]-h[1])])}return b}function eY(f){if(f.length<3){return gB(f)}var m=1,h=f.length,b=f[0],l=b[0],g=b[1],d=[l,l,l,(b=f[1])[0]],k=[g,g,g,b[1]],j=[l,",",g,"L",gH(bH,d),",",gH(bH,k)];for(f.push(f[h-1]);++m<=h;){b=f[m],d.shift(),d.push(b[0]),k.shift(),k.push(b[1]),bG(j,d,k)}return f.pop(),j.push("L",b),j.join("")}function fb(h){if(h.length<4){return gB(h)}for(var c,f=[],d=-1,a=h.length,b=[0],g=[0];++d<3;){c=h[d],b.push(c[0]),g.push(c[1])}for(f.push(gH(bH,b)+","+gH(bH,g)),--d;++d<a;){c=h[d],b.shift(),b.push(c[0]),g.shift(),g.push(c[1]),bG(f,b,g)}return f.join("")}function aX(k){for(var f,h,g=-1,c=k.length,d=c+4,j=[],b=[];++g<4;){h=k[g%c],j.push(h[0]),b.push(h[1])}for(f=[gH(bH,j),",",gH(bH,b)],--g;++g<d;){h=k[g%c],j.shift(),j.push(h[0]),b.shift(),b.push(h[1]),bG(f,j,b)}return f.join("")}function cv(f,s){var j=f.length-1;if(j){for(var b,p,h=f[0][0],d=f[0][1],m=f[j][0]-h,k=f[j][1]-d,g=-1;++g<=j;){b=f[g],p=g/j,b[0]=s*b[0]+(1-s)*(h+p*m),b[1]=s*b[1]+(1-s)*(d+p*k)}}return eY(f)}function gH(b,a){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]*a[3]}function bG(c,a,b){c.push("C",gH(cx,a),",",gH(cx,b),",",gH(gJ,a),",",gH(gJ,b),",",gH(bH,a),",",gH(bH,b))}function jE(b,a){return(a[1]-b[1])/(a[0]-b[0])}function cZ(h){for(var c=0,f=h.length-1,d=[],a=h[0],b=h[1],g=d[0]=jE(a,b);++c<f;){d[c]=(g+(g=jE(a=b,b=h[c+1])))/2}return d[c]=g,d}function hm(f){for(var m,h,b,l,g=[],d=cZ(f),k=-1,j=f.length-1;++k<j;){m=jE(f[k],f[k+1]),gL(m)<bO?d[k]=d[k+1]=0:(h=d[k]/m,b=d[k+1]/m,l=h*h+b*b,l>9&&(l=3*m/Math.sqrt(l),d[k]=l*h,d[k+1]=l*b))}for(k=-1;++k<=j;){l=(f[Math.min(j,k+1)][0]-f[Math.max(0,k-1)][0])/(6*(1+d[k]*d[k])),g.push([l||0,d[k]*l||0])}return g}function eG(a){return a.length<3?gB(a):a[0]+ap(a,hm(a))}function fk(g){for(var c,f,d,a=-1,b=g.length;++a<b;){c=g[a],f=c[0],d=c[1]-fx,c[0]=f*Math.cos(d),c[1]=f*Math.sin(d)}return g}function bj(g){function x(D){function r(){C.push("M",v(g(e),k),y,h(g(o.reverse()),k),"Z")}for(var f,l,a,C=[],o=[],e=[],u=-1,n=D.length,z=aT(m),s=aT(w),B=m===b?function(){return l}:aT(b),A=w===j?function(){return a}:aT(j);++u<n;){d.call(this,f=D[u],u)?(o.push([l=+z.call(this,f,u),a=+s.call(this,f,u)]),e.push([+B.call(this,f,u),+A.call(this,f,u)])):o.length&&(r(),o=[],e=[])}return o.length&&r(),C.length?C.join(""):null}var m=cp,b=cp,w=0,j=gF,d=gN,v=gB,p=v.key,h=v,y="L",k=0.7;return x.x=function(a){return arguments.length?(m=b=a,x):b},x.x0=function(a){return arguments.length?(m=a,x):m},x.x1=function(a){return arguments.length?(b=a,x):b},x.y=function(a){return arguments.length?(w=j=a,x):j},x.y0=function(a){return arguments.length?(w=a,x):w},x.y1=function(a){return arguments.length?(j=a,x):j},x.defined=function(a){return arguments.length?(d=a,x):d},x.interpolate=function(a){return arguments.length?(p="function"==typeof a?v=a:(v=aY.get(a)||gB).key,h=v.reverse||v,y=v.closed?"M":"L",x):p},x.tension=function(a){return arguments.length?(k=a,x):k},x}function fY(a){return a.radius}function ej(a){return[a.x,a.y]}function fB(a){return function(){var b=a.apply(this,arguments),d=b[0],c=b[1]-fx;return[d*Math.cos(c),d*Math.sin(c)]}}function aC(){return 64}function jT(){return"circle"}function gk(b){var a=Math.sqrt(b/c9);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function jb(a){return function(){var b,c;(b=this[a])&&(c=b[b.active])&&(--b.count?delete b[b.active]:delete this[a],b.active+=0.5,c.event&&c.event.interrupt.call(this,this.__data__,c.index))}}function cN(c,a,b){return kh(c,f0),c.namespace=a,c.id=b,c}function cg(g,c,f,d){var a=g.id,b=g.namespace;return iL(g,"function"==typeof f?function(j,h,e){j[b][a].tween.set(c,d(f.call(j,j.__data__,h,e)))}:(f=d(f),function(e){e[b][a].tween.set(c,f)}))}function dO(a){return null==a&&(a=""),function(){this.textContent=a}}function c5(a){return null==a?"__transition__":"__transition_"+a+"__"}function d0(k,f,h,g,c){var d=k[h]||(k[h]={active:0,count:0}),j=d[g];if(!j){var b=c.time;j=d[g]={tween:new ib,time:b,delay:c.delay,duration:c.duration,ease:c.ease,index:f},c=null,++d.count,bX.timer(function(w){function r(p){if(d.active>g){return x()}var l=d[d.active];l&&(--d.count,delete d[d.active],l.event&&l.event.interrupt.call(k,k.__data__,l.index)),d.active=g,j.event&&j.event.start.call(k,k.__data__,f),j.tween.forEach(function(u,s){(s=s.call(k,k.__data__,f))&&t.push(s)}),m=j.ease,o=j.duration,bX.timer(function(){return a.c=e(p||1)?gN:e,1},0,b)}function e(s){if(d.active!==g){return 1}for(var p=s/o,l=m(p),v=t.length;v>0;){t[--v].call(k,l)}return p>=1?(j.event&&j.event.end.call(k,k.__data__,f),x()):void 0}function x(){return --d.count?delete d[g]:delete k[h],1}var o,m,n=j.delay,a=hq,t=[];return a.t=n+b,w>=n?r(w-n):void (a.c=r)},0,b)}}function bY(c,a,b){c.attr("transform",function(e){var d=a(e);return"translate("+(isFinite(d)?d:b(e))+",0)"})}function dw(c,a,b){c.attr("transform",function(e){var d=a(e);return"translate(0,"+(isFinite(d)?d:b(e))+")"})}function im(a){return a.toISOString()}function kj(f,b,d){function c(e){return f(e)}function a(l,k){var j=l[1]-l[0],g=j/k,h=bX.bisect(dQ,g);return h==dQ.length?[b.year,dT(l.map(function(e){return e/31536000000}),k)[2]]:h?b[g/dQ[h-1]<dQ[h]/g?h-1:h]:[bZ,dT(l,k)[2]]}return c.invert=function(e){return hH(f.invert(e))},c.domain=function(e){return arguments.length?(f.domain(e),c):f.domain().map(hH)},c.nice=function(m,j){function k(n){return !isNaN(n)&&!m.range(n,hH(+n+1),j).length}var h=c.domain(),l=f3(h),g=null==m?a(l,10):"number"==typeof m&&a(l,m);return g&&(m=g[0],j=g[1]),c.domain(aH(h,j>1?{floor:function(e){for(;k(e=m.floor(e));){e=hH(e-1)}return e},ceil:function(e){for(;k(e=m.ceil(e));){e=hH(+e+1)}return e}}:m))},c.ticks=function(k,h){var j=f3(c.domain()),g=null==k?a(j,10):"number"==typeof k?a(j,k):!k.range&&[{range:k},h];return g&&(k=g[0],h=g[1]),k.range(j[0],hH(+j[1]+1),1>h?1:h)},c.tickFormat=function(){return d},c.copy=function(){return kj(f.copy(),b,d)},cS(c,f)}function hH(a){return new Date(a)}function fH(a){return JSON.parse(a.responseText)}function ep(b){var a=bF.createRange();return a.selectNode(bF.body),a.createContextualFragment(b.responseText)}var bX={version:"3.5.6"},hs=[].slice,cR=function(a){return hs.call(a)},bF=this.document;if(bF){try{cR(bF.documentElement.childNodes)[0].nodeType}catch(f2){cR=function(c){for(var a=c.length,b=new Array(a);a--;){b[a]=c[a]}return b}}}if(Date.now||(Date.now=function(){return +new Date}),bF){try{bF.createElement("DIV").style.setProperty("opacity",0,"")}catch(dS){var jX=this.Element.prototype,iC=jX.setAttribute,e2=jX.setAttributeNS,cq=this.CSSStyleDeclaration.prototype,g3=cq.setProperty;jX.setAttribute=function(b,a){iC.call(this,b,a+"")},jX.setAttributeNS=function(c,a,b){e2.call(this,c,a,b+"")},cq.setProperty=function(c,a,b){g3.call(this,c,a+"",b)}}}bX.ascending=iy,bX.descending=function(b,a){return b>a?-1:a>b?1:a>=b?0:0/0},bX.min=function(g,c){var f,d,a=-1,b=g.length;if(1===arguments.length){for(;++a<b;){if(null!=(d=g[a])&&d>=d){f=d;break}}for(;++a<b;){null!=(d=g[a])&&f>d&&(f=d)}}else{for(;++a<b;){if(null!=(d=c.call(g,g[a],a))&&d>=d){f=d;break}}for(;++a<b;){null!=(d=c.call(g,g[a],a))&&f>d&&(f=d)}}return f},bX.max=function(g,c){var f,d,a=-1,b=g.length;if(1===arguments.length){for(;++a<b;){if(null!=(d=g[a])&&d>=d){f=d;break}}for(;++a<b;){null!=(d=g[a])&&d>f&&(f=d)}}else{for(;++a<b;){if(null!=(d=c.call(g,g[a],a))&&d>=d){f=d;break}}for(;++a<b;){null!=(d=c.call(g,g[a],a))&&d>f&&(f=d)}}return f},bX.extent=function(h,c){var f,d,a,b=-1,g=h.length;if(1===arguments.length){for(;++b<g;){if(null!=(d=h[b])&&d>=d){f=a=d;break}}for(;++b<g;){null!=(d=h[b])&&(f>d&&(f=d),d>a&&(a=d))}}else{for(;++b<g;){if(null!=(d=c.call(h,h[b],b))&&d>=d){f=a=d;break}}for(;++b<g;){null!=(d=c.call(h,h[b],b))&&(f>d&&(f=d),d>a&&(a=d))}}return[f,a]},bX.sum=function(g,b){var d,c=0,a=g.length,f=-1;if(1===arguments.length){for(;++f<a;){hV(d=+g[f])&&(c+=d)}}else{for(;++f<a;){hV(d=+b.call(g,g[f],f))&&(c+=d)}}return c},bX.mean=function(k,f){var g,d=0,h=k.length,b=-1,j=h;if(1===arguments.length){for(;++b<h;){hV(g=h0(k[b]))?d+=g:--j}}else{for(;++b<h;){hV(g=h0(f.call(k,k[b],b)))?d+=g:--j}}return j?d/j:void 0},bX.quantile=function(g,c){var f=(g.length-1)*c+1,d=Math.floor(f),a=+g[d-1],b=f-d;return b?a+b*(g[d]-a):a},bX.median=function(h,e){var d,f=[],b=h.length,g=-1;if(1===arguments.length){for(;++g<b;){hV(d=h0(h[g]))&&f.push(d)}}else{for(;++g<b;){hV(d=h0(e.call(h,h[g],g)))&&f.push(d)}}return f.length?bX.quantile(f.sort(iy),0.5):void 0},bX.variance=function(d,m){var h,g,b=d.length,k=0,j=0,f=-1,p=0;if(1===arguments.length){for(;++f<b;){hV(h=h0(d[f]))&&(g=h-k,k+=g/++p,j+=g*(h-k))}}else{for(;++f<b;){hV(h=h0(m.call(d,d[f],f)))&&(g=h-k,k+=g/++p,j+=g*(h-k))}}return p>1?j/(p-1):void 0},bX.deviation=function(){var a=bX.variance.apply(this,arguments);return a?Math.sqrt(a):a};var gq=ik(iy);bX.bisectLeft=gq.left,bX.bisect=bX.bisectRight=gq.right,bX.bisector=function(a){return ik(1===a.length?function(b,c){return iy(a(b),c)}:a)},bX.shuffle=function(g,c,f){(b=arguments.length)<3&&(f=g.length,2>b&&(c=0));for(var d,a,b=f-c;b;){a=Math.random()*b--|0,d=g[b+c],g[b+c]=g[a+c],g[a+c]=d}return g},bX.permute=function(d,a){for(var c=a.length,b=new Array(c);c--;){b[c]=d[a[c]]}return b},bX.pairs=function(g){for(var c,f=0,d=g.length-1,a=g[0],b=new Array(0>d?0:d);d>f;){b[f]=[c=a,a=g[++f]]}return b},bX.zip=function(){if(!(d=arguments.length)){return[]}for(var g=-1,c=bX.min(arguments,h4),f=new Array(c);++g<c;){for(var d,a=-1,b=f[g]=new Array(d);++a<d;){b[a]=arguments[a][g]}}return f},bX.transpose=function(a){return bX.zip.apply(bX,a)},bX.keys=function(c){var a=[];for(var b in c){a.push(b)}return a},bX.values=function(c){var a=[];for(var b in c){a.push(c[b])}return a},bX.entries=function(c){var a=[];for(var b in c){a.push({key:b,value:c[b]})}return a},bX.merge=function(h){for(var c,f,d,a=h.length,b=-1,g=0;++b<a;){g+=h[b].length}for(f=new Array(g);--a>=0;){for(d=h[a],c=d.length;--c>=0;){f[--g]=d[c]}}return f};var gL=Math.abs;bX.range=function(h,c,f){if(arguments.length<3&&(f=1,arguments.length<2&&(c=h,h=0)),(c-h)/f===1/0){throw new Error("infinite range")}var d,a=[],b=iF(gL(f)),g=-1;if(h*=b,c*=b,f*=b,0>f){for(;(d=h+f*++g)>c;){a.push(d/b)}}else{for(;(d=h+f*++g)<c;){a.push(d/b)}}return a},bX.map=function(h,c){var f=new ib;if(h instanceof ib){h.forEach(function(j,e){f.set(j,e)})}else{if(Array.isArray(h)){var d,a=-1,b=h.length;if(1===arguments.length){for(;++a<b;){f.set(a,h[a])}}else{for(;++a<b;){f.set(c.call(h,d=h[a],a),d)}}}else{for(var g in h){f.set(g,h[g])}}}return f};var dA="__proto__",bh="\x00";iB(ib,{has:ip,get:function(a){return this._[hY(a)]},set:function(b,a){return this._[hY(b)]=a},remove:iq,keys:h3,values:function(){var b=[];for(var a in this._){b.push(this._[a])}return b},entries:function(){var b=[];for(var a in this._){b.push({key:iv(a),value:this._[a]})}return b},size:hT,empty:iA,forEach:function(b){for(var a in this._){b.call(this,iv(a),this._[a])}}}),bX.nest=function(){function h(x,j,u){if(u>=b.length){return d?d.call(a,j):f?j.sort(f):j}for(var r,y,m,k,l=-1,e=j.length,w=b[u++],n=new ib;++l<e;){(k=n.get(r=w(y=j[l])))?k.push(y):n.set(r,[y])}return x?(y=x(),m=function(p,o){y.set(p,h(x,o,u))}):(y={},m=function(p,o){y[p]=h(x,o,u)}),n.forEach(m),y}function c(m,l){if(l>=b.length){return m}var k=[],j=g[l++];return m.forEach(function(o,e){k.push({key:o,values:c(e,l)})}),j?k.sort(function(o,e){return j(o.key,e.key)}):k}var f,d,a={},b=[],g=[];return a.map=function(j,k){return h(k,j,0)},a.entries=function(j){return c(h(bX.map,j,0),0)},a.key=function(e){return b.push(e),a},a.sortKeys=function(e){return g[b.length-1]=e,a},a.sortValues=function(e){return f=e,a},a.rollup=function(e){return d=e,a},a},bX.set=function(d){var a=new h8;if(d){for(var c=0,b=d.length;b>c;++c){a.add(d[c])}}return a},iB(h8,{has:ip,add:function(a){return this._[hY(a+="")]=!0,a},remove:iq,values:h3,size:hT,empty:iA,forEach:function(b){for(var a in this._){b.call(this,iv(a))}}}),bX.behavior={},bX.rebind=function(f,b){for(var d,c=1,a=arguments.length;++c<a;){f[d=arguments[c]]=i4(f,b,b[d])}return f};var hK=["webkit","ms","moz","Moz","o","O"];bX.dispatch=function(){for(var c=new iG,a=-1,b=arguments.length;++a<b;){c[arguments[a]]=hS(c)}return c},iG.prototype.on=function(d,a){var c=d.indexOf("."),b="";if(c>=0&&(b=d.slice(c+1),d=d.slice(0,c)),d){return arguments.length<2?this[d].on(b):this[d].on(b,a)}if(2===arguments.length){if(null==a){for(d in this){this.hasOwnProperty(d)&&this[d].on(b,null)}}return this}},bX.event=null,bX.requote=function(a){return a.replace(eK,"\\$&")};var eK=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,kh={}.__proto__?function(b,a){b.__proto__=a}:function(c,a){for(var b in a){c[b]=a[b]}},g7=function(b,a){return a.querySelector(b)},aA=function(b,a){return a.querySelectorAll(b)},jq=function(c,a){var b=c.matches||c[hR(c,"matchesSelector")];return(jq=function(e,d){return b.call(e,d)})(c,a)};"function"==typeof Sizzle&&(g7=function(b,a){return Sizzle(b,a)[0]||null},aA=Sizzle,jq=Sizzle.matchesSelector),bX.selection=function(){return bX.select(bF.documentElement)};var aG=bX.selection.prototype=[];aG.select=function(f){var s,j,b,p,h=[];f=i2(f);for(var d=-1,m=this.length;++d<m;){h.push(s=[]),s.parentNode=(b=this[d]).parentNode;for(var k=-1,g=b.length;++k<g;){(p=b[k])?(s.push(j=f.call(p,p.__data__,k,d)),j&&"__data__" in p&&(j.__data__=p.__data__)):s.push(null)}}return jx(h)},aG.selectAll=function(f){var m,h,b=[];f=jv(f);for(var l=-1,g=this.length;++l<g;){for(var d=this[l],k=-1,j=d.length;++k<j;){(h=d[k])&&(b.push(m=cR(f.call(h,h.__data__,k,l))),m.parentNode=h)}}return jx(b)};var aW={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};bX.ns={prefix:aW,qualify:function(c){var a=c.indexOf(":"),b=c;return a>=0&&(b=c.slice(0,a),c=c.slice(a+1)),aW.hasOwnProperty(b)?{space:aW[b],local:c}:c}},aG.attr=function(c,a){if(arguments.length<2){if("string"==typeof c){var b=this.node();return c=bX.ns.qualify(c),c.local?b.getAttributeNS(c.space,c.local):b.getAttribute(c)}for(a in c){this.each(hO(a,c[a]))}return this}return this.each(hO(c,a))},aG.classed=function(f,b){if(arguments.length<2){if("string"==typeof f){var d=this.node(),c=(f=iS(f)).length,a=-1;if(b=d.classList){for(;++a<c;){if(!b.contains(f[a])){return !1}}}else{for(b=d.getAttribute("class");++a<c;){if(!i5(f[a]).test(b)){return !1}}}return !0}for(b in f){this.each(iV(b,f[b]))}return this}return this.each(iV(f,b))},aG.style=function(f,d,c){var a=arguments.length;if(3>a){if("string"!=typeof f){2>a&&(d="");for(c in f){this.each(iY(c,f[c],d))}return this}if(2>a){var b=this.node();return hX(b).getComputedStyle(b,null).getPropertyValue(f)}c=""}return this.each(iY(f,d,c))},aG.property=function(b,a){if(arguments.length<2){if("string"==typeof b){return this.node()[b]}for(a in b){this.each(iR(a,b[a]))}return this}return this.each(iR(b,a))},aG.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},aG.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},aG.append=function(a){return a=ih(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},aG.insert=function(b,a){return b=ih(b),a=i2(a),this.select(function(){return this.insertBefore(b.apply(this,arguments),a.apply(this,arguments)||null)})},aG.remove=function(){return this.each(jk)},aG.data=function(f,m){function h(t,C){var a,G,x,s=t.length,B=C.length,z=Math.min(s,B),A=new Array(B),c=new Array(B),F=new Array(s);if(m){var D,w=new ib,E=new Array(s);for(a=-1;++a<s;){w.has(D=m.call(G=t[a],G.__data__,a))?F[a]=G:w.set(D,G),E[a]=D}for(a=-1;++a<B;){(G=w.get(D=m.call(C,x=C[a],a)))?G!==!0&&(A[a]=G,G.__data__=x):c[a]=jf(x),w.set(D,!0)}for(a=-1;++a<s;){w.get(E[a])!==!0&&(F[a]=t[a])}}else{for(a=-1;++a<z;){G=t[a],x=C[a],G?(G.__data__=x,A[a]=G):c[a]=jf(x)}for(;B>a;++a){c[a]=jf(C[a])}for(;s>a;++a){F[a]=t[a]}}c.update=A,c.parentNode=A.parentNode=F.parentNode=t.parentNode,k.push(c),j.push(A),p.push(F)}var b,l,g=-1,d=this.length;if(!arguments.length){for(f=new Array(d=(b=this[0]).length);++g<d;){(l=b[g])&&(f[g]=l.__data__)}return f}var k=iK([]),j=jx([]),p=jx([]);if("function"==typeof f){for(;++g<d;){h(b=this[g],f.call(b,b.parentNode.__data__,g))}}else{for(;++g<d;){h(b=this[g],f)}}return j.enter=function(){return k},j.exit=function(){return p},j},aG.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},aG.filter=function(f){var m,h,b,l=[];"function"!=typeof f&&(f=iZ(f));for(var g=0,d=this.length;d>g;g++){l.push(m=[]),m.parentNode=(h=this[g]).parentNode;for(var k=0,j=h.length;j>k;k++){(b=h[k])&&f.call(b,b.__data__,k,g)&&m.push(b)}}return jx(l)},aG.order=function(){for(var g=-1,c=this.length;++g<c;){for(var f,d=this[g],a=d.length-1,b=d[a];--a>=0;){(f=d[a])&&(b&&b!==f.nextSibling&&b.parentNode.insertBefore(f,b),b=f)}}return this},aG.sort=function(c){c=jd.apply(this,arguments);for(var a=-1,b=this.length;++a<b;){this[a].sort(c)}return this.order()},aG.each=function(a){return iL(this,function(b,d,c){a.call(b,b.__data__,d,c)})},aG.call=function(b){var a=cR(arguments);return b.apply(a[0]=this,a),this},aG.empty=function(){return !this.node()},aG.node=function(){for(var g=0,c=this.length;c>g;g++){for(var f=this[g],d=0,a=f.length;a>d;d++){var b=f[d];if(b){return b}}}return null},aG.size=function(){var a=0;return iL(this,function(){++a}),a};var e6=[];bX.selection.enter=iK,bX.selection.enter.prototype=e6,e6.append=aG.append,e6.empty=aG.empty,e6.node=aG.node,e6.call=aG.call,e6.size=aG.size,e6.select=function(f){for(var v,j,b,p,h,d=[],m=-1,k=this.length;++m<k;){b=(p=this[m]).update,d.push(v=[]),v.parentNode=p.parentNode;for(var g=-1,w=p.length;++g<w;){(h=p[g])?(v.push(b[g]=j=f.call(p.parentNode,h.__data__,g,m)),j.__data__=h.__data__):v.push(null)}}return jx(d)},e6.insert=function(b,a){return arguments.length<2&&(a=iP(this)),aG.insert.call(this,b,a)},bX.select=function(a){var b;return"string"==typeof a?(b=[g7(a,bF)],b.parentNode=bF.documentElement):(b=[a],b.parentNode=h5(a)),jx([b])},bX.selectAll=function(b){var a;return"string"==typeof b?(a=cR(aA(b,bF)),a.parentNode=bF.documentElement):(a=b,a.parentNode=null),jx([a])},aG.on=function(d,a,c){var b=arguments.length;if(3>b){if("string"!=typeof d){2>b&&(a=!1);for(c in d){this.each(iM(c,d[c],a))}return this}if(2>b){return(b=this.node()["__on"+d])&&b._}c=!1}return this.each(iM(d,a,c))};var fq=bX.map({mouseenter:"mouseover",mouseleave:"mouseout"});bF&&fq.forEach(function(a){"on"+a in bF&&fq.remove(a)});var a5,cG=0;bX.mouse=function(a){return i9(a,id())};var gP=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;bX.touch=function(g,c,f){if(arguments.length<3&&(f=c,c=id().changedTouches),c){for(var d,a=0,b=c.length;b>a;++a){if((d=c[a]).identifier===f){return i9(g,d)}}}},bX.behavior.drag=function(){function g(){this.on("mousedown.drag",b).on("touchstart.drag",f)}function d(m,j,k,h,l){return function(){function B(){var v,s,p=j(r,C);p&&(v=p[0]-w[0],s=p[1]-w[1],e|=v|s,w=p,t({type:"drag",x:p[0]+o[0],y:p[1]+o[1],dx:v,dy:s}))}function z(){j(r,C)&&(n.on(h+x,null).on(l+x,null),A(e&&bX.event.target===u),t({type:"dragend"}))}var o,D=this,u=bX.event.target,r=D.parentNode,t=c.of(D,arguments),e=0,C=m(),x=".drag"+(null==C?"":"-"+C),n=bX.select(k(u)).on(h+x,B).on(l+x,z),A=iN(u),w=j(r,C);a?(o=a.apply(D,arguments),o=[o.x-w[0],o.y-w[1]]):o=[0,0],t({type:"dragstart"})}}var c=jn(g,"drag","dragstart","dragend"),a=null,b=d(iE,bX.mouse,hX,"mousemove","mouseup"),f=d(jg,bX.touch,hQ,"touchmove","touchend");return g.origin=function(e){return arguments.length?(a=e,g):a},bX.rebind(g,c,"on")},bX.touches=function(b,a){return arguments.length<2&&(a=id().touches),a?cR(a).map(function(c){var d=i9(b,c);return d.identifier=c.identifier,d}):[]};var bO=0.000001,jR=bO*bO,c9=Math.PI,hy=2*c9,eO=hy-bO,fx=c9/2,bw=c9/180,f6=180/c9,ew=Math.SQRT2,fK=2,aN=4;bX.interpolateZoom=function(C,w){function J(f){var a=f*b;if(D){var c=cD(j),d=F/(fK*G)*(c*bq(ew*a+j)-g9(j));return[z+d*E,k+d*x,F*c/cD(ew*a+j)]}return[z+f*E,k+f*x,F*Math.exp(ew*a)]}var z=C[0],k=C[1],F=C[2],B=w[0],M=w[1],L=w[2],E=B-z,x=M-k,I=E*E+x*x,G=Math.sqrt(I),H=(L*L-F*F+aN*I)/(2*F*fK*G),A=(L*L-F*F-aN*I)/(2*L*fK*G),j=Math.log(Math.sqrt(H*H+1)-H),K=Math.log(Math.sqrt(A*A+1)-A),D=K-j,b=(D||Math.log(L/F))/ew;return J.duration=1000*b,J},bX.behavior.zoom=function(){function Z(a){a.on(V,ar).on(gx+".zoom",ao).on("dblclick.zoom",X).on(t,al)}function at(a){return[(a[0]-ae.x)/ae.k,(a[1]-ae.y)/ae.k]}function U(a){return[a[0]*ae.k+ae.x,a[1]*ae.k+ae.y]}function O(a){ae.k=Math.max(B[0],Math.min(B[1],a))}function ai(b,a){a=U(a),ae.x+=b[0]-a[0],ae.y+=b[1]-a[1]}function Y(a,c,b,d){a.__chart__={x:ae.x,y:ae.y,k:ae.k},O(Math.pow(2,d)),ai(au=c,b),a=bX.select(a),S>0&&(a=a.transition().duration(S)),a.call(Z.event)}function be(){bc&&bc.domain(I.range().map(function(a){return(a-ae.x)/ae.k}).map(I.invert)),J&&J.domain(bi.range().map(function(a){return(a-ae.y)/ae.k}).map(bi.invert))}function ba(a){G++||a({type:"zoomstart"})}function ac(a){be(),a({type:"zoom",scale:ae.k,translate:[ae.x,ae.y]})}function Q(a){--G||(a({type:"zoomend"}),au=null)}function ar(){function e(){m=1,ai(bX.mouse(v),l),ac(s)}function b(){k.on(F,null).on(j,null),c(m&&bX.event.target===d),Q(s)}var v=this,d=bX.event.target,s=P.of(v,arguments),m=0,k=bX.select(hX(v)).on(F,e).on(j,b),l=at(bX.mouse(v)),c=iN(v);bk.call(v),ba(s)}function al(){function f(){var a=bX.touches(e);return k=ae.k,a.forEach(function(b){b.identifier in l&&(l[b.identifier]=at(b))}),a}function L(){var w=bX.event.target;bX.select(w).on(u,c).on(o,z),C.push(w);for(var p=bX.event.changedTouches,v=0,b=p.length;b>v;++v){l[p[v].identifier]=null}var r=f(),a=Date.now();if(1===r.length){if(500>a-E){var x=r[0];Y(e,x,l[x.identifier],Math.floor(Math.log(ae.k)/Math.LN2)+1),iU()}E=a}else{if(r.length>1){var x=r[0],n=r[1],d=x[0]-n[0],m=x[1]-n[1];h=d*d+m*m}}}function c(){var g,x,p,b,d=bX.touches(e);bk.call(e);for(var w=0,v=d.length;v>w;++w,b=null){if(p=d[w],b=l[p.identifier]){if(x){break}g=p,x=b}}if(b){var y=(y=p[0]-g[0])*y+(y=p[1]-g[1])*y,m=h&&Math.sqrt(y/h);g=[(g[0]+p[0])/2,(g[1]+p[1])/2],x=[(x[0]+b[0])/2,(x[1]+b[1])/2],O(m*k)}E=null,ai(g,x),ac(D)}function z(){if(bX.event.touches.length){for(var b=bX.event.changedTouches,g=0,d=b.length;d>g;++g){delete l[b[g].identifier]}for(var a in l){return void f()}}bX.selectAll(C).on(s,null),A.on(V,ar).on(t,al),M(),Q(D)}var k,e=this,D=P.of(e,arguments),l={},h=0,s=".zoom-"+bX.event.changedTouches[0].identifier,u="touchmove"+s,o="touchend"+s,C=[],A=bX.select(e),M=iN(e);L(),ba(D),A.on(V,null).on(t,L)}function ao(){var a=P.of(this,arguments);H?clearTimeout(H):(bk.call(this),K=at(au=aa||bX.mouse(this)),ba(a)),H=setTimeout(function(){H=null,Q(a)},50),iU(),O(Math.pow(2,0.002*j5())*ae.k),ai(au,K),ac(a)}function X(){var b=bX.mouse(this),a=Math.log(ae.k)/Math.LN2;Y(this,b,at(b),bX.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)}var K,au,aa,H,E,I,bc,bi,J,ae={x:0,y:0,k:1},W=[960,500],B=jD,S=250,G=0,V="mousedown.zoom",F="mousemove.zoom",j="mouseup.zoom",t="touchstart.zoom",P=jn(Z,"zoomstart","zoom","zoomend");return gx||(gx="onwheel" in bF?(j5=function(){return -bX.event.deltaY*(bX.event.deltaMode?120:1)},"wheel"):"onmousewheel" in bF?(j5=function(){return bX.event.wheelDelta},"mousewheel"):(j5=function(){return -bX.event.detail},"MozMousePixelScroll")),Z.event=function(a){a.each(function(){var c=P.of(this,arguments),b=ae;eI?bX.select(this).transition().each("start.zoom",function(){ae=this.__chart__||{x:0,y:0,k:1},ba(c)}).tween("zoom:zoom",function(){var h=W[0],g=W[1],d=au?au[0]:h/2,f=au?au[1]:g/2,k=bX.interpolateZoom([(d-ae.x)/ae.k,(f-ae.y)/ae.k,h/ae.k],[(d-b.x)/b.k,(f-b.y)/b.k,h/b.k]);return function(l){var m=k(l),e=h/m[2];this.__chart__=ae={x:d-m[0]*e,y:f-m[1]*e,k:e},ac(c)}}).each("interrupt.zoom",function(){Q(c)}).each("end.zoom",function(){Q(c)}):(this.__chart__=ae,ba(c),ac(c),Q(c))})},Z.translate=function(a){return arguments.length?(ae={x:+a[0],y:+a[1],k:ae.k},be(),Z):[ae.x,ae.y]},Z.scale=function(a){return arguments.length?(ae={x:ae.x,y:ae.y,k:+a},be(),Z):ae.k},Z.scaleExtent=function(a){return arguments.length?(B=null==a?jD:[+a[0],+a[1]],Z):B},Z.center=function(a){return arguments.length?(aa=a&&[+a[0],+a[1]],Z):aa},Z.size=function(a){return arguments.length?(W=a&&[+a[0],+a[1]],Z):W},Z.duration=function(a){return arguments.length?(S=+a,Z):S},Z.x=function(a){return arguments.length?(bc=a,I=a.copy(),ae={x:0,y:0,k:1},Z):bc},Z.y=function(a){return arguments.length?(J=a,bi=a.copy(),ae={x:0,y:0,k:1},Z):J},bX.rebind(Z,P,"on")};var j5,gx,jD=[0,1/0];bX.color=dG,dG.prototype.toString=function(){return this.rgb()+""},bX.hsl=jH;var cV=jH.prototype=new dG;cV.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),new jH(this.h,this.s,this.l/a)},cV.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),new jH(this.h,this.s,a*this.l)},cV.rgb=function(){return hW(this.h,this.s,this.l)},bX.hcl=eQ;var cz=eQ.prototype=new dG;cz.brighter=function(a){return new eQ(this.h,this.c,Math.min(100,this.l+dZ*(arguments.length?a:1)))},cz.darker=function(a){return new eQ(this.h,this.c,Math.max(0,this.l-dZ*(arguments.length?a:1)))},cz.rgb=function(){return b3(this.h,this.c,this.l).rgb()},bX.lab=gR;var dZ=18,dg=0.95047,eh=1,b6=1.08883,dE=gR.prototype=new dG;dE.brighter=function(a){return new gR(Math.min(100,this.l+dZ*(arguments.length?a:1)),this.a,this.b)},dE.darker=function(a){return new gR(Math.max(0,this.l-dZ*(arguments.length?a:1)),this.a,this.b)},dE.rgb=function(){return f8(this.l,this.a,this.b)},bX.rgb=ey;var iJ=ey.prototype=new dG;iJ.brighter=function(f){f=Math.pow(0.7,arguments.length?f:1);var b=this.r,d=this.g,c=this.b,a=30;return b||d||c?(b&&a>b&&(b=a),d&&a>d&&(d=a),c&&a>c&&(c=a),new ey(Math.min(255,b/f),Math.min(255,d/f),Math.min(255,c/f))):new ey(a,a,a)},iJ.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),new ey(a*this.r,a*this.g,a*this.b)},iJ.hsl=function(){return ak(this.r,this.g,this.b)},iJ.toString=function(){return"#"+kp(this.r)+kp(this.g)+kp(this.b)};var af=bX.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});af.forEach(function(b,a){af.set(b,j2(a))}),bX.functor=aT,bX.xhr=cm(hQ),bX.dsv=function(f,m){function h(r,c,a){arguments.length<3&&(a=c,c=null);var p=gE(r,m,null==c?b:l(c),a);return p.row=function(e){return arguments.length?p.response(null==(c=e)?b:l(e)):c},p}function b(a){return h.parse(a.responseText)}function l(a){return function(c){return h.parse(c.responseText,a)}}function g(a){return a.map(d).join(f)}function d(a){return k.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var k=new RegExp('["'+f+"\n]"),j=f.charCodeAt(0);return h.parse=function(e,a){var c;return h.parseRows(e,function(r,p){if(c){return c(r,p-1)}var o=new Function("d","return {"+r.map(function(u,s){return JSON.stringify(u)+": d["+s+"]"}).join(",")+"}");c=a?function(t,s){return a(o(t),s)}:o})},h.parseRows=function(v,D){function A(){if(E>=w){return p}if(C){return C=!1,x}var o=E;if(34===v.charCodeAt(o)){for(var u=o;u++<w;){if(34===v.charCodeAt(u)){if(34!==v.charCodeAt(u+1)){break}++u}}E=u+2;var s=v.charCodeAt(u+1);return 13===s?(C=!0,10===v.charCodeAt(u+2)&&++E):10===s&&(C=!0),v.slice(o+1,u).replace(/""/g,'"')}for(;w>E;){var s=v.charCodeAt(E++),n=1;if(10===s){C=!0}else{if(13===s){C=!0,10===v.charCodeAt(E)&&(++E,++n)}else{if(s!==j){continue}}}return v.slice(o,E-n)}return v.slice(o)}for(var c,C,x={},p={},B=[],w=v.length,E=0,z=0;(c=A())!==p;){for(var y=[];c!==x&&c!==p;){y.push(c),c=A()}D&&null==(y=D(y,z++))||B.push(y)}return B},h.format=function(c){if(Array.isArray(c[0])){return h.formatRows(c)}var e=new h8,a=[];return c.forEach(function(p){for(var o in p){e.has(o)||a.push(e.add(o))}}),[a.map(d).join(f)].concat(c.map(function(n){return a.map(function(o){return d(n[o])}).join(f)})).join("\n")},h.formatRows=function(a){return a.map(g).join("\n")},h},bX.csv=bX.dsv(",","text/csv"),bX.tsv=bX.dsv("	","text/tab-separated-values");var hP,fO,en,bV,hq,cQ=this[hR(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};bX.timer=function(g,c,f){var d=arguments.length;2>d&&(c=0),3>d&&(f=Date.now());var a=f+c,b={c:g,t:a,f:!1,n:null};fO?fO.n=b:hP=b,fO=b,en||(bV=clearTimeout(bV),en=1,cQ(cX))},bX.timer.flush=function(){hh(),eD()},bX.round=function(b,a){return a?Math.round(b*(a=Math.pow(10,a)))/a:Math.round(b)};var bD=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(bd);bX.formatPrefix=function(c,a){var b=0;return c&&(0>c&&(c*=-1),a&&(c=bX.round(c,fg(c,a))),b=1+Math.floor(1e-12+Math.log(c)/Math.LN10),b=Math.max(-24,Math.min(24,3*Math.floor((b-1)/3)))),bD[8+b/3]};var f1=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,dR=bX.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(b,a){return b.toPrecision(a)},e:function(b,a){return b.toExponential(a)},f:function(b,a){return b.toFixed(a)},r:function(b,a){return(b=bX.round(b,fg(b,a))).toFixed(Math.max(0,Math.min(20,fg(b*(1+1e-15),a))))}}),jW=bX.time={},iz=Date;fz.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){e1.setUTCDate.apply(this._,arguments)},setDay:function(){e1.setUTCDay.apply(this._,arguments)},setFullYear:function(){e1.setUTCFullYear.apply(this._,arguments)},setHours:function(){e1.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){e1.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){e1.setUTCMinutes.apply(this._,arguments)},setMonth:function(){e1.setUTCMonth.apply(this._,arguments)},setSeconds:function(){e1.setUTCSeconds.apply(this._,arguments)},setTime:function(){e1.setTime.apply(this._,arguments)}};var e1=Date.prototype;jW.year=ax(function(a){return a=jW.day(a),a.setMonth(0,1),a},function(b,a){b.setFullYear(b.getFullYear()+a)},function(a){return a.getFullYear()}),jW.years=jW.year.range,jW.years.utc=jW.year.utc.range,jW.day=ax(function(b){var a=new iz(2000,0);return a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),a},function(b,a){b.setDate(b.getDate()+a)},function(a){return a.getDate()-1}),jW.days=jW.day.range,jW.days.utc=jW.day.utc.range,jW.dayOfYear=function(b){var a=jW.year(b);return Math.floor((b-a-60000*(b.getTimezoneOffset()-a.getTimezoneOffset()))/86400000)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(c,a){a=7-a;var b=jW[c]=ax(function(d){return(d=jW.day(d)).setDate(d.getDate()-(d.getDay()+a)%7),d},function(e,d){e.setDate(e.getDate()+7*Math.floor(d))},function(f){var d=jW.year(f).getDay();return Math.floor((jW.dayOfYear(f)+(d+a)%7)/7)-(d!==a)});jW[c+"s"]=b.range,jW[c+"s"].utc=b.utc.range,jW[c+"OfYear"]=function(f){var d=jW.year(f).getDay();return Math.floor((jW.dayOfYear(f)+(d+a)%7)/7)}}),jW.week=jW.sunday,jW.weeks=jW.sunday.range,jW.weeks.utc=jW.sunday.utc.range,jW.weekOfYear=jW.sundayOfYear;var cn={"-":"",_:" ",0:"0"},g2=/^\s*\d+/,gp=/^%/;bX.locale=function(a){return{numberFormat:fV(a),timeFormat:gg(a)}};var gK=bX.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});bX.format=gK.numberFormat,bX.geo={},iw.prototype={s:0,t:0,add:function(a){eZ(a,this.t,dz),eZ(dz.s,this.s,this),this.s?this.t+=dz.t:this.s=dz.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var dz=new iw;bX.geo.stream=function(b,a){b&&bf.hasOwnProperty(b.type)?bf[b.type](b,a):cj(b,a)};var bf={Feature:function(b,a){cj(b.geometry,a)},FeatureCollection:function(f,b){for(var d=f.features,c=-1,a=d.length;++c<a;){cj(d[c].geometry,b)}}},hJ={Sphere:function(b,a){a.sphere()},Point:function(b,a){b=b.coordinates,a.point(b[0],b[1],b[2])},MultiPoint:function(f,b){for(var d=f.coordinates,c=-1,a=d.length;++c<a;){f=d[c],b.point(f[0],f[1],f[2])}},LineString:function(b,a){g0(b.coordinates,a,0)},MultiLineString:function(f,b){for(var d=f.coordinates,c=-1,a=d.length;++c<a;){g0(d[c],b,0)}},Polygon:function(b,a){gm(b.coordinates,a)},MultiPolygon:function(f,b){for(var d=f.coordinates,c=-1,a=d.length;++c<a;){gm(d[c],b)}},GeometryCollection:function(f,b){for(var d=f.geometries,c=-1,a=d.length;++c<a;){cj(d[c],b)}}};bX.geo.area=function(a){return eJ=0,bX.geo.stream(a,g6),eJ};var eJ,kf=new iw,g6={sphere:function(){eJ+=4*c9},point:iE,lineStart:iE,lineEnd:iE,polygonStart:function(){kf.reset(),g6.lineStart=gI},polygonEnd:function(){var a=2*kf;eJ+=0>a?4*c9+a:a,g6.lineStart=g6.lineEnd=g6.point=iE}};bX.geo.bounds=function(){function G(b,a){j.push(w=[C=b,K=b]),N>a&&(N=a),a>L&&(L=a)}function B(M,h){var a=dx([M*bw,h*bw]);if(H){var x=hI(H,a),g=[x[1],-x[0],0],b=hI(g,x);g5(b),b=av(b);var n=M-E,f=n>0?1:-1,s=b[0]*f6*f,m=gL(n)>180;if(m^(s>f*E&&f*M>s)){var p=b[1]*f6;p>L&&(L=p)}else{if(s=(s+360)%360-180,m^(s>f*E&&f*M>s)){var p=-b[1]*f6;N>p&&(N=p)}else{N>h&&(N=h),h>L&&(L=h)}}m?E>M?S(C,M)>S(C,K)&&(K=M):S(M,K)>S(C,K)&&(C=M):K>=C?(C>M&&(C=M),M>K&&(K=M)):M>E?S(C,M)>S(C,K)&&(K=M):S(M,K)>S(C,K)&&(C=M)}else{G(M,h)}H=a,E=M}function O(){R.point=B}function D(){w[0]=C,w[1]=K,R.point=G,H=null}function A(c,b){if(H){var a=c-E;k+=gL(a)>180?a+(a>0?360:-360):a}else{z=c,P=b}g6.point(c,b),B(c,b)}function J(){g6.lineStart()}function F(){A(z,P),g6.lineEnd(),gL(k)>bO&&(C=-(K=180)),w[0]=C,w[1]=K,H=null}function S(b,a){return(a-=b)<0?a+360:a}function Q(b,a){return b[0]-a[0]}function I(b,a){return a[0]<=a[1]?a[0]<=b&&b<=a[1]:b<a[0]||a[1]<b}var C,N,K,L,E,z,P,H,k,j,w,R={point:G,lineStart:O,lineEnd:D,polygonStart:function(){R.point=A,R.lineStart=J,R.lineEnd=F,k=0,g6.polygonStart()},polygonEnd:function(){g6.polygonEnd(),R.point=G,R.lineStart=O,R.lineEnd=D,0>kf?(C=-(K=180),N=-(L=90)):k>bO?L=90:-bO>k&&(N=-90),w[0]=C,w[1]=K}};return function(l){L=K=-(C=N=1/0),j=[],bX.geo.stream(l,R);var c=j.length;if(c){j.sort(Q);for(var g,d=1,a=j[0],b=[a];c>d;++d){g=j[d],I(g[0],a)||I(g[1],a)?(S(a[0],g[1])>S(a[0],a[1])&&(a[1]=g[1]),S(g[0],a[1])>S(a[0],a[1])&&(a[0]=g[0])):b.push(a=g)}for(var h,g,f=-1/0,c=b.length-1,d=0,a=b[c];c>=d;a=g,++d){g=b[d],(h=S(a[1],g[0]))>f&&(f=h,C=g[0],K=a[1])}}return j=w=null,1/0===C||1/0===N?[[0/0,0/0],[0/0,0/0]]:[[C,N],[K,L]]}}(),bX.geo.centroid=function(f){ay=jm=aF=aU=e5=fp=a3=cE=gO=bM=jP=0,bX.geo.stream(f,c8);var b=gO,d=bM,c=jP,a=b*b+d*d+c*c;return jR>a&&(b=fp,d=a3,c=cE,bO>jm&&(b=aF,d=aU,c=e5),a=b*b+d*d+c*c,jR>a)?[0/0,0/0]:[Math.atan2(d,b)*f6,bL(c/Math.sqrt(a))*f6]};var ay,jm,aF,aU,e5,fp,a3,cE,gO,bM,jP,c8={sphere:iE,point:aD,lineStart:e4,lineEnd:fm,polygonStart:function(){c8.lineStart=a1},polygonEnd:function(){c8.lineStart=e4}},hx=hw(gN,f4,fI,[-c9,-c9/2]),eN=1000000000;bX.geo.clipExtent=function(){var h,c,f,d,a,b,g={stream:function(e){return a&&(a.valid=!1),a=b(e),a.valid=!0,a},extent:function(e){return arguments.length?(b=jz(h=+e[0][0],c=+e[0][1],f=+e[1][0],d=+e[1][1]),a&&(a.valid=!1,a=null),g):[[h,c],[f,d]]}};return g.extent([[0,0],[960,500]])},(bX.geo.conicEqualArea=function(){return cT(cw)}).raw=cw,bX.geo.albers=function(){return bX.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},bX.geo.albersUsa=function(){function f(e){var a=e[0],c=e[1];return m=null,h(a,c),m||(b(a,c),m)||l(a,c),m}var m,h,b,l,g=bX.geo.albers(),d=bX.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),k=bX.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),j={point:function(c,a){m=[c,a]}};return f.invert=function(s){var c=g.scale(),p=g.translate(),o=(s[0]-p[0])/c,a=(s[1]-p[1])/c;return(a>=0.12&&0.234>a&&o>=-0.425&&-0.214>o?d:a>=0.166&&0.234>a&&o>=-0.214&&-0.115>o?k:g).invert(s)},f.stream=function(p){var a=g.stream(p),o=d.stream(p),c=k.stream(p);return{point:function(r,e){a.point(r,e),o.point(r,e),c.point(r,e)},sphere:function(){a.sphere(),o.sphere(),c.sphere()},lineStart:function(){a.lineStart(),o.lineStart(),c.lineStart()},lineEnd:function(){a.lineEnd(),o.lineEnd(),c.lineEnd()},polygonStart:function(){a.polygonStart(),o.polygonStart(),c.polygonStart()},polygonEnd:function(){a.polygonEnd(),o.polygonEnd(),c.polygonEnd()}}},f.precision=function(a){return arguments.length?(g.precision(a),d.precision(a),k.precision(a),f):g.precision()},f.scale=function(a){return arguments.length?(g.scale(a),d.scale(0.35*a),k.scale(a),f.translate(g.translate())):g.scale()},f.translate=function(c){if(!arguments.length){return g.translate()}var a=g.scale(),e=+c[0],n=+c[1];return h=g.translate(c).clipExtent([[e-0.455*a,n-0.238*a],[e+0.455*a,n+0.238*a]]).stream(j).point,b=d.translate([e-0.307*a,n+0.201*a]).clipExtent([[e-0.425*a+bO,n+0.12*a+bO],[e-0.214*a-bO,n+0.234*a-bO]]).stream(j).point,l=k.translate([e-0.205*a,n+0.212*a]).clipExtent([[e-0.214*a+bO,n+0.166*a+bO],[e-0.115*a-bO,n+0.234*a-bO]]).stream(j).point,f},f.scale(1070)};var fw,bs,f5,ev,fJ,aL,j3={point:iE,lineStart:iE,lineEnd:iE,polygonStart:function(){bs=0,j3.lineStart=dV},polygonEnd:function(){j3.lineStart=j3.lineEnd=j3.point=iE,fw+=gL(bs/2)}},gw={point:dd,lineStart:iE,lineEnd:iE,polygonStart:iE,polygonEnd:iE},jB={point:dC,lineStart:iH,lineEnd:kn,polygonStart:function(){jB.lineStart=hM},polygonEnd:function(){jB.point=dC,jB.lineStart=iH,jB.lineEnd=kn}};bX.geo.path=function(){function k(a){return a&&("function"==typeof b&&d.pointRadius(+b.apply(this,arguments)),j&&j.valid||(j=c(d)),bX.geo.stream(a,j)),d.result()}function f(){return j=null,k}var h,g,c,d,j,b=4.5;return k.area=function(a){return fw=0,bX.geo.stream(a,c(j3)),fw},k.centroid=function(a){return aF=aU=e5=fp=a3=cE=gO=bM=jP=0,bX.geo.stream(a,c(jB)),jP?[gO/jP,bM/jP]:cE?[fp/cE,a3/cE]:e5?[aF/e5,aU/e5]:[0/0,0/0]},k.bounds=function(a){return fJ=aL=-(f5=ev=1/0),bX.geo.stream(a,c(gw)),[[f5,ev],[fJ,aL]]},k.projection=function(a){return arguments.length?(c=(h=a)?a.stream||bN(a):hQ,f()):h},k.context=function(a){return arguments.length?(d=null==(g=a)?new d9:new fM(a),"function"!=typeof b&&d.pointRadius(b),f()):g},k.pointRadius=function(a){return arguments.length?(b="function"==typeof a?a:(d.pointRadius(+a),+a),k):b},k.projection(bX.geo.albersUsa()).context(null)},bX.geo.transform=function(a){return{stream:function(b){var d=new hb(b);for(var c in a){d[c]=a[c]}return d}}},hb.prototype={point:function(b,a){this.stream.point(b,a)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},bX.geo.projection=bv,bX.geo.projectionMutator=fR,(bX.geo.equirectangular=function(){return bv(jI)}).raw=jI.invert=jI,bX.geo.rotation=function(b){function a(c){return c=b(c[0]*bw,c[1]*bw),c[0]*=f6,c[1]*=f6,c}return b=eR(b[0]%360*bw,b[1]*bw,b.length>2?b[2]*bw:0),a.invert=function(c){return c=b.invert(c[0]*bw,c[1]*bw),c[0]*=f6,c[1]*=f6,c},a},hZ.invert=jI,bX.geo.circle=function(){function f(){var h="function"==typeof c?c.apply(this,arguments):c,g=eR(-h[0]*bw,-h[1]*bw,0).invert,e=[];return d(null,null,1,{point:function(k,j){e.push(k=g(k,j)),k[0]*=f6,k[1]*=f6}}),{type:"Polygon",coordinates:[e]}}var b,d,c=[0,0],a=6;return f.origin=function(e){return arguments.length?(c=e,f):c},f.angle=function(e){return arguments.length?(d=gA((b=+e)*bw,a*bw),f):b},f.precision=function(e){return arguments.length?(d=gA(b*bw,(a=+e)*bw),f):a},f.angle(90)},bX.geo.distance=function(g,x){var m,b=(x[0]-g[0])*bw,w=g[1]*bw,j=x[1]*bw,d=Math.sin(b),v=Math.cos(b),p=Math.sin(w),h=Math.cos(w),y=Math.sin(j),k=Math.cos(j);return Math.atan2(Math.sqrt((m=k*d)*m+(m=h*y-p*k*v)*m),p*y+h*k*v)},bX.geo.graticule=function(){function C(){return{type:"MultiLineString",coordinates:w()}}function w(){return bX.range(Math.ceil(F/K)*K,k,K).map(G).concat(bX.range(Math.ceil(E/D)*D,L,D).map(H)).concat(bX.range(Math.ceil(z/A)*A,J,A).filter(function(a){return gL(a%K)>bO}).map(x)).concat(bX.range(Math.ceil(M/j)*j,B,j).filter(function(a){return gL(a%D)>bO}).map(I))}var J,z,k,F,B,M,L,E,x,I,G,H,A=10,j=A,K=90,D=360,b=2.5;return C.lines=function(){return w().map(function(a){return{type:"LineString",coordinates:a}})},C.outline=function(){return{type:"Polygon",coordinates:[G(F).concat(H(L).slice(1),G(k).reverse().slice(1),H(E).reverse().slice(1))]}},C.extent=function(a){return arguments.length?C.majorExtent(a).minorExtent(a):C.minorExtent()},C.majorExtent=function(a){return arguments.length?(F=+a[0][0],k=+a[1][0],E=+a[0][1],L=+a[1][1],F>k&&(a=F,F=k,k=a),E>L&&(a=E,E=L,L=a),C.precision(b)):[[F,E],[k,L]]},C.minorExtent=function(a){return arguments.length?(z=+a[0][0],J=+a[1][0],M=+a[0][1],B=+a[1][1],z>J&&(a=z,z=J,J=a),M>B&&(a=M,M=B,B=a),C.precision(b)):[[z,M],[J,B]]},C.step=function(a){return arguments.length?C.majorStep(a).minorStep(a):C.minorStep()},C.majorStep=function(a){return arguments.length?(K=+a[0],D=+a[1],C):[K,D]},C.minorStep=function(a){return arguments.length?(A=+a[0],j=+a[1],C):[A,j]},C.precision=function(a){return arguments.length?(b=+a,x=a4(M,B,90),I=hB(z,J,b),G=a4(E,L,90),H=hB(F,k,b),C):b},C.majorExtent([[-180,-90+bO],[180,90-bO]]).minorExtent([[-180,-80-bO],[180,80+bO]])},bX.geo.greatArc=function(){function f(){return{type:"LineString",coordinates:[b||c.apply(this,arguments),d||a.apply(this,arguments)]}}var b,d,c=ez,a=j4;return f.distance=function(){return bX.geo.distance(b||c.apply(this,arguments),d||a.apply(this,arguments))},f.source=function(g){return arguments.length?(c=g,b="function"==typeof g?null:g,f):c},f.target=function(e){return arguments.length?(a=e,d="function"==typeof e?null:e,f):a},f.precision=function(){return arguments.length?f:0},f},bX.geo.interpolate=function(b,a){return gX(b[0]*bw,b[1]*bw,a[0]*bw,a[1]*bw)},bX.geo.length=function(a){return cU=0,bX.geo.stream(a,cy),cU};var cU,cy={sphere:iE,point:iE,lineStart:ad,lineEnd:iE,polygonStart:iE,polygonEnd:iE},dX=iT(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(bX.geo.azimuthalEqualArea=function(){return bv(dX)}).raw=dX;var df=iT(function(b){var a=Math.acos(b);return a&&a/Math.sin(a)},hQ);(bX.geo.azimuthalEquidistant=function(){return bv(df)}).raw=df,(bX.geo.conicConformal=function(){return cT(am)}).raw=am,(bX.geo.conicEquidistant=function(){return cT(aM)}).raw=aM;var ed=iT(function(a){return 1/a},Math.atan);(bX.geo.gnomonic=function(){return bv(ed)}).raw=ed,eW.invert=function(b,a){return[b,2*Math.atan(Math.exp(a))-fx]},(bX.geo.mercator=function(){return e9(eW)}).raw=eW;var b4=iT(function(){return 1},Math.asin);(bX.geo.orthographic=function(){return bv(b4)}).raw=b4;var dD=iT(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(bX.geo.stereographic=function(){return bv(dD)}).raw=dD,aV.invert=function(b,a){return[-a,2*Math.atan(Math.exp(b))-fx]},(bX.geo.transverseMercator=function(){var c=e9(aV),a=c.center,b=c.rotate;return c.center=function(d){return d?a([-d[1],d[0]]):(d=a(),[d[1],-d[0]])},c.rotate=function(d){return d?b([d[0],d[1],d.length>2?d[2]+90:90]):(d=b(),[d[0],d[1],d[2]-90])},b([0,0,90])}).raw=aV,bX.geom={},bX.geom.hull=function(d){function a(j){if(j.length<3){return[]}var z,y=aT(c),m=aT(b),e=j.length,x=[],w=[];for(z=0;e>z;z++){x.push([+y.call(this,j[z],z),+m.call(this,j[z],z),z])}for(x.sort(jC),z=0;e>z;z++){w.push([x[z][0],-x[z][1]])}var k=bE(x),A=bE(w),v=A[0]===k[0],p=A[A.length-1]===k[k.length-1],r=[];for(z=k.length-1;z>=0;--z){r.push(j[x[k[z]][2]])}for(z=+v;z<A.length-p;++z){r.push(j[x[A[z]][2]])}return r}var c=cp,b=gF;return arguments.length?a(d):(a.x=function(e){return arguments.length?(c=e,a):c},a.y=function(e){return arguments.length?(b=e,a):b},a)},bX.geom.polygon=function(a){return kh(a,iI),a};var iI=bX.geom.polygon.prototype=[];iI.area=function(){for(var f,b=-1,d=this.length,c=this[d-1],a=0;++b<d;){f=c,c=this[b],a+=f[1]*c[0]-f[0]*c[1]}return 0.5*a},iI.centroid=function(k){var f,h,g=-1,c=this.length,d=0,j=0,b=this[c-1];for(arguments.length||(k=-1/(6*this.area()));++g<c;){f=b,b=this[g],h=f[0]*b[1]-b[0]*f[1],d+=(f[0]+b[0])*h,j+=(f[1]+b[1])*h}return[d*k,j*k]},iI.clip=function(f){for(var v,j,b,p,h,d,m=eE(f),k=-1,g=this.length-eE(this),w=this[g-1];++k<g;){for(v=f.slice(),f.length=0,p=this[k],h=v[(b=v.length-m)-1],j=-1;++j<b;){d=v[j],cY(d,w,p)?(cY(h,w,p)||f.push(hj(h,d,w,p)),f.push(d)):cY(h,w,p)&&f.push(hj(h,d,w,p)),h=d}m&&f.push(f[0]),w=p}return f};var ab,hN,fN,d8,bQ,hg=[],cJ=[];gh.prototype.prepare=function(){for(var c,a=this.edges,b=a.length;b--;){c=a[b].edge,c.b&&c.a||a.splice(b,1)}return a.sort(cL),a.length},fF.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},d1.prototype={insert:function(f,b){var d,c,a;if(f){if(b.P=f,b.N=f.N,f.N&&(f.N.P=b),f.N=b,f.R){for(f=f.R;f.L;){f=f.L}f.L=b}else{f.R=b}d=f}else{this._?(f=bn(this._),b.P=null,b.N=f,f.P=f.L=b,d=f):(b.P=b.N=null,this._=b,d=null)}for(b.L=b.R=null,b.U=d,b.C=!0,f=b;d&&d.C;){c=d.U,d===c.L?(a=c.R,a&&a.C?(d.C=a.C=!1,c.C=!0,f=c):(f===d.R&&(g8(this,d),f=d,d=f.U),d.C=!1,c.C=!0,cB(this,c))):(a=c.L,a&&a.C?(d.C=a.C=!1,c.C=!0,f=c):(f===d.L&&(cB(this,d),f=d,d=f.U),d.C=!1,c.C=!0,g8(this,c))),d=f.U}this._.C=!1},remove:function(h){h.N&&(h.N.P=h.P),h.P&&(h.P.N=h.N),h.N=h.P=null;var c,f,d,a=h.U,b=h.L,g=h.R;if(f=b?g?bn(g):b:g,a?a.L===h?a.L=f:a.R=f:this._=f,b&&g?(d=f.C,f.C=h.C,f.L=b,b.U=f,f!==g?(a=f.U,f.U=h.U,h=f.R,a.L=h,f.R=g,g.U=f):(f.U=a,a=f,h=f.R)):(d=h.C,h=f),h&&(h.U=a),!d){if(h&&h.C){return void (h.C=!1)}do{if(h===this._){break}if(h===a.L){if(c=a.R,c.C&&(c.C=!1,a.C=!0,g8(this,a),c=a.R),c.L&&c.L.C||c.R&&c.R.C){c.R&&c.R.C||(c.L.C=!1,c.C=!0,cB(this,c),c=a.R),c.C=a.C,a.C=c.R.C=!1,g8(this,a),h=this._;break}}else{if(c=a.L,c.C&&(c.C=!1,a.C=!0,cB(this,a),c=a.L),c.L&&c.L.C||c.R&&c.R.C){c.L&&c.L.C||(c.R.C=!1,c.C=!0,g8(this,c),c=a.L),c.C=a.C,a.C=c.L.C=!1,cB(this,a),h=this._;break}}c.C=!0,h=a,a=a.U}while(!h.C);h&&(h.C=!1)}}},bX.geom.voronoi=function(k){function f(s){var l=new Array(s.length),m=b[0][0],a=b[0][1],e=b[1][0],p=b[1][1];return fP(h(s),b).cells.forEach(function(t,o){var u=t.edges,n=t.site,r=l[o]=u.length?u.map(function(w){var v=w.start();return[v.x,v.y]}):n.x>=m&&n.x<=e&&n.y>=a&&n.y<=p?[[m,p],[e,p],[e,a],[m,a]]:[];r.point=s[o]}),l}function h(a){return a.map(function(l,e){return{x:Math.round(d(l,e)/bO)*bO,y:Math.round(j(l,e)/bO)*bO,i:e}})}var g=cp,c=gF,d=g,j=c,b=by;return k?f(k):(f.links=function(a){return fP(h(a)).edges.filter(function(e){return e.l&&e.r}).map(function(e){return{source:a[e.l.i],target:a[e.r.i]}})},f.triangles=function(e){var a=[];return fP(h(e)).cells.forEach(function(w,m){for(var z,t,n=w.site,y=w.edges.sort(cL),x=-1,p=y.length,A=y[p-1].edge,v=A.l===n?A.r:A.l;++x<p;){z=A,t=v,A=y[x].edge,v=A.l===n?A.r:A.l,m<t.i&&m<v.i&&jF(n,t,v)<0&&a.push([e[m],e[t.i],e[v.i]])}}),a},f.x=function(a){return arguments.length?(d=aT(g=a),f):g},f.y=function(a){return arguments.length?(j=aT(c=a),f):c},f.clipExtent=function(a){return arguments.length?(b=null==a?by:a,f):b===by?null:b},f.size=function(a){return arguments.length?f.clipExtent(a&&[[0,0],a]):b===by?null:b&&b[1]},f)};var by=[[-1000000,-1000000],[1000000,1000000]];bX.geom.delaunay=function(a){return bX.geom.voronoi().triangles(a)},bX.geom.quadtree=function(f,m,h,b,l){function g(A){function E(w,P,L,p,O,x,v,N){if(!isNaN(L)&&!isNaN(p)){if(w.leaf){var M=w.x,Q=w.y;if(null!=M){if(gL(M-L)+gL(Q-p)<0.01){C(w,P,L,p,O,x,v,N)}else{var y=w.point;w.x=w.y=w.point=null,C(w,y,M,Q,O,x,v,N),C(w,P,L,p,O,x,v,N)}}else{w.x=L,w.y=p,w.point=P}}else{C(w,P,L,p,O,x,v,N)}}}function C(w,R,N,p,Q,v,P,O){var x=0.5*(Q+P),S=0.5*(v+O),M=N>=x,y=p>=S,L=y<<1|M;w.leaf=!1,w=w.nodes[L]||(w.nodes[L]=b1()),M?Q=x:P=x,y?v=S:O=S,E(w,R,N,p,Q,v,P,O)}var u,H,F,G,z,t,I,B,e,c=aT(k),o=aT(j);if(null!=m){t=m,I=h,B=b,e=l}else{if(B=e=-(t=I=1/0),H=[],F=[],z=A.length,d){for(G=0;z>G;++G){u=A[G],u.x<t&&(t=u.x),u.y<I&&(I=u.y),u.x>B&&(B=u.x),u.y>e&&(e=u.y),H.push(u.x),F.push(u.y)}}else{for(G=0;z>G;++G){var J=+c(u=A[G],G),K=+o(u,G);t>J&&(t=J),I>K&&(I=K),J>B&&(B=J),K>e&&(e=K),H.push(J),F.push(K)}}}var r=B-t,a=e-I;r>a?e=I+r:B=t+a;var D=b1();if(D.add=function(p){E(D,p,+c(p,++G),+o(p,G),t,I,B,e)},D.visit=function(p){gQ(p,D,t,I,B,e)},D.find=function(p){return f7(D,p[0],p[1],t,I,B,e)},G=-1,null==m){for(;++G<z;){E(D,A[G],H[G],F[G],t,I,B,e)}--G}else{A.forEach(D.add)}return H=F=A=u=null,D}var d,k=cp,j=gF;return(d=arguments.length)?(k=hU,j=eP,3===d&&(l=h,b=m,h=m=0),g(f)):(g.x=function(a){return arguments.length?(k=a,g):k},g.y=function(a){return arguments.length?(j=a,g):j},g.extent=function(a){return arguments.length?(null==a?m=h=b=l=null:(m=+a[0][0],h=+a[0][1],b=+a[1][0],l=+a[1][1]),g):null==m?null:[[m,h],[b,l]]},g.size=function(a){return arguments.length?(null==a?m=h=b=l=null:(m=h=0,b=+a[0],l=+a[1]),g):null==m?null:[b-m,l-h]},g)},bX.interpolateRgb=gy,bX.interpolateObject=dh,bX.interpolateNumber=a0,bX.interpolateString=hz;var fU=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dK=new RegExp(fU.source,"g");bX.interpolate=ex,bX.interpolators=[function(c,a){var b=typeof a;return("string"===b?af.has(a.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(a)?gy:hz:a instanceof dG?gy:Array.isArray(a)?j0:"object"===b&&isNaN(a)?dh:a0)(c,a)}],bX.interpolateArray=j0;var jN=function(){return hQ},h7=bX.map({linear:jN,poly:e7,quad:function(){return ah},cubic:function(){return aI},sin:function(){return aR},exp:function(){return ch},circle:function(){return gC},elastic:bA,back:jy,bounce:function(){return cW}}),eU=bX.map({"in":hQ,out:km,"in-out":iO,"out-in":function(a){return iO(km(a))}});bX.ease=function(d){var a=d.indexOf("-"),c=a>=0?d.slice(0,a):d,b=a>=0?d.slice(a+1):"in";return c=h7.get(c)||jN,b=eU.get(b)||hQ,gU(b(c.apply(null,hs.call(arguments,1))))},bX.interpolateHcl=hf,bX.interpolateHsl=eB,bX.interpolateLab=fd,bX.interpolateRound=a9,bX.transform=function(b){var a=bF.createElementNS(bX.ns.prefix.svg,"g");return(bX.transform=function(d){if(null!=d){a.setAttribute("transform",d);var c=a.transform.baseVal.consolidate()}return new fT(c?c.matrix:b9)})(b)},fT.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var b9={a:1,b:0,c:0,d:1,e:0,f:0};bX.interpolateTransform=jL,bX.layout={},bX.layout.bundle=function(){return function(d){for(var a=[],c=-1,b=d.length;++c<b;){a.push(cI(d[c]))}return a}},bX.layout.chord=function(){function f(){var c,o,u,s,t,a={},G=[],A=bX.range(h),e=[];for(j=[],b=[],c=0,s=-1;++s<h;){for(o=0,t=-1;++t<h;){o+=p[s][t]}G.push(o),e.push(bX.range(h)),c+=o}for(d&&A.sort(function(x,l){return d(G[x],G[l])}),m&&e.forEach(function(x,l){x.sort(function(H,y){return m(p[l][H],p[l][y])})}),c=(hy-w*h)/c,o=0,s=-1;++s<h;){for(u=o,t=-1;++t<h;){var C=A[s],z=e[C][t],D=p[C][z],B=o,F=o+=D*c;a[C+"-"+z]={index:C,subindex:z,startAngle:B,endAngle:F,value:D}}b[C]={index:C,startAngle:u,endAngle:o,value:(o-u)/c},o+=w}for(s=-1;++s<h;){for(t=s-1;++t<h;){var E=a[s+"-"+t],r=a[t+"-"+s];(E.value||r.value)&&j.push(E.value<r.value?{source:r,target:E}:{source:E,target:r})}}k&&v()}function v(){j.sort(function(c,a){return k((c.source.value+c.target.value)/2,(a.source.value+a.target.value)/2)})}var j,b,p,h,d,m,k,g={},w=0;return g.matrix=function(a){return arguments.length?(h=(p=a)&&p.length,j=b=null,g):p},g.padding=function(a){return arguments.length?(w=a,j=b=null,g):w},g.sortGroups=function(a){return arguments.length?(d=a,j=b=null,g):d},g.sortSubgroups=function(a){return arguments.length?(m=a,j=null,g):m},g.sortChords=function(a){return arguments.length?(k=a,j&&v(),g):k},g.chords=function(){return j||f(),j},g.groups=function(){return b||f(),b},g},bX.layout.force=function(){function B(a){return function(v,m,d,s){if(v.point!==a){var h=v.cx-a.x,f=v.cy-a.y,p=s-m,n=h*h+f*f;if(n>p*p/J){if(z>n){var g=v.charge/n;a.px-=h*g,a.py-=f*g}return !0}if(v.point&&n&&z>n){var g=v.pointCharge/n;a.px-=h*g,a.py-=f*g}}return !v.charge}}function w(a){a.px=bX.event.x,a.py=bX.event.y,L.resume()}var I,y,k,E,A,L={},K=bX.dispatch("start","tick","end"),D=[1,1],x=0.9,H=gV,F=gf,G=-30,z=gD,j=0.1,J=0.64,C=[],b=[];return L.tick=function(){if((y*=0.99)<0.005){return K.end({type:"end",alpha:y=0}),!0}var M,m,u,l,g,c,n,r,s,o=C.length,v=b.length;for(m=0;v>m;++m){u=b[m],l=u.source,g=u.target,r=g.x-l.x,s=g.y-l.y,(c=r*r+s*s)&&(c=y*E[m]*((c=Math.sqrt(c))-k[m])/c,r*=c,s*=c,g.x-=r*(n=l.weight/(g.weight+l.weight)),g.y-=s*n,l.x+=r*(n=1-n),l.y+=s*n)}if((n=y*j)&&(r=D[0]/2,s=D[1]/2,m=-1,n)){for(;++m<o;){u=C[m],u.x+=(r-u.x)*n,u.y+=(s-u.y)*n}}if(G){for(h6(M=bX.geom.quadtree(C),y,A),m=-1;++m<o;){(u=C[m]).fixed||M.visit(B(u))}}for(m=-1;++m<o;){u=C[m],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*x,u.y-=(u.py-(u.py=u.y))*x)}K.tick({type:"tick",alpha:y})},L.nodes=function(a){return arguments.length?(C=a,L):C},L.links=function(a){return arguments.length?(b=a,L):b},L.size=function(a){return arguments.length?(D=a,L):D},L.linkDistance=function(a){return arguments.length?(H="function"==typeof a?a:+a,L):H},L.distance=L.linkDistance,L.linkStrength=function(a){return arguments.length?(F="function"==typeof a?a:+a,L):F},L.friction=function(a){return arguments.length?(x=+a,L):x},L.charge=function(a){return arguments.length?(G="function"==typeof a?a:+a,L):G},L.chargeDistance=function(a){return arguments.length?(z=a*a,L):Math.sqrt(z)},L.gravity=function(a){return arguments.length?(j=+a,L):j},L.theta=function(a){return arguments.length?(J=a*a,L):Math.sqrt(J)},L.alpha=function(a){return arguments.length?(a=+a,y?y=a>0?a:0:a>0&&(K.start({type:"start",alpha:y=a}),bX.timer(L.tick)),L):y},L.start=function(){function o(M,t){if(!l){for(l=new Array(m),e=0;m>e;++e){l[e]=[]}for(e=0;f>e;++e){var p=b[e];l[p.source.index].push(p.target),l[p.target.index].push(p.source)}}for(var s,v=l[d],e=-1,c=v.length;++e<c;){if(!isNaN(s=v[e][M])){return s}}return Math.random()*t}var d,l,g,m=C.length,f=b.length,h=D[0],a=D[1];for(d=0;m>d;++d){(g=C[d]).index=d,g.weight=0}for(d=0;f>d;++d){g=b[d],"number"==typeof g.source&&(g.source=C[g.source]),"number"==typeof g.target&&(g.target=C[g.target]),++g.source.weight,++g.target.weight}for(d=0;m>d;++d){g=C[d],isNaN(g.x)&&(g.x=o("x",h)),isNaN(g.y)&&(g.y=o("y",a)),isNaN(g.px)&&(g.px=g.x),isNaN(g.py)&&(g.py=g.y)}if(k=[],"function"==typeof H){for(d=0;f>d;++d){k[d]=+H.call(this,b[d],d)}}else{for(d=0;f>d;++d){k[d]=H}}if(E=[],"function"==typeof F){for(d=0;f>d;++d){E[d]=+F.call(this,b[d],d)}}else{for(d=0;f>d;++d){E[d]=F}}if(A=[],"function"==typeof G){for(d=0;m>d;++d){A[d]=+G.call(this,C[d],d)}}else{for(d=0;m>d;++d){A[d]=G}}return L.resume()},L.resume=function(){return L.alpha(0.1)},L.stop=function(){return L.alpha(0)},L.drag=function(){return I||(I=bX.behavior.drag().origin(hQ).on("dragstart.force",c0).on("drag.force",w).on("dragend.force",dU)),arguments.length?void this.on("mouseover.force",bS).on("mouseout.force",dn).call(I):I},bX.rebind(L,K,"on")};var gV=20,gf=1,gD=1/0;bX.layout.hierarchy=function(){function d(g){var h,k=[g],f=[];for(g.depth=0;null!=(h=k.pop());){if(f.push(h),(e=c.call(d,h,h.depth))&&(m=e.length)){for(var m,e,j;--m>=0;){k.push(j=e[m]),j.parent=h,j.depth=h.depth+1}b&&(h.value=0),h.children=e}else{b&&(h.value=+b.call(d,h,h.depth)||0),delete h.children}}return fC(g,function(p){var o,l;a&&(o=p.children)&&o.sort(a),b&&(l=p.parent)&&(l.value+=p.value)}),f}var a=hk,c=eg,b=bR;return d.sort=function(f){return arguments.length?(a=f,d):a},d.children=function(e){return arguments.length?(c=e,d):c},d.value=function(e){return arguments.length?(b=e,d):b},d.revalue=function(e){return b&&(hC(e,function(f){f.children&&(f.value=0)}),fC(e,function(f){var g;f.children||(f.value=+b.call(d,f,f.depth)||0),(g=f.parent)&&(g.value+=f.value)})),e},d},bX.layout.partition=function(){function f(v,m,g,s){var k=v.children;if(v.x=m,v.y=v.depth*s,v.dx=g,v.dy=s,k&&(h=k.length)){var h,p,n,j=-1;for(g=v.value?g/v.value:0;++j<h;){f(p=k[j],m,n=p.value*g,s),m+=n}}}function b(l){var k=l.children,j=0;if(k&&(g=k.length)){for(var g,h=-1;++h<g;){j=Math.max(j,b(k[h]))}}return 1+j}function d(h,g){var j=c.call(this,h,g);return f(j[0],0,a[0],a[1]/b(j[0])),j}var c=bX.layout.hierarchy(),a=[1,1];return d.size=function(e){return arguments.length?(a=e,d):a},j9(d,c)},bX.layout.pie=function(){function g(j){var w,u=j.length,k=j.map(function(l,h){return +c.call(g,l,h)}),y=+("function"==typeof d?d.apply(this,arguments):d),r=("function"==typeof a?a.apply(this,arguments):a)-y,m=Math.min(Math.abs(r)/u,+("function"==typeof b?b.apply(this,arguments):b)),n=m*(0>r?-1:1),e=(r-u*n)/bX.sum(k),x=bX.range(u),t=[];return null!=f&&x.sort(f===dp?function(l,h){return k[h]-k[l]}:function(l,h){return f(j[l],j[h])}),x.forEach(function(h){t[h]={data:j[h],value:w=k[h],startAngle:y,endAngle:y+=w*e+n,padAngle:m}}),t}var c=Number,f=dp,d=0,a=hy,b=0;return g.value=function(h){return arguments.length?(c=h,g):c},g.sort=function(e){return arguments.length?(f=e,g):f},g.startAngle=function(e){return arguments.length?(d=e,g):d},g.endAngle=function(e){return arguments.length?(a=e,g):a},g.padAngle=function(e){return arguments.length?(b=e,g):b},g};var dp={};bX.layout.stack=function(){function h(w,u){if(!(n=w.length)){return w}var k=w.map(function(m,l){return c.call(h,m,l)}),y=k.map(function(l){return l.map(function(m,p){return[b.call(h,m,p),g.call(h,m,p)]})}),r=f.call(h,y,u);k=bX.permute(k,r),y=bX.permute(y,r);var n,o,e,x,t=d.call(h,y,u),j=k[0].length;for(e=0;j>e;++e){for(a.call(h,k[0][e],x=t[e],y[0][e][1]),o=1;n>o;++o){a.call(h,k[o][e],x+=y[o-1][e][1],y[o][e][1])}}return w}var c=hQ,f=jS,d=ij,a=dN,b=bz,g=fX;return h.values=function(j){return arguments.length?(c=j,h):c},h.order=function(e){return arguments.length?(f="function"==typeof e?e:a7.get(e)||jS,h):f},h.offset=function(e){return arguments.length?(d="function"==typeof e?e:hD.get(e)||ij,h):d},h.x=function(e){return arguments.length?(b=e,h):b},h.y=function(e){return arguments.length?(g=e,h):g},h.out=function(e){return arguments.length?(a=e,h):a},h};var a7=bX.map({"inside-out":function(f){var v,j,b=f.length,p=f.map(eX),h=f.map(cf),d=bX.range(b).sort(function(c,a){return p[c]-p[a]}),m=0,k=0,g=[],w=[];for(v=0;b>v;++v){j=d[v],k>m?(m+=h[j],g.push(j)):(k+=h[j],w.push(j))}return w.reverse().concat(g)},reverse:function(a){return bX.range(a.length).reverse()},"default":jS}),hD=bX.map({silhouette:function(f){var m,h,b,l=f.length,g=f[0].length,d=[],k=0,j=[];for(h=0;g>h;++h){for(m=0,b=0;l>m;m++){b+=f[m][h][1]}b>k&&(k=b),d.push(b)}for(h=0;g>h;++h){j[h]=(k-d[h])/2}return j},wiggle:function(j){var B,x,b,A,m,d,z,y,k,C=j.length,w=j[0],p=w.length,v=[];for(v[0]=y=k=0,x=1;p>x;++x){for(B=0,A=0;C>B;++B){A+=j[B][x][1]}for(B=0,m=0,z=w[x][0]-w[x-1][0];C>B;++B){for(b=0,d=(j[B][x][1]-j[B][x-1][1])/(2*z);B>b;++b){d+=(j[b][x][1]-j[b][x-1][1])/z}m+=d*j[B][x][1]}v[x]=y-=A?m/A*z:0,k>y&&(k=y)}for(x=0;p>x;++x){v[x]-=k}return v},expand:function(k){var f,h,g,c=k.length,d=k[0].length,j=1/c,b=[];for(h=0;d>h;++h){for(f=0,g=0;c>f;f++){g+=k[f][h][1]}if(g){for(f=0;c>f;f++){k[f][h][1]/=g}}else{for(f=0;c>f;f++){k[f][h][1]=j}}}for(h=0;d>h;++h){b[h]=0}return b},zero:ij});bX.layout.histogram=function(){function f(k,r){for(var j,x,w=[],m=k.map(d,this),y=c.call(this,m,r),v=a.call(this,y,m,r),r=-1,t=m.length,u=v.length-1,e=b?1:1/t;++r<u;){j=w[r]=[],j.dx=v[r+1]-(j.x=v[r]),j.y=0}if(u>0){for(r=-1;++r<t;){x=m[r],x>=y[0]&&x<=y[1]&&(j=w[bX.bisect(v,x,1,u)-1],j.y+=e,j.push(k[r]))}}return w}var b=!0,d=Number,c=dv,a=gj;return f.value=function(e){return arguments.length?(d=e,f):d},f.range=function(e){return arguments.length?(c=aT(e),f):c},f.bins=function(e){return arguments.length?(a="number"==typeof e?function(g){return gG(g,e)}:aT(e),f):a},f.frequency=function(g){return arguments.length?(b=!!g,f):b},f},bX.layout.pack=function(){function f(r,h){var m=d.call(this,r,h),g=m[0],p=a[0],e=a[1],j=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(g.x=g.y=0,fC(g,function(l){l.r=+j(l.value)}),fC(g,g4),c){var k=c*(b?1:Math.max(2*g.r/p,2*g.r/e))/2;fC(g,function(l){l.r+=k}),fC(g,g4),fC(g,function(l){l.r-=k})}return aB(g,p/2,e/2,b?1:1/Math.max(2*g.r/p,2*g.r/e)),m}var b,d=bX.layout.hierarchy().sort(a8),c=0,a=[1,1];return f.size=function(e){return arguments.length?(a=e,f):a},f.radius=function(g){return arguments.length?(b=null==g||"function"==typeof g?g:+g,f):b},f.padding=function(e){return arguments.length?(c=+e,f):c},j9(f,d)},bX.layout.tree=function(){function f(c,z){var A=d.call(this,c,z),r=A[0],l=s(r);if(fC(l,j),l.parent.m=-l.z,hC(l,b),g){hC(r,h)}else{var o=r,a=r,x=r;hC(r,function(u){u.x<o.x&&(o=u),u.x>a.x&&(a=u),u.depth>x.depth&&(x=u)});var t=m(o,a)/2-o.x,e=k[0]/(a.x+m(a,o)/2+t),w=k[1]/(x.depth||1);hC(r,function(u){u.x=(u.x+t)*e,u.y=u.depth*w})}return A}function s(A){for(var w,y={A:null,children:[A]},x=[y];null!=(w=x.pop());){for(var l,v=w.children,z=0,c=v.length;c>z;++z){x.push((v[z]=l={_:v[z],parent:w,children:(l=v[z].children)&&l.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:z}).a=l)}}return y.children[0]}function j(u){var c=u.children,o=u.parent.children,l=u.i?o[u.i-1]:null;if(c.length){gM(u);var a=(c[0].z+c[c.length-1].z)/2;l?(u.z=l.z+m(u._,l._),u.m=u.z-a):u.z=a}else{l&&(u.z=l.z+m(u._,l._))}u.parent.A=p(u,l,u.parent.A||o[0])}function b(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function p(w,E,B){if(E){for(var a,D=w,y=w,v=E,C=D.parent.children[0],x=D.m,F=y.m,A=v.m,z=C.m;v=aZ(v),D=fj(D),v&&D;){C=fj(C),y=aZ(y),y.a=w,a=v.z+A-D.z-x+m(v._,D._),a>0&&(cA(bI(v,w,B),w,a),x+=a,F+=a),A+=v.m,x+=D.m,z+=C.m,F+=y.m}v&&!aZ(y)&&(y.t=v,y.m+=A-F),D&&!fj(C)&&(C.t=D,C.m+=x-z,B=w)}return B}function h(a){a.x*=k[0],a.y=a.depth*k[1]}var d=bX.layout.hierarchy().sort(null).value(null),m=e3,k=[1,1],g=null;return f.separation=function(a){return arguments.length?(m=a,f):m},f.size=function(a){return arguments.length?(g=null==(k=a)?h:null,f):g?null:k},f.nodeSize=function(a){return arguments.length?(g=null==(k=a)?null:h,f):g?k:null},j9(f,d)},bX.layout.cluster=function(){function f(j,m){var e,v=b.call(this,j,m),u=v[0],k=0;fC(u,function(h){var g=h.children;g&&g.length?(h.x=c4(g),h.y=jJ(g)):(h.x=e?k+=d(h,e):0,h.y=0,e=h)});var w=hv(u),t=eL(u),p=w.x-d(w,t)/2,r=t.x+d(t,w)/2;return fC(u,a?function(g){g.x=(g.x-u.x)*c[0],g.y=(u.y-g.y)*c[1]}:function(g){g.x=(g.x-p)/(r-p)*c[0],g.y=(1-(u.y?g.y/u.y:1))*c[1]}),v}var b=bX.layout.hierarchy().sort(null).value(null),d=e3,c=[1,1],a=!1;return f.separation=function(e){return arguments.length?(d=e,f):d},f.size=function(e){return arguments.length?(a=null==(c=e),f):a?null:c},f.nodeSize=function(e){return arguments.length?(a=null!=(c=e),f):a?c:null},j9(f,b)},bX.layout.treemap=function(){function k(l,f){for(var h,g,a=-1,c=l.length;++a<c;){g=(h=l[a]).value*(0>f?0:f),h.area=isNaN(g)||0>=g?0:g}}function D(u){var r=u.children;if(r&&r.length){var g,G,F,n=y(u),I=[],t=r.slice(),f=1/0,H="slice"===x?n.dx:"dice"===x?n.dy:"slice-dice"===x?1&u.depth?n.dy:n.dx:Math.min(n.dx,n.dy);for(k(t,n.dx*n.dy/u.value),I.area=0;(F=t.length)>0;){I.push(g=t[F-1]),I.area+=g.area,"squarify"!==x||(G=b(I,H))<=f?(t.pop(),f=G):(I.area-=I.pop().area,C(I,H,n,!1),H=Math.min(n.dx,n.dy),I.length=I.area=0,f=1/0)}I.length&&(C(I,H,n,!0),I.length=I.area=0),r.forEach(D)}}function z(g){var h=g.children;if(h&&h.length){var f,l=y(g),e=h.slice(),n=[];for(k(e,l.dx*l.dy/g.value),n.area=0;f=e.pop();){n.push(f),n.area+=f.area,null!=f.z&&(C(n,f.z?l.dx:l.dy,l,!e.length),n.length=n.area=0)}h.forEach(z)}}function b(F,h){for(var p,l=F.area,f=0,g=1/0,s=-1,c=F.length;++s<c;){(p=F[s].area)&&(g>p&&(g=p),p>f&&(f=p))}return l*=l,h*=h,l?Math.max(h*f*d/l,l/(h*g*d)):1/0}function C(g,I,F,c){var H,p=-1,f=g.length,G=F.x,h=F.y,J=I?A(g.area/I):0;if(I==F.dx){for((c||J>F.dy)&&(J=F.dy);++p<f;){H=g[p],H.x=G,H.y=h,H.dy=J,G+=H.dx=Math.min(F.x+F.dx-G,J?A(H.area/J):0)}H.z=!0,H.dx+=F.x+F.dx-G,F.y+=J,F.dy-=J}else{for((c||J>F.dx)&&(J=F.dx);++p<f;){H=g[p],H.x=G,H.y=h,H.dx=J,h+=H.dy=Math.min(F.y+F.dy-h,J?A(H.area/J):0)}H.z=!1,H.dy+=F.y+F.dy-h,F.x+=J,F.dx-=J}}function v(e){var a=j||B(e),c=a[0];return c.x=0,c.y=0,c.dx=m[0],c.dy=m[1],j&&B.revalue(c),k([c],c.dx*c.dy/c.value),(j?z:D)(c),w&&(j=a),a}var j,B=bX.layout.hierarchy(),A=Math.round,m=[1,1],E=null,y=fs,w=!1,x="squarify",d=0.5*(1+Math.sqrt(5));return v.size=function(a){return arguments.length?(m=a,v):m},v.padding=function(g){function a(h){var l=g.call(v,h,h.depth);return null==l?fs(h):bm(h,"number"==typeof l?[l,l,l,l]:l)}function f(e){return bm(e,g)}if(!arguments.length){return E}var c;return y=null==(E=g)?fs:"function"==(c=typeof g)?a:"number"===c?(g=[g,g,g,g],f):f,v},v.round=function(a){return arguments.length?(A=a?Math.round:Number,v):A!=Number},v.sticky=function(a){return arguments.length?(w=a,j=null,v):w},v.ratio=function(a){return arguments.length?(d=a,v):d},v.mode=function(a){return arguments.length?(x=a+"",v):x},j9(v,B)},bX.random={normal:function(c,a){var b=arguments.length;return 2>b&&(a=1),1>b&&(c=0),function(){var g,f,d;do{g=2*Math.random()-1,f=2*Math.random()-1,d=g*g+f*f}while(!d||d>1);return c+a*g*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=bX.random.normal.apply(bX,arguments);return function(){return Math.exp(a())}},bates:function(b){var a=bX.random.irwinHall(b);return function(){return a()/b}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++){b+=Math.random()}return b}}},bX.scale={};var eC={floor:hQ,ceil:hQ};bX.scale.linear=function(){return js([0,1],[0,1],ex,!1)};var j7={s:1,g:1,p:1,r:1,e:1};bX.scale.log=function(){return iD(bX.scale.linear().domain([0,1]),10,!0,[1,10])};var g1=bX.format(".0e"),aj={floor:function(a){return -Math.ceil(-a)},ceil:function(a){return -Math.floor(-a)}};bX.scale.pow=function(){return kk(bX.scale.linear(),1,[0,1])},bX.scale.sqrt=function(){return bX.scale.pow().exponent(0.5)},bX.scale.ordinal=function(){return fL([],{t:"range",a:[[]]})},bX.scale.category10=function(){return bX.scale.ordinal().range(i1)},bX.scale.category20=function(){return bX.scale.ordinal().range(aw)},bX.scale.category20b=function(){return bX.scale.ordinal().range(aP)},bX.scale.category20c=function(){return bX.scale.ordinal().range(e0)};var i1=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(gW),aw=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(gW),aP=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(gW),e0=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(gW);bX.scale.quantile=function(){return d6([],[])},bX.scale.quantize=function(){return bP(0,1,[0,1])},bX.scale.threshold=function(){return hd([0.5],[0,1])},bX.scale.identity=function(){return cH([0,1])},bX.svg={},bX.svg.arc=function(){function f(){var bl=Math.max(0,+h.apply(this,arguments)),br=Math.max(0,+b.apply(this,arguments)),bc=d.apply(this,arguments)-fx,ce=k.apply(this,arguments)-fx,ca=Math.abs(ce-bc),cc=bc>ce?0:1;if(bl>br&&(bi=br,br=bl,bl=bi),ca>=eO){return m(br,cc)+(bl?m(bl,1-cc):"")+"Z"}var bi,ba,ci,bo,ar,K,at,cl,co,au,t,bt,ac=0,al=0,J=[];if((bo=(+j.apply(this,arguments)||0)/2)&&(ci=g===ff?Math.sqrt(bl*bl+br*br):+g.apply(this,arguments),cc||(al*=-1),br&&(al=bL(ci/br*Math.sin(bo))),bl&&(ac=bL(ci/bl*Math.sin(bo)))),br){ar=br*Math.cos(bc+al),K=br*Math.sin(bc+al),at=br*Math.cos(ce-al),cl=br*Math.sin(ce-al);var ai=Math.abs(ce-bc-2*al)<=c9?0:1;if(al&&b7(ar,K,at,cl)===cc^ai){var ao=(bc+ce)/2;ar=br*Math.cos(ao),K=br*Math.sin(ao),at=cl=null}}else{ar=K=0}if(bl){co=bl*Math.cos(ce-ac),au=bl*Math.sin(ce-ac),t=bl*Math.cos(bc+ac),bt=bl*Math.sin(bc+ac);var be=Math.abs(bc-ce+2*ac)<=c9?0:1;if(ac&&b7(co,au,t,bt)===1-cc^be){var Q=(bc+ce)/2;co=bl*Math.cos(Q),au=bl*Math.sin(Q),t=bt=null}}else{co=au=0}if((bi=Math.min(Math.abs(br-bl)/2,+l.apply(this,arguments)))>0.001){ba=br>bl^cc?0:1;var r=null==t?[co,au]:null==at?[ar,K]:hj([ar,K],[t,bt],[at,cl],[co,au]),u=ar-r[0],ae=K-r[1],B=at-r[0],o=cl-r[1],bu=1/Math.sin(Math.acos((u*B+ae*o)/(Math.sqrt(u*u+ae*ae)*Math.sqrt(B*B+o*o)))/2),aa=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(null!=at){var X=Math.min(bi,(br-aa)/(bu+1)),G=gT(null==t?[co,au]:[t,bt],[ar,K],br,X,cc),W=gT([at,cl],[co,au],br,X,cc);bi===X?J.push("M",G[0],"A",X,",",X," 0 0,",ba," ",G[1],"A",br,",",br," 0 ",1-cc^b7(G[1][0],G[1][1],W[1][0],W[1][1]),",",cc," ",W[1],"A",X,",",X," 0 0,",ba," ",W[0]):J.push("M",G[0],"A",X,",",X," 0 1,",ba," ",W[0])}else{J.push("M",ar,",",K)}if(null!=t){var c=Math.min(bi,(bl-aa)/(bu-1)),a=gT([ar,K],[t,bt],bl,-c,cc),e=gT([co,au],null==at?[ar,K]:[at,cl],bl,-c,cc);bi===c?J.push("L",e[0],"A",c,",",c," 0 0,",ba," ",e[1],"A",bl,",",bl," 0 ",cc^b7(e[1][0],e[1][1],a[1][0],a[1][1]),",",1-cc," ",a[1],"A",c,",",c," 0 0,",ba," ",a[0]):J.push("L",e[0],"A",c,",",c," 0 0,",ba," ",a[0])}else{J.push("L",co,",",au)}}else{J.push("M",ar,",",K),null!=at&&J.push("A",br,",",br," 0 ",ai,",",cc," ",at,",",cl),J.push("L",co,",",au),null!=t&&J.push("A",bl,",",bl," 0 ",be,",",1-cc," ",t,",",bt)}return J.push("Z"),J.join("")}function m(c,a){return"M0,"+c+"A"+c+","+c+" 0 1,"+a+" 0,"+-c+"A"+c+","+c+" 0 1,"+a+" 0,"+c}var h=fS,b=dI,l=bx,g=ff,d=jK,k=h2,j=eS;return f.innerRadius=function(a){return arguments.length?(h=aT(a),f):h},f.outerRadius=function(a){return arguments.length?(b=aT(a),f):b},f.cornerRadius=function(a){return arguments.length?(l=aT(a),f):l},f.padRadius=function(a){return arguments.length?(g=a==ff?ff:aT(a),f):g},f.startAngle=function(a){return arguments.length?(d=aT(a),f):d},f.endAngle=function(a){return arguments.length?(k=aT(a),f):k},f.padAngle=function(a){return arguments.length?(j=aT(a),f):j},f.centroid=function(){var c=(+h.apply(this,arguments)+ +b.apply(this,arguments))/2,a=(+d.apply(this,arguments)+ +k.apply(this,arguments))/2-fx;return[Math.cos(a)*c,Math.sin(a)*c]},f};var ff="auto";bX.svg.line=function(){return gb(hQ)};var aY=bX.map({linear:gB,"linear-closed":dm,step:a6,"step-before":eA,"step-after":j6,basis:eY,"basis-open":fb,"basis-closed":aX,bundle:cv,cardinal:iW,"cardinal-open":gZ,"cardinal-closed":ag,monotone:eG});aY.forEach(function(b,a){a.key=b,a.closed=/-closed$/.test(b)});var cx=[0,2/3,1/3,0],gJ=[0,1/3,2/3,0],bH=[0,1/6,2/3,1/6];bX.svg.line.radial=function(){var a=gb(fk);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},eA.reverse=j6,j6.reverse=eA,bX.svg.area=function(){return bj(hQ)},bX.svg.area.radial=function(){var a=bj(fk);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},bX.svg.chord=function(){function f(t,o){var r=s(this,h,t,o),e=s(this,d,t,o);return"M"+r.p0+b(r.r,r.p1,r.a1-r.a0)+(j(r,e)?p(r.r,r.p1,r.r,r.p0):p(r.r,r.p1,e.r,e.p0)+b(e.r,e.p1,e.a1-e.a0)+p(e.r,e.p1,r.r,r.p0))+"Z"}function s(z,l,x,w){var a=l.call(z,x,w),c=m.call(z,a,w),y=k.call(z,a,w)-fx,v=g.call(z,a,w)-fx;return{r:c,a0:y,a1:v,p0:[c*Math.cos(y),c*Math.sin(y)],p1:[c*Math.cos(v),c*Math.sin(v)]}}function j(c,a){return c.a0==a.a0&&c.a1==a.a1}function b(l,a,c){return"A"+l+","+l+" 0 "+ +(c>c9)+",1 "+a}function p(o,a,l,c){return"Q 0,0 "+c}var h=ez,d=j4,m=fY,k=jK,g=h2;return f.radius=function(a){return arguments.length?(m=aT(a),f):m},f.source=function(a){return arguments.length?(h=aT(a),f):h},f.target=function(a){return arguments.length?(d=aT(a),f):d},f.startAngle=function(a){return arguments.length?(k=aT(a),f):k},f.endAngle=function(a){return arguments.length?(g=aT(a),f):g},f},bX.svg.diagonal=function(){function d(k,f){var g=a.call(this,k,f),h=c.call(this,k,f),e=(g.y+h.y)/2,j=[g,{x:g.x,y:e},{x:h.x,y:e},h];return j=j.map(b),"M"+j[0]+"C"+j[1]+" "+j[2]+" "+j[3]}var a=ez,c=j4,b=ej;return d.source=function(f){return arguments.length?(a=aT(f),d):a},d.target=function(e){return arguments.length?(c=aT(e),d):c},d.projection=function(e){return arguments.length?(b=e,d):b},d},bX.svg.diagonal.radial=function(){var c=bX.svg.diagonal(),a=ej,b=c.projection;return c.projection=function(d){return arguments.length?b(fB(a=d)):a},c},bX.svg.symbol=function(){function c(e,d){return(jG.get(a.call(this,e,d))||gk)(b.call(this,e,d))}var a=jT,b=aC;return c.type=function(d){return arguments.length?(a=aT(d),c):a},c.size=function(d){return arguments.length?(b=aT(d),c):b},c};var jG=bX.map({circle:gk,cross:function(b){var a=Math.sqrt(b/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(c){var a=Math.sqrt(c/(2*hp)),b=a*hp;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(b){var a=Math.sqrt(b)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(c){var a=Math.sqrt(c/c1),b=a*c1/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(c){var a=Math.sqrt(c/c1),b=a*c1/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});bX.svg.symbolTypes=jG.keys();var c1=Math.sqrt(3),hp=Math.tan(30*bw);aG.transition=function(g){for(var x,m,b=eI||++em,w=c5(g),j=[],d=fn||{time:Date.now(),ease:eT,delay:0,duration:250},v=-1,p=this.length;++v<p;){j.push(x=[]);for(var h=this[v],y=-1,k=h.length;++y<k;){(m=h[y])&&d0(m,y,w,b,d),x.push(m)}}return cN(j,w,b)},aG.interrupt=function(a){return this.each(null==a?bk:jb(c5(a)))};var eI,fn,bk=jb(c5()),f0=[],em=0;f0.call=aG.call,f0.empty=aG.empty,f0.node=aG.node,f0.size=aG.size,bX.transition=function(b,a){return b&&b.transition?eI?b.transition(a):b:bX.selection().transition(b)},bX.transition.prototype=f0,f0.select=function(g){var x,m,b,w=this.id,j=this.namespace,d=[];g=i2(g);for(var v=-1,p=this.length;++v<p;){d.push(x=[]);for(var h=this[v],y=-1,k=h.length;++y<k;){(b=h[y])&&(m=g.call(b,b.__data__,y,v))?("__data__" in b&&(m.__data__=b.__data__),d0(m,y,j,w,b[j][w]),x.push(m)):x.push(null)}}return cN(d,j,w)},f0.selectAll=function(k){var F,A,b,E,w,j=this.id,C=this.namespace,B=[];k=jv(k);for(var m=-1,G=this.length;++m<G;){for(var z=this[m],x=-1,y=z.length;++x<y;){if(b=z[x]){w=b[C][j],A=k.call(b,b.__data__,x,m),B.push(F=[]);for(var d=-1,D=A.length;++d<D;){(E=A[d])&&d0(E,d,C,j,w),F.push(E)}}}}return cN(B,C,j)},f0.filter=function(f){var m,h,b,l=[];"function"!=typeof f&&(f=iZ(f));for(var g=0,d=this.length;d>g;g++){l.push(m=[]);for(var h=this[g],k=0,j=h.length;j>k;k++){(b=h[k])&&f.call(b,b.__data__,k,g)&&m.push(b)}}return cN(l,this.namespace,this.id)},f0.tween=function(d,a){var c=this.id,b=this.namespace;return arguments.length<2?this.node()[b][c].tween.get(d):iL(this,null==a?function(e){e[b][c].tween.remove(d)}:function(e){e[b][c].tween.set(d,a)})},f0.attr=function(k,f){function h(){this.removeAttribute(b)}function g(){this.removeAttributeNS(b.space,b.local)}function c(a){return null==a?h:(a+="",function(){var l,m=this.getAttribute(b);return m!==a&&(l=j(m,a),function(e){this.setAttribute(b,l(e))})})}function d(a){return null==a?g:(a+="",function(){var l,m=this.getAttributeNS(b.space,b.local);return m!==a&&(l=j(m,a),function(e){this.setAttributeNS(b.space,b.local,l(e))})})}if(arguments.length<2){for(f in k){this.attr(f,k[f])}return this}var j="transform"==k?jL:ex,b=bX.ns.qualify(k);return cg(this,"attr."+k,f,b.local?d:c)},f0.attrTween=function(f,b){function d(j,h){var g=b.call(this,j,h,this.getAttribute(a));return g&&function(e){this.setAttribute(a,g(e))}}function c(j,h){var g=b.call(this,j,h,this.getAttributeNS(a.space,a.local));return g&&function(e){this.setAttributeNS(a.space,a.local,g(e))}}var a=bX.ns.qualify(f);return this.tween("attr."+f,a.local?c:d)},f0.style=function(g,d,c){function a(){this.style.removeProperty(g)}function b(h){return null==h?a:(h+="",function(){var e,j=hX(this).getComputedStyle(this,null).getPropertyValue(g);return j!==h&&(e=ex(j,h),function(k){this.style.setProperty(g,e(k),c)})})}var f=arguments.length;if(3>f){if("string"!=typeof g){2>f&&(d="");for(c in g){this.style(c,g[c],d)}return this}c=""}return cg(this,"style."+g,d,b)},f0.styleTween=function(d,c,b){function a(e,f){var g=c.call(this,e,f,hX(this).getComputedStyle(this,null).getPropertyValue(d));return g&&function(h){this.style.setProperty(d,g(h),b)}}return arguments.length<3&&(b=""),this.tween("style."+d,a)},f0.text=function(a){return cg(this,"text",a,dO)},f0.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},f0.ease=function(c){var a=this.id,b=this.namespace;return arguments.length<1?this.node()[b][a].ease:("function"!=typeof c&&(c=bX.ease.apply(bX,arguments)),iL(this,function(d){d[b][a].ease=c}))},f0.delay=function(c){var a=this.id,b=this.namespace;return arguments.length<1?this.node()[b][a].delay:iL(this,"function"==typeof c?function(f,d,e){f[b][a].delay=+c.call(f,f.__data__,d,e)}:(c=+c,function(d){d[b][a].delay=c}))},f0.duration=function(c){var a=this.id,b=this.namespace;return arguments.length<1?this.node()[b][a].duration:iL(this,"function"==typeof c?function(f,d,e){f[b][a].duration=Math.max(1,c.call(f,f.__data__,d,e))}:(c=Math.max(1,c),function(d){d[b][a].duration=c}))},f0.each=function(g,c){var f=this.id,d=this.namespace;if(arguments.length<2){var a=fn,b=eI;try{eI=f,iL(this,function(j,e,h){fn=j[d][f],g.call(j,j.__data__,e,h)})}finally{fn=a,eI=b}}else{iL(this,function(e){var h=e[d][f];(h.event||(h.event=bX.dispatch("start","end","interrupt"))).on(g,c)})}return this},f0.transition=function(){for(var g,x,m,b,w=this.id,j=++em,d=this.namespace,v=[],p=0,h=this.length;h>p;p++){v.push(g=[]);for(var x=this[p],y=0,k=x.length;k>y;y++){(m=x[y])&&(b=m[d][w],d0(m,y,d,j,{time:b.time,ease:b.ease,delay:b.delay+b.duration,duration:b.duration})),g.push(m)}}return cN(v,d,j)},bX.svg.axis=function(){function f(a){a.each(function(){var P,U=bX.select(this),H=this.__chart__||h,Y=this.__chart__=h.copy(),W=null==j?Y.ticks?Y.ticks.apply(Y,k):Y.domain():j,X=null==m?Y.tickFormat?Y.tickFormat.apply(Y,k):hQ:m,O=U.selectAll(".tick").data(W,Y),F=O.enter().insert("g",".domain").attr("class","tick").style("opacity",bO),Z=bX.transition(O.exit()).style("opacity",bO).remove(),Q=bX.transition(O.order()).style("opacity",1),t=Math.max(l,0)+d,B=eq(Y),aa=U.selectAll(".domain").data([0]),ac=(aa.enter().append("path").attr("class","domain"),bX.transition(aa));F.append("line"),F.append("text");var D,e,V,G,K=F.select("line"),r=Q.select("line"),I=O.select("text").text(X),y=F.select("text"),J=Q.select("text"),u="top"===b||"left"===b?-1:1;if("bottom"===b||"top"===b?(P=bY,D="x",V="y",e="x2",G="y2",I.attr("dy",0>u?"0em":".71em").style("text-anchor","middle"),ac.attr("d","M"+B[0]+","+u*g+"V0H"+B[1]+"V"+u*g)):(P=dw,D="y",V="x",e="y2",G="x2",I.attr("dy",".32em").style("text-anchor",0>u?"end":"start"),ac.attr("d","M"+u*g+","+B[0]+"H0V"+B[1]+"H"+u*g)),K.attr(G,u*l),y.attr(V,u*t),r.attr(e,0).attr(G,u*l),J.attr(D,0).attr(V,u*t),Y.rangeBand){var c=Y,o=c.rangeBand()/2;H=Y=function(p){return c(p)+o}}else{H.rangeBand?H=Y:Z.call(P,Y,H)}F.call(P,H,Y),Q.call(P,Y,Y)})}var m,h=bX.scale.linear(),b=fD,l=6,g=6,d=3,k=[10],j=null;return f.scale=function(a){return arguments.length?(h=a,f):h},f.orient=function(a){return arguments.length?(b=a in aE?a+"":fD,f):b},f.ticks=function(){return arguments.length?(k=arguments,f):k},f.tickValues=function(a){return arguments.length?(j=a,f):j},f.tickFormat=function(a){return arguments.length?(m=a,f):m},f.tickSize=function(a){var c=arguments.length;return c?(l=+a,g=+arguments[c-1],f):l},f.innerTickSize=function(a){return arguments.length?(l=+a,f):l},f.outerTickSize=function(a){return arguments.length?(g=+a,f):g},f.tickPadding=function(a){return arguments.length?(d=+a,f):d},f.tickSubdivide=function(){return arguments.length&&f},f};var fD="bottom",aE={top:1,right:1,bottom:1,left:1};bX.svg.brush=function(){function k(a){a.each(function(){var g=bX.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",t).on("touchstart.brush",t),p=g.selectAll(".background").data([0]);p.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var e=g.selectAll(".resize").data(C,hQ);e.exit().remove(),e.enter().append("g").attr("class",function(c){return"resize "+c}).style("cursor",function(c){return jV[c]}).append("rect").attr("x",function(c){return/[ew]$/.test(c)?-3:null}).attr("y",function(c){return/^[ns]/.test(c)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),e.style("display",k.empty()?"none":null);var r,n=bX.transition(g),l=bX.transition(p);m&&(r=eq(m),l.attr("x",r[0]).attr("width",r[1]-r[0]),b(n)),E&&(r=eq(E),l.attr("y",r[0]).attr("height",r[1]-r[0]),D(n)),z(n)})}function z(a){a.selectAll(".resize").attr("transform",function(c){return"translate("+y[+/e$/.test(c)]+","+w[+/^s/.test(c)]+")"})}function b(a){a.select(".extent").attr("x",y[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",y[1]-y[0])}function D(a){a.select(".extent").attr("y",w[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",w[1]-w[0])}function t(){function I(){32==bX.event.keyCode&&(s||(f=null,u[0]-=y[1],u[1]-=w[1],s=2),iU())}function p(){32==bX.event.keyCode&&2==s&&(u[0]+=y[1],u[1]+=w[1],s=0,iU())}function J(){var L=bX.mouse(K),v=!1;n&&(L[0]+=n[0],L[1]+=n[1]),s||(bX.event.altKey?(f||(f=[(y[0]+y[1])/2,(w[0]+w[1])/2]),u[0]=y[+(L[0]<f[0])],u[1]=w[+(L[1]<f[1])]):f=null),F&&G(L,m,0)&&(b(H),v=!0),e&&G(L,E,1)&&(D(H),v=!0),v&&(z(H),o({type:"brush",mode:s?"move":"resize"}))}function G(M,V,Q){var L,U,P=eq(V),S=P[0],N=P[1],W=u[Q],T=Q?w:y,R=T[1]-T[0];return s&&(S-=W,N-=R+W),L=(Q?d:x)?Math.max(S,Math.min(N,M[Q])):M[Q],s?U=(L+=W)+R:(f&&(W=Math.max(S,Math.min(N,2*f[Q]-L))),L>W?(U=L,L=W):U=W),T[0]!=L||T[1]!=U?(Q?B=null:j=null,T[0]=L,T[1]=U,!0):void 0}function l(){J(),H.style("pointer-events","all").selectAll(".resize").style("display",k.empty()?"none":null),bX.select("body").style("cursor",null),g.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),h(),o({type:"brushend"})}var f,n,K=this,O=bX.select(bX.event.target),o=A.of(K,arguments),H=bX.select(K),r=O.datum(),F=!/^(n|s)$/.test(r)&&m,e=!/^(e|w)$/.test(r)&&E,s=O.classed("extent"),h=iN(K),u=bX.mouse(K),g=bX.select(hX(K)).on("keydown.brush",I).on("keyup.brush",p);if(bX.event.changedTouches?g.on("touchmove.brush",J).on("touchend.brush",l):g.on("mousemove.brush",J).on("mouseup.brush",l),H.interrupt().selectAll("*").interrupt(),s){u[0]=y[0]-u[0],u[1]=w[0]-u[1]}else{if(r){var a=+/w$/.test(r),c=+/^n/.test(r);n=[y[1-a]-u[0],w[1-c]-u[1]],u[0]=y[a],u[1]=w[c]}else{bX.event.altKey&&(f=u.slice())}}H.style("pointer-events","none").selectAll(".resize").style("display",null),bX.select("body").style("cursor",O.style("cursor")),o({type:"brushstart"}),J()}var j,B,A=jn(k,"brushstart","brush","brushend"),m=null,E=null,y=[0,0],w=[0,0],x=!0,d=!0,C=gn[0];return k.event=function(a){a.each(function(){var g=A.of(this,arguments),c={x:y,y:w,i:j,j:B},f=this.__chart__||c;this.__chart__=c,eI?bX.select(this).transition().each("start.brush",function(){j=f.i,B=f.j,y=f.x,w=f.y,g({type:"brushstart"})}).tween("brush:brush",function(){var l=j0(y,c.x),h=j0(w,c.y);return j=B=null,function(e){y=c.x=l(e),w=c.y=h(e),g({type:"brush",mode:"resize"})}}).each("end.brush",function(){j=c.i,B=c.j,g({type:"brush",mode:"resize"}),g({type:"brushend"})}):(g({type:"brushstart"}),g({type:"brush",mode:"resize"}),g({type:"brushend"}))})},k.x=function(a){return arguments.length?(m=a,C=gn[!m<<1|!E],k):m},k.y=function(a){return arguments.length?(E=a,C=gn[!m<<1|!E],k):E},k.clamp=function(a){return arguments.length?(m&&E?(x=!!a[0],d=!!a[1]):m?x=!!a:E&&(d=!!a),k):m&&E?[x,d]:m?x:E?d:null},k.extent=function(g){var l,h,a,f,n;return arguments.length?(m&&(l=g[0],h=g[1],E&&(l=l[0],h=h[0]),j=[l,h],m.invert&&(l=m(l),h=m(h)),l>h&&(n=l,l=h,h=n),(l!=y[0]||h!=y[1])&&(y=[l,h])),E&&(a=g[0],f=g[1],m&&(a=a[1],f=f[1]),B=[a,f],E.invert&&(a=E(a),f=E(f)),a>f&&(n=a,a=f,f=n),(a!=w[0]||f!=w[1])&&(w=[a,f])),k):(m&&(j?(l=j[0],h=j[1]):(l=y[0],h=y[1],m.invert&&(l=m.invert(l),h=m.invert(h)),l>h&&(n=l,l=h,h=n))),E&&(B?(a=B[0],f=B[1]):(a=w[0],f=w[1],E.invert&&(a=E.invert(a),f=E.invert(f)),a>f&&(n=a,a=f,f=n))),m&&E?[[l,a],[h,f]]:m?[l,h]:E&&[a,f])},k.clear=function(){return k.empty()||(y=[0,0],w=[0,0],j=B=null),k},k.empty=function(){return !!m&&y[0]==y[1]||!!E&&w[0]==w[1]},bX.rebind(k,A,"on")};var jV={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},gn=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],jj=jW.format=gK.timeFormat,cP=jj.utc,ck=cP("%Y-%m-%dT%H:%M:%S.%LZ");jj.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?im:ck,im.parse=function(b){var a=new Date(b);return isNaN(a)?null:a},im.toString=ck.toString,jW.second=ax(function(a){return new iz(1000*Math.floor(a/1000))},function(b,a){b.setTime(b.getTime()+1000*Math.floor(a))},function(a){return a.getSeconds()}),jW.seconds=jW.second.range,jW.seconds.utc=jW.second.utc.range,jW.minute=ax(function(a){return new iz(60000*Math.floor(a/60000))},function(b,a){b.setTime(b.getTime()+60000*Math.floor(a))},function(a){return a.getMinutes()}),jW.minutes=jW.minute.range,jW.minutes.utc=jW.minute.utc.range,jW.hour=ax(function(b){var a=b.getTimezoneOffset()/60;return new iz(3600000*(Math.floor(b/3600000-a)+a))},function(b,a){b.setTime(b.getTime()+3600000*Math.floor(a))},function(a){return a.getHours()}),jW.hours=jW.hour.range,jW.hours.utc=jW.hour.utc.range,jW.month=ax(function(a){return a=jW.day(a),a.setDate(1),a},function(b,a){b.setMonth(b.getMonth()+a)},function(a){return a.getMonth()}),jW.months=jW.month.range,jW.months.utc=jW.month.utc.range;var dQ=[1000,5000,15000,30000,60000,300000,900000,1800000,3600000,10800000,21600000,43200000,86400000,172800000,604800000,2592000000,7776000000,31536000000],c7=[[jW.second,1],[jW.second,5],[jW.second,15],[jW.second,30],[jW.minute,1],[jW.minute,5],[jW.minute,15],[jW.minute,30],[jW.hour,1],[jW.hour,3],[jW.hour,6],[jW.hour,12],[jW.day,1],[jW.day,2],[jW.week,1],[jW.month,1],[jW.month,3],[jW.year,1]],d3=jj.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",gN]]),bZ={range:function(c,a,b){return bX.range(Math.ceil(c/b)*b,+a,b).map(hH)},floor:hQ,ceil:hQ};c7.year=jW.year,jW.scale=function(){return kj(bX.scale.linear(),c7,d3)};var dy=c7.map(function(a){return[a[0].utc,a[1]]}),ix=cP.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",gN]]);dy.year=jW.year.utc,jW.scale.utc=function(){return kj(bX.scale.linear(),dy,ix)},bX.text=cm(function(a){return a.responseText}),bX.json=function(b,a){return gE(b,"application/json",fH,a)},bX.html=function(b,a){return gE(b,"text/html",ep,a)},bX.xml=cm(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(bX):"object"==typeof module&&module.exports&&(module.exports=bX),this.d3=bX}();!function(Z){function Y(b){this.owner=b}function X(e,d){if(Object.create){d.prototype=Object.create(e.prototype)}else{var f=function(){};f.prototype=e.prototype,d.prototype=new f}return d.prototype.constructor=d,d}function W(e){var d=this.internal=new V(this);d.loadConfig(e),d.init(),function f(g,c,h){Object.keys(g).forEach(function(a){c[a]=g[a].bind(h),Object.keys(g[a]).length>0&&f(g[a],c[a],h)})}(S,this,this)}function V(a){var d=this;d.d3=Z.d3?Z.d3:"undefined"!=typeof require?require("d3"):void 0,d.api=a,d.config=d.getDefaultConfig(),d.data={},d.cache={},d.axes={}}function U(b){Y.call(this,b)}function T(ar,aq){function ap(d,c){d.attr("transform",function(b){return"translate("+Math.ceil(c(b)+x)+", 0)"})}function ao(d,c){d.attr("transform",function(b){return"translate(0,"+Math.ceil(c(b))+")"})}function an(e){var d=e[0],f=e[e.length-1];return f>d?[d,f]:[f,d]}function am(f){var e,h,g=[];if(f.ticks){return f.ticks.apply(f,ae)}for(h=f.domain(),e=Math.ceil(h[0]);e<h[1];e++){g.push(e)}return g.length>0&&g[0]>0&&g.unshift(g[0]-(g[1]-g[0])),g}function al(){var b,d=ac.copy();return aq.isCategory&&(b=ac.domain(),d.domain([b[0],b[1]-1])),d}function ak(d){var c=af?af(d):d;return"undefined"!=typeof c?c:""}function aj(d){if(A){return A}var c={h:11.5,w:5.5};return d.select("text").text(ak).each(function(b){var k=this.getBoundingClientRect(),j=ak(b),h=k.height,g=j?k.width/j.length:void 0;h&&g&&(c.h=h,c.w=g)}).text(""),A=c,c}function ai(a){return aq.withoutTransition?a:ar.transition(a)}function ah(a){a.each(function(){function aK(m,aP){function aO(aR,aQ){aM=void 0;for(var aS=1;aS<aQ.length;aS++){if(" "===aQ.charAt(aS)&&(aM=aS),aN=aQ.substr(0,aS+1),aL=g.w*aN.length,aL>aP){return aO(aR.concat(aQ.substr(0,aM?aM:aS)),aQ.slice(aM?aM+1:aS))}}return aR.concat(aQ)}var aN,aM,aL,v=ak(m),n=[];return"[object Array]"===Object.prototype.toString.call(v)?v:((!aP||0>=aP)&&(aP=d?95:aq.isCategory?Math.ceil(aD(aB[1])-aD(aB[0]))-12:110),aO(n,v+""))}function aJ(n,m){var v=g.h;return 0===m&&(v="left"===ab||"right"===ab?-((f[n.index]-1)*(g.h/2)-3):".71em"),v}function aC(n){var m=ac(n)+(ad?0:x);return u[0]<m&&m<u[1]?aa:0}function aA(m){return m?m>0?"start":"end":"middle"}function ay(m){return m?"rotate("+m+")":""}function aw(m){return m?8*Math.sin(Math.PI*(m/180)):0}function au(m){return m?11.5-2.5*(m/15)*(m>0?1:-1):e}var aI,aH,aG,aF=ah.g=ar.select(this),aE=this.__chart__||ac,aD=this.__chart__=al(),aB=y?y:am(aD),az=aF.selectAll(".tick").data(aB,aD),ax=az.enter().insert("g",".domain").attr("class","tick").style("opacity",0.000001),av=az.exit().remove(),at=ai(az).style("opacity",1),u=ac.rangeExtent?ac.rangeExtent():an(ac.range()),t=aF.selectAll(".domain").data([0]),s=(t.enter().append("path").attr("class","domain"),ai(t));ax.append("line"),ax.append("text");var r=ax.select("line"),p=at.select("line"),o=ax.select("text"),l=at.select("text");aq.isCategory?(x=Math.ceil((aD(1)-aD(0))/2),aH=ad?0:x,aG=ad?x:0):x=aH=0;var k,h,g=aj(aF.select(".tick")),f=[],e=Math.max(aa,0)+z,d="left"===ab||"right"===ab;k=az.select("text"),h=k.selectAll("tspan").data(function(m,v){var n=aq.tickMultiline?aK(m,aq.tickWidth):[].concat(ak(m));return f[v]=n.length,n.map(function(aL){return{index:v,splitted:aL}})}),h.enter().append("tspan"),h.exit().remove(),h.text(function(m){return m.splitted});var c=aq.tickTextRotate;switch(ab){case"bottom":aI=ap,r.attr("y2",aa),o.attr("y",e),p.attr("x1",aH).attr("x2",aH).attr("y2",aC),l.attr("x",0).attr("y",au(c)).style("text-anchor",aA(c)).attr("transform",ay(c)),h.attr("x",0).attr("dy",aJ).attr("dx",aw(c)),s.attr("d","M"+u[0]+","+ag+"V0H"+u[1]+"V"+ag);break;case"top":aI=ap,r.attr("y2",-aa),o.attr("y",-e),p.attr("x2",0).attr("y2",-aa),l.attr("x",0).attr("y",-e),k.style("text-anchor","middle"),h.attr("x",0).attr("dy","0em"),s.attr("d","M"+u[0]+","+-ag+"V0H"+u[1]+"V"+-ag);break;case"left":aI=ao,r.attr("x2",-aa),o.attr("x",-e),p.attr("x2",-aa).attr("y1",aG).attr("y2",aG),l.attr("x",-e).attr("y",x),k.style("text-anchor","end"),h.attr("x",-e).attr("dy",aJ),s.attr("d","M"+-ag+","+u[0]+"H0V"+u[1]+"H"+-ag);break;case"right":aI=ao,r.attr("x2",aa),o.attr("x",e),p.attr("x2",aa).attr("y2",0),l.attr("x",e).attr("y",0),k.style("text-anchor","start"),h.attr("x",e).attr("dy",aJ),s.attr("d","M"+ag+","+u[0]+"H0V"+u[1]+"H"+ag)}if(aD.rangeBand){var b=aD,j=b.rangeBand()/2;aE=aD=function(m){return b(m)+j}}else{aE.rangeBand?aE=aD:av.call(aI,aD)}ax.call(aI,aE),at.call(aI,aD)})}var ag,af,ae,ad,ac=ar.scale.linear(),ab="bottom",aa=6,z=3,y=null,x=0,w=!0;return aq=aq||{},ag=aq.withOuterTick?6:0,ah.scale=function(b){return arguments.length?(ac=b,ah):ac},ah.orient=function(b){return arguments.length?(ab=b in {top:1,right:1,bottom:1,left:1}?b+"":"bottom",ah):ab},ah.tickFormat=function(b){return arguments.length?(af=b,ah):af},ah.tickCentered=function(b){return arguments.length?(ad=b,ah):ad},ah.tickOffset=function(){return x},ah.tickInterval=function(){var b,d;return aq.isCategory?b=2*x:(d=ah.g.select("path.domain").node().getTotalLength()-2*ag,b=d/ah.g.selectAll("line").size()),1/0===b?0:b},ah.ticks=function(){return arguments.length?(ae=arguments,ah):ae},ah.tickCulling=function(b){return arguments.length?(w=b,ah):w},ah.tickValues=function(b){if("function"==typeof b){y=function(){return b(ac.domain())}}else{if(!arguments.length){return y}y=b}return ah},ah}var S,R,Q,P={version:"0.4.10"};P.generate=function(b){return new W(b)},P.chart={fn:W.prototype,internal:{fn:V.prototype,axis:{fn:U.prototype}}},S=P.chart.fn,R=P.chart.internal.fn,Q=P.chart.internal.axis.fn,R.init=function(){var d=this,c=d.config;if(d.initParams(),c.data_url){d.convertUrlToData(c.data_url,c.data_mimeType,c.data_keys,d.initWithData)}else{if(c.data_json){d.initWithData(d.convertJsonToData(c.data_json,c.data_keys))}else{if(c.data_rows){d.initWithData(d.convertRowsToData(c.data_rows))}else{if(!c.data_columns){throw Error("url or json or rows or columns is required.")}d.initWithData(d.convertColumnsToData(c.data_columns))}}}},R.initParams=function(){var e=this,d=e.d3,f=e.config;e.clipId="c3-"+ +new Date+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeFormat=f.data_xLocaltime?d.time.format:d.time.format.utc,e.axisTimeFormat=f.axis_x_localtime?d.time.format:d.time.format.utc,e.defaultAxisTimeFormat=e.axisTimeFormat.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%-m/%-d",function(b){return b.getDay()&&1!==b.getDate()}],["%-m/%-d",function(b){return 1!==b.getDate()}],["%-m/%-d",function(b){return b.getMonth()}],["%Y/%-m/%-d",function(){return !0}]]),e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=f.axis_rotated?"left":"bottom",e.yOrient=f.axis_rotated?f.axis_y_inner?"top":"bottom":f.axis_y_inner?"right":"left",e.y2Orient=f.axis_rotated?f.axis_y2_inner?"bottom":"top":f.axis_y2_inner?"left":"right",e.subXOrient=f.axis_rotated?"left":"bottom",e.isLegendRight="right"===f.legend_position,e.isLegendInset="inset"===f.legend_position,e.isLegendTop="top-left"===f.legend_inset_anchor||"top-right"===f.legend_inset_anchor,e.isLegendLeft="top-left"===f.legend_inset_anchor||"bottom-left"===f.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=f.axis_rotated&&!f.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=void 0,e.axes.subx=d.selectAll([])},R.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},R.initWithData=function(a){var n,m,l=this,k=l.d3,j=l.config,f=!0;l.axis=new U(l),l.initPie&&l.initPie(),l.initBrush&&l.initBrush(),l.initZoom&&l.initZoom(),l.selectChart=j.bindto?"function"==typeof j.bindto.node?j.bindto:k.select(j.bindto):k.selectAll([]),l.selectChart.empty()&&(l.selectChart=k.select(document.createElement("div")).style("opacity",0),l.observeInserted(l.selectChart),f=!1),l.selectChart.html("").classed("c3",!0),l.data.xs={},l.data.targets=l.convertDataToTargets(a),j.data_filter&&(l.data.targets=l.data.targets.filter(j.data_filter)),j.data_hide&&l.addHiddenTargetIds(j.data_hide===!0?l.mapToIds(l.data.targets):j.data_hide),j.legend_hide&&l.addHiddenLegendIds(j.legend_hide===!0?l.mapToIds(l.data.targets):j.legend_hide),l.hasType("gauge")&&(j.legend_show=!1),l.updateSizes(),l.updateScales(),l.x.domain(k.extent(l.getXDomain(l.data.targets))),l.y.domain(l.getYDomain(l.data.targets,"y")),l.y2.domain(l.getYDomain(l.data.targets,"y2")),l.subX.domain(l.x.domain()),l.subY.domain(l.y.domain()),l.subY2.domain(l.y2.domain()),l.orgXDomain=l.x.domain(),l.brush&&l.brush.scale(l.subX),j.zoom_enabled&&l.zoom.scale(l.x),l.svg=l.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return j.onmouseover.call(l)}).on("mouseleave",function(){return j.onmouseout.call(l)}),n=l.svg.append("defs"),l.clipChart=l.appendClip(n,l.clipId),l.clipXAxis=l.appendClip(n,l.clipIdForXAxis),l.clipYAxis=l.appendClip(n,l.clipIdForYAxis),l.clipGrid=l.appendClip(n,l.clipIdForGrid),l.clipSubchart=l.appendClip(n,l.clipIdForSubchart),l.updateSvgSize(),m=l.main=l.svg.append("g").attr("transform",l.getTranslate("main")),l.initSubchart&&l.initSubchart(),l.initTooltip&&l.initTooltip(),l.initLegend&&l.initLegend(),m.append("text").attr("class",O.text+" "+O.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),l.initRegion(),l.initGrid(),m.append("g").attr("clip-path",l.clipPath).attr("class",O.chart),j.grid_lines_front&&l.initGridLines(),l.initEventRect(),l.initChartElements(),m.insert("rect",j.zoom_privileged?null:"g."+O.regions).attr("class",O.zoomRect).attr("width",l.width).attr("height",l.height).style("opacity",0).on("dblclick.zoom",null),j.axis_x_extent&&l.brush.extent(l.getDefaultExtent()),l.axis.init(),l.updateTargets(l.data.targets),f&&(l.updateDimension(),l.config.oninit.call(l),l.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),null==Z.onresize&&(Z.onresize=l.generateResize()),Z.onresize.add&&(Z.onresize.add(function(){j.onresize.call(l)}),Z.onresize.add(function(){l.api.flush()}),Z.onresize.add(function(){j.onresized.call(l)})),l.api.element=l.selectChart.node()},R.smoothLines=function(e,d){var f=this;"grid"===d&&e.each(function(){var g=f.d3.select(this),c=g.attr("x1"),k=g.attr("x2"),j=g.attr("y1"),h=g.attr("y2");g.attr({x1:Math.ceil(c),x2:Math.ceil(k),y1:Math.ceil(j),y2:Math.ceil(h)})})},R.updateSizes=function(){var k=this,j=k.config,r=k.legend?k.getLegendHeight():0,p=k.legend?k.getLegendWidth():0,o=k.isLegendRight||k.isLegendInset?0:r,n=k.hasArcType(),m=j.axis_rotated||n?0:k.getHorizontalAxisHeight("x"),l=j.subchart_show&&!n?j.subchart_size_height+m:0;k.currentWidth=k.getCurrentWidth(),k.currentHeight=k.getCurrentHeight(),k.margin=j.axis_rotated?{top:k.getHorizontalAxisHeight("y2")+k.getCurrentPaddingTop(),right:n?0:k.getCurrentPaddingRight(),bottom:k.getHorizontalAxisHeight("y")+o+k.getCurrentPaddingBottom(),left:l+(n?0:k.getCurrentPaddingLeft())}:{top:4+k.getCurrentPaddingTop(),right:n?0:k.getCurrentPaddingRight(),bottom:m+l+o+k.getCurrentPaddingBottom(),left:n?0:k.getCurrentPaddingLeft()},k.margin2=j.axis_rotated?{top:k.margin.top,right:0/0,bottom:20+o,left:k.rotated_padding_left}:{top:k.currentHeight-l-o,right:0/0,bottom:m+o,left:k.margin.left},k.margin3={top:0,right:0/0,bottom:0,left:0},k.updateSizeForLegend&&k.updateSizeForLegend(r,p),k.width=k.currentWidth-k.margin.left-k.margin.right,k.height=k.currentHeight-k.margin.top-k.margin.bottom,k.width<0&&(k.width=0),k.height<0&&(k.height=0),k.width2=j.axis_rotated?k.margin.left-k.rotated_padding_left-k.rotated_padding_right:k.width,k.height2=j.axis_rotated?k.height:k.currentHeight-k.margin2.top-k.margin2.bottom,k.width2<0&&(k.width2=0),k.height2<0&&(k.height2=0),k.arcWidth=k.width-(k.isLegendRight?p+10:0),k.arcHeight=k.height-(k.isLegendRight?0:10),k.hasType("gauge")&&(k.arcHeight+=k.height-k.getGaugeLabelHeight()),k.updateRadius&&k.updateRadius(),k.isLegendRight&&n&&(k.margin3.left=k.arcWidth/2+1.1*k.radiusExpanded)},R.updateTargets=function(d){var c=this;c.updateTargetsForText(d),c.updateTargetsForBar(d),c.updateTargetsForLine(d),c.hasArcType()&&c.updateTargetsForArc&&c.updateTargetsForArc(d),c.updateTargetsForSubchart&&c.updateTargetsForSubchart(d),c.showTargets()},R.showTargets=function(){var b=this;b.svg.selectAll("."+O.target).filter(function(a){return b.isTargetToShow(a.id)}).transition().duration(b.config.transition_duration).style("opacity",1)},R.redraw=function(aN,aM){var aL,aK,aJ,aI,aH,aG,aF,aE,aD,aC,aB,aA,az,ay,ax,aw,av,au,at,ar,aq,ap,ao,an,am,al,ak,aj,ai,ah=this,ag=ah.main,af=ah.d3,ae=ah.config,ad=ah.getShapeIndices(ah.isAreaType),ac=ah.getShapeIndices(ah.isBarType),ab=ah.getShapeIndices(ah.isLineType),aa=ah.hasArcType(),w=ah.filterTargetsToShow(ah.data.targets),l=ah.xv.bind(ah);if(aN=aN||{},aL=D(aN,"withY",!0),aK=D(aN,"withSubchart",!0),aJ=D(aN,"withTransition",!0),aG=D(aN,"withTransform",!1),aF=D(aN,"withUpdateXDomain",!1),aE=D(aN,"withUpdateOrgXDomain",!1),aD=D(aN,"withTrimXDomain",!0),az=D(aN,"withUpdateXAxis",aF),aC=D(aN,"withLegend",!1),aB=D(aN,"withEventRect",!0),aA=D(aN,"withDimension",!0),aI=D(aN,"withTransitionForExit",aJ),aH=D(aN,"withTransitionForAxis",aJ),at=aJ?ae.transition_duration:0,ar=aI?at:0,aq=aH?at:0,aM=aM||ah.axis.generateTransitions(aq),aC&&ae.legend_show?ah.updateLegend(ah.mapToIds(ah.data.targets),aN,aM):aA&&ah.updateDimension(!0),ah.isCategorized()&&0===w.length&&ah.x.domain([0,ah.axes.x.selectAll(".tick").size()]),w.length?(ah.updateXDomain(w,aF,aE,aD),ae.axis_x_tick_values||(an=ah.axis.updateXAxisTickValues(w))):(ah.xAxis.tickValues([]),ah.subXAxis.tickValues([])),ae.zoom_rescale&&!aN.flow&&(ak=ah.x.orgDomain()),ah.y.domain(ah.getYDomain(w,"y",ak)),ah.y2.domain(ah.getYDomain(w,"y2",ak)),!ae.axis_y_tick_values&&ae.axis_y_tick_count&&ah.yAxis.tickValues(ah.axis.generateTickValues(ah.y.domain(),ae.axis_y_tick_count)),!ae.axis_y2_tick_values&&ae.axis_y2_tick_count&&ah.y2Axis.tickValues(ah.axis.generateTickValues(ah.y2.domain(),ae.axis_y2_tick_count)),ah.axis.redraw(aM,aa),ah.axis.updateLabels(aJ),(aF||az)&&w.length){if(ae.axis_x_tick_culling&&an){for(am=1;am<an.length;am++){if(an.length/am<ae.axis_x_tick_culling_max){al=am;break}}ah.svg.selectAll("."+O.axisX+" .tick text").each(function(d){var c=an.indexOf(d);c>=0&&af.select(this).style("display",c%al?"none":"block")})}else{ah.svg.selectAll("."+O.axisX+" .tick text").style("display","block")}}ay=ah.generateDrawArea?ah.generateDrawArea(ad,!1):void 0,ax=ah.generateDrawBar?ah.generateDrawBar(ac):void 0,aw=ah.generateDrawLine?ah.generateDrawLine(ab,!1):void 0,av=ah.generateXYForText(ad,ac,ab,!0),au=ah.generateXYForText(ad,ac,ab,!1),aL&&(ah.subY.domain(ah.getYDomain(w,"y")),ah.subY2.domain(ah.getYDomain(w,"y2"))),ah.tooltip.style("display","none"),ah.updateXgridFocus(),ag.select("text."+O.text+"."+O.empty).attr("x",ah.width/2).attr("y",ah.height/2).text(ae.data_empty_label_text).transition().style("opacity",w.length?0:1),ah.updateGrid(at),ah.updateRegion(at),ah.updateBar(ar),ah.updateLine(ar),ah.updateArea(ar),ah.updateCircle(),ah.hasDataLabel()&&ah.updateText(ar),ah.redrawArc&&ah.redrawArc(at,ar,aG),ah.redrawSubchart&&ah.redrawSubchart(aK,aM,at,ar,ad,ac,ab),ag.selectAll("."+O.selectedCircles).filter(ah.isBarType.bind(ah)).selectAll("circle").remove(),ae.interaction_enabled&&!aN.flow&&aB&&(ah.redrawEventRect(),ah.updateZoom&&ah.updateZoom()),ah.updateCircleY(),aj=(ah.config.axis_rotated?ah.circleY:ah.circleX).bind(ah),ai=(ah.config.axis_rotated?ah.circleX:ah.circleY).bind(ah),aN.flow&&(ao=ah.generateFlow({targets:w,flow:aN.flow,duration:aN.flow.duration,drawBar:ax,drawLine:aw,drawArea:ay,cx:aj,cy:ai,xv:l,xForText:av,yForText:au})),(at||ao)&&ah.isTabVisible()?af.transition().duration(at).each(function(){var a=[];[ah.redrawBar(ax,!0),ah.redrawLine(aw,!0),ah.redrawArea(ay,!0),ah.redrawCircle(aj,ai,!0),ah.redrawText(av,au,aN.flow,!0),ah.redrawRegion(!0),ah.redrawGrid(!0)].forEach(function(b){b.forEach(function(c){a.push(c)})}),ap=ah.generateWait(),a.forEach(function(b){ap.add(b)})}).call(ap,function(){ao&&ao(),ae.onrendered&&ae.onrendered.call(ah)}):(ah.redrawBar(ax),ah.redrawLine(aw),ah.redrawArea(ay),ah.redrawCircle(aj,ai),ah.redrawText(av,au,aN.flow),ah.redrawRegion(),ah.redrawGrid(),ae.onrendered&&ae.onrendered.call(ah)),ah.mapToIds(ah.data.targets).forEach(function(b){ah.withoutFadeIn[b]=!0})},R.updateAndRedraw=function(f){var e,h=this,g=h.config;f=f||{},f.withTransition=D(f,"withTransition",!0),f.withTransform=D(f,"withTransform",!1),f.withLegend=D(f,"withLegend",!1),f.withUpdateXDomain=!0,f.withUpdateOrgXDomain=!0,f.withTransitionForExit=!1,f.withTransitionForTransform=D(f,"withTransitionForTransform",f.withTransition),h.updateSizes(),f.withLegend&&g.legend_show||(e=h.axis.generateTransitions(f.withTransitionForAxis?g.transition_duration:0),h.updateScales(),h.updateSvgSize(),h.transformAll(f.withTransitionForTransform,e)),h.redraw(f,e)},R.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},R.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},R.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},R.isCustomX=function(){var d=this,c=d.config;return !d.isTimeSeries()&&(c.data_x||E(c.data_xs))},R.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},R.getTranslate=function(g){var f,k,j=this,h=j.config;return"main"===g?(f=H(j.margin.left),k=H(j.margin.top)):"context"===g?(f=H(j.margin2.left),k=H(j.margin2.top)):"legend"===g?(f=j.margin3.left,k=j.margin3.top):"x"===g?(f=0,k=h.axis_rotated?0:j.height):"y"===g?(f=0,k=h.axis_rotated?j.height:0):"y2"===g?(f=h.axis_rotated?0:j.width,k=h.axis_rotated?1:0):"subx"===g?(f=0,k=h.axis_rotated?0:j.height2):"arc"===g&&(f=j.arcWidth/2,k=j.arcHeight/2),"translate("+f+","+k+")"},R.initialOpacity=function(b){return null!==b.value&&this.withoutFadeIn[b.id]?1:0},R.initialOpacityForCircle=function(b){return null!==b.value&&this.withoutFadeIn[b.id]?this.opacityForCircle(b):0},R.opacityForCircle=function(d){var c=this.config.point_show?1:0;return N(d.value)?this.isScatterType(d)?0.5:c:0},R.opacityForText=function(){return this.hasDataLabel()?1:0},R.xx=function(b){return b?this.x(b.x):null},R.xv=function(e){var d=this,f=e.value;return d.isTimeSeries()?f=d.parseDate(e.value):d.isCategorized()&&"string"==typeof e.value&&(f=d.config.axis_x_categories.indexOf(e.value)),Math.ceil(d.x(f))},R.yv=function(e){var d=this,f=e.axis&&"y2"===e.axis?d.y2:d.y;return Math.ceil(f(e.value))},R.subxx=function(b){return b?this.subX(b.x):null},R.transformMain=function(h,g){var m,l,k,j=this;g&&g.axisX?m=g.axisX:(m=j.main.select("."+O.axisX),h&&(m=m.transition())),g&&g.axisY?l=g.axisY:(l=j.main.select("."+O.axisY),h&&(l=l.transition())),g&&g.axisY2?k=g.axisY2:(k=j.main.select("."+O.axisY2),h&&(k=k.transition())),(h?j.main.transition():j.main).attr("transform",j.getTranslate("main")),m.attr("transform",j.getTranslate("x")),l.attr("transform",j.getTranslate("y")),k.attr("transform",j.getTranslate("y2")),j.main.select("."+O.chartArcs).attr("transform",j.getTranslate("arc"))},R.transformAll=function(e,d){var f=this;f.transformMain(e,d),f.config.subchart_show&&f.transformContext(e,d),f.legend&&f.transformLegend(e)},R.updateSvgSize=function(){var d=this,c=d.svg.select(".c3-brush .background");d.svg.attr("width",d.currentWidth).attr("height",d.currentHeight),d.svg.selectAll(["#"+d.clipId,"#"+d.clipIdForGrid]).select("rect").attr("width",d.width).attr("height",d.height),d.svg.select("#"+d.clipIdForXAxis).select("rect").attr("x",d.getXAxisClipX.bind(d)).attr("y",d.getXAxisClipY.bind(d)).attr("width",d.getXAxisClipWidth.bind(d)).attr("height",d.getXAxisClipHeight.bind(d)),d.svg.select("#"+d.clipIdForYAxis).select("rect").attr("x",d.getYAxisClipX.bind(d)).attr("y",d.getYAxisClipY.bind(d)).attr("width",d.getYAxisClipWidth.bind(d)).attr("height",d.getYAxisClipHeight.bind(d)),d.svg.select("#"+d.clipIdForSubchart).select("rect").attr("width",d.width).attr("height",c.size()?c.attr("height"):0),d.svg.select("."+O.zoomRect).attr("width",d.width).attr("height",d.height),d.selectChart.style("max-height",d.currentHeight+"px")},R.updateDimension=function(d){var c=this;d||(c.config.axis_rotated?(c.axes.x.call(c.xAxis),c.axes.subx.call(c.subXAxis)):(c.axes.y.call(c.yAxis),c.axes.y2.call(c.y2Axis))),c.updateSizes(),c.updateScales(),c.updateSvgSize(),c.transformAll(!1)},R.observeInserted=function(a){var f,e=this;return"undefined"==typeof MutationObserver?void Z.console.error("MutationObserver not defined."):(f=new MutationObserver(function(b){b.forEach(function(c){"childList"===c.type&&c.previousSibling&&(f.disconnect(),e.intervalForObserveInserted=Z.setInterval(function(){a.node().parentNode&&(Z.clearInterval(e.intervalForObserveInserted),e.updateDimension(),e.config.oninit.call(e),e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})}),void f.observe(a.node(),{attributes:!0,childList:!0,characterData:!0}))},R.generateResize=function(){function d(){c.forEach(function(b){b()})}var c=[];return d.add=function(b){c.push(b)},d},R.endall=function(e,d){var f=0;e.each(function(){++f}).each("end",function(){--f||d.apply(this,arguments)})},R.generateWait=function(){var d=[],c=function(a,f){var e=setInterval(function(){var g=0;d.forEach(function(b){if(b.empty()){return void (g+=1)}try{b.transition()}catch(h){g+=1}}),g===d.length&&(clearInterval(e),f&&f())},10)};return c.add=function(a){d.push(a)},c},R.parseDate=function(a){var f,e=this;return a instanceof Date?f=a:"string"==typeof a?f=e.dataTimeFormat(e.config.data_xFormat).parse(a):"number"!=typeof a&&isNaN(a)||(f=new Date(+a)),(!f||isNaN(+f))&&Z.console.error("Failed to parse x '"+a+"' to Date object"),f},R.isTabVisible=function(){var b;return"undefined"!=typeof document.hidden?b="hidden":"undefined"!=typeof document.mozHidden?b="mozHidden":"undefined"!=typeof document.msHidden?b="msHidden":"undefined"!=typeof document.webkitHidden&&(b="webkitHidden"),document[b]?!1:!0},R.getDefaultConfig=function(){var b={bindto:"#chart",size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(c){return c},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return !0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:0.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:0.05,pie_expand:!0,gauge_label_show:!0,gauge_label_format:void 0,gauge_expand:!0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:0.05,donut_width:void 0,donut_expand:!0,donut_title:"",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(f,e,h,g){return this.getTooltipContent?this.getTooltipContent(f,e,h,g):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};return Object.keys(this.additionalConfig).forEach(function(a){b[a]=this.additionalConfig[a]},this),b},R.additionalConfig={},R.loadConfig=function(h){function g(){var b=l.shift();return b&&m&&"object"==typeof m&&b in m?(m=m[b],g()):b?void 0:m}var m,l,k,j=this.config;Object.keys(j).forEach(function(a){m=h,l=a.split("_"),k=g(),J(k)&&(j[a]=k)})},R.getScale=function(e,d,f){return(f?this.d3.time.scale():this.d3.scale.linear()).range([e,d])},R.getX=function(k,j,r,p){var o,n=this,m=n.getScale(k,j,n.isTimeSeries()),l=r?m.domain(r):m;n.isCategorized()?(p=p||function(){return 0},m=function(e,d){var f=l(e)+p(e);return d?f:Math.ceil(f)}):m=function(e,d){var f=l(e);return d?f:Math.ceil(f)};for(o in l){m[o]=l[o]}return m.orgDomain=function(){return l.domain()},n.isCategorized()&&(m.domain=function(b){return arguments.length?(l.domain(b),m):(b=this.orgDomain(),[b[0],b[1]+1])}),m},R.getY=function(f,e,h){var g=this.getScale(f,e,this.isTimeSeriesY());return h&&g.domain(h),g},R.getYScale=function(b){return"y2"===this.axis.getId(b)?this.y2:this.y},R.getSubYScale=function(b){return"y2"===this.axis.getId(b)?this.subY2:this.subY},R.updateScales=function(){var e=this,d=e.config,f=!e.x;e.xMin=d.axis_rotated?1:0,e.xMax=d.axis_rotated?e.height:e.width,e.yMin=d.axis_rotated?0:e.height,e.yMax=d.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=d.axis_rotated?0:e.height2,e.subYMax=d.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,f?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,f?d.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,f?d.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(a){return a%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,f?d.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,f?d.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,d.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,d.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,d.axis_y_tick_format,e.yAxisTickValues,d.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,d.axis_y2_tick_format,e.y2AxisTickValues,d.axis_y2_tick_outer),f||(e.brush&&e.brush.scale(e.subX),d.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},R.getYDomainMin=function(w){var v,u,t,s,r,p,o=this,n=o.config,m=o.mapToIds(w),l=o.getValuesAsIdKeyed(w);if(n.data_groups.length>0){for(p=o.hasNegativeValueInTargets(w),v=0;v<n.data_groups.length;v++){if(s=n.data_groups[v].filter(function(b){return m.indexOf(b)>=0}),0!==s.length){for(t=s[0],p&&l[t]&&l[t].forEach(function(d,c){l[t][c]=0>d?d:0}),u=1;u<s.length;u++){r=s[u],l[r]&&l[r].forEach(function(d,c){o.axis.getId(r)!==o.axis.getId(t)||!l[t]||p&&+d>0||(l[t][c]+=+d)})}}}}return o.d3.min(Object.keys(l).map(function(b){return o.d3.min(l[b])}))},R.getYDomainMax=function(w){var v,u,t,s,r,p,o=this,n=o.config,m=o.mapToIds(w),l=o.getValuesAsIdKeyed(w);if(n.data_groups.length>0){for(p=o.hasPositiveValueInTargets(w),v=0;v<n.data_groups.length;v++){if(s=n.data_groups[v].filter(function(b){return m.indexOf(b)>=0}),0!==s.length){for(t=s[0],p&&l[t]&&l[t].forEach(function(d,c){l[t][c]=d>0?d:0}),u=1;u<s.length;u++){r=s[u],l[r]&&l[r].forEach(function(d,c){o.axis.getId(r)!==o.axis.getId(t)||!l[t]||p&&0>+d||(l[t][c]+=+d)})}}}}return o.d3.max(Object.keys(l).map(function(b){return o.d3.max(l[b])}))},R.getYDomain=function(ay,ax,aw){var av,au,at,ar,aq,ap,ao,an,am,al,ak,aj=this,ah=aj.config,af=ay.filter(function(b){return aj.axis.getId(b.id)===ax}),ad=aw?aj.filterByXDomain(af,aw):af,ab="y2"===ax?ah.axis_y2_min:ah.axis_y_min,aa="y2"===ax?ah.axis_y2_max:ah.axis_y_max,v=aj.getYDomainMin(ad),t=aj.getYDomainMax(ad),m="y2"===ax?ah.axis_y2_center:ah.axis_y_center,ai=aj.hasType("bar",ad)&&ah.bar_zerobased||aj.hasType("area",ad)&&ah.area_zerobased,ag="y2"===ax?ah.axis_y2_inverted:ah.axis_y_inverted,ae=aj.hasDataLabel()&&ah.axis_rotated,ac=aj.hasDataLabel()&&!ah.axis_rotated;return v=N(ab)?ab:N(aa)?aa>v?v:aa-10:v,t=N(aa)?aa:N(ab)?t>ab?t:ab+10:t,0===ad.length?"y2"===ax?aj.y2.domain():aj.y.domain():(isNaN(v)&&(v=0),isNaN(t)&&(t=v),v===t&&(0>v?t=0:v=0),al=v>=0&&t>=0,ak=0>=v&&0>=t,(N(ab)&&al||N(aa)&&ak)&&(ai=!1),ai&&(al&&(v=0),ak&&(t=0)),au=Math.abs(t-v),at=ar=aq=0.1*au,"undefined"!=typeof m&&(ap=Math.max(Math.abs(v),Math.abs(t)),t=m+ap,v=m-ap),ae?(ao=aj.getDataLabelLength(v,t,"width"),an=G(aj.y.range()),am=[ao[0]/an,ao[1]/an],ar+=au*(am[1]/(1-am[0]-am[1])),aq+=au*(am[0]/(1-am[0]-am[1]))):ac&&(ao=aj.getDataLabelLength(v,t,"height"),ar+=aj.axis.convertPixelsToAxisPadding(ao[1],au),aq+=aj.axis.convertPixelsToAxisPadding(ao[0],au)),"y"===ax&&E(ah.axis_y_padding)&&(ar=aj.axis.getPadding(ah.axis_y_padding,"top",ar,au),aq=aj.axis.getPadding(ah.axis_y_padding,"bottom",aq,au)),"y2"===ax&&E(ah.axis_y2_padding)&&(ar=aj.axis.getPadding(ah.axis_y2_padding,"top",ar,au),aq=aj.axis.getPadding(ah.axis_y2_padding,"bottom",aq,au)),ai&&(al&&(aq=v),ak&&(ar=-t)),av=[v-aq,t+ar],ag?av.reverse():av)},R.getXDomainMin=function(e){var d=this,f=d.config;return J(f.axis_x_min)?d.isTimeSeries()?this.parseDate(f.axis_x_min):f.axis_x_min:d.d3.min(e,function(b){return d.d3.min(b.values,function(c){return c.x})})},R.getXDomainMax=function(e){var d=this,f=d.config;return J(f.axis_x_max)?d.isTimeSeries()?this.parseDate(f.axis_x_max):f.axis_x_max:d.d3.max(e,function(b){return d.d3.max(b.values,function(c){return c.x})})},R.getXDomainPadding=function(k){var j,r,p,o,n=this,m=n.config,l=k[1]-k[0];return n.isCategorized()?r=0:n.hasType("bar")?(j=n.getMaxDataCount(),r=j>1?l/(j-1)/2:0.5):r=0.01*l,"object"==typeof m.axis_x_padding&&E(m.axis_x_padding)?(p=N(m.axis_x_padding.left)?m.axis_x_padding.left:r,o=N(m.axis_x_padding.right)?m.axis_x_padding.right:r):p=o="number"==typeof m.axis_x_padding?m.axis_x_padding:r,{left:p,right:o}},R.getXDomain=function(k){var j=this,r=[j.getXDomainMin(k),j.getXDomainMax(k)],p=r[0],o=r[1],n=j.getXDomainPadding(r),m=0,l=0;return p-o!==0||j.isCategorized()||(j.isTimeSeries()?(p=new Date(0.5*p.getTime()),o=new Date(1.5*o.getTime())):(p=0===p?1:0.5*p,o=0===o?-1:1.5*o)),(p||0===p)&&(m=j.isTimeSeries()?new Date(p.getTime()-n.left):p-n.left),(o||0===o)&&(l=j.isTimeSeries()?new Date(o.getTime()+n.right):o+n.right),[m,l]},R.updateXDomain=function(j,h,o,n,m){var l=this,k=l.config;return o&&(l.x.domain(m?m:l.d3.extent(l.getXDomain(j))),l.orgXDomain=l.x.domain(),k.zoom_enabled&&l.zoom.scale(l.x).updateScaleExtent(),l.subX.domain(l.x.domain()),l.brush&&l.brush.scale(l.subX)),h&&(l.x.domain(m?m:!l.brush||l.brush.empty()?l.orgXDomain:l.brush.extent()),k.zoom_enabled&&l.zoom.scale(l.x).updateScaleExtent()),n&&l.x.domain(l.trimXDomain(l.x.orgDomain())),l.x.domain()},R.trimXDomain=function(d){var c=this;return d[0]<=c.orgXDomain[0]&&(d[1]=+d[1]+(c.orgXDomain[0]-d[0]),d[0]=c.orgXDomain[0]),c.orgXDomain[1]<=d[1]&&(d[0]=+d[0]-(d[1]-c.orgXDomain[1]),d[1]=c.orgXDomain[1]),d},R.isX=function(e){var d=this,f=d.config;return f.data_x&&e===f.data_x||E(f.data_xs)&&C(f.data_xs,e)},R.isNotX=function(b){return !this.isX(b)},R.getXKey=function(e){var d=this,f=d.config;return f.data_x?f.data_x:E(f.data_xs)?f.data_xs[e]:null},R.getXValuesOfXKey=function(g,f){var k,j=this,h=f&&E(f)?j.mapToIds(f):[];return h.forEach(function(a){j.getXKey(a)===g&&(k=j.data.xs[a])}),k},R.getIndexByX=function(e){var d=this,f=d.filterByX(d.data.targets,e);return f.length?f[0].index:null},R.getXValue=function(e,d){var f=this;return e in f.data.xs&&f.data.xs[e]&&N(f.data.xs[e][d])?f.data.xs[e][d]:d},R.getOtherTargetXs=function(){var d=this,c=Object.keys(d.data.xs);return c.length?d.data.xs[c[0]]:null},R.getOtherTargetX=function(d){var c=this.getOtherTargetXs();return c&&d<c.length?c[d]:null},R.addXs=function(d){var c=this;Object.keys(d).forEach(function(a){c.config.data_xs[a]=d[a]})},R.hasMultipleX=function(b){return this.d3.set(Object.keys(b).map(function(a){return b[a]})).size()>1},R.isMultipleX=function(){return E(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},R.addName=function(e){var d,f=this;return e&&(d=f.config.data_names[e.id],e.name=d?d:e.id),e},R.getValueOnIndex=function(e,d){var f=e.filter(function(b){return b.index===d});return f.length?f[0]:null},R.updateTargetX=function(e,d){var f=this;e.forEach(function(b){b.values.forEach(function(c,a){c.x=f.generateTargetX(d[a],b.id,a)}),f.data.xs[b.id]=d})},R.updateTargetXs=function(e,d){var f=this;e.forEach(function(b){d[b.id]&&f.updateTargetX([b],d[b.id])})},R.generateTargetX=function(g,f,k){var j,h=this;return j=h.isTimeSeries()?h.parseDate(g?g:h.getXValue(f,k)):h.isCustomX()&&!h.isCategorized()?N(g)?+g:h.getXValue(f,k):k},R.cloneTarget=function(b){return{id:b.id,id_org:b.id_org,values:b.values.map(function(c){return{x:c.x,value:c.value,id:c.id}})}},R.updateXs=function(){var b=this;b.data.targets.length&&(b.xs=[],b.data.targets[0].values.forEach(function(a){b.xs[a.index]=a.x}))},R.getPrevX=function(d){var c=this.xs[d-1];return"undefined"!=typeof c?c:null},R.getNextX=function(d){var c=this.xs[d+1];return"undefined"!=typeof c?c:null},R.getMaxDataCount=function(){var b=this;return b.d3.max(b.data.targets,function(c){return c.values.length})},R.getMaxDataCountTarget=function(f){var e,h=f.length,g=0;return h>1?f.forEach(function(b){b.values.length>g&&(e=b,g=b.values.length)}):e=h?f[0]:null,e},R.getEdgeX=function(d){var c=this;return d.length?[c.d3.min(d,function(b){return b.values[0].x}),c.d3.max(d,function(b){return b.values[b.values.length-1].x})]:[0,0]},R.mapToIds=function(b){return b.map(function(c){return c.id})},R.mapToTargetIds=function(d){var c=this;return d?L(d)?[d]:d:c.mapToIds(c.data.targets)},R.hasTarget=function(f,e){var h,g=this.mapToIds(f);for(h=0;h<g.length;h++){if(g[h]===e){return !0}}return !1},R.isTargetToShow=function(b){return this.hiddenTargetIds.indexOf(b)<0},R.isLegendToShow=function(b){return this.hiddenLegendIds.indexOf(b)<0},R.filterTargetsToShow=function(d){var c=this;return d.filter(function(b){return c.isTargetToShow(b.id)})},R.mapTargetsToUniqueXs=function(e){var d=this,f=d.d3.set(d.d3.merge(e.map(function(b){return b.values.map(function(c){return +c.x})}))).values();return f.map(d.isTimeSeries()?function(b){return new Date(+b)}:function(b){return +b})},R.addHiddenTargetIds=function(b){this.hiddenTargetIds=this.hiddenTargetIds.concat(b)},R.removeHiddenTargetIds=function(b){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(a){return b.indexOf(a)<0})},R.addHiddenLegendIds=function(b){this.hiddenLegendIds=this.hiddenLegendIds.concat(b)},R.removeHiddenLegendIds=function(b){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(a){return b.indexOf(a)<0})},R.getValuesAsIdKeyed=function(d){var c={};return d.forEach(function(b){c[b.id]=[],b.values.forEach(function(a){c[b.id].push(a.value)})}),c},R.checkValueInTargets=function(h,g){var m,l,k,j=Object.keys(h);for(m=0;m<j.length;m++){for(k=h[j[m]].values,l=0;l<k.length;l++){if(g(k[l].value)){return !0}}}return !1},R.hasNegativeValueInTargets=function(b){return this.checkValueInTargets(b,function(c){return 0>c})},R.hasPositiveValueInTargets=function(b){return this.checkValueInTargets(b,function(c){return c>0})},R.isOrderDesc=function(){var b=this.config;return"string"==typeof b.data_order&&"desc"===b.data_order.toLowerCase()},R.isOrderAsc=function(){var b=this.config;return"string"==typeof b.data_order&&"asc"===b.data_order.toLowerCase()},R.orderTargets=function(g){var f=this,k=f.config,j=f.isOrderAsc(),h=f.isOrderDesc();return j||h?g.sort(function(l,d){var o=function(e,c){return e+Math.abs(c.value)},n=l.values.reduce(o,0),m=d.values.reduce(o,0);return j?m-n:n-m}):M(k.data_order)&&g.sort(k.data_order),g},R.filterByX=function(d,c){return this.d3.merge(d.map(function(b){return b.values})).filter(function(b){return b.x-c===0})},R.filterRemoveNull=function(b){return b.filter(function(c){return N(c.value)})},R.filterByXDomain=function(d,c){return d.map(function(b){return{id:b.id,id_org:b.id_org,values:b.values.filter(function(e){return c[0]<=e.x&&e.x<=c[1]})}})},R.hasDataLabel=function(){var b=this.config;return"boolean"==typeof b.data_labels&&b.data_labels?!0:"object"==typeof b.data_labels&&E(b.data_labels)?!0:!1},R.getDataLabelLength=function(h,g,m){var l=this,k=[0,0],j=1.3;return l.selectChart.select("svg").selectAll(".dummy").data([h,g]).enter().append("text").text(function(b){return l.dataLabelFormat(b.id)(b)}).each(function(d,c){k[c]=this.getBoundingClientRect()[m]*j}).remove(),k},R.isNoneArc=function(b){return this.hasTarget(this.data.targets,b.id)},R.isArc=function(b){return"data" in b&&this.hasTarget(this.data.targets,b.data.id)},R.findSameXOfValues=function(g,f){var k,j=g[f].x,h=[];for(k=f-1;k>=0&&j===g[k].x;k--){h.push(g[k])}for(k=f;k<g.length&&j===g[k].x;k++){h.push(g[k])}return h},R.findClosestFromTargets=function(f,e){var h,g=this;return h=f.map(function(b){return g.findClosest(b.values,e)}),g.findClosest(h,e)},R.findClosest=function(g,f){var k,j=this,h=100;return g.filter(function(b){return b&&j.isBarType(b.id)}).forEach(function(d){var c=j.main.select("."+O.bars+j.getTargetSelectorSuffix(d.id)+" ."+O.bar+"-"+d.index).node();!k&&j.isWithinBar(c)&&(k=d)}),g.filter(function(b){return b&&!j.isBarType(b.id)}).forEach(function(b){var c=j.dist(b,f);h>c&&(h=c,k=b)}),k},R.dist=function(k,j){var r=this,p=r.config,o=p.axis_rotated?1:0,n=p.axis_rotated?0:1,m=r.circleY(k,k.index),l=r.x(k.x);return Math.pow(l-j[o],2)+Math.pow(m-j[n],2)},R.convertValuesToStep=function(e){var d,f=[].concat(e);if(!this.isCategorized()){return e}for(d=e.length+1;d>0;d--){f[d]=f[d-1]}return f[0]={x:f[0].x-1,value:f[0].value,id:f[0].id},f[e.length+1]={x:f[e.length].x+1,value:f[e.length].value,id:f[e.length].id},f},R.updateDataAttributes=function(g,f){var k=this,j=k.config,h=j["data_"+g];return"undefined"==typeof f?h:(Object.keys(f).forEach(function(b){h[b]=f[b]}),k.redraw({withLegend:!0}),h)},R.convertUrlToData=function(h,g,m,l){var k=this,j=g?g:"csv";k.d3.xhr(h,function(d,c){var e;if(!c){throw new Error(d.responseURL+" "+d.status+" ("+d.statusText+")")}e="json"===j?k.convertJsonToData(JSON.parse(c.response),m):"tsv"===j?k.convertTsvToData(c.response):k.convertCsvToData(c.response),l.call(k,e)})},R.convertXsvToData=function(f,e){var h,g=e.parseRows(f);return 1===g.length?(h=[{}],g[0].forEach(function(b){h[0][b]=null})):h=e.parse(f),h},R.convertCsvToData=function(b){return this.convertXsvToData(b,this.d3.csv)},R.convertTsvToData=function(b){return this.convertXsvToData(b,this.d3.tsv)},R.convertJsonToData=function(h,g){var m,l,k=this,j=[];return g?(g.x?(m=g.value.concat(g.x),k.config.data_x=g.x):m=g.value,j.push(m),h.forEach(function(d){var c=[];m.forEach(function(b){var a=K(d[b])?null:d[b];c.push(a)}),j.push(c)}),l=k.convertRowsToData(j)):(Object.keys(h).forEach(function(a){j.push([a].concat(h[a]))}),l=k.convertColumnsToData(j)),l},R.convertRowsToData=function(h){var g,m,l=h[0],k={},j=[];for(g=1;g<h.length;g++){for(k={},m=0;m<h[g].length;m++){if(K(h[g][m])){throw new Error("Source data is missing a component at ("+g+","+m+")!")}k[l[m]]=h[g][m]}j.push(k)}return j},R.convertColumnsToData=function(g){var f,k,j,h=[];for(f=0;f<g.length;f++){for(j=g[f][0],k=1;k<g[f].length;k++){if(K(h[k-1])&&(h[k-1]={}),K(g[f][k])){throw new Error("Source data is missing a component at ("+f+","+k+")!")}h[k-1][j]=g[f][k]}}return h},R.convertDataToTargets=function(j,h){var o,n=this,m=n.config,l=n.d3.keys(j[0]).filter(n.isNotX,n),k=n.d3.keys(j[0]).filter(n.isX,n);return l.forEach(function(b){var a=n.getXKey(b);n.isCustomX()||n.isTimeSeries()?k.indexOf(a)>=0?n.data.xs[b]=(h&&n.data.xs[b]?n.data.xs[b]:[]).concat(j.map(function(c){return c[a]}).filter(N).map(function(d,c){return n.generateTargetX(d,b,c)})):m.data_x?n.data.xs[b]=n.getOtherTargetXs():E(m.data_xs)&&(n.data.xs[b]=n.getXValuesOfXKey(a,n.data.targets)):n.data.xs[b]=j.map(function(d,c){return c})}),l.forEach(function(b){if(!n.data.xs[b]){throw new Error('x is not defined for id = "'+b+'".')}}),o=l.map(function(a,e){var d=m.data_idConverter(a);return{id:d,id_org:a,values:j.map(function(b,r){var p=n.getXKey(a),f=b[p],c=n.generateTargetX(f,a,r);return n.isCustomX()&&n.isCategorized()&&0===e&&f&&(0===r&&(m.axis_x_categories=[]),m.axis_x_categories.push(f)),(K(b[a])||n.data.xs[a].length<=r)&&(c=void 0),{x:c,value:null===b[a]||isNaN(b[a])?null:+b[a],id:d}}).filter(function(b){return J(b.x)})}}),o.forEach(function(d){var c;m.data_xSort&&(d.values=d.values.sort(function(f,e){var p=f.x||0===f.x?f.x:1/0,g=e.x||0===e.x?e.x:1/0;return p-g})),c=0,d.values.forEach(function(b){b.index=c++}),n.data.xs[d.id].sort(function(f,e){return f-e})}),m.data_type&&n.setTargetType(n.mapToIds(o).filter(function(b){return !(b in m.data_types)}),m.data_type),o.forEach(function(b){n.addCache(b.id_org,b)}),o},R.load=function(e,d){var f=this;e&&(d.filter&&(e=e.filter(d.filter)),(d.type||d.types)&&e.forEach(function(b){var c=d.types&&d.types[b.id]?d.types[b.id]:d.type;f.setTargetType(b.id,c)}),f.data.targets.forEach(function(a){for(var g=0;g<e.length;g++){if(a.id===e[g].id){a.values=e[g].values,e.splice(g,1);break}}}),f.data.targets=f.data.targets.concat(e)),f.updateTargets(f.data.targets),f.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),d.done&&d.done()},R.loadFromArgs=function(d){var c=this;d.data?c.load(c.convertDataToTargets(d.data),d):d.url?c.convertUrlToData(d.url,d.mimeType,d.keys,function(a){c.load(c.convertDataToTargets(a),d)}):d.json?c.load(c.convertDataToTargets(c.convertJsonToData(d.json,d.keys)),d):d.rows?c.load(c.convertDataToTargets(c.convertRowsToData(d.rows)),d):d.columns?c.load(c.convertDataToTargets(c.convertColumnsToData(d.columns)),d):c.load(null,d)},R.unload=function(e,d){var f=this;return d||(d=function(){}),e=e.filter(function(b){return f.hasTarget(f.data.targets,b)}),e&&0!==e.length?(f.svg.selectAll(e.map(function(b){return f.selectorTarget(b)})).transition().style("opacity",0).remove().call(f.endall,d),void e.forEach(function(b){f.withoutFadeIn[b]=!1,f.legend&&f.legend.selectAll("."+O.legendItem+f.getTargetSelectorSuffix(b)).remove(),f.data.targets=f.data.targets.filter(function(a){return a.id!==b})})):void d()},R.categoryName=function(d){var c=this.config;return d<c.axis_x_categories.length?c.axis_x_categories[d]:d},R.initEventRect=function(){var b=this;b.main.select("."+O.chart).append("g").attr("class",O.eventRects).style("fill-opacity",0)},R.redrawEventRect=function(){var h,g,m=this,l=m.config,k=m.isMultipleX(),j=m.main.select("."+O.eventRects).style("cursor",l.zoom_enabled?l.axis_rotated?"ns-resize":"ew-resize":null).classed(O.eventRectsMultiple,k).classed(O.eventRectsSingle,!k);j.selectAll("."+O.eventRect).remove(),m.eventRect=j.selectAll("."+O.eventRect),k?(h=m.eventRect.data([0]),m.generateEventRectsForMultipleXs(h.enter()),m.updateEventRect(h)):(g=m.getMaxDataCountTarget(m.data.targets),j.datum(g?g.values:[]),m.eventRect=j.selectAll("."+O.eventRect),h=m.eventRect.data(function(b){return b}),m.generateEventRectsForSingleX(h.enter()),m.updateEventRect(h),h.exit().remove())},R.updateEventRect=function(s){var r,p,o,n,m,l,k=this,j=k.config;s=s||k.eventRect.data(function(b){return b}),k.isMultipleX()?(r=0,p=0,o=k.width,n=k.height):(!k.isCustomX()&&!k.isTimeSeries()||k.isCategorized()?(m=k.getEventRectWidth(),l=function(b){return k.x(b.x)-m/2}):(k.updateXs(),m=function(e){var d=k.getPrevX(e.index),f=k.getNextX(e.index);return null===d&&null===f?j.axis_rotated?k.height:k.width:(null===d&&(d=k.x.domain()[0]),null===f&&(f=k.x.domain()[1]),Math.max(0,(k.x(f)-k.x(d))/2))},l=function(f){var e=k.getPrevX(f.index),h=k.getNextX(f.index),g=k.data.xs[f.id][f.index];return null===e&&null===h?0:(null===e&&(e=k.x.domain()[0]),(k.x(g)+k.x(e))/2)}),r=j.axis_rotated?0:l,p=j.axis_rotated?l:0,o=j.axis_rotated?k.width:m,n=j.axis_rotated?m:k.height),s.attr("class",k.classEvent.bind(k)).attr("x",r).attr("y",p).attr("width",o).attr("height",n)},R.generateEventRectsForSingleX=function(f){var e=this,h=e.d3,g=e.config;f.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",g.data_selection_enabled&&g.data_selection_grouped?"pointer":null).on("mouseover",function(b){var d=b.index;e.dragging||e.flowing||e.hasArcType()||(g.point_focus_expand_enabled&&e.expandCircles(d,null,!0),e.expandBars(d,null,!0),e.main.selectAll("."+O.shape+"-"+d).each(function(c){g.data_onmouseover.call(e.api,c)}))}).on("mouseout",function(b){var d=b.index;e.config&&(e.hasArcType()||(e.hideXGridFocus(),e.hideTooltip(),e.unexpandCircles(),e.unexpandBars(),e.main.selectAll("."+O.shape+"-"+d).each(function(c){g.data_onmouseout.call(e.api,c)})))}).on("mousemove",function(b){var j,d=b.index,c=e.svg.select("."+O.eventRect+"-"+d);e.dragging||e.flowing||e.hasArcType()||(e.isStepType(b)&&"step-after"===e.config.line_step_type&&h.mouse(this)[0]<e.x(e.getXValue(b.id,d))&&(d-=1),j=e.filterTargetsToShow(e.data.targets).map(function(k){return e.addName(e.getValueOnIndex(k.values,d))}),g.tooltip_grouped&&(e.showTooltip(j,this),e.showXGridFocus(j)),(!g.tooltip_grouped||g.data_selection_enabled&&!g.data_selection_grouped)&&e.main.selectAll("."+O.shape+"-"+d).each(function(){h.select(this).classed(O.EXPANDED,!0),g.data_selection_enabled&&c.style("cursor",g.data_selection_grouped?"pointer":null),g.tooltip_grouped||(e.hideXGridFocus(),e.hideTooltip(),g.data_selection_grouped||(e.unexpandCircles(d),e.unexpandBars(d)))}).filter(function(k){return e.isWithinShape(this,k)}).each(function(k){g.data_selection_enabled&&(g.data_selection_grouped||g.data_selection_isselectable(k))&&c.style("cursor","pointer"),g.tooltip_grouped||(e.showTooltip([k],this),e.showXGridFocus([k]),g.point_focus_expand_enabled&&e.expandCircles(d,k.id,!0),e.expandBars(d,k.id,!0))}))}).on("click",function(b){var c=b.index;if(!e.hasArcType()&&e.toggleShape){if(e.cancelClick){return void (e.cancelClick=!1)}e.isStepType(b)&&"step-after"===g.line_step_type&&h.mouse(this)[0]<e.x(e.getXValue(b.id,c))&&(c-=1),e.main.selectAll("."+O.shape+"-"+c).each(function(d){(g.data_selection_grouped||e.isWithinShape(this,d))&&(e.toggleShape(this,d,c),e.config.data_onclick.call(e.api,d,this))})}}).call(g.data_selection_draggable&&e.drag?h.behavior.drag().origin(Object).on("drag",function(){e.drag(h.mouse(this))}).on("dragstart",function(){e.dragstart(h.mouse(this))}).on("dragend",function(){e.dragend()}):function(){})},R.generateEventRectsForMultipleXs=function(g){function f(){k.svg.select("."+O.eventRect).style("cursor",null),k.hideXGridFocus(),k.hideTooltip(),k.unexpandCircles(),k.unexpandBars()}var k=this,j=k.d3,h=k.config;g.append("rect").attr("x",0).attr("y",0).attr("width",k.width).attr("height",k.height).attr("class",O.eventRect).on("mouseout",function(){k.config&&(k.hasArcType()||f())}).on("mousemove",function(){var b,l,e,d,c=k.filterTargetsToShow(k.data.targets);if(!k.dragging&&!k.hasArcType(c)){if(b=j.mouse(this),l=k.findClosestFromTargets(c,b),!k.mouseover||l&&l.id===k.mouseover.id||(h.data_onmouseout.call(k.api,k.mouseover),k.mouseover=void 0),!l){return void f()}e=k.isScatterType(l)||!h.tooltip_grouped?[l]:k.filterByX(c,l.x),d=e.map(function(m){return k.addName(m)}),k.showTooltip(d,this),h.point_focus_expand_enabled&&k.expandCircles(l.index,l.id,!0),k.expandBars(l.index,l.id,!0),k.showXGridFocus(d),(k.isBarType(l.id)||k.dist(l,b)<100)&&(k.svg.select("."+O.eventRect).style("cursor","pointer"),k.mouseover||(h.data_onmouseover.call(k.api,l),k.mouseover=l))}}).on("click",function(){var d,c,e=k.filterTargetsToShow(k.data.targets);k.hasArcType(e)||(d=j.mouse(this),c=k.findClosestFromTargets(e,d),c&&(k.isBarType(c.id)||k.dist(c,d)<100)&&k.main.selectAll("."+O.shapes+k.getTargetSelectorSuffix(c.id)).selectAll("."+O.shape+"-"+c.index).each(function(){(h.data_selection_grouped||k.isWithinShape(this,c))&&(k.toggleShape(this,c,c.index),k.config.data_onclick.call(k.api,c,this))}))}).call(h.data_selection_draggable&&k.drag?j.behavior.drag().origin(Object).on("drag",function(){k.drag(j.mouse(this))}).on("dragstart",function(){k.dragstart(j.mouse(this))}).on("dragend",function(){k.dragend()}):function(){})},R.dispatchEvent=function(u,t,s){var r=this,p="."+O.eventRect+(r.isMultipleX()?"":"-"+t),o=r.main.select(p).node(),n=o.getBoundingClientRect(),m=n.left+(s?s[0]:0),l=n.top+(s?s[1]:0),a=document.createEvent("MouseEvents");a.initMouseEvent(u,!0,!0,Z,0,m,l,m,l,!1,!1,!1,!1,0,null),o.dispatchEvent(a)},R.getCurrentWidth=function(){var d=this,c=d.config;return c.size_width?c.size_width:d.getParentWidth()},R.getCurrentHeight=function(){var e=this,d=e.config,f=d.size_height?d.size_height:e.getParentHeight();return f>0?f:320/(e.hasType("gauge")?2:1)},R.getCurrentPaddingTop=function(){var b=this.config;return N(b.padding_top)?b.padding_top:0},R.getCurrentPaddingBottom=function(){var b=this.config;return N(b.padding_bottom)?b.padding_bottom:0},R.getCurrentPaddingLeft=function(e){var d=this,f=d.config;return N(f.padding_left)?f.padding_left:f.axis_rotated?f.axis_x_show?Math.max(I(d.getAxisWidthByAxisId("x",e)),40):1:!f.axis_y_show||f.axis_y_inner?d.axis.getYAxisLabelPosition().isOuter?30:1:I(d.getAxisWidthByAxisId("y",e))},R.getCurrentPaddingRight=function(){var f=this,e=f.config,h=10,g=f.isLegendRight?f.getLegendWidth()+20:0;return N(e.padding_right)?e.padding_right+1:e.axis_rotated?h+g:!e.axis_y2_show||e.axis_y2_inner?2+g+(f.axis.getY2AxisLabelPosition().isOuter?20:0):I(f.getAxisWidthByAxisId("y2"))+g},R.getParentRectValue=function(f){for(var e,h=this.selectChart.node();h&&"BODY"!==h.tagName;){try{e=h.getBoundingClientRect()[f]}catch(g){"width"===f&&(e=h.offsetWidth)}if(e){break}h=h.parentNode}return e},R.getParentWidth=function(){return this.getParentRectValue("width")},R.getParentHeight=function(){var b=this.selectChart.style("height");return b.indexOf("px")>0?+b.replace("px",""):0},R.getSvgLeft=function(u){var t=this,s=t.config,r=s.axis_rotated||!s.axis_rotated&&!s.axis_y_inner,p=s.axis_rotated?O.axisX:O.axisY,o=t.main.select("."+p).node(),n=o&&r?o.getBoundingClientRect():{right:0},m=t.selectChart.node().getBoundingClientRect(),l=t.hasArcType(),k=n.right-m.left-(l?0:t.getCurrentPaddingLeft(u));return k>0?k:0},R.getAxisWidthByAxisId=function(f,e){var h=this,g=h.axis.getLabelPositionById(f);return h.axis.getMaxTickWidth(f,e)+(g.isInner?20:40)},R.getHorizontalAxisHeight=function(f){var e=this,h=e.config,g=30;return"x"!==f||h.axis_x_show?"x"===f&&h.axis_x_height?h.axis_x_height:"y"!==f||h.axis_y_show?"y2"!==f||h.axis_y2_show?("x"===f&&!h.axis_rotated&&h.axis_x_tick_rotate&&(g=30+e.axis.getMaxTickWidth(f)*Math.cos(Math.PI*(90-h.axis_x_tick_rotate)/180)),g+(e.axis.getLabelPositionById(f).isInner?0:10)+("y2"===f?-10:0)):e.rotated_padding_top:!h.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},R.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},R.getShapeIndices=function(j){var h,o,n=this,m=n.config,l={},k=0;return n.filterTargetsToShow(n.data.targets.filter(j,n)).forEach(function(b){for(h=0;h<m.data_groups.length;h++){if(!(m.data_groups[h].indexOf(b.id)<0)){for(o=0;o<m.data_groups[h].length;o++){if(m.data_groups[h][o] in l){l[b.id]=l[m.data_groups[h][o]];break}}}}K(l[b.id])&&(l[b.id]=k++)}),l.__max__=k-1,l},R.getShapeX=function(h,g,m,l){var k=this,j=l?k.subX:k.x;return function(b){var a=b.id in m?m[b.id]:0;return b.x||0===b.x?j(b.x)-h*(g/2-a):0}},R.getShapeY=function(d){var c=this;return function(b){var a=d?c.getSubYScale(b.id):c.getYScale(b.id);return a(b.value)}},R.getShapeOffset=function(h,g,m){var l=this,k=l.orderTargets(l.filterTargetsToShow(l.data.targets.filter(h,l))),j=k.map(function(b){return b.id});return function(b,f){var e=m?l.getSubYScale(b.id):l.getYScale(b.id),d=e(0),c=d;return k.forEach(function(n){var a=l.isStepType(b)?l.convertValuesToStep(n.values):n.values;n.id!==b.id&&g[n.id]===g[b.id]&&j.indexOf(n.id)<j.indexOf(b.id)&&a[f].value*b.value>=0&&(c+=e(a[f].value)-d)}),c}},R.isWithinShape=function(g,f){var k,j=this,h=j.d3.select(g);return j.isTargetToShow(f.id)?"circle"===g.nodeName?k=j.isStepType(f)?j.isWithinStep(g,j.getYScale(f.id)(f.value)):j.isWithinCircle(g,1.5*j.pointSelectR(f)):"path"===g.nodeName&&(k=h.classed(O.bar)?j.isWithinBar(g):!0):k=!1,k},R.getInterpolate=function(d){var c=this;return c.isSplineType(d)?"cardinal":c.isStepType(d)?c.config.line_step_type:"linear"},R.initLine=function(){var b=this;b.main.select("."+O.chart).append("g").attr("class",O.chartLines)},R.updateTargetsForLine=function(u){var t,s,r=this,p=r.config,o=r.classChartLine.bind(r),n=r.classLines.bind(r),m=r.classAreas.bind(r),l=r.classCircles.bind(r),k=r.classFocus.bind(r);t=r.main.select("."+O.chartLines).selectAll("."+O.chartLine).data(u).attr("class",function(b){return o(b)+k(b)}),s=t.enter().append("g").attr("class",o).style("opacity",0).style("pointer-events","none"),s.append("g").attr("class",n),s.append("g").attr("class",m),s.append("g").attr("class",function(b){return r.generateClass(O.selectedCircles,b.id)}),s.append("g").attr("class",l).style("cursor",function(b){return p.data_selection_isselectable(b)?"pointer":null}),u.forEach(function(b){r.main.selectAll("."+O.selectedCircles+r.getTargetSelectorSuffix(b.id)).selectAll("."+O.selectedCircle).each(function(a){a.value=b.values[a.index].value})})},R.updateLine=function(d){var c=this;c.mainLine=c.main.selectAll("."+O.lines).selectAll("."+O.line).data(c.lineData.bind(c)),c.mainLine.enter().append("path").attr("class",c.classLine.bind(c)).style("stroke",c.color),c.mainLine.style("opacity",c.initialOpacity.bind(c)).style("shape-rendering",function(b){return c.isStepType(b)?"crispEdges":""}).attr("transform",null),c.mainLine.exit().transition().duration(d).style("opacity",0).remove()},R.redrawLine=function(d,c){return[(c?this.mainLine.transition():this.mainLine).attr("d",d).style("stroke",this.color).style("opacity",1)]},R.generateDrawLine=function(s,r){var p=this,o=p.config,n=p.d3.svg.line(),m=p.generateGetLinePoints(s,r),l=r?p.getSubYScale:p.getYScale,k=function(b){return(r?p.subxx:p.xx).call(p,b)},j=function(d,c){return o.data_groups.length>0?m(d,c)[0][1]:l.call(p,d.id)(d.value)};return n=o.axis_rotated?n.x(j).y(k):n.x(k).y(j),o.line_connectNull||(n=n.defined(function(b){return null!=b.value})),function(c){var u,t=o.line_connectNull?p.filterRemoveNull(c.values):c.values,g=r?p.x:p.subX,e=l.call(p,c.id),d=0,b=0;return p.isLineType(c)?o.data_regions[c.id]?u=p.lineWithRegions(t,g,e,o.data_regions[c.id]):(p.isStepType(c)&&(t=p.convertValuesToStep(t)),u=n.interpolate(p.getInterpolate(c))(t)):(t[0]&&(d=g(t[0].x),b=e(t[0].value)),u=o.axis_rotated?"M "+b+" "+d:"M "+d+" "+b),u?u:"M 0 0"}},R.generateGetLinePoints=function(s,r){var p=this,o=p.config,n=s.__max__+1,m=p.getShapeX(0,n,s,!!r),l=p.getShapeY(!!r),k=p.getShapeOffset(p.isLineType,s,!!r),j=r?p.getSubYScale:p.getYScale;return function(f,c){var t=j.call(p,f.id)(0),h=k(f,c)||t,g=m(f),d=l(f);return o.axis_rotated&&(0<f.value&&t>d||f.value<0&&d>t)&&(d=t),[[g,d-(t-h)],[g,d-(t-h)],[g,d-(t-h)],[g,d-(t-h)]]}},R.lineWithRegions=function(ax,aw,av,au){function at(e,d){var f;for(f=0;f<d.length;f++){if(d[f].start<e&&e<=d[f].end){return !0}}return !1}function ar(b){return"M"+b[0][0]+" "+b[0][1]+" "+b[1][0]+" "+b[1][1]}var aq,ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ae=this,ad=ae.config,ac=-1,ab="M",aa=ae.isCategorized()?0.5:0,p=[];if(J(au)){for(aq=0;aq<au.length;aq++){p[aq]={},p[aq].start=K(au[aq].start)?ax[0].x:ae.isTimeSeries()?ae.parseDate(au[aq].start):au[aq].start,p[aq].end=K(au[aq].end)?ax[ax.length-1].x:ae.isTimeSeries()?ae.parseDate(au[aq].end):au[aq].end}}for(ag=ad.axis_rotated?function(b){return av(b.value)}:function(b){return aw(b.x)},af=ad.axis_rotated?function(b){return aw(b.x)}:function(b){return av(b.value)},ao=ae.isTimeSeries()?function(t,s,r,o){var n,k=t.x.getTime(),f=s.x-t.x,c=new Date(k+f*r),b=new Date(k+f*(r+o));return n=ad.axis_rotated?[[av(am(r)),aw(c)],[av(am(r+o)),aw(b)]]:[[aw(c),av(am(r))],[aw(b),av(am(r+o))]],ar(n)}:function(b,k,j,f){var c;return c=ad.axis_rotated?[[av(am(j),!0),aw(an(j))],[av(am(j+f),!0),aw(an(j+f))]]:[[aw(an(j),!0),av(am(j))],[aw(an(j+f),!0),av(am(j+f))]],ar(c)},aq=0;aq<ax.length;aq++){if(K(p)||!at(ax[aq].x,p)){ab+=" "+ag(ax[aq])+" "+af(ax[aq])}else{for(an=ae.getScale(ax[aq-1].x+aa,ax[aq].x+aa,ae.isTimeSeries()),am=ae.getScale(ax[aq-1].value,ax[aq].value),al=aw(ax[aq].x)-aw(ax[aq-1].x),ak=av(ax[aq].value)-av(ax[aq-1].value),aj=Math.sqrt(Math.pow(al,2)+Math.pow(ak,2)),ai=2/aj,ah=2*ai,ap=ai;1>=ap;ap+=ah){ab+=ao(ax[aq-1],ax[aq],ap,ai)}}ac=ax[aq].x}return ab},R.updateArea=function(e){var d=this,f=d.d3;d.mainArea=d.main.selectAll("."+O.areas).selectAll("."+O.area).data(d.lineData.bind(d)),d.mainArea.enter().append("path").attr("class",d.classArea.bind(d)).style("fill",d.color).style("opacity",function(){return d.orgAreaOpacity=+f.select(this).style("opacity"),0}),d.mainArea.style("opacity",d.orgAreaOpacity),d.mainArea.exit().transition().duration(e).style("opacity",0).remove()},R.redrawArea=function(d,c){return[(c?this.mainArea.transition():this.mainArea).attr("d",d).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},R.generateDrawArea=function(u,t){var s=this,r=s.config,p=s.d3.svg.area(),o=s.generateGetAreaPoints(u,t),n=t?s.getSubYScale:s.getYScale,m=function(b){return(t?s.subxx:s.xx).call(s,b)},l=function(d,c){return r.data_groups.length>0?o(d,c)[0][1]:n.call(s,d.id)(s.getAreaBaseValue(d.id))},k=function(d,c){return r.data_groups.length>0?o(d,c)[1][1]:n.call(s,d.id)(d.value)};return p=r.axis_rotated?p.x0(l).x1(k).y(m):p.x(m).y0(l).y1(k),r.line_connectNull||(p=p.defined(function(b){return null!==b.value})),function(d){var c,v=r.line_connectNull?s.filterRemoveNull(d.values):d.values,j=0,e=0;return s.isAreaType(d)?(s.isStepType(d)&&(v=s.convertValuesToStep(v)),c=p.interpolate(s.getInterpolate(d))(v)):(v[0]&&(j=s.x(v[0].x),e=s.getYScale(d.id)(v[0].value)),c=r.axis_rotated?"M "+e+" "+j:"M "+j+" "+e),c?c:"M 0 0"}},R.getAreaBaseValue=function(){return 0},R.generateGetAreaPoints=function(s,r){var p=this,o=p.config,n=s.__max__+1,m=p.getShapeX(0,n,s,!!r),l=p.getShapeY(!!r),k=p.getShapeOffset(p.isAreaType,s,!!r),j=r?p.getSubYScale:p.getYScale;return function(f,c){var t=j.call(p,f.id)(0),h=k(f,c)||t,g=m(f),d=l(f);return o.axis_rotated&&(0<f.value&&t>d||f.value<0&&d>t)&&(d=t),[[g,h],[g,d-(t-h)],[g,d-(t-h)],[g,h]]}},R.updateCircle=function(){var b=this;b.mainCircle=b.main.selectAll("."+O.circles).selectAll("."+O.circle).data(b.lineOrScatterData.bind(b)),b.mainCircle.enter().append("circle").attr("class",b.classCircle.bind(b)).attr("r",b.pointR.bind(b)).style("fill",b.color),b.mainCircle.style("opacity",b.initialOpacityForCircle.bind(b)),b.mainCircle.exit().remove()},R.redrawCircle=function(f,e,h){var g=this.main.selectAll("."+O.selectedCircle);return[(h?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",f).attr("cy",e),(h?g.transition():g).attr("cx",f).attr("cy",e)]},R.circleX=function(b){return b.x||0===b.x?this.x(b.x):null},R.updateCircleY=function(){var e,d,f=this;f.config.data_groups.length>0?(e=f.getShapeIndices(f.isLineType),d=f.generateGetLinePoints(e),f.circleY=function(b,g){return d(b,g)[0][1]}):f.circleY=function(b){return f.getYScale(b.id)(b.value)}},R.getCircles=function(e,d){var f=this;return(d?f.main.selectAll("."+O.circles+f.getTargetSelectorSuffix(d)):f.main).selectAll("."+O.circle+(N(e)?"-"+e:""))},R.expandCircles=function(g,f,k){var j=this,h=j.pointExpandedR.bind(j);k&&j.unexpandCircles(),j.getCircles(g,f).classed(O.EXPANDED,!0).attr("r",h)},R.unexpandCircles=function(e){var d=this,f=d.pointR.bind(d);d.getCircles(e).filter(function(){return d.d3.select(this).classed(O.EXPANDED)}).classed(O.EXPANDED,!1).attr("r",f)},R.pointR=function(e){var d=this,f=d.config;return d.isStepType(e)?0:M(f.point_r)?f.point_r(e):f.point_r},R.pointExpandedR=function(e){var d=this,f=d.config;return f.point_focus_expand_enabled?f.point_focus_expand_r?f.point_focus_expand_r:1.75*d.pointR(e):d.pointR(e)},R.pointSelectR=function(e){var d=this,f=d.config;return f.point_select_r?f.point_select_r:4*d.pointR(e)},R.isWithinCircle=function(j,h){var o=this.d3,n=o.mouse(j),m=o.select(j),l=+m.attr("cx"),k=+m.attr("cy");return Math.sqrt(Math.pow(l-n[0],2)+Math.pow(k-n[1],2))<h},R.isWithinStep=function(d,c){return Math.abs(c-this.d3.mouse(d)[1])<30},R.initBar=function(){var b=this;b.main.select("."+O.chart).append("g").attr("class",O.chartBars)},R.updateTargetsForBar=function(k){var j,r,p=this,o=p.config,n=p.classChartBar.bind(p),m=p.classBars.bind(p),l=p.classFocus.bind(p);j=p.main.select("."+O.chartBars).selectAll("."+O.chartBar).data(k).attr("class",function(b){return n(b)+l(b)}),r=j.enter().append("g").attr("class",n).style("opacity",0).style("pointer-events","none"),r.append("g").attr("class",m).style("cursor",function(b){return o.data_selection_isselectable(b)?"pointer":null})},R.updateBar=function(h){var g=this,m=g.barData.bind(g),l=g.classBar.bind(g),k=g.initialOpacity.bind(g),j=function(b){return g.color(b.id)};g.mainBar=g.main.selectAll("."+O.bars).selectAll("."+O.bar).data(m),g.mainBar.enter().append("path").attr("class",l).style("stroke",j).style("fill",j),g.mainBar.style("opacity",k),g.mainBar.exit().transition().duration(h).style("opacity",0).remove()},R.redrawBar=function(d,c){return[(c?this.mainBar.transition():this.mainBar).attr("d",d).style("fill",this.color).style("opacity",1)]},R.getBarW=function(g,f){var k=this,j=k.config,h="number"==typeof j.bar_width?j.bar_width:f?g.tickInterval()*j.bar_width_ratio/f:0;return j.bar_width_max&&h>j.bar_width_max?j.bar_width_max:h},R.getBars=function(e,d){var f=this;return(d?f.main.selectAll("."+O.bars+f.getTargetSelectorSuffix(d)):f.main).selectAll("."+O.bar+(N(e)?"-"+e:""))},R.expandBars=function(f,e,h){var g=this;h&&g.unexpandBars(),g.getBars(f,e).classed(O.EXPANDED,!0)},R.unexpandBars=function(d){var c=this;c.getBars(d).classed(O.EXPANDED,!1)},R.generateDrawBar=function(g,f){var k=this,j=k.config,h=k.generateGetBarPoints(g,f);return function(e,d){var o=h(e,d),n=j.axis_rotated?1:0,m=j.axis_rotated?0:1,l="M "+o[0][n]+","+o[0][m]+" L"+o[1][n]+","+o[1][m]+" L"+o[2][n]+","+o[2][m]+" L"+o[3][n]+","+o[3][m]+" z";return l}},R.generateGetBarPoints=function(u,t){var s=this,r=t?s.subXAxis:s.xAxis,p=u.__max__+1,o=s.getBarW(r,p),n=s.getShapeX(o,p,u,!!t),m=s.getShapeY(!!t),l=s.getShapeOffset(s.isBarType,u,!!t),k=t?s.getSubYScale:s.getYScale;return function(g,c){var v=k.call(s,g.id)(0),j=l(g,c)||v,h=n(g),f=m(g);return s.config.axis_rotated&&(0<g.value&&v>f||g.value<0&&f>v)&&(f=v),[[h,j],[h,f-(v-j)],[h+o,f-(v-j)],[h+o,j]]}},R.isWithinBar=function(ac){var ab=this.d3.mouse(ac),aa=ac.getBoundingClientRect(),z=ac.pathSegList.getItem(0),y=ac.pathSegList.getItem(1),x=Math.min(z.x,y.x),w=Math.min(z.y,y.y),v=aa.width,u=aa.height,t=2,s=x-t,r=x+v+t,p=w+u+t,o=w-t;return s<ab[0]&&ab[0]<r&&o<ab[1]&&ab[1]<p},R.initText=function(){var b=this;b.main.select("."+O.chart).append("g").attr("class",O.chartTexts),b.mainText=b.d3.selectAll([])},R.updateTargetsForText=function(j){var h,o,n=this,m=n.classChartText.bind(n),l=n.classTexts.bind(n),k=n.classFocus.bind(n);h=n.main.select("."+O.chartTexts).selectAll("."+O.chartText).data(j).attr("class",function(b){return m(b)+k(b)}),o=h.enter().append("g").attr("class",m).style("opacity",0).style("pointer-events","none"),o.append("g").attr("class",l)},R.updateText=function(g){var f=this,k=f.config,j=f.barOrLineData.bind(f),h=f.classText.bind(f);f.mainText=f.main.selectAll("."+O.texts).selectAll("."+O.text).data(j),f.mainText.enter().append("text").attr("class",h).attr("text-anchor",function(b){return k.axis_rotated?b.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(b){return f.color(b)}).style("fill-opacity",0),f.mainText.text(function(b,l,e){return f.dataLabelFormat(b.id)(b.value,b.id,l,e)}),f.mainText.exit().transition().duration(g).style("fill-opacity",0).remove()},R.redrawText=function(f,e,h,g){return[(g?this.mainText.transition():this.mainText).attr("x",f).attr("y",e).style("fill",this.color).style("fill-opacity",h?0:this.opacityForText.bind(this))]},R.getTextRect=function(g,f){var k,j=this.d3.select("body").append("div").classed("c3",!0),h=j.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);return h.selectAll(".dummy").data([g]).enter().append("text").classed(f?f:"",!0).text(g).each(function(){k=this.getBoundingClientRect()}),j.remove(),k},R.generateXYForText=function(s,r,p,o){var n=this,m=n.generateGetAreaPoints(s,!1),l=n.generateGetBarPoints(r,!1),k=n.generateGetLinePoints(p,!1),j=o?n.getXForText:n.getYForText;return function(e,d){var f=n.isAreaType(e)?m:n.isBarType(e)?l:k;return j.call(n,f(e,d),e,this)}},R.getXForText=function(j,h,o){var n,m,l=this,k=o.getBoundingClientRect();return l.config.axis_rotated?(m=l.isBarType(h)?4:6,n=j[2][1]+m*(h.value<0?-1:1)):n=l.hasType("bar")?(j[2][0]+j[0][0])/2:j[0][0],null===h.value&&(n>l.width?n=l.width-k.width:0>n&&(n=4)),n},R.getYForText=function(h,g,m){var l,k=this,j=m.getBoundingClientRect();return k.config.axis_rotated?l=(h[0][0]+h[2][0]+0.6*j.height)/2:(l=h[2][1],g.value<0?(l+=j.height,k.isBarType(g)&&k.isSafari()?l-=3:!k.isBarType(g)&&k.isChrome()&&(l+=3)):l+=k.isBarType(g)?-3:-6),null!==g.value||k.config.axis_rotated||(l<j.height?l=j.height:l>this.height&&(l=this.height-4)),l},R.setTargetType=function(f,e){var h=this,g=h.config;h.mapToTargetIds(f).forEach(function(b){h.withoutFadeIn[b]=e===g.data_types[b],g.data_types[b]=e}),f||(g.data_type=e)},R.hasType=function(g,f){var k=this,j=k.config.data_types,h=!1;return f=f||k.data.targets,f&&f.length?f.forEach(function(a){var d=j[a.id];(d&&d.indexOf(g)>=0||!d&&"line"===g)&&(h=!0)}):Object.keys(j).length?Object.keys(j).forEach(function(a){j[a]===g&&(h=!0)}):h=k.config.data_type===g,h},R.hasArcType=function(b){return this.hasType("pie",b)||this.hasType("donut",b)||this.hasType("gauge",b)},R.isLineType=function(e){var d=this.config,f=L(e)?e:e.id;return !d.data_types[f]||["line","spline","area","area-spline","step","area-step"].indexOf(d.data_types[f])>=0},R.isStepType=function(d){var c=L(d)?d:d.id;return["step","area-step"].indexOf(this.config.data_types[c])>=0},R.isSplineType=function(d){var c=L(d)?d:d.id;return["spline","area-spline"].indexOf(this.config.data_types[c])>=0},R.isAreaType=function(d){var c=L(d)?d:d.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[c])>=0},R.isBarType=function(d){var c=L(d)?d:d.id;return"bar"===this.config.data_types[c]},R.isScatterType=function(d){var c=L(d)?d:d.id;return"scatter"===this.config.data_types[c]},R.isPieType=function(d){var c=L(d)?d:d.id;return"pie"===this.config.data_types[c]},R.isGaugeType=function(d){var c=L(d)?d:d.id;return"gauge"===this.config.data_types[c]},R.isDonutType=function(d){var c=L(d)?d:d.id;return"donut"===this.config.data_types[c]},R.isArcType=function(b){return this.isPieType(b)||this.isDonutType(b)||this.isGaugeType(b)},R.lineData=function(b){return this.isLineType(b)?[b]:[]},R.arcData=function(b){return this.isArcType(b.data)?[b]:[]},R.barData=function(b){return this.isBarType(b)?b.values:[]},R.lineOrScatterData=function(b){return this.isLineType(b)||this.isScatterType(b)?b.values:[]},R.barOrLineData=function(b){return this.isBarType(b)||this.isLineType(b)?b.values:[]},R.initGrid=function(){var e=this,d=e.config,f=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",O.grid),d.grid_x_show&&e.grid.append("g").attr("class",O.xgrids),d.grid_y_show&&e.grid.append("g").attr("class",O.ygrids),d.grid_focus_show&&e.grid.append("g").attr("class",O.xgridFocus).append("line").attr("class",O.xgridFocus),e.xgrid=f.selectAll([]),d.grid_lines_front||e.initGridLines()},R.initGridLines=function(){var d=this,c=d.d3;d.gridLines=d.main.append("g").attr("clip-path",d.clipPathForGrid).attr("class",O.grid+" "+O.gridLines),d.gridLines.append("g").attr("class",O.xgridLines),d.gridLines.append("g").attr("class",O.ygridLines),d.xgridLines=c.selectAll([])},R.updateXGrid=function(h){var g=this,m=g.config,l=g.d3,k=g.generateGridData(m.grid_x_type,g.x),j=g.isCategorized()?g.xAxis.tickOffset():0;g.xgridAttr=m.axis_rotated?{x1:0,x2:g.width,y1:function(b){return g.x(b)-j},y2:function(b){return g.x(b)-j}}:{x1:function(b){return g.x(b)+j},x2:function(b){return g.x(b)+j},y1:0,y2:g.height},g.xgrid=g.main.select("."+O.xgrids).selectAll("."+O.xgrid).data(k),g.xgrid.enter().append("line").attr("class",O.xgrid),h||g.xgrid.attr(g.xgridAttr).style("opacity",function(){return +l.select(this).attr(m.axis_rotated?"y1":"x1")===(m.axis_rotated?g.height:0)?0:1}),g.xgrid.exit().remove()},R.updateYGrid=function(){var e=this,d=e.config,f=e.yAxis.tickValues()||e.y.ticks(d.grid_y_ticks);e.ygrid=e.main.select("."+O.ygrids).selectAll("."+O.ygrid).data(f),e.ygrid.enter().append("line").attr("class",O.ygrid),e.ygrid.attr("x1",d.axis_rotated?e.y:0).attr("x2",d.axis_rotated?e.y:e.width).attr("y1",d.axis_rotated?0:e.y).attr("y2",d.axis_rotated?e.height:e.y),e.ygrid.exit().remove(),e.smoothLines(e.ygrid,"grid")},R.gridTextAnchor=function(b){return b.position?b.position:"end"},R.gridTextDx=function(b){return"start"===b.position?4:"middle"===b.position?0:-4},R.xGridTextX=function(b){return"start"===b.position?-this.height:"middle"===b.position?-this.height/2:0},R.yGridTextX=function(b){return"start"===b.position?0:"middle"===b.position?this.width/2:this.width},R.updateGrid=function(j){var h,o,n,m=this,l=m.main,k=m.config;m.grid.style("visibility",m.hasArcType()?"hidden":"visible"),l.select("line."+O.xgridFocus).style("visibility","hidden"),k.grid_x_show&&m.updateXGrid(),m.xgridLines=l.select("."+O.xgridLines).selectAll("."+O.xgridLine).data(k.grid_x_lines),h=m.xgridLines.enter().append("g").attr("class",function(b){return O.xgridLine+(b["class"]?" "+b["class"]:"")}),h.append("line").style("opacity",0),h.append("text").attr("text-anchor",m.gridTextAnchor).attr("transform",k.axis_rotated?"":"rotate(-90)").attr("dx",m.gridTextDx).attr("dy",-5).style("opacity",0),m.xgridLines.exit().transition().duration(j).style("opacity",0).remove(),k.grid_y_show&&m.updateYGrid(),m.ygridLines=l.select("."+O.ygridLines).selectAll("."+O.ygridLine).data(k.grid_y_lines),o=m.ygridLines.enter().append("g").attr("class",function(b){return O.ygridLine+(b["class"]?" "+b["class"]:"")}),o.append("line").style("opacity",0),o.append("text").attr("text-anchor",m.gridTextAnchor).attr("transform",k.axis_rotated?"rotate(-90)":"").attr("dx",m.gridTextDx).attr("dy",-5).style("opacity",0),n=m.yv.bind(m),m.ygridLines.select("line").transition().duration(j).attr("x1",k.axis_rotated?n:0).attr("x2",k.axis_rotated?n:m.width).attr("y1",k.axis_rotated?0:n).attr("y2",k.axis_rotated?m.height:n).style("opacity",1),m.ygridLines.select("text").transition().duration(j).attr("x",k.axis_rotated?m.xGridTextX.bind(m):m.yGridTextX.bind(m)).attr("y",n).text(function(b){return b.text}).style("opacity",1),m.ygridLines.exit().transition().duration(j).style("opacity",0).remove()},R.redrawGrid=function(h){var g=this,m=g.config,l=g.xv.bind(g),k=g.xgridLines.select("line"),j=g.xgridLines.select("text");return[(h?k.transition():k).attr("x1",m.axis_rotated?0:l).attr("x2",m.axis_rotated?g.width:l).attr("y1",m.axis_rotated?l:0).attr("y2",m.axis_rotated?l:g.height).style("opacity",1),(h?j.transition():j).attr("x",m.axis_rotated?g.yGridTextX.bind(g):g.xGridTextX.bind(g)).attr("y",l).text(function(b){return b.text}).style("opacity",1)]},R.showXGridFocus=function(h){var g=this,m=g.config,l=h.filter(function(b){return b&&N(b.value)}),k=g.main.selectAll("line."+O.xgridFocus),j=g.xx.bind(g);m.tooltip_show&&(g.hasType("scatter")||g.hasArcType()||(k.style("visibility","visible").data([l[0]]).attr(m.axis_rotated?"y1":"x1",j).attr(m.axis_rotated?"y2":"x2",j),g.smoothLines(k,"grid")))},R.hideXGridFocus=function(){this.main.select("line."+O.xgridFocus).style("visibility","hidden")},R.updateXgridFocus=function(){var d=this,c=d.config;d.main.select("line."+O.xgridFocus).attr("x1",c.axis_rotated?0:-10).attr("x2",c.axis_rotated?d.width:-10).attr("y1",c.axis_rotated?-10:0).attr("y2",c.axis_rotated?-10:d.height)},R.generateGridData=function(s,r){var p,o,n,m,l=this,k=[],j=l.main.select("."+O.axisX).selectAll(".tick").size();if("year"===s){for(p=l.getXDomain(),o=p[0].getFullYear(),n=p[1].getFullYear(),m=o;n>=m;m++){k.push(new Date(m+"-01-01 00:00:00"))}}else{k=r.ticks(10),k.length>j&&(k=k.filter(function(b){return(""+b).indexOf(".")<0}))}return k},R.getGridFilterToRemove=function(b){return b?function(a){var d=!1;return[].concat(b).forEach(function(c){("value" in c&&a.value===c.value||"class" in c&&a["class"]===c["class"])&&(d=!0)}),d}:function(){return !0}},R.removeGridLines=function(k,j){var r=this,p=r.config,o=r.getGridFilterToRemove(k),n=function(b){return !o(b)},m=j?O.xgridLines:O.ygridLines,l=j?O.xgridLine:O.ygridLine;r.main.select("."+m).selectAll("."+l).filter(o).transition().duration(p.transition_duration).style("opacity",0).remove(),j?p.grid_x_lines=p.grid_x_lines.filter(n):p.grid_y_lines=p.grid_y_lines.filter(n)},R.initTooltip=function(){var e,d=this,f=d.config;if(d.tooltip=d.selectChart.style("position","relative").append("div").attr("class",O.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),f.tooltip_init_show){if(d.isTimeSeries()&&L(f.tooltip_init_x)){for(f.tooltip_init_x=d.parseDate(f.tooltip_init_x),e=0;e<d.data.targets[0].values.length&&d.data.targets[0].values[e].x-f.tooltip_init_x!==0;e++){}f.tooltip_init_x=e}d.tooltip.html(f.tooltip_contents.call(d,d.data.targets.map(function(b){return d.addName(b.values[f.tooltip_init_x])}),d.axis.getXAxisTickFormat(),d.getYFormat(d.hasArcType()),d.color)),d.tooltip.style("top",f.tooltip_init_position.top).style("left",f.tooltip_init_position.left).style("display","block")}},R.getTooltipContent=function(ae,ad,ac,ab){var aa,z,y,x,w,v,u=this,t=u.config,s=t.tooltip_format_title||ad,r=t.tooltip_format_name||function(b){return b},l=t.tooltip_format_value||ac;for(z=0;z<ae.length;z++){ae[z]&&(ae[z].value||0===ae[z].value)&&(aa||(y=s?s(ae[z].x):ae[z].x,aa="<table class='"+O.tooltip+"'>"+(y||0===y?"<tr><th colspan='2'>"+y+"</th></tr>":"")),x=l(ae[z].value,ae[z].ratio,ae[z].id,ae[z].index),void 0!==x&&(w=r(ae[z].name,ae[z].ratio,ae[z].id,ae[z].index),v=u.levelColor?u.levelColor(ae[z].value):ab(ae[z].id),aa+="<tr class='"+O.tooltipName+"-"+ae[z].id+"'>",aa+="<td class='name'><span style='background-color:"+v+"'></span>"+w+"</td>",aa+="<td class='value'>"+x+"</td>",aa+="</tr>"))}return aa+"</table>"},R.tooltipPosition=function(ac,ab,aa,z){var y,x,w,v,u,t=this,s=t.config,r=t.d3,p=t.hasArcType(),o=r.mouse(z);return p?(x=(t.width-(t.isLegendRight?t.getLegendWidth():0))/2+o[0],v=t.height/2+o[1]+20):(y=t.getSvgLeft(!0),s.axis_rotated?(x=y+o[0]+100,w=x+ab,u=t.currentWidth-t.getCurrentPaddingRight(),v=t.x(ac[0].x)+20):(x=y+t.getCurrentPaddingLeft(!0)+t.x(ac[0].x)+20,w=x+ab,u=y+t.currentWidth-t.getCurrentPaddingRight(),v=o[1]+15),w>u&&(x-=w-u+20),v+aa>t.currentHeight&&(v-=aa+30)),0>v&&(v=0),{top:v,left:x}},R.showTooltip=function(v,u){var t,s,r,p=this,o=p.config,n=p.hasArcType(),m=v.filter(function(b){return b&&N(b.value)}),l=o.tooltip_position||R.tooltipPosition;0!==m.length&&o.tooltip_show&&(p.tooltip.html(o.tooltip_contents.call(p,v,p.axis.getXAxisTickFormat(),p.getYFormat(n),p.color)).style("display","block"),t=p.tooltip.property("offsetWidth"),s=p.tooltip.property("offsetHeight"),r=l.call(this,m,t,s,u),p.tooltip.style("top",r.top+"px").style("left",r.left+"px"))},R.hideTooltip=function(){this.tooltip.style("display","none")},R.initLegend=function(){var b=this;return b.legendItemTextBox={},b.legendHasRendered=!1,b.legend=b.svg.append("g").attr("transform",b.getTranslate("legend")),b.config.legend_show?void b.updateLegendWithDefaults():(b.legend.style("visibility","hidden"),void (b.hiddenLegendIds=b.mapToIds(b.data.targets)))},R.updateLegendWithDefaults=function(){var b=this;b.updateLegend(b.mapToIds(b.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},R.updateSizeForLegend=function(g,f){var k=this,j=k.config,h={top:k.isLegendTop?k.getCurrentPaddingTop()+j.legend_inset_y+5.5:k.currentHeight-g-k.getCurrentPaddingBottom()-j.legend_inset_y,left:k.isLegendLeft?k.getCurrentPaddingLeft()+j.legend_inset_x+0.5:k.currentWidth-f-k.getCurrentPaddingRight()-j.legend_inset_x+0.5};k.margin3={top:k.isLegendRight?0:k.isLegendInset?h.top:k.currentHeight-g,right:0/0,bottom:0,left:k.isLegendRight?k.currentWidth-f:k.isLegendInset?h.left:0}},R.transformLegend=function(d){var c=this;(d?c.legend.transition():c.legend).attr("transform",c.getTranslate("legend"))},R.updateLegendStep=function(b){this.legendStep=b},R.updateLegendItemWidth=function(b){this.legendItemWidth=b},R.updateLegendItemHeight=function(b){this.legendItemHeight=b},R.getLegendWidth=function(){var b=this;return b.config.legend_show?b.isLegendRight||b.isLegendInset?b.legendItemWidth*(b.legendStep+1):b.currentWidth:0},R.getLegendHeight=function(){var d=this,c=0;return d.config.legend_show&&(c=d.isLegendRight?d.currentHeight:Math.max(20,d.legendItemHeight)*(d.legendStep+1)),c},R.opacityForLegend=function(b){return b.classed(O.legendItemHidden)?null:1},R.opacityForUnfocusedLegend=function(b){return b.classed(O.legendItemHidden)?null:0.3},R.toggleFocusLegend=function(e,d){var f=this;e=f.mapToTargetIds(e),f.legend.selectAll("."+O.legendItem).filter(function(a){return e.indexOf(a)>=0}).classed(O.legendItemFocused,d).transition().duration(100).style("opacity",function(){var b=d?f.opacityForLegend:f.opacityForUnfocusedLegend;return b.call(f,f.d3.select(this))})},R.revertLegend=function(){var d=this,c=d.d3;d.legend.selectAll("."+O.legendItem).classed(O.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return d.opacityForLegend(c.select(this))})},R.showLegend=function(e){var d=this,f=d.config;f.legend_show||(f.legend_show=!0,d.legend.style("visibility","visible"),d.legendHasRendered||d.updateLegendWithDefaults()),d.removeHiddenLegendIds(e),d.legend.selectAll(d.selectorLegends(e)).style("visibility","visible").transition().style("opacity",function(){return d.opacityForLegend(d.d3.select(this))})},R.hideLegend=function(e){var d=this,f=d.config;f.legend_show&&F(e)&&(f.legend_show=!1,d.legend.style("visibility","hidden")),d.addHiddenLegendIds(e),d.legend.selectAll(d.selectorLegends(e)).style("opacity",0).style("visibility","hidden")},R.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},R.updateLegend=function(aF,aE,aD){function aC(d,c){return ah.legendItemTextBox[c]||(ah.legendItemTextBox[c]=ah.getTextRect(d.textContent,O.legendItem)),ah.legendItemTextBox[c]}function aB(aH,aG,z){function y(e,c){c||(x=(a-ak-d)/2,ao>x&&(x=(a-d)/2,ak=0,w++)),ab[e]=w,ad[w]=ah.isLegendInset?10:x,ai[e]=ak,ak+=d}var x,v,u=0===z,t=z===aF.length-1,s=aC(aH,aG),r=s.width+am+(!t||ah.isLegendRight||ah.isLegendInset?aa:0),p=s.height+ac,d=ah.isLegendRight||ah.isLegendInset?p:r,a=ah.isLegendRight||ah.isLegendInset?ah.getLegendHeight():ah.getLegendWidth();return u&&(ak=0,w=0,l=0,ap=0),af.legend_show&&!ah.isLegendToShow(aG)?void (ag[aG]=ae[aG]=ab[aG]=ai[aG]=0):(ag[aG]=r,ae[aG]=p,(!l||r>=l)&&(l=r),(!ap||p>=ap)&&(ap=p),v=ah.isLegendRight||ah.isLegendInset?ap:l,void (af.legend_equally?(Object.keys(ag).forEach(function(b){ag[b]=l}),Object.keys(ae).forEach(function(b){ae[b]=ap}),x=(a-v*aF.length)/2,ao>x?(ak=0,w=0,aF.forEach(function(b){y(b)})):y(aG,!0)):y(aG)))}var aA,az,ay,ax,aw,av,au,at,ar,aq,an,al,aj,ah=this,af=ah.config,ac=4,aa=10,l=0,ap=0,ao=10,am=15,ak=0,ai={},ag={},ae={},ad=[0],ab={},w=0;aE=aE||{},at=D(aE,"withTransition",!0),ar=D(aE,"withTransitionForTransform",!0),ah.isLegendInset&&(w=af.legend_inset_step?af.legend_inset_step:aF.length,ah.updateLegendStep(w)),ah.isLegendRight?(aA=function(b){return l*ab[b]},ax=function(b){return ad[ab[b]]+ai[b]}):ah.isLegendInset?(aA=function(b){return l*ab[b]+10},ax=function(b){return ad[ab[b]]+ai[b]}):(aA=function(b){return ad[ab[b]]+ai[b]},ax=function(b){return ap*ab[b]}),az=function(d,c){return aA(d,c)+14},aw=function(d,c){return ax(d,c)+9},ay=function(d,c){return aA(d,c)},av=function(d,c){return ax(d,c)-5},au=ah.legend.selectAll("."+O.legendItem).data(aF).enter().append("g").attr("class",function(b){return ah.generateClass(O.legendItem,b)}).style("visibility",function(b){return ah.isLegendToShow(b)?"visible":"hidden"}).style("cursor","pointer").on("click",function(b){af.legend_item_onclick?af.legend_item_onclick.call(ah,b):ah.d3.event.altKey?(ah.api.hide(),ah.api.show(b)):(ah.api.toggle(b),ah.isTargetToShow(b)?ah.api.focus(b):ah.api.revert())}).on("mouseover",function(b){ah.d3.select(this).classed(O.legendItemFocused,!0),!ah.transiting&&ah.isTargetToShow(b)&&ah.api.focus(b),af.legend_item_onmouseover&&af.legend_item_onmouseover.call(ah,b)}).on("mouseout",function(b){ah.d3.select(this).classed(O.legendItemFocused,!1),ah.api.revert(),af.legend_item_onmouseout&&af.legend_item_onmouseout.call(ah,b)}),au.append("text").text(function(b){return J(af.data_names[b])?af.data_names[b]:b}).each(function(d,c){aB(this,d,c)}).style("pointer-events","none").attr("x",ah.isLegendRight||ah.isLegendInset?az:-200).attr("y",ah.isLegendRight||ah.isLegendInset?-200:aw),au.append("rect").attr("class",O.legendItemEvent).style("fill-opacity",0).attr("x",ah.isLegendRight||ah.isLegendInset?ay:-200).attr("y",ah.isLegendRight||ah.isLegendInset?-200:av),au.append("rect").attr("class",O.legendItemTile).style("pointer-events","none").style("fill",ah.color).attr("x",ah.isLegendRight||ah.isLegendInset?az:-200).attr("y",ah.isLegendRight||ah.isLegendInset?-200:ax).attr("width",10).attr("height",10),aj=ah.legend.select("."+O.legendBackground+" rect"),ah.isLegendInset&&l>0&&0===aj.size()&&(aj=ah.legend.insert("g","."+O.legendItem).attr("class",O.legendBackground).append("rect")),aq=ah.legend.selectAll("text").data(aF).text(function(b){return J(af.data_names[b])?af.data_names[b]:b}).each(function(d,c){aB(this,d,c)}),(at?aq.transition():aq).attr("x",az).attr("y",aw),an=ah.legend.selectAll("rect."+O.legendItemEvent).data(aF),(at?an.transition():an).attr("width",function(b){return ag[b]}).attr("height",function(b){return ae[b]}).attr("x",ay).attr("y",av),al=ah.legend.selectAll("rect."+O.legendItemTile).data(aF),(at?al.transition():al).style("fill",ah.color).attr("x",aA).attr("y",ax),aj&&(at?aj.transition():aj).attr("height",ah.getLegendHeight()-12).attr("width",l*(w+1)+10),ah.legend.selectAll("."+O.legendItem).classed(O.legendItemHidden,function(b){return !ah.isTargetToShow(b)}),ah.updateLegendItemWidth(l),ah.updateLegendItemHeight(ap),ah.updateLegendStep(w),ah.updateSizes(),ah.updateScales(),ah.updateSvgSize(),ah.transformAll(ar,aD),ah.legendHasRendered=!0},X(Y,U),U.prototype.init=function(){var e=this.owner,d=e.config,f=e.main;e.axes.x=f.append("g").attr("class",O.axis+" "+O.axisX).attr("clip-path",e.clipPathForXAxis).attr("transform",e.getTranslate("x")).style("visibility",d.axis_x_show?"visible":"hidden"),e.axes.x.append("text").attr("class",O.axisXLabel).attr("transform",d.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),e.axes.y=f.append("g").attr("class",O.axis+" "+O.axisY).attr("clip-path",d.axis_y_inner?"":e.clipPathForYAxis).attr("transform",e.getTranslate("y")).style("visibility",d.axis_y_show?"visible":"hidden"),e.axes.y.append("text").attr("class",O.axisYLabel).attr("transform",d.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),e.axes.y2=f.append("g").attr("class",O.axis+" "+O.axisY2).attr("transform",e.getTranslate("y2")).style("visibility",d.axis_y2_show?"visible":"hidden"),e.axes.y2.append("text").attr("class",O.axisY2Label).attr("transform",d.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},U.prototype.getXAxis=function(w,v,u,t,s,r,p){var o=this.owner,n=o.config,m={isCategory:o.isCategorized(),withOuterTick:s,tickMultiline:n.axis_x_tick_multiline,tickWidth:n.axis_x_tick_width,tickTextRotate:p?0:n.axis_x_tick_rotate,withoutTransition:r},g=T(o.d3,m).scale(w).orient(v);return o.isTimeSeries()&&t&&(t=t.map(function(b){return o.parseDate(b)})),g.tickFormat(u).tickValues(t),o.isCategorized()&&(g.tickCentered(n.axis_x_tick_centered),F(n.axis_x_tick_culling)&&(n.axis_x_tick_culling=!1)),g},U.prototype.updateXAxisTickValues=function(g,f){var k,j=this.owner,h=j.config;return(h.axis_x_tick_fit||h.axis_x_tick_count)&&(k=this.generateTickValues(j.mapTargetsToUniqueXs(g),h.axis_x_tick_count,j.isTimeSeries())),f?f.tickValues(k):(j.xAxis.tickValues(k),j.subXAxis.tickValues(k)),k},U.prototype.getYAxis=function(w,v,u,t,s,r){var p={withOuterTick:s,withoutTransition:r},o=this.owner,n=o.d3,m=o.config,g=T(n,p).scale(w).orient(v).tickFormat(u);return o.isTimeSeriesY()?g.ticks(n.time[m.axis_y_tick_time_value],m.axis_y_tick_time_interval):g.tickValues(t),g},U.prototype.getId=function(d){var c=this.owner.config;return d in c.data_axes?c.data_axes[d]:"y"},U.prototype.getXAxisTickFormat=function(){var e=this.owner,d=e.config,f=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(b){return 0>b?b.toFixed(0):b};return d.axis_x_tick_format&&(M(d.axis_x_tick_format)?f=d.axis_x_tick_format:e.isTimeSeries()&&(f=function(a){return a?e.axisTimeFormat(d.axis_x_tick_format)(a):""})),M(f)?function(a){return f.call(e,a)}:f},U.prototype.getTickValues=function(d,c){return d?d:c?c.tickValues():void 0},U.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},U.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},U.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},U.prototype.getLabelOptionByAxisId=function(f){var e,h=this.owner,g=h.config;return"y"===f?e=g.axis_y_label:"y2"===f?e=g.axis_y2_label:"x"===f&&(e=g.axis_x_label),e},U.prototype.getLabelText=function(d){var c=this.getLabelOptionByAxisId(d);return L(c)?c:c?c.text:null},U.prototype.setLabelText=function(g,f){var k=this.owner,j=k.config,h=this.getLabelOptionByAxisId(g);L(h)?"y"===g?j.axis_y_label=f:"y2"===g?j.axis_y2_label=f:"x"===g&&(j.axis_x_label=f):h&&(h.text=f)},U.prototype.getLabelPosition=function(f,e){var h=this.getLabelOptionByAxisId(f),g=h&&"object"==typeof h&&h.position?h.position:e;return{isInner:g.indexOf("inner")>=0,isOuter:g.indexOf("outer")>=0,isLeft:g.indexOf("left")>=0,isCenter:g.indexOf("center")>=0,isRight:g.indexOf("right")>=0,isTop:g.indexOf("top")>=0,isMiddle:g.indexOf("middle")>=0,isBottom:g.indexOf("bottom")>=0}},U.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},U.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},U.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},U.prototype.getLabelPositionById=function(b){return"y2"===b?this.getY2AxisLabelPosition():"y"===b?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},U.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},U.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},U.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},U.prototype.xForAxisLabel=function(e,d){var f=this.owner;return e?d.isLeft?0:d.isCenter?f.width/2:f.width:d.isBottom?-f.height:d.isMiddle?-f.height/2:0},U.prototype.dxForAxisLabel=function(d,c){return d?c.isLeft?"0.5em":c.isRight?"-0.5em":"0":c.isTop?"-0.5em":c.isBottom?"0.5em":"0"},U.prototype.textAnchorForAxisLabel=function(d,c){return d?c.isLeft?"start":c.isCenter?"middle":"end":c.isBottom?"start":c.isMiddle?"middle":"end"},U.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},U.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},U.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},U.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},U.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},U.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},U.prototype.dyForXAxisLabel=function(){var e=this.owner,d=e.config,f=this.getXAxisLabelPosition();return d.axis_rotated?f.isInner?"1.2em":-25-this.getMaxTickWidth("x"):f.isInner?"-0.5em":d.axis_x_height?d.axis_x_height-10:"3em"},U.prototype.dyForYAxisLabel=function(){var d=this.owner,c=this.getYAxisLabelPosition();return d.config.axis_rotated?c.isInner?"-0.5em":"3em":c.isInner?"1.2em":-10-(d.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},U.prototype.dyForY2AxisLabel=function(){var d=this.owner,c=this.getY2AxisLabelPosition();return d.config.axis_rotated?c.isInner?"1.2em":"-2.2em":c.isInner?"-0.5em":15+(d.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},U.prototype.textAnchorForXAxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(!b.config.axis_rotated,this.getXAxisLabelPosition())},U.prototype.textAnchorForYAxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(b.config.axis_rotated,this.getYAxisLabelPosition())},U.prototype.textAnchorForY2AxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(b.config.axis_rotated,this.getY2AxisLabelPosition())},U.prototype.getMaxTickWidth=function(u,t){var s,r,p,o,n,m=this.owner,l=m.config,k=0;return t&&m.currentMaxTickWidths[u]?m.currentMaxTickWidths[u]:(m.svg&&(s=m.filterTargetsToShow(m.data.targets),"y"===u?(r=m.y.copy().domain(m.getYDomain(s,"y")),p=this.getYAxis(r,m.yOrient,l.axis_y_tick_format,m.yAxisTickValues,!1,!0)):"y2"===u?(r=m.y2.copy().domain(m.getYDomain(s,"y2")),p=this.getYAxis(r,m.y2Orient,l.axis_y2_tick_format,m.y2AxisTickValues,!1,!0)):(r=m.x.copy().domain(m.getXDomain(s)),p=this.getXAxis(r,m.xOrient,m.xAxisTickFormat,m.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(s,p)),o=m.d3.select("body").append("div").classed("c3",!0),n=o.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),n.append("g").call(p).each(function(){m.d3.select(this).selectAll("text").each(function(){var b=this.getBoundingClientRect();k<b.width&&(k=b.width)}),o.remove()})),m.currentMaxTickWidths[u]=0>=k?m.currentMaxTickWidths[u]:k,m.currentMaxTickWidths[u])},U.prototype.updateLabels=function(g){var f=this.owner,k=f.main.select("."+O.axisX+" ."+O.axisXLabel),j=f.main.select("."+O.axisY+" ."+O.axisYLabel),h=f.main.select("."+O.axisY2+" ."+O.axisY2Label);(g?k.transition():k).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(g?j.transition():j).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(g?h.transition():h).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},U.prototype.getPadding=function(f,e,h,g){return N(f[e])?"ratio"===f.unit?f[e]*g:this.convertPixelsToAxisPadding(f[e],g):h},U.prototype.convertPixelsToAxisPadding=function(f,e){var h=this.owner,g=h.config.axis_rotated?h.width:h.height;return e*(f/g)},U.prototype.generateTickValues=function(w,v,u){var t,s,r,p,o,n,m,l=w;if(v){if(t=M(v)?v():v,1===t){l=[w[0]]}else{if(2===t){l=[w[0],w[w.length-1]]}else{if(t>2){for(p=t-2,s=w[0],r=w[w.length-1],o=(r-s)/(p+1),l=[s],n=0;p>n;n++){m=+s+o*(n+1),l.push(u?new Date(m):m)}l.push(r)}}}}return u||(l=l.sort(function(d,c){return d-c})),l},U.prototype.generateTransitions=function(e){var d=this.owner,f=d.axes;return{axisX:e?f.x.transition().duration(e):f.x,axisY:e?f.y.transition().duration(e):f.y,axisY2:e?f.y2.transition().duration(e):f.y2,axisSubX:e?f.subx.transition().duration(e):f.subx}},U.prototype.redraw=function(e,d){var f=this.owner;f.axes.x.style("opacity",d?0:1),f.axes.y.style("opacity",d?0:1),f.axes.y2.style("opacity",d?0:1),f.axes.subx.style("opacity",d?0:1),e.axisX.call(f.xAxis),e.axisY.call(f.yAxis),e.axisY2.call(f.y2Axis),e.axisSubX.call(f.subXAxis)},R.getClipPath=function(a){var d=Z.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(d?"":document.URL.split("#")[0])+"#"+a+")"},R.appendClip=function(d,c){return d.append("clipPath").attr("id",c).append("rect")},R.getAxisClipX=function(d){var c=Math.max(30,this.margin.left);return d?-(1+c):-(c-1)},R.getAxisClipY=function(b){return b?-20:-this.margin.top},R.getXAxisClipX=function(){var b=this;return b.getAxisClipX(!b.config.axis_rotated)},R.getXAxisClipY=function(){var b=this;return b.getAxisClipY(!b.config.axis_rotated)},R.getYAxisClipX=function(){var b=this;return b.config.axis_y_inner?-1:b.getAxisClipX(b.config.axis_rotated)},R.getYAxisClipY=function(){var b=this;return b.getAxisClipY(b.config.axis_rotated)},R.getAxisClipWidth=function(f){var e=this,h=Math.max(30,e.margin.left),g=Math.max(30,e.margin.right);return f?e.width+2+h+g:e.margin.left+20},R.getAxisClipHeight=function(b){return(b?this.margin.bottom:this.margin.top+this.height)+20},R.getXAxisClipWidth=function(){var b=this;return b.getAxisClipWidth(!b.config.axis_rotated)},R.getXAxisClipHeight=function(){var b=this;return b.getAxisClipHeight(!b.config.axis_rotated)},R.getYAxisClipWidth=function(){var b=this;return b.getAxisClipWidth(b.config.axis_rotated)+(b.config.axis_y_inner?20:0)},R.getYAxisClipHeight=function(){var b=this;return b.getAxisClipHeight(b.config.axis_rotated)},R.initPie=function(){var e=this,d=e.d3,f=e.config;e.pie=d.layout.pie().value(function(b){return b.values.reduce(function(g,c){return g+c.value},0)}),f.data_order||e.pie.sort(null)},R.updateRadius=function(){var e=this,d=e.config,f=d.gauge_width||d.donut_width;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2,e.radius=0.95*e.radiusExpanded,e.innerRadiusRatio=f?(e.radius-f)/e.radius:0.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0},R.updateArc=function(){var b=this;b.svgArc=b.getSvgArc(),b.svgArcExpanded=b.getSvgArcExpanded(),b.svgArcExpandedSub=b.getSvgArcExpanded(0.98)},R.updateAngle=function(s){var r,p,o=this,n=o.config,m=!1,l=0,k=n.gauge_min,j=n.gauge_max;return o.pie(o.filterTargetsToShow(o.data.targets)).forEach(function(a){m||a.data.id!==s.data.id||(m=!0,s=a,s.index=l),l++}),isNaN(s.startAngle)&&(s.startAngle=0),isNaN(s.endAngle)&&(s.endAngle=s.startAngle),o.isGaugeType(s.data)&&(r=Math.PI/(j-k),p=s.value<k?0:s.value<j?s.value-k:j-k,s.startAngle=-1*(Math.PI/2),s.endAngle=s.startAngle+r*p),m?s:null},R.getSvgArc=function(){var e=this,d=e.d3.svg.arc().outerRadius(e.radius).innerRadius(e.innerRadius),f=function(g,b){var a;return b?d(g):(a=e.updateAngle(g),a?d(a):"M 0 0")};return f.centroid=d.centroid,f},R.getSvgArcExpanded=function(e){var d=this,f=d.d3.svg.arc().outerRadius(d.radiusExpanded*(e?e:1)).innerRadius(d.innerRadius);return function(b){var c=d.updateAngle(b);return c?f(c):"M 0 0"}},R.getArc=function(e,d,f){return f||this.isArcType(e.data)?this.svgArc(e,d):"M 0 0"},R.transformForArcLabel=function(s){var r,p,o,n,m,l=this,k=l.updateAngle(s),j="";return k&&!l.hasType("gauge")&&(r=this.svgArc.centroid(k),p=isNaN(r[0])?0:r[0],o=isNaN(r[1])?0:r[1],n=Math.sqrt(p*p+o*o),m=l.radius&&n?(36/l.radius>0.375?1.175-36/l.radius:0.8)*l.radius/n:0,j="translate("+p*m+","+o*m+")"),j},R.getArcRatio=function(e){var d=this,f=d.hasType("gauge")?Math.PI:2*Math.PI;return e?(e.endAngle-e.startAngle)/f:null},R.convertToArcData=function(b){return this.addName({id:b.data.id,value:b.value,ratio:this.getArcRatio(b),index:b.index})},R.textForArcLabel=function(j){var h,o,n,m,l,k=this;return k.shouldShowArcLabel()?(h=k.updateAngle(j),o=h?h.value:null,n=k.getArcRatio(h),m=j.data.id,k.hasType("gauge")||k.meetsArcLabelThreshold(n)?(l=k.getArcLabelFormat(),l?l(o,n,m):k.defaultArcValueFormat(o,n)):""):""},R.expandArc=function(a){var f,e=this;return e.transiting?void (f=Z.setInterval(function(){e.transiting||(Z.clearInterval(f),e.legend.selectAll(".c3-legend-item-focused").size()>0&&e.expandArc(a))},10)):(a=e.mapToTargetIds(a),void e.svg.selectAll(e.selectorTargets(a,"."+O.chartArc)).each(function(b){e.shouldExpand(b.data.id)&&e.d3.select(this).selectAll("path").transition().duration(50).attr("d",e.svgArcExpanded).transition().duration(100).attr("d",e.svgArcExpandedSub).each(function(c){e.isDonutType(c.data)})}))},R.unexpandArc=function(d){var c=this;c.transiting||(d=c.mapToTargetIds(d),c.svg.selectAll(c.selectorTargets(d,"."+O.chartArc)).selectAll("path").transition().duration(50).attr("d",c.svgArc),c.svg.selectAll("."+O.arc).style("opacity",1))},R.shouldExpand=function(e){var d=this,f=d.config;return d.isDonutType(e)&&f.donut_expand||d.isGaugeType(e)&&f.gauge_expand||d.isPieType(e)&&f.pie_expand},R.shouldShowArcLabel=function(){var e=this,d=e.config,f=!0;return e.hasType("donut")?f=d.donut_label_show:e.hasType("pie")&&(f=d.pie_label_show),f},R.meetsArcLabelThreshold=function(f){var e=this,h=e.config,g=e.hasType("donut")?h.donut_label_threshold:h.pie_label_threshold;return f>=g},R.getArcLabelFormat=function(){var e=this,d=e.config,f=d.pie_label_format;return e.hasType("gauge")?f=d.gauge_label_format:e.hasType("donut")&&(f=d.donut_label_format),f},R.getArcTitle=function(){var b=this;return b.hasType("donut")?b.config.donut_title:""},R.updateTargetsForArc=function(k){var j,r,p=this,o=p.main,n=p.classChartArc.bind(p),m=p.classArcs.bind(p),l=p.classFocus.bind(p);j=o.select("."+O.chartArcs).selectAll("."+O.chartArc).data(p.pie(k)).attr("class",function(b){return n(b)+l(b.data)}),r=j.enter().append("g").attr("class",n),r.append("g").attr("class",m),r.append("text").attr("dy",p.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},R.initArc=function(){var b=this;b.arcs=b.main.select("."+O.chart).append("g").attr("class",O.chartArcs).attr("transform",b.getTranslate("arc")),b.arcs.append("text").attr("class",O.chartArcsTitle).style("text-anchor","middle").text(b.getArcTitle())},R.redrawArc=function(k,j,r){var p,o=this,n=o.d3,m=o.config,l=o.main;p=l.selectAll("."+O.arcs).selectAll("."+O.arc).data(o.arcData.bind(o)),p.enter().append("path").attr("class",o.classArc.bind(o)).style("fill",function(b){return o.color(b.data)}).style("cursor",function(b){return m.interaction_enabled&&m.data_selection_isselectable(b)?"pointer":null}).style("opacity",0).each(function(b){o.isGaugeType(b.data)&&(b.startAngle=b.endAngle=-1*(Math.PI/2)),this._current=b}),p.attr("transform",function(b){return !o.isGaugeType(b.data)&&r?"scale(0)":""}).style("opacity",function(b){return b===this._current?0:1}).on("mouseover",m.interaction_enabled?function(e){var d,f;o.transiting||(d=o.updateAngle(e),f=o.convertToArcData(d),o.expandArc(d.data.id),o.api.focus(d.data.id),o.toggleFocusLegend(d.data.id,!0),o.config.data_onmouseover(f,this))}:null).on("mousemove",m.interaction_enabled?function(f){var e=o.updateAngle(f),h=o.convertToArcData(e),g=[h];o.showTooltip(g,this)}:null).on("mouseout",m.interaction_enabled?function(e){var d,f;o.transiting||(d=o.updateAngle(e),f=o.convertToArcData(d),o.unexpandArc(d.data.id),o.api.revert(),o.revertLegend(),o.hideTooltip(),o.config.data_onmouseout(f,this))}:null).on("click",m.interaction_enabled?function(f,e){var h=o.updateAngle(f),g=o.convertToArcData(h);o.toggleShape&&o.toggleShape(this,g,e),o.config.data_onclick.call(o.api,g,this)}:null).each(function(){o.transiting=!0}).transition().duration(k).attrTween("d",function(e){var d,f=o.updateAngle(e);return f?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),d=n.interpolate(this._current,f),this._current=d(0),function(b){var a=d(b);return a.data=e.data,o.getArc(a,!0)}):function(){return"M 0 0"}}).attr("transform",r?"scale(1)":"").style("fill",function(b){return o.levelColor?o.levelColor(b.data.values[0].value):o.color(b.data.id)}).style("opacity",1).call(o.endall,function(){o.transiting=!1}),p.exit().transition().duration(j).style("opacity",0).remove(),l.selectAll("."+O.chartArc).select("text").style("opacity",0).attr("class",function(b){return o.isGaugeType(b.data)?O.gaugeValue:""}).text(o.textForArcLabel.bind(o)).attr("transform",o.transformForArcLabel.bind(o)).style("font-size",function(b){return o.isGaugeType(b.data)?Math.round(o.radius/5)+"px":""}).transition().duration(k).style("opacity",function(b){return o.isTargetToShow(b.data.id)&&o.isArcType(b.data)?1:0}),l.select("."+O.chartArcsTitle).style("opacity",o.hasType("donut")||o.hasType("gauge")?1:0),o.hasType("gauge")&&(o.arcs.select("."+O.chartArcsBackground).attr("d",function(){var b={data:[{value:m.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return o.getArc(b,!0,!0)}),o.arcs.select("."+O.chartArcsGaugeUnit).attr("dy",".75em").text(m.gauge_label_show?m.gauge_units:""),o.arcs.select("."+O.chartArcsGaugeMin).attr("dx",-1*(o.innerRadius+(o.radius-o.innerRadius)/2)+"px").attr("dy","1.2em").text(m.gauge_label_show?m.gauge_min:""),o.arcs.select("."+O.chartArcsGaugeMax).attr("dx",o.innerRadius+(o.radius-o.innerRadius)/2+"px").attr("dy","1.2em").text(m.gauge_label_show?m.gauge_max:""))},R.initGauge=function(){var b=this.arcs;this.hasType("gauge")&&(b.append("path").attr("class",O.chartArcsBackground),b.append("text").attr("class",O.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),b.append("text").attr("class",O.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),b.append("text").attr("class",O.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},R.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},R.initRegion=function(){var b=this;b.region=b.main.append("g").attr("clip-path",b.clipPath).attr("class",O.regions)},R.updateRegion=function(e){var d=this,f=d.config;d.region.style("visibility",d.hasArcType()?"hidden":"visible"),d.mainRegion=d.main.select("."+O.regions).selectAll("."+O.region).data(f.regions),d.mainRegion.enter().append("g").attr("class",d.classRegion.bind(d)).append("rect").style("fill-opacity",0),d.mainRegion.exit().transition().duration(e).style("opacity",0).remove()},R.redrawRegion=function(j){var h=this,o=h.mainRegion.selectAll("rect"),n=h.regionX.bind(h),m=h.regionY.bind(h),l=h.regionWidth.bind(h),k=h.regionHeight.bind(h);return[(j?o.transition():o).attr("x",n).attr("y",m).attr("width",l).attr("height",k).style("fill-opacity",function(b){return N(b.opacity)?b.opacity:0.1})]},R.regionX=function(g){var f,k=this,j=k.config,h="y"===g.axis?k.y:k.y2;return f="y"===g.axis||"y2"===g.axis?j.axis_rotated&&"start" in g?h(g.start):0:j.axis_rotated?0:"start" in g?k.x(k.isTimeSeries()?k.parseDate(g.start):g.start):0},R.regionY=function(g){var f,k=this,j=k.config,h="y"===g.axis?k.y:k.y2;return f="y"===g.axis||"y2"===g.axis?j.axis_rotated?0:"end" in g?h(g.end):0:j.axis_rotated&&"start" in g?k.x(k.isTimeSeries()?k.parseDate(g.start):g.start):0},R.regionWidth=function(h){var g,m=this,l=m.config,k=m.regionX(h),j="y"===h.axis?m.y:m.y2;return g="y"===h.axis||"y2"===h.axis?l.axis_rotated&&"end" in h?j(h.end):m.width:l.axis_rotated?m.width:"end" in h?m.x(m.isTimeSeries()?m.parseDate(h.end):h.end):m.width,k>g?0:g-k},R.regionHeight=function(h){var g,m=this,l=m.config,k=this.regionY(h),j="y"===h.axis?m.y:m.y2;return g="y"===h.axis||"y2"===h.axis?l.axis_rotated?m.height:"start" in h?j(h.start):m.height:l.axis_rotated&&"end" in h?m.x(m.isTimeSeries()?m.parseDate(h.end):h.end):m.height,k>g?0:g-k},R.isRegionOnX=function(b){return !b.axis||"x"===b.axis},R.drag=function(aa){var z,y,x,w,v,u,t,s,r=this,p=r.config,o=r.main,l=r.d3;r.hasArcType()||p.data_selection_enabled&&(!p.zoom_enabled||r.zoom.altDomain)&&p.data_selection_multiple&&(z=r.dragStart[0],y=r.dragStart[1],x=aa[0],w=aa[1],v=Math.min(z,x),u=Math.max(z,x),t=p.data_selection_grouped?r.margin.top:Math.min(y,w),s=p.data_selection_grouped?r.height:Math.max(y,w),o.select("."+O.dragarea).attr("x",v).attr("y",t).attr("width",u-v).attr("height",s-t),o.selectAll("."+O.shapes).selectAll("."+O.shape).filter(function(b){return p.data_selection_isselectable(b)}).each(function(ag,af){var ae,ad,ac,ab,n,j,h=l.select(this),g=h.classed(O.SELECTED),f=h.classed(O.INCLUDED),ah=!1;if(h.classed(O.circle)){ae=1*h.attr("cx"),ad=1*h.attr("cy"),n=r.togglePoint,ah=ae>v&&u>ae&&ad>t&&s>ad}else{if(!h.classed(O.bar)){return}j=B(this),ae=j.x,ad=j.y,ac=j.width,ab=j.height,n=r.togglePath,ah=!(ae>u||v>ae+ac||ad>s||t>ad+ab)}ah^f&&(h.classed(O.INCLUDED,!f),h.classed(O.SELECTED,!g),n.call(r,!g,h,ag,af))}))},R.dragstart=function(e){var d=this,f=d.config;d.hasArcType()||f.data_selection_enabled&&(d.dragStart=e,d.main.select("."+O.chart).append("rect").attr("class",O.dragarea).style("opacity",0.1),d.dragging=!0)},R.dragend=function(){var d=this,c=d.config;d.hasArcType()||c.data_selection_enabled&&(d.main.select("."+O.dragarea).transition().duration(100).style("opacity",0).remove(),d.main.selectAll("."+O.shape).classed(O.INCLUDED,!1),d.dragging=!1)},R.selectPoint=function(k,j,r){var p=this,o=p.config,n=(o.axis_rotated?p.circleY:p.circleX).bind(p),m=(o.axis_rotated?p.circleX:p.circleY).bind(p),l=p.pointSelectR.bind(p);o.data_onselected.call(p.api,j,k.node()),p.main.select("."+O.selectedCircles+p.getTargetSelectorSuffix(j.id)).selectAll("."+O.selectedCircle+"-"+r).data([j]).enter().append("circle").attr("class",function(){return p.generateClass(O.selectedCircle,r)}).attr("cx",n).attr("cy",m).attr("stroke",function(){return p.color(j)}).attr("r",function(b){return 1.4*p.pointSelectR(b)}).transition().duration(100).attr("r",l)},R.unselectPoint=function(f,e,h){var g=this;g.config.data_onunselected(e,f.node()),g.main.select("."+O.selectedCircles+g.getTargetSelectorSuffix(e.id)).selectAll("."+O.selectedCircle+"-"+h).transition().duration(100).attr("r",0).remove()},R.togglePoint=function(f,e,h,g){f?this.selectPoint(e,h,g):this.unselectPoint(e,h,g)},R.selectPath=function(e,d){var f=this;f.config.data_onselected.call(f,d,e.node()),e.transition().duration(100).style("fill",function(){return f.d3.rgb(f.color(d)).brighter(0.75)})},R.unselectPath=function(e,d){var f=this;f.config.data_onunselected.call(f,d,e.node()),e.transition().duration(100).style("fill",function(){return f.color(d)})},R.togglePath=function(f,e,h,g){f?this.selectPath(e,h,g):this.unselectPath(e,h,g)},R.getToggle=function(f,e){var h,g=this;return"circle"===f.nodeName?h=g.isStepType(e)?function(){}:g.togglePoint:"path"===f.nodeName&&(h=g.togglePath),h},R.toggleShape=function(s,r,p){var o=this,n=o.d3,m=o.config,l=n.select(s),k=l.classed(O.SELECTED),j=o.getToggle(s,r).bind(o);m.data_selection_enabled&&m.data_selection_isselectable(r)&&(m.data_selection_multiple||o.main.selectAll("."+O.shapes+(m.data_selection_grouped?o.getTargetSelectorSuffix(r.id):"")).selectAll("."+O.shape).each(function(e,d){var f=n.select(this);f.classed(O.SELECTED)&&j(!1,f.classed(O.SELECTED,!1),e,d)}),l.classed(O.SELECTED,!k),j(!k,l,r,p))},R.initBrush=function(){var d=this,c=d.d3;d.brush=c.svg.brush().on("brush",function(){d.redrawForBrush()}),d.brush.update=function(){return d.context&&d.context.select("."+O.brush).call(this),this},d.brush.scale=function(a){return d.config.axis_rotated?this.y(a):this.x(a)}},R.initSubchart=function(){var e=this,d=e.config,f=e.context=e.svg.append("g").attr("transform",e.getTranslate("context"));f.style("visibility",d.subchart_show?"visible":"hidden"),f.append("g").attr("clip-path",e.clipPathForSubchart).attr("class",O.chart),f.select("."+O.chart).append("g").attr("class",O.chartBars),f.select("."+O.chart).append("g").attr("class",O.chartLines),f.append("g").attr("clip-path",e.clipPath).attr("class",O.brush).call(e.brush),e.axes.subx=f.append("g").attr("class",O.axisX).attr("transform",e.getTranslate("subx")).attr("clip-path",d.axis_rotated?"":e.clipPathForXAxis)},R.updateTargetsForSubchart=function(aa){var z,y,x,w,v=this,u=v.context,t=v.config,s=v.classChartBar.bind(v),r=v.classBars.bind(v),p=v.classChartLine.bind(v),o=v.classLines.bind(v),l=v.classAreas.bind(v);t.subchart_show&&(w=u.select("."+O.chartBars).selectAll("."+O.chartBar).data(aa).attr("class",s),x=w.enter().append("g").style("opacity",0).attr("class",s),x.append("g").attr("class",r),y=u.select("."+O.chartLines).selectAll("."+O.chartLine).data(aa).attr("class",p),z=y.enter().append("g").style("opacity",0).attr("class",p),z.append("g").attr("class",o),z.append("g").attr("class",l),u.selectAll("."+O.brush+" rect").attr(t.axis_rotated?"width":"height",t.axis_rotated?v.width2:v.height2))},R.updateBarForSubchart=function(d){var c=this;c.contextBar=c.context.selectAll("."+O.bars).selectAll("."+O.bar).data(c.barData.bind(c)),c.contextBar.enter().append("path").attr("class",c.classBar.bind(c)).style("stroke","none").style("fill",c.color),c.contextBar.style("opacity",c.initialOpacity.bind(c)),c.contextBar.exit().transition().duration(d).style("opacity",0).remove()},R.redrawBarForSubchart=function(e,d,f){(d?this.contextBar.transition().duration(f):this.contextBar).attr("d",e).style("opacity",1)},R.updateLineForSubchart=function(d){var c=this;c.contextLine=c.context.selectAll("."+O.lines).selectAll("."+O.line).data(c.lineData.bind(c)),c.contextLine.enter().append("path").attr("class",c.classLine.bind(c)).style("stroke",c.color),c.contextLine.style("opacity",c.initialOpacity.bind(c)),c.contextLine.exit().transition().duration(d).style("opacity",0).remove()},R.redrawLineForSubchart=function(e,d,f){(d?this.contextLine.transition().duration(f):this.contextLine).attr("d",e).style("opacity",1)},R.updateAreaForSubchart=function(e){var d=this,f=d.d3;d.contextArea=d.context.selectAll("."+O.areas).selectAll("."+O.area).data(d.lineData.bind(d)),d.contextArea.enter().append("path").attr("class",d.classArea.bind(d)).style("fill",d.color).style("opacity",function(){return d.orgAreaOpacity=+f.select(this).style("opacity"),0}),d.contextArea.style("opacity",0),d.contextArea.exit().transition().duration(e).style("opacity",0).remove()},R.redrawAreaForSubchart=function(e,d,f){(d?this.contextArea.transition().duration(f):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)},R.redrawSubchart=function(aa,z,y,x,w,v,u){var t,s,r,p=this,o=p.d3,n=p.config;p.context.style("visibility",n.subchart_show?"visible":"hidden"),n.subchart_show&&(o.event&&"zoom"===o.event.type&&p.brush.extent(p.x.orgDomain()).update(),aa&&(p.brush.empty()||p.brush.extent(p.x.orgDomain()).update(),t=p.generateDrawArea(w,!0),s=p.generateDrawBar(v,!0),r=p.generateDrawLine(u,!0),p.updateBarForSubchart(y),p.updateLineForSubchart(y),p.updateAreaForSubchart(y),p.redrawBarForSubchart(s,y,y),p.redrawLineForSubchart(r,y,y),p.redrawAreaForSubchart(t,y,y)))},R.redrawForBrush=function(){var d=this,c=d.x;d.redraw({withTransition:!1,withY:d.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),d.config.subchart_onbrush.call(d.api,c.orgDomain())},R.transformContext=function(f,e){var h,g=this;e&&e.axisSubX?h=e.axisSubX:(h=g.context.select("."+O.axisX),f&&(h=h.transition())),g.context.attr("transform",g.getTranslate("context")),h.attr("transform",g.getTranslate("subx"))},R.getDefaultExtent=function(){var e=this,d=e.config,f=M(d.axis_x_extent)?d.axis_x_extent(e.getXDomain(e.data.targets)):d.axis_x_extent;return e.isTimeSeries()&&(f=[e.parseDate(f[0]),e.parseDate(f[1])]),f},R.initZoom=function(){var f,e=this,h=e.d3,g=e.config;e.zoom=h.behavior.zoom().on("zoomstart",function(){f=h.event.sourceEvent,e.zoom.altDomain=h.event.sourceEvent.altKey?e.x.orgDomain():null,g.zoom_onzoomstart.call(e.api,h.event.sourceEvent)}).on("zoom",function(){e.redrawForZoom.call(e)}).on("zoomend",function(){var a=h.event.sourceEvent;a&&f.clientX===a.clientX&&f.clientY===a.clientY||(e.redrawEventRect(),e.updateZoom(),g.zoom_onzoomend.call(e.api,e.x.orgDomain()))}),e.zoom.scale=function(b){return g.axis_rotated?this.y(b):this.x(b)},e.zoom.orgScaleExtent=function(){var b=g.zoom_extent?g.zoom_extent:[1,10];return[b[0],Math.max(e.getMaxDataCount()/b[1],b[1])]},e.zoom.updateScaleExtent=function(){var b=G(e.x.orgDomain())/G(e.orgXDomain),d=this.orgScaleExtent();return this.scaleExtent([d[0]*b,d[1]*b]),this}},R.updateZoom=function(){var d=this,c=d.config.zoom_enabled?d.zoom:function(){};d.main.select("."+O.zoomRect).call(c).on("dblclick.zoom",null),d.main.selectAll("."+O.eventRect).call(c).on("dblclick.zoom",null)},R.redrawForZoom=function(){var g=this,f=g.d3,k=g.config,j=g.zoom,h=g.x;if(k.zoom_enabled&&0!==g.filterTargetsToShow(g.data.targets).length){if("mousemove"===f.event.sourceEvent.type&&j.altDomain){return h.domain(j.altDomain),void j.scale(h).updateScaleExtent()}g.isCategorized()&&h.orgDomain()[0]===g.orgXDomain[0]&&h.domain([g.orgXDomain[0]-1e-10,h.orgDomain()[1]]),g.redraw({withTransition:!1,withY:k.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===f.event.sourceEvent.type&&(g.cancelClick=!0),k.zoom_onzoom.call(g.api,h.orgDomain())}},R.generateColor=function(){var j=this,h=j.config,o=j.d3,n=h.data_colors,m=E(h.color_pattern)?h.color_pattern:o.scale.category10().range(),l=h.data_color,k=[];return function(e){var d,f=e.id||e.data&&e.data.id||e;return n[f] instanceof Function?d=n[f](e):n[f]?d=n[f]:(k.indexOf(f)<0&&k.push(f),d=m[k.indexOf(f)%m.length],n[f]=d),l instanceof Function?l(d,e):d}},R.generateLevelColor=function(){var j=this,h=j.config,o=h.color_pattern,n=h.color_threshold,m="value"===n.unit,l=n.values&&n.values.length?n.values:[],k=n.max||100;return E(h.color_threshold)?function(e){var c,g,f=o[o.length-1];for(c=0;c<l.length;c++){if(g=m?e:100*e/k,g<l[c]){f=o[c];break}}return f}:null},R.getYFormat=function(f){var e=this,h=f&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,g=f&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(b,j,d){var c="y2"===e.axis.getId(d)?g:h;return c.call(e,b,j)}},R.yFormat=function(f){var e=this,h=e.config,g=h.axis_y_tick_format?h.axis_y_tick_format:e.defaultValueFormat;return g(f)},R.y2Format=function(f){var e=this,h=e.config,g=h.axis_y2_tick_format?h.axis_y2_tick_format:e.defaultValueFormat;return g(f)},R.defaultValueFormat=function(b){return N(b)?+b:""},R.defaultArcValueFormat=function(d,c){return(100*c).toFixed(1)+"%"},R.dataLabelFormat=function(g){var f,k=this,j=k.config.data_labels,h=function(b){return N(b)?+b:""};return f="function"==typeof j.format?j.format:"object"==typeof j.format?j.format[g]?j.format[g]===!0?h:j.format[g]:function(){return""}:h},R.hasCaches=function(d){for(var c=0;c<d.length;c++){if(!(d[c] in this.cache)){return !1}}return !0},R.addCache=function(d,c){this.cache[d]=this.cloneTarget(c)},R.getCaches=function(e){var d,f=[];for(d=0;d<e.length;d++){e[d] in this.cache&&f.push(this.cloneTarget(this.cache[e[d]]))}return f};var O=R.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};R.generateClass=function(d,c){return" "+d+" "+d+this.getTargetSelectorSuffix(c)},R.classText=function(b){return this.generateClass(O.text,b.index)},R.classTexts=function(b){return this.generateClass(O.texts,b.id)},R.classShape=function(b){return this.generateClass(O.shape,b.index)},R.classShapes=function(b){return this.generateClass(O.shapes,b.id)},R.classLine=function(b){return this.classShape(b)+this.generateClass(O.line,b.id)},R.classLines=function(b){return this.classShapes(b)+this.generateClass(O.lines,b.id)},R.classCircle=function(b){return this.classShape(b)+this.generateClass(O.circle,b.index)},R.classCircles=function(b){return this.classShapes(b)+this.generateClass(O.circles,b.id)},R.classBar=function(b){return this.classShape(b)+this.generateClass(O.bar,b.index)},R.classBars=function(b){return this.classShapes(b)+this.generateClass(O.bars,b.id)},R.classArc=function(b){return this.classShape(b.data)+this.generateClass(O.arc,b.data.id)},R.classArcs=function(b){return this.classShapes(b.data)+this.generateClass(O.arcs,b.data.id)},R.classArea=function(b){return this.classShape(b)+this.generateClass(O.area,b.id)},R.classAreas=function(b){return this.classShapes(b)+this.generateClass(O.areas,b.id)},R.classRegion=function(d,c){return this.generateClass(O.region,c)+" "+("class" in d?d["class"]:"")},R.classEvent=function(b){return this.generateClass(O.eventRect,b.index)},R.classTarget=function(f){var e=this,h=e.config.data_classes[f],g="";return h&&(g=" "+O.target+"-"+h),e.generateClass(O.target,f)+g},R.classFocus=function(b){return this.classFocused(b)+this.classDefocused(b)},R.classFocused=function(b){return" "+(this.focusedTargetIds.indexOf(b.id)>=0?O.focused:"")},R.classDefocused=function(b){return" "+(this.defocusedTargetIds.indexOf(b.id)>=0?O.defocused:"")},R.classChartText=function(b){return O.chartText+this.classTarget(b.id)},R.classChartLine=function(b){return O.chartLine+this.classTarget(b.id)},R.classChartBar=function(b){return O.chartBar+this.classTarget(b.id)},R.classChartArc=function(b){return O.chartArc+this.classTarget(b.data.id)},R.getTargetSelectorSuffix=function(b){return b||0===b?("-"+b).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},R.selectorTarget=function(d,c){return(c||"")+"."+O.target+this.getTargetSelectorSuffix(d)},R.selectorTargets=function(e,d){var f=this;return e=e||[],e.length?e.map(function(b){return f.selectorTarget(b,d)}):null},R.selectorLegend=function(b){return"."+O.legendItem+this.getTargetSelectorSuffix(b)},R.selectorLegends=function(d){var c=this;return d&&d.length?d.map(function(b){return c.selectorLegend(b)}):null};var N=R.isValue=function(b){return b||0===b},M=R.isFunction=function(b){return"function"==typeof b},L=R.isString=function(b){return"string"==typeof b},K=R.isUndefined=function(b){return"undefined"==typeof b},J=R.isDefined=function(b){return"undefined"!=typeof b},I=R.ceil10=function(b){return 10*Math.ceil(b/10)},H=R.asHalfPixel=function(b){return Math.ceil(b)+0.5},G=R.diffDomain=function(b){return b[1]-b[0]},F=R.isEmpty=function(b){return !b||L(b)&&0===b.length||"object"==typeof b&&0===Object.keys(b).length},E=R.notEmpty=function(b){return Object.keys(b).length>0},D=R.getOption=function(e,d,f){return J(e[d])?e[d]:f},C=R.hasValue=function(e,d){var f=!1;return Object.keys(e).forEach(function(a){e[a]===d&&(f=!0)}),f},B=R.getPathBox=function(g){var f=g.getBoundingClientRect(),k=[g.pathSegList.getItem(0),g.pathSegList.getItem(1)],j=k[0].x,h=Math.min(k[0].y,k[1].y);return{x:j,y:h,width:f.width,height:f.height}};S.focus=function(e){var d,f=this.internal;e=f.mapToTargetIds(e),d=f.svg.selectAll(f.selectorTargets(e.filter(f.isTargetToShow,f))),this.revert(),this.defocus(),d.classed(O.focused,!0).classed(O.defocused,!1),f.hasArcType()&&f.expandArc(e),f.toggleFocusLegend(e,!0),f.focusedTargetIds=e,f.defocusedTargetIds=f.defocusedTargetIds.filter(function(a){return e.indexOf(a)<0})},S.defocus=function(e){var d,f=this.internal;e=f.mapToTargetIds(e),d=f.svg.selectAll(f.selectorTargets(e.filter(f.isTargetToShow,f))),d.classed(O.focused,!1).classed(O.defocused,!0),f.hasArcType()&&f.unexpandArc(e),f.toggleFocusLegend(e,!1),f.focusedTargetIds=f.focusedTargetIds.filter(function(a){return e.indexOf(a)<0}),f.defocusedTargetIds=e},S.revert=function(e){var d,f=this.internal;e=f.mapToTargetIds(e),d=f.svg.selectAll(f.selectorTargets(e)),d.classed(O.focused,!1).classed(O.defocused,!1),f.hasArcType()&&f.unexpandArc(e),f.config.legend_show&&(f.showLegend(e.filter(f.isLegendToShow.bind(f))),f.legend.selectAll(f.selectorLegends(e)).filter(function(){return f.d3.select(this).classed(O.legendItemFocused)}).classed(O.legendItemFocused,!1)),f.focusedTargetIds=[],f.defocusedTargetIds=[]},S.show=function(f,e){var h,g=this.internal;f=g.mapToTargetIds(f),e=e||{},g.removeHiddenTargetIds(f),h=g.svg.selectAll(g.selectorTargets(f)),h.transition().style("opacity",1,"important").call(g.endall,function(){h.style("opacity",null).style("opacity",1)}),e.withLegend&&g.showLegend(f),g.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},S.hide=function(f,e){var h,g=this.internal;f=g.mapToTargetIds(f),e=e||{},g.addHiddenTargetIds(f),h=g.svg.selectAll(g.selectorTargets(f)),h.transition().style("opacity",0,"important").call(g.endall,function(){h.style("opacity",null).style("opacity",0)}),e.withLegend&&g.hideLegend(f),g.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},S.toggle=function(f,e){var h=this,g=this.internal;g.mapToTargetIds(f).forEach(function(b){g.isTargetToShow(b)?h.hide(b,e):h.show(b,e)})},S.zoom=function(d){var c=this.internal;return d&&(c.isTimeSeries()&&(d=d.map(function(b){return c.parseDate(b)})),c.brush.extent(d),c.redraw({withUpdateXDomain:!0,withY:c.config.zoom_rescale}),c.config.zoom_onzoom.call(this,c.x.orgDomain())),c.brush.extent()},S.zoom.enable=function(d){var c=this.internal;c.config.zoom_enabled=d,c.updateAndRedraw()},S.unzoom=function(){var b=this.internal;b.brush.clear().update(),b.redraw({withUpdateXDomain:!0})},S.load=function(e){var d=this.internal,f=d.config;return e.xs&&d.addXs(e.xs),"classes" in e&&Object.keys(e.classes).forEach(function(a){f.data_classes[a]=e.classes[a]}),"categories" in e&&d.isCategorized()&&(f.axis_x_categories=e.categories),"axes" in e&&Object.keys(e.axes).forEach(function(a){f.data_axes[a]=e.axes[a]}),"colors" in e&&Object.keys(e.colors).forEach(function(a){f.data_colors[a]=e.colors[a]}),"cacheIds" in e&&d.hasCaches(e.cacheIds)?void d.load(d.getCaches(e.cacheIds),e.done):void ("unload" in e?d.unload(d.mapToTargetIds("boolean"==typeof e.unload&&e.unload?null:e.unload),function(){d.loadFromArgs(e)}):d.loadFromArgs(e))},S.unload=function(d){var c=this.internal;d=d||{},d instanceof Array?d={ids:d}:"string"==typeof d&&(d={ids:[d]}),c.unload(c.mapToTargetIds(d.ids),function(){c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),d.done&&d.done()})},S.flow=function(ac){var ab,aa,z,y,x,w,v,u,t=this.internal,s=[],r=t.getMaxDataCount(),p=0,m=0;if(ac.json){aa=t.convertJsonToData(ac.json,ac.keys)}else{if(ac.rows){aa=t.convertRowsToData(ac.rows)}else{if(!ac.columns){return}aa=t.convertColumnsToData(ac.columns)}}ab=t.convertDataToTargets(aa,!0),t.data.targets.forEach(function(b){var h,g,f=!1;for(h=0;h<ab.length;h++){if(b.id===ab[h].id){for(f=!0,b.values[b.values.length-1]&&(m=b.values[b.values.length-1].index+1),p=ab[h].values.length,g=0;p>g;g++){ab[h].values[g].index=m+g,t.isTimeSeries()||(ab[h].values[g].x=m+g)}b.values=b.values.concat(ab[h].values),ab.splice(h,1);break}}f||s.push(b.id)}),t.data.targets.forEach(function(e){var d,f;for(d=0;d<s.length;d++){if(e.id===s[d]){for(m=e.values[e.values.length-1].index+1,f=0;p>f;f++){e.values.push({id:e.id,index:m+f,x:t.isTimeSeries()?t.getOtherTargetX(m+f):m+f,value:null})}}}}),t.data.targets.length&&ab.forEach(function(e){var d,f=[];for(d=t.data.targets[0].values[0].index;m>d;d++){f.push({id:e.id,index:d,x:t.isTimeSeries()?t.getOtherTargetX(d):d,value:null})}e.values.forEach(function(b){b.index+=m,t.isTimeSeries()||(b.x+=m)}),e.values=f.concat(e.values)}),t.data.targets=t.data.targets.concat(ab),z=t.getMaxDataCount(),x=t.data.targets[0],w=x.values[0],J(ac.to)?(p=0,u=t.isTimeSeries()?t.parseDate(ac.to):ac.to,x.values.forEach(function(b){b.x<u&&p++})):J(ac.length)&&(p=ac.length),r?1===r&&t.isTimeSeries()&&(v=(x.values[x.values.length-1].x-w.x)/2,y=[new Date(+w.x-v),new Date(+w.x+v)],t.updateXDomain(null,!0,!0,!1,y)):(v=t.isTimeSeries()?x.values.length>1?x.values[x.values.length-1].x-w.x:w.x-t.getXDomain(t.data.targets)[0]:1,y=[w.x-v,w.x],t.updateXDomain(null,!0,!0,!1,y)),t.updateTargets(t.data.targets),t.redraw({flow:{index:w.index,length:p,duration:N(ac.duration)?ac.duration:t.config.transition_duration,done:ac.done,orgDataCount:r},withLegend:!0,withTransition:r>1,withTrimXDomain:!1,withUpdateXAxis:!0})},R.generateFlow=function(f){var e=this,h=e.config,g=e.d3;return function(){var az,ay,ax,aw=f.targets,av=f.flow,au=f.drawBar,at=f.drawLine,ar=f.drawArea,aq=f.cx,ap=f.cy,ao=f.xv,am=f.xForText,ak=f.yForText,ai=f.duration,af=1,ad=av.index,ab=av.length,t=e.getValueOnIndex(e.data.targets[0].values,ad),d=e.getValueOnIndex(e.data.targets[0].values,ad+ab),b=e.x.domain(),an=av.duration||ai,al=av.done||function(){},aj=e.generateWait(),ah=e.xgrid||g.selectAll([]),ag=e.xgridLines||g.selectAll([]),ae=e.mainRegion||g.selectAll([]),ac=e.mainText||g.selectAll([]),aa=e.mainBar||g.selectAll([]),l=e.mainLine||g.selectAll([]),c=e.mainArea||g.selectAll([]),a=e.mainCircle||g.selectAll([]);e.flowing=!0,e.data.targets.forEach(function(j){j.values.splice(0,ab)}),ax=e.updateXDomain(aw,!0,!0),e.updateXGrid&&e.updateXGrid(!0),av.orgDataCount?az=1===av.orgDataCount||t.x===d.x?e.x(b[0])-e.x(ax[0]):e.isTimeSeries()?e.x(b[0])-e.x(ax[0]):e.x(t.x)-e.x(d.x):1!==e.data.targets[0].values.length?az=e.x(b[0])-e.x(ax[0]):e.isTimeSeries()?(t=e.getValueOnIndex(e.data.targets[0].values,0),d=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),az=e.x(t.x)-e.x(d.x)):az=G(ax)/2,af=G(b)/G(ax),ay="translate("+az+",0) scale("+af+",1)",e.hideXGridFocus(),e.hideTooltip(),g.transition().ease("linear").duration(an).each(function(){aj.add(e.axes.x.transition().call(e.xAxis)),aj.add(aa.transition().attr("transform",ay)),aj.add(l.transition().attr("transform",ay)),aj.add(c.transition().attr("transform",ay)),aj.add(a.transition().attr("transform",ay)),aj.add(ac.transition().attr("transform",ay)),aj.add(ae.filter(e.isRegionOnX).transition().attr("transform",ay)),aj.add(ah.transition().attr("transform",ay)),aj.add(ag.transition().attr("transform",ay))}).call(aj,function(){var j,n=[],m=[],k=[];if(ab){for(j=0;ab>j;j++){n.push("."+O.shape+"-"+(ad+j)),m.push("."+O.text+"-"+(ad+j)),k.push("."+O.eventRect+"-"+(ad+j))}e.svg.selectAll("."+O.shapes).selectAll(n).remove(),e.svg.selectAll("."+O.texts).selectAll(m).remove(),e.svg.selectAll("."+O.eventRects).selectAll(k).remove(),e.svg.select("."+O.xgrid).remove()}ah.attr("transform",null).attr(e.xgridAttr),ag.attr("transform",null),ag.select("line").attr("x1",h.axis_rotated?0:ao).attr("x2",h.axis_rotated?e.width:ao),ag.select("text").attr("x",h.axis_rotated?e.width:0).attr("y",ao),aa.attr("transform",null).attr("d",au),l.attr("transform",null).attr("d",at),c.attr("transform",null).attr("d",ar),a.attr("transform",null).attr("cx",aq).attr("cy",ap),ac.attr("transform",null).attr("x",am).attr("y",ak).style("fill-opacity",e.opacityForText.bind(e)),ae.attr("transform",null),ae.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),h.interaction_enabled&&e.redrawEventRect(),al(),e.flowing=!1})}},S.selected=function(e){var d=this.internal,f=d.d3;return f.merge(d.main.selectAll("."+O.shapes+d.getTargetSelectorSuffix(e)).selectAll("."+O.shape).filter(function(){return f.select(this).classed(O.SELECTED)}).map(function(b){return b.map(function(g){var c=g.__data__;return c.data?c.data:c})}))},S.select=function(h,g,m){var l=this.internal,k=l.d3,j=l.config;j.data_selection_enabled&&l.main.selectAll("."+O.shapes).selectAll("."+O.shape).each(function(f,e){var d=k.select(this),c=f.data?f.data.id:f.id,b=l.getToggle(this,f).bind(l),a=j.data_selection_grouped||!h||h.indexOf(c)>=0,r=!g||g.indexOf(e)>=0,p=d.classed(O.SELECTED);d.classed(O.line)||d.classed(O.area)||(a&&r?j.data_selection_isselectable(f)&&!p&&b(!0,d.classed(O.SELECTED,!0),f,e):J(m)&&m&&p&&b(!1,d.classed(O.SELECTED,!1),f,e))})},S.unselect=function(g,f){var k=this.internal,j=k.d3,h=k.config;h.data_selection_enabled&&k.main.selectAll("."+O.shapes).selectAll("."+O.shape).each(function(o,l){var e=j.select(this),d=o.data?o.data.id:o.id,c=k.getToggle(this,o).bind(k),b=h.data_selection_grouped||!g||g.indexOf(d)>=0,a=!f||f.indexOf(l)>=0,p=e.classed(O.SELECTED);e.classed(O.line)||e.classed(O.area)||b&&a&&h.data_selection_isselectable(o)&&p&&c(!1,e.classed(O.SELECTED,!1),o,l)})},S.transform=function(f,e){var h=this.internal,g=["pie","donut"].indexOf(f)>=0?{withTransform:!0}:null;h.transformTo(e,f,g)},R.transformTo=function(h,g,m){var l=this,k=!l.hasArcType(),j=m||{withTransitionForAxis:k};j.withTransitionForTransform=!1,l.transiting=!1,l.setTargetType(h,g),l.updateTargets(l.data.targets),l.updateAndRedraw(j)},S.groups=function(e){var d=this.internal,f=d.config;return K(e)?f.data_groups:(f.data_groups=e,d.redraw(),f.data_groups)},S.xgrids=function(e){var d=this.internal,f=d.config;return e?(f.grid_x_lines=e,d.redrawWithoutRescale(),f.grid_x_lines):f.grid_x_lines},S.xgrids.add=function(d){var c=this.internal;return this.xgrids(c.config.grid_x_lines.concat(d?d:[]))},S.xgrids.remove=function(d){var c=this.internal;c.removeGridLines(d,!0)},S.ygrids=function(e){var d=this.internal,f=d.config;return e?(f.grid_y_lines=e,d.redrawWithoutRescale(),f.grid_y_lines):f.grid_y_lines},S.ygrids.add=function(d){var c=this.internal;return this.ygrids(c.config.grid_y_lines.concat(d?d:[]))},S.ygrids.remove=function(d){var c=this.internal;c.removeGridLines(d,!1)},S.regions=function(e){var d=this.internal,f=d.config;return e?(f.regions=e,d.redrawWithoutRescale(),f.regions):f.regions},S.regions.add=function(e){var d=this.internal,f=d.config;return e?(f.regions=f.regions.concat(e),d.redrawWithoutRescale(),f.regions):f.regions},S.regions.remove=function(h){var g,m,l,k=this.internal,j=k.config;return h=h||{},g=k.getOption(h,"duration",j.transition_duration),m=k.getOption(h,"classes",[O.region]),l=k.main.select("."+O.regions).selectAll(m.map(function(b){return"."+b})),(g?l.transition().duration(g):l).style("opacity",0).remove(),j.regions=j.regions.filter(function(d){var c=!1;return d["class"]?(d["class"].split(" ").forEach(function(b){m.indexOf(b)>=0&&(c=!0)}),!c):!0}),j.regions},S.data=function(d){var c=this.internal.data.targets;return"undefined"==typeof d?c:c.filter(function(a){return[].concat(d).indexOf(a.id)>=0})},S.data.shown=function(b){return this.internal.filterTargetsToShow(this.data(b))},S.data.values=function(e){var d,f=null;return e&&(d=this.data(e),f=d[0]?d[0].values.map(function(b){return b.value}):null),f},S.data.names=function(b){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",b)},S.data.colors=function(b){return this.internal.updateDataAttributes("colors",b)},S.data.axes=function(b){return this.internal.updateDataAttributes("axes",b)},S.category=function(f,e){var h=this.internal,g=h.config;return arguments.length>1&&(g.axis_x_categories[f]=e,h.redraw()),g.axis_x_categories[f]},S.categories=function(e){var d=this.internal,f=d.config;return arguments.length?(f.axis_x_categories=e,d.redraw(),f.axis_x_categories):f.axis_x_categories},S.color=function(d){var c=this.internal;return c.color(d)},S.x=function(d){var c=this.internal;return arguments.length&&(c.updateTargetX(c.data.targets,d),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),c.data.xs},S.xs=function(d){var c=this.internal;return arguments.length&&(c.updateTargetXs(c.data.targets,d),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),c.data.xs},S.axis=function(){},S.axis.labels=function(d){var c=this.internal;arguments.length&&(Object.keys(d).forEach(function(a){c.axis.setLabelText(a,d[a])}),c.axis.updateLabels())},S.axis.max=function(e){var d=this.internal,f=d.config;return arguments.length?("object"==typeof e?(N(e.x)&&(f.axis_x_max=e.x),N(e.y)&&(f.axis_y_max=e.y),N(e.y2)&&(f.axis_y2_max=e.y2)):f.axis_y_max=f.axis_y2_max=e,void d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:f.axis_x_max,y:f.axis_y_max,y2:f.axis_y2_max}},S.axis.min=function(e){var d=this.internal,f=d.config;return arguments.length?("object"==typeof e?(N(e.x)&&(f.axis_x_min=e.x),N(e.y)&&(f.axis_y_min=e.y),N(e.y2)&&(f.axis_y2_min=e.y2)):f.axis_y_min=f.axis_y2_min=e,void d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:f.axis_x_min,y:f.axis_y_min,y2:f.axis_y2_min}},S.axis.range=function(b){return arguments.length?(J(b.max)&&this.axis.max(b.max),void (J(b.min)&&this.axis.min(b.min))):{max:this.axis.max(),min:this.axis.min()}},S.legend=function(){},S.legend.show=function(d){var c=this.internal;c.showLegend(c.mapToTargetIds(d)),c.updateAndRedraw({withLegend:!0})},S.legend.hide=function(d){var c=this.internal;c.hideLegend(c.mapToTargetIds(d)),c.updateAndRedraw({withLegend:!0})},S.resize=function(e){var d=this.internal,f=d.config;f.size_width=e?e.width:null,f.size_height=e?e.height:null,this.flush()},S.flush=function(){var b=this.internal;b.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},S.destroy=function(){var a=this.internal;return Z.clearInterval(a.intervalForObserveInserted),Z.onresize=null,a.selectChart.classed("c3",!1).html(""),Object.keys(a).forEach(function(b){a[b]=null}),null},S.tooltip=function(){},S.tooltip.show=function(f){var e,h,g=this.internal;f.mouse&&(h=f.mouse),f.data?g.isMultipleX()?(h=[g.x(f.data.x),g.getYScale(f.data.id)(f.data.value)],e=null):e=N(f.data.index)?f.data.index:g.getIndexByX(f.data.x):"undefined"!=typeof f.x?e=g.getIndexByX(f.x):"undefined"!=typeof f.index&&(e=f.index),g.dispatchEvent("mouseover",e,h),g.dispatchEvent("mousemove",e,h)},S.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)};var A;R.isSafari=function(){var a=Z.navigator.userAgent;return a.indexOf("Safari")>=0&&a.indexOf("Chrome")<0},R.isChrome=function(){var a=Z.navigator.userAgent;return a.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(g){if("function"!=typeof this){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var f=Array.prototype.slice.call(arguments,1),k=this,j=function(){},h=function(){return k.apply(this instanceof j?this:g,f.concat(Array.prototype.slice.call(arguments)))};return j.prototype=this.prototype,h.prototype=new j,h}),"function"==typeof define&&define.amd?define("c3",["d3"],P):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=P:Z.c3=P}(window);function bis_setLogicalSearchButtonWidth(){jQuery("#bis_re_search_by").multiselect({buttonWidth:"200px"});jQuery("#bis_re_search_status").multiselect({buttonWidth:"200px"})}function bis_logicalResetFields(){jQuery("#bis_re_search_status").multiselect("select","all");jQuery("#bis_re_search_status").multiselect("deselect",["1","0"]);jQuery("#bis_re_search_by").multiselect("select","name");jQuery("#bis_re_search_by").multiselect("deselect","description");jQuery("#bis_re_search_value").val("")}function bis_showLogicalRulesList(){jQuery.get(BISAjax.ajaxurl,{action:"bis_get_logical_rules"},function(a){bis_setLogicalSearchButtonWidth();bis_showLogicalRules(a);bis_logicalResetFields()})}function bis_showLogicalRules(a){jQuery("#logical_rules_list_content").show();jQuery("#logical_rules_child_content").html("");if(a.status==="success"){var e={logicalrules:a.data};var d=jQuery("#bis-logicalRulesTemplate").html();var c=Handlebars.compile(d);var b=c(e);jQuery(".bis-rows-no").html(a.data.length);jQuery("#bis-logicalRulesContent").html(b);jQuery(".bis-rule-delete").on("click",deleteRule);jQuery(".bis-rule-edit").on("click",bis_edit_rule);jQuery("#bis-logical-rules-table").show();jQuery("#bis-logical-no-result").hide()}else{jQuery("#bis-logical-rules-table").hide();jQuery(".bis-rows-no").html(0);jQuery("#bis-logical-no-result").children().html(a.data);jQuery("#bis-logical-no-result").show()}}function bis_edit_rule(){var b=jQuery(this).closest("div").children()[0].value;var a=jQuery.get(ajaxurl,{action:"bis_re_edit_rule",ruleId:b,bis_nonce:BISAjax.bis_rules_engine_nonce});a.done(function(c){jQuery("#logical_rules_child_content").html(c);jQuery("#logical_rules_list_content").hide();jQuery("#logical_rules_child_content").show()})}function deleteRule(){var a=jQuery(this).closest("div").children()[0].value;var b=jQuery(jQuery(this).closest("td").children()[0]).html();bis_confirm("<h4>"+breCV.delete_confirm+' "'+b+'" ?</h4>',function(c){if(c){var d=jQuery.get(ajaxurl,{action:"bis_re_delete_rule",ruleId:a,bis_nonce:BISAjax.bis_rules_engine_nonce});d.done(function(e){if(e.status!=="error"){bis_showLogicalRules(e.data)}else{bis_showErrorMessage(e.data)}})}})}function showResponse(b,c,d,a){bis_showLogicalRules(b)}function bis_verify_pcode(c,a){jQuery("#bis_re_pc_"+c).html('<i class="glyphicon glyphicon-time bis-glyphi-position"></i>'+breCV.pc_button_please_wait);jQuery("#bis_re_pc_"+c).attr("disabled","true");jQuery("#pc_"+c).attr("readonly","true");var b=jQuery("#pc_"+c).val();var d="https://marketplace.envato.com/api/v3/rules4wp/"+a+"/verify-purchase:"+b+".json";jQuery.get(d,function(g){var e=jQuery(".bis-verify-lic-div").width()-52;jQuery("#"+c+"_sId").width(e);var h=g["verify-purchase"];var f=h.buyer;if(f!=null){bis_save_success_ver(h,c,b)}else{bis_licver_showErrorMessage(c,breCV.invalid_purchase_code);bis_save_fail_ver(c,b)}}).fail(function(){bis_licver_showErrorMessage(c,breCV.error_verify_pcode);bis_save_fail_ver(c,b)})}function bis_reset_activate_button(a){jQuery("#bis_re_pc_"+a).html('<i class="glyphicon glyphicon-ok-sign bis-glyphi-position"></i>'+breCV.pc_button_activate);jQuery("#bis_re_pc_"+a).removeAttr("disabled");jQuery("#pc_"+a).removeAttr("readonly")}function bis_validate_dates(){var b=jQuery.trim(jQuery("#bis_re_from_date").val());var a=jQuery.trim(jQuery("#bis_re_to_date").val());if(b===""){bis_alert(breCV.bis_select_from_date);return false}if(a===""){bis_alert(breCV.bis_select_to_date);return false}if(b>a){bis_alert(breCV.bis_from_greater_to_date);return false}}function bis_save_success_ver(c,b,a){jQuery.post(BISAjax.ajaxurl,{action:"bis_re_activate_plugin",bis_nonce:BISAjax.bis_rules_engine_nonce,item_name:c.item_name,item_id:c.item_id,buyer:c.buyer,licence_type:c.licence,product_id:b,purchase_date:c.created_at,pur_code:a},function(d){jQuery("#"+b+"_smessage").html(breCV.pc_plugin_act);jQuery("#"+b+"_sId").show();jQuery("#"+b+"_close_sId").click(function(){jQuery("#"+b+"_sId").hide()})}).always(function(){bis_reset_activate_button(b)})}function bis_save_fail_ver(b,a){jQuery.post(BISAjax.ajaxurl,{action:"bis_re_acplg_error",bis_nonce:BISAjax.bis_rules_engine_nonce,product_id:b,pur_code:a},function(c){}).always(function(){bis_reset_activate_button(b)})}function bis_licver_showErrorMessage(b,c){var a=jQuery(".bis-verify-lic-div").width()-52;jQuery("#"+b+"_fId").width(a);jQuery("#"+b+"_fmessage").html(c);jQuery("#"+b+"_fId").show();jQuery("#"+b+"_close_fId").click(function(){jQuery("#"+b+"_fId").hide()})}function bis_showErrorMessage(a){jQuery("#alert_failure_message").html(a);jQuery("#alert_failure_id").show()}function bis_showSuccessMessage(a){jQuery("#alert_success_message").html(a);jQuery("#alert_success_id").show();jQuery("#alert_success_id").fadeOut(3000,function(){})}function bis_alert(a){BootstrapDialog.show({title:"<h4>Error</h4>",message:"<h4>"+a+"</h4>",type:BootstrapDialog.TYPE_DANGER,buttons:[{id:"btn-ok",label:"OK",cssClass:"btn-primary",autospin:false,action:function(b){b.close()}}]})}function bis_warn(a){BootstrapDialog.show({title:"<h4>Warning</h4>",message:"<h4>"+a+"</h4>",type:BootstrapDialog.TYPE_WARNING,buttons:[{id:"btn-ok",label:"OK",cssClass:"btn-primary",autospin:false,action:function(b){b.close()}}]})}function bis_confirm(a,b){new BootstrapDialog({title:"<h4>Confirm</h4>",message:a,closable:false,type:BootstrapDialog.TYPE_WARNING,data:{callback:b},buttons:[{label:"Cancel",action:function(c){typeof c.getData("callback")==="function"&&c.getData("callback")(false);c.close()}},{label:"OK",cssClass:"btn-primary",action:function(c){typeof c.getData("callback")==="function"&&c.getData("callback")(true);c.close()}}]}).open()}function bis_validate_url(a){var b=/^(http|https)?:\/\/[a-zA-Z0-9]/;if(!(a.substr(0,7)==="http://"||(a.substr(0,8)==="https://"))){bis_alert(breCV.protocal_missing);return false}if(!b.test(a)){bis_alert(breCV.invalid_url);return false}return true}function bis_validateRulesName(a){if(a===""){bis_alert(breCV.enter_rule_name);return false}else{if(bis_isContainsSpecialChars(a)){bis_alert("Rule name should not contain special characters.");return false}}return true}function bis_validateName(b,a){if(b===""){bis_alert(a[0]);return false}else{if(a[1]&&bis_isContainsSpecialChars(b)){bis_alert(a[1]);return false}}return true}function bis_get_localized_values(b,a){for(i=0;i<b.length;i++){b[i].name=a[b[i].id]}return b}function bis_before_request_send(a){jQuery(".page-loader").show();jQuery("body").addClass("loading")}function bis_request_complete(){jQuery(".page-loader").hide();jQuery("body").removeClass("loading")}function bis_extractDomain(a){var b;if(a.indexOf("://")>-1){b=a.split("/")[2]}else{b=a.split("/")[0]}b=b.split(":")[0];return b}function bis_capsFirstLetter(a){return a.substr(0,1).toUpperCase()+a.substr(1)}
/*
 * Select2 4.0.2
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}}(function(c){var b=(function(){if(c&&c.fn&&c.fn.bis_select2&&c.fn.bis_select2.amd){var d=c.fn.bis_select2.amd}var d;(function(){if(!d||!d.requirejs){if(!d){d={}}else{e=d}var f,e,g;(function(m){var p,h,u,v,l={},k={},B={},y={},t=Object.prototype.hasOwnProperty,r=[].slice,s=/\.js$/;function C(D,E){return t.call(D,E)}function w(G,E){var O,K,I,L,P,H,R,S,N,M,J,Q=E&&E.split("/"),F=B.map,D=(F&&F["*"])||{};if(G&&G.charAt(0)==="."){if(E){G=G.split("/");P=G.length-1;if(B.nodeIdCompat&&s.test(G[P])){G[P]=G[P].replace(s,"")}G=Q.slice(0,Q.length-1).concat(G);for(N=0;N<G.length;N+=1){J=G[N];if(J==="."){G.splice(N,1);N-=1}else{if(J===".."){if(N===1&&(G[2]===".."||G[0]==="..")){break}else{if(N>0){G.splice(N-1,2);N-=2}}}}}G=G.join("/")}else{if(G.indexOf("./")===0){G=G.substring(2)}}}if((Q||D)&&F){O=G.split("/");for(N=O.length;N>0;N-=1){K=O.slice(0,N).join("/");if(Q){for(M=Q.length;M>0;M-=1){I=F[Q.slice(0,M).join("/")];if(I){I=I[K];if(I){L=I;H=N;break}}}}if(L){break}if(!R&&D&&D[K]){R=D[K];S=N}}if(!L&&R){L=R;H=S}if(L){O.splice(0,H,L);G=O.join("/")}}return G}function A(D,E){return function(){var F=r.call(arguments,0);if(typeof F[0]!=="string"&&F.length===1){F.push(null)}return h.apply(m,F.concat([D,E]))}}function x(D){return function(E){return w(E,D)}}function n(D){return function(E){l[D]=E}}function o(E){if(C(k,E)){var D=k[E];delete k[E];y[E]=true;p.apply(m,D)}if(!C(l,E)&&!C(y,E)){throw new Error("No "+E)}return l[E]}function z(E){var F,D=E?E.indexOf("!"):-1;if(D>-1){F=E.substring(0,D);E=E.substring(D+1,E.length)}return[F,E]}u=function(E,D){var F,H=z(E),G=H[0];E=H[1];if(G){G=w(G,D);F=o(G)}if(G){if(F&&F.normalize){E=F.normalize(E,x(D))}else{E=w(E,D)}}else{E=w(E,D);H=z(E);G=H[0];E=H[1];if(G){F=o(G)}}return{f:G?G+"!"+E:E,n:E,pr:G,p:F}};function j(D){return function(){return(B&&B.config&&B.config[D])||{}}}v={require:function(D){return A(D)},exports:function(D){var E=l[D];if(typeof E!=="undefined"){return E}else{return(l[D]={})}},module:function(D){return{id:D,uri:"",exports:l[D],config:j(D)}}};p=function(E,O,N,M){var H,L,I,D,G,J=[],F=typeof N,K;M=M||E;if(F==="undefined"||F==="function"){O=!O.length&&N.length?["require","exports","module"]:O;for(G=0;G<O.length;G+=1){D=u(O[G],M);L=D.f;if(L==="require"){J[G]=v.require(E)}else{if(L==="exports"){J[G]=v.exports(E);K=true}else{if(L==="module"){H=J[G]=v.module(E)}else{if(C(l,L)||C(k,L)||C(y,L)){J[G]=o(L)}else{if(D.p){D.p.load(D.n,A(M,true),n(L),{});J[G]=l[L]}else{throw new Error(E+" missing "+L)}}}}}}I=N?N.apply(l[E],J):undefined;if(E){if(H&&H.exports!==m&&H.exports!==l[E]){l[E]=H.exports}else{if(I!==m||!K){l[E]=I}}}}else{if(E){l[E]=N}}};f=e=h=function(G,H,D,E,F){if(typeof G==="string"){if(v[G]){return v[G](H)}return o(u(G,H).f)}else{if(!G.splice){B=G;if(B.deps){h(B.deps,B.callback)}if(!H){return}if(H.splice){G=H;H=D;D=null}else{G=m}}}H=H||function(){};if(typeof D==="function"){D=E;E=F}if(E){p(m,G,H,D)}else{setTimeout(function(){p(m,G,H,D)},4)}return h};h.config=function(D){return h(D)};f._defined=l;g=function(D,E,F){if(typeof D!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!E.splice){F=E;E=[]}if(!C(l,D)&&!C(k,D)){k[D]=[D,E,F]}};g.amd={jQuery:true}}());d.requirejs=f;d.require=e;d.define=g}}());d.define("almond",function(){});d.define("jquery",[],function(){var e=c||$;if(e==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page.")}return e});d.define("bis_select2/utils",["jquery"],function(h){var g={};g.Extend=function(n,k){var l={}.hasOwnProperty;function j(){this.constructor=n}for(var m in k){if(l.call(k,m)){n[m]=k[m]}}j.prototype=k.prototype;n.prototype=new j();n.__super__=k.prototype;return n};function f(o){var n=o.prototype;var l=[];for(var k in n){var j=n[k];if(typeof j!=="function"){continue}if(k==="constructor"){continue}l.push(k)}return l}g.Decorate=function(s,r){var p=f(r);var o=f(s);function v(){var w=Array.prototype.unshift;var x=r.prototype.constructor.length;var m=s.prototype.constructor;if(x>0){w.call(arguments,s.prototype.constructor);m=r.prototype.constructor}m.apply(this,arguments)}r.displayName=s.displayName;function j(){this.constructor=v}v.prototype=new j();for(var n=0;n<o.length;n++){var k=o[n];v.prototype[k]=s.prototype[k]}var u=function(m){var w=function(){};if(m in v.prototype){w=v.prototype[m]}var x=r.prototype[m];return function(){var y=Array.prototype.unshift;y.call(arguments,w);return x.apply(this,arguments)}};for(var t=0;t<p.length;t++){var l=p[t];v.prototype[l]=u(l)}return v};var e=function(){this.listeners={}};e.prototype.on=function(j,k){this.listeners=this.listeners||{};if(j in this.listeners){this.listeners[j].push(k)}else{this.listeners[j]=[k]}};e.prototype.trigger=function(j){var k=Array.prototype.slice;this.listeners=this.listeners||{};if(j in this.listeners){this.invoke(this.listeners[j],k.call(arguments,1))}if("*" in this.listeners){this.invoke(this.listeners["*"],arguments)}};e.prototype.invoke=function(l,m){for(var k=0,j=l.length;k<j;k++){l[k].apply(this,m)}};g.Observable=e;g.generateChars=function(m){var l="";for(var k=0;k<m;k++){var j=Math.floor(Math.random()*36);l+=j.toString(36)}return l};g.bind=function(k,j){return function(){k.apply(j,arguments)}};g._convertData=function(p){for(var o in p){var n=o.split("-");var j=p;if(n.length===1){continue}for(var l=0;l<n.length;l++){var m=n[l];m=m.substring(0,1).toLowerCase()+m.substring(1);if(!(m in j)){j[m]={}}if(l==n.length-1){j[m]=p[o]}j=j[m]}delete p[o]}return p};g.hasScroll=function(l,n){var m=h(n);var k=n.style.overflowX;var j=n.style.overflowY;if(k===j&&(j==="hidden"||j==="visible")){return false}if(k==="scroll"||j==="scroll"){return true}return(m.innerHeight()<n.scrollHeight||m.innerWidth()<n.scrollWidth)};g.escapeMarkup=function(j){var k={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof j!=="string"){return j}return String(j).replace(/[&<>"'\/\\]/g,function(l){return k[l]})};g.appendMany=function(j,l){if(h.fn.jquery.substr(0,3)==="1.7"){var k=h();h.map(l,function(m){k=k.add(m)});l=k}j.append(l)};return g});d.define("bis_select2/results",["jquery","./utils"],function(g,f){function e(h,j,k){this.$element=h;this.data=k;this.options=j;e.__super__.constructor.call(this)}f.Extend(e,f.Observable);e.prototype.render=function(){var h=g('<ul class="bis_select2-results__options" role="tree"></ul>');if(this.options.get("multiple")){h.attr("aria-multiselectable","true")}this.$results=h;return h};e.prototype.clear=function(){this.$results.empty()};e.prototype.displayMessage=function(l){var h=this.options.get("escapeMarkup");this.clear();this.hideLoading();var j=g('<li role="treeitem" aria-live="assertive" class="bis_select2-results__option"></li>');var k=this.options.get("translations").get(l.message);j.append(h(k(l.args)));j[0].className+=" bis_select2-results__message";this.$results.append(j)};e.prototype.hideMessages=function(){this.$results.find(".bis_select2-results__message").remove()};e.prototype.append=function(k){this.hideLoading();var h=[];if(k.results==null||k.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}k.results=this.sort(k.results);for(var m=0;m<k.results.length;m++){var j=k.results[m];var l=this.option(j);h.push(l)}this.$results.append(h)};e.prototype.position=function(h,j){var k=j.find(".bis_select2-results");k.append(h)};e.prototype.sort=function(h){var j=this.options.get("sorter");return j(h)};e.prototype.setClasses=function(){var h=this;this.data.current(function(m){var k=g.map(m,function(n){return n.id.toString()});var j=h.$results.find(".bis_select2-results__option[aria-selected]");j.each(function(){var o=g(this);var n=g.data(this,"data");var p=""+n.id;if((n.element!=null&&n.element.selected)||(n.element==null&&g.inArray(p,k)>-1)){o.attr("aria-selected","true")}else{o.attr("aria-selected","false")}});var l=j.filter("[aria-selected=true]");if(l.length>0){l.first().trigger("mouseenter")}else{j.first().trigger("mouseenter")}})};e.prototype.showLoading=function(k){this.hideLoading();var j=this.options.get("translations").get("searching");var l={disabled:true,loading:true,text:j(k)};var h=this.option(l);h.className+=" loading-results";this.$results.prepend(h)};e.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};e.prototype.option=function(m){var n=document.createElement("li");n.className="bis_select2-results__option";var v={role:"treeitem","aria-selected":"false"};if(m.disabled){delete v["aria-selected"];v["aria-disabled"]="true"}if(m.id==null){delete v["aria-selected"]}if(m._resultId!=null){n.id=m._resultId}if(m.title){n.title=m.title}if(m.children){v.role="group";v["aria-label"]=m.text;delete v["aria-selected"]}for(var o in v){var l=v[o];n.setAttribute(o,l)}if(m.children){var h=g(n);var t=document.createElement("strong");t.className="bis_select2-results__group";var s=g(t);this.template(m,t);var u=[];for(var r=0;r<m.children.length;r++){var k=m.children[r];var j=this.option(k);u.push(j)}var p=g("<ul></ul>",{"class":"bis_select2-results__options bis_select2-results__options--nested"});p.append(u);h.append(t);h.append(p)}else{this.template(m,n)}g.data(n,"data",m);return n};e.prototype.bind=function(h,k){var j=this;var l=h.id+"-results";this.$results.attr("id",l);h.on("results:all",function(m){j.clear();j.append(m.data);if(h.isOpen()){j.setClasses()}});h.on("results:append",function(m){j.append(m.data);if(h.isOpen()){j.setClasses()}});h.on("query",function(m){j.hideMessages();j.showLoading(m)});h.on("select",function(){if(!h.isOpen()){return}j.setClasses()});h.on("unselect",function(){if(!h.isOpen()){return}j.setClasses()});h.on("open",function(){j.$results.attr("aria-expanded","true");j.$results.attr("aria-hidden","false");j.setClasses();j.ensureHighlightVisible()});h.on("close",function(){j.$results.attr("aria-expanded","false");j.$results.attr("aria-hidden","true");j.$results.removeAttr("aria-activedescendant")});h.on("results:toggle",function(){var m=j.getHighlightedResults();if(m.length===0){return}m.trigger("mouseup")});h.on("results:select",function(){var m=j.getHighlightedResults();if(m.length===0){return}var n=m.data("data");if(m.attr("aria-selected")=="true"){j.trigger("close",{})}else{j.trigger("select",{data:n})}});h.on("results:previous",function(){var o=j.getHighlightedResults();var n=j.$results.find("[aria-selected]");var r=n.index(o);if(r===0){return}var m=r-1;if(o.length===0){m=0}var p=n.eq(m);p.trigger("mouseenter");var u=j.$results.offset().top;var t=p.offset().top;var s=j.$results.scrollTop()+(t-u);if(m===0){j.$results.scrollTop(0)}else{if(t-u<0){j.$results.scrollTop(s)}}});h.on("results:next",function(){var o=j.getHighlightedResults();var n=j.$results.find("[aria-selected]");var r=n.index(o);var m=r+1;if(m>=n.length){return}var p=n.eq(m);p.trigger("mouseenter");var u=j.$results.offset().top+j.$results.outerHeight(false);var t=p.offset().top+p.outerHeight(false);var s=j.$results.scrollTop()+t-u;if(m===0){j.$results.scrollTop(0)}else{if(t>u){j.$results.scrollTop(s)}}});h.on("results:focus",function(m){m.element.addClass("bis_select2-results__option--highlighted")});h.on("results:message",function(m){j.displayMessage(m)});if(g.fn.mousewheel){this.$results.on("mousewheel",function(p){var o=j.$results.scrollTop();var m=j.$results.get(0).scrollHeight-o+p.deltaY;var r=p.deltaY>0&&o-p.deltaY<=0;var n=p.deltaY<0&&m<=j.$results.height();if(r){j.$results.scrollTop(0);p.preventDefault();p.stopPropagation()}else{if(n){j.$results.scrollTop(j.$results.get(0).scrollHeight-j.$results.height());p.preventDefault();p.stopPropagation()}}})}this.$results.on("mouseup",".bis_select2-results__option[aria-selected]",function(m){var o=g(this);var n=o.data("data");if(o.attr("aria-selected")==="true"){if(j.options.get("multiple")){j.trigger("unselect",{originalEvent:m,data:n})}else{j.trigger("close",{})}return}j.trigger("select",{originalEvent:m,data:n})});this.$results.on("mouseenter",".bis_select2-results__option[aria-selected]",function(m){var n=g(this).data("data");j.getHighlightedResults().removeClass("bis_select2-results__option--highlighted");j.trigger("results:focus",{data:n,element:g(this)})})};e.prototype.getHighlightedResults=function(){var h=this.$results.find(".bis_select2-results__option--highlighted");return h};e.prototype.destroy=function(){this.$results.remove()};e.prototype.ensureHighlightVisible=function(){var j=this.getHighlightedResults();if(j.length===0){return}var h=this.$results.find("[aria-selected]");var k=h.index(j);var n=this.$results.offset().top;var m=j.offset().top;var l=this.$results.scrollTop()+(m-n);var o=m-n;l-=j.outerHeight(false)*2;if(k<=2){this.$results.scrollTop(0)}else{if(o>this.$results.outerHeight()||o<0){this.$results.scrollTop(l)}}};e.prototype.template=function(j,k){var l=this.options.get("templateResult");var h=this.options.get("escapeMarkup");var m=l(j,k);if(m==null){k.style.display="none"}else{if(typeof m==="string"){k.innerHTML=h(m)}else{g(k).append(m)}}};return e});d.define("bis_select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e});d.define("bis_select2/selection/base",["jquery","../utils","../keys"],function(h,g,e){function f(j,k){this.$element=j;this.options=k;f.__super__.constructor.call(this)}g.Extend(f,g.Observable);f.prototype.render=function(){var j=h('<span class="bis_select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');this._tabindex=0;if(this.$element.data("old-tabindex")!=null){this._tabindex=this.$element.data("old-tabindex")}else{if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}}j.attr("title",this.$element.attr("title"));j.attr("tabindex",this._tabindex);this.$selection=j;return j};f.prototype.bind=function(j,m){var l=this;var n=j.id+"-container";var k=j.id+"-results";this.container=j;this.$selection.on("focus",function(o){l.trigger("focus",o)});this.$selection.on("blur",function(o){l._handleBlur(o)});this.$selection.on("keydown",function(o){l.trigger("keypress",o);if(o.which===e.SPACE){o.preventDefault()}});j.on("results:focus",function(o){l.$selection.attr("aria-activedescendant",o.data._resultId)});j.on("selection:update",function(o){l.update(o.data)});j.on("open",function(){l.$selection.attr("aria-expanded","true");l.$selection.attr("aria-owns",k);l._attachCloseHandler(j)});j.on("close",function(){l.$selection.attr("aria-expanded","false");l.$selection.removeAttr("aria-activedescendant");l.$selection.removeAttr("aria-owns");l.$selection.focus();l._detachCloseHandler(j)});j.on("enable",function(){l.$selection.attr("tabindex",l._tabindex)});j.on("disable",function(){l.$selection.attr("tabindex","-1")})};f.prototype._handleBlur=function(j){var k=this;window.setTimeout(function(){if((document.activeElement==k.$selection[0])||(h.contains(k.$selection[0],document.activeElement))){return}k.trigger("blur",j)},1)};f.prototype._attachCloseHandler=function(j){var k=this;h(document.body).on("mousedown.bis_select2."+j.id,function(o){var l=h(o.target);var m=l.closest(".bis_select2");var n=h(".bis_select2.bis_select2-container--open");n.each(function(){var r=h(this);if(this==m[0]){return}var p=r.data("element");p.bis_select2("close")})})};f.prototype._detachCloseHandler=function(j){h(document.body).off("mousedown.bis_select2."+j.id)};f.prototype.position=function(j,l){var k=l.find(".selection");k.append(j)};f.prototype.destroy=function(){this._detachCloseHandler(this.container)};f.prototype.update=function(j){throw new Error("The `update` method must be defined in child classes.")};return f});d.define("bis_select2/selection/single",["jquery","./base","../utils","../keys"],function(h,f,g,e){function j(){j.__super__.constructor.apply(this,arguments)}g.Extend(j,f);j.prototype.render=function(){var k=j.__super__.render.call(this);k.addClass("bis_select2-selection--single");k.html('<span class="bis_select2-selection__rendered"></span><span class="bis_select2-selection__arrow" role="presentation"><b role="presentation"></b></span>');return k};j.prototype.bind=function(k,m){var l=this;j.__super__.bind.apply(this,arguments);var n=k.id+"-container";this.$selection.find(".bis_select2-selection__rendered").attr("id",n);this.$selection.attr("aria-labelledby",n);this.$selection.on("mousedown",function(o){if(o.which!==1){return}l.trigger("toggle",{originalEvent:o})});this.$selection.on("focus",function(o){});this.$selection.on("blur",function(o){});k.on("selection:update",function(o){l.update(o.data)})};j.prototype.clear=function(){this.$selection.find(".bis_select2-selection__rendered").empty()};j.prototype.display=function(n,l){var m=this.options.get("templateSelection");var k=this.options.get("escapeMarkup");return k(m(n,l))};j.prototype.selectionContainer=function(){return h("<span></span>")};j.prototype.update=function(m){if(m.length===0){this.clear();return}var k=m[0];var n=this.$selection.find(".bis_select2-selection__rendered");var l=this.display(k,n);n.empty().append(l);n.prop("title",k.title||k.text)};return j});d.define("bis_select2/selection/multiple",["jquery","./base","../utils"],function(h,e,g){function f(j,k){f.__super__.constructor.apply(this,arguments)}g.Extend(f,e);f.prototype.render=function(){var j=f.__super__.render.call(this);j.addClass("bis_select2-selection--multiple");j.html('<ul class="bis_select2-selection__rendered"></ul>');return j};f.prototype.bind=function(j,l){var k=this;f.__super__.bind.apply(this,arguments);this.$selection.on("click",function(m){k.trigger("toggle",{originalEvent:m})});this.$selection.on("click",".bis_select2-selection__choice__remove",function(n){if(k.options.get("disabled")){return}var o=h(this);var m=o.parent();var p=m.data("data");k.trigger("unselect",{originalEvent:n,data:p})})};f.prototype.clear=function(){this.$selection.find(".bis_select2-selection__rendered").empty()};f.prototype.display=function(m,k){var l=this.options.get("templateSelection");var j=this.options.get("escapeMarkup");return j(l(m,k))};f.prototype.selectionContainer=function(){var j=h('<li class="bis_select2-selection__choice"><span class="bis_select2-selection__choice__remove" role="presentation">&times;</span></li>');return j};f.prototype.update=function(n){this.clear();if(n.length===0){return}var k=[];for(var p=0;p<n.length;p++){var l=n[p];var j=this.selectionContainer();var m=this.display(l,j);j.append(m);j.prop("title",l.title||l.text);j.data("data",l);k.push(j)}var o=this.$selection.find(".bis_select2-selection__rendered");g.appendMany(o,k)};return f});d.define("bis_select2/selection/placeholder",["../utils"],function(f){function e(j,g,h){this.placeholder=this.normalizePlaceholder(h.get("placeholder"));j.call(this,g,h)}e.prototype.normalizePlaceholder=function(g,h){if(typeof h==="string"){h={id:"",text:h}}return h};e.prototype.createPlaceholder=function(h,j){var g=this.selectionContainer();g.html(this.display(j));g.addClass("bis_select2-selection__placeholder").removeClass("bis_select2-selection__choice");return g};e.prototype.update=function(l,k){var h=(k.length==1&&k[0].id!=this.placeholder.id);var j=k.length>1;if(j||h){return l.call(this,k)}this.clear();var g=this.createPlaceholder(this.placeholder);this.$selection.find(".bis_select2-selection__rendered").append(g)};return e});d.define("bis_select2/selection/allowClear",["jquery","../keys"],function(f,e){function g(){}g.prototype.bind=function(k,h,l){var j=this;k.call(this,h,l);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.")}}this.$selection.on("mousedown",".bis_select2-selection__clear",function(m){j._handleClear(m)});h.on("keypress",function(m){j._handleKeyboardClear(m,h)})};g.prototype._handleClear=function(j,h){if(this.options.get("disabled")){return}var m=this.$selection.find(".bis_select2-selection__clear");if(m.length===0){return}h.stopPropagation();var l=m.data("data");for(var n=0;n<l.length;n++){var k={data:l[n]};this.trigger("unselect",k);if(k.prevented){return}}this.$element.val(this.placeholder.id).trigger("change");this.trigger("toggle",{})};g.prototype._handleKeyboardClear=function(k,j,h){if(h.isOpen()){return}if(j.which==e.DELETE||j.which==e.BACKSPACE){this._handleClear(j)}};g.prototype.update=function(k,j){k.call(this,j);if(this.$selection.find(".bis_select2-selection__placeholder").length>0||j.length===0){return}var h=f('<span class="bis_select2-selection__clear">&times;</span>');h.data("data",j);this.$selection.find(".bis_select2-selection__rendered").prepend(h)};return g});d.define("bis_select2/selection/search",["jquery","../utils","../keys"],function(h,g,e){function f(l,j,k){l.call(this,j,k)}f.prototype.render=function(k){var j=h('<li class="bis_select2-search bis_select2-search--inline"><input class="bis_select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=j;this.$search=j.find("input");var l=k.call(this);this._transferTabIndex();return l};f.prototype.bind=function(n,k,o){var l=this;n.call(this,k,o);k.on("open",function(){l.$search.trigger("focus")});k.on("close",function(){l.$search.val("");l.$search.removeAttr("aria-activedescendant");l.$search.trigger("focus")});k.on("enable",function(){l.$search.prop("disabled",false);l._transferTabIndex()});k.on("disable",function(){l.$search.prop("disabled",true)});k.on("focus",function(p){l.$search.trigger("focus")});k.on("results:focus",function(p){l.$search.attr("aria-activedescendant",p.id)});this.$selection.on("focusin",".bis_select2-search--inline",function(p){l.trigger("focus",p)});this.$selection.on("focusout",".bis_select2-search--inline",function(p){l._handleBlur(p)});this.$selection.on("keydown",".bis_select2-search--inline",function(p){p.stopPropagation();l.trigger("keypress",p);l._keyUpPrevented=p.isDefaultPrevented();var s=p.which;if(s===e.BACKSPACE&&l.$search.val()===""){var r=l.$searchContainer.prev(".bis_select2-selection__choice");if(r.length>0){var t=r.data("data");l.searchRemoveChoice(t);p.preventDefault()}}});var m=document.documentMode;var j=m&&m<=11;this.$selection.on("input.searchcheck",".bis_select2-search--inline",function(p){if(j){l.$selection.off("input.search input.searchcheck");return}l.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".bis_select2-search--inline",function(p){if(j&&p.type==="input"){l.$selection.off("input.search input.searchcheck");return}var r=p.which;if(r==e.SHIFT||r==e.CTRL||r==e.ALT){return}if(r==e.TAB){return}l.handleSearch(p)})};f.prototype._transferTabIndex=function(j){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};f.prototype.createPlaceholder=function(j,k){this.$search.attr("placeholder",k.text)};f.prototype.update=function(l,k){var j=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");l.call(this,k);this.$selection.find(".bis_select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(j){this.$search.focus()}};f.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var j=this.$search.val();this.trigger("query",{term:j})}this._keyUpPrevented=false};f.prototype.searchRemoveChoice=function(k,j){this.trigger("unselect",{data:j});this.$search.val(j.text);this.handleSearch()};f.prototype.resizeSearch=function(){this.$search.css("width","25px");var j="";if(this.$search.attr("placeholder")!==""){j=this.$selection.find(".bis_select2-selection__rendered").innerWidth()}else{var k=this.$search.val().length+1;j=(k*0.75)+"em"}this.$search.css("width",j)};return f});d.define("bis_select2/selection/eventRelay",["jquery"],function(e){function f(){}f.prototype.bind=function(l,g,m){var h=this;var j=["open","opening","close","closing","select","selecting","unselect","unselecting"];var k=["opening","closing","selecting","unselecting"];l.call(this,g,m);g.on("*",function(o,p){if(e.inArray(o,j)===-1){return}p=p||{};var n=e.Event("bis_select2:"+o,{params:p});h.$element.trigger(n);if(e.inArray(o,k)===-1){return}p.prevented=n.isDefaultPrevented()})};return f});d.define("bis_select2/translation",["jquery","require"],function(g,f){function e(h){this.dict=h||{}}e.prototype.all=function(){return this.dict};e.prototype.get=function(h){return this.dict[h]};e.prototype.extend=function(h){this.dict=g.extend({},h.all(),this.dict)};e._cache={};e.loadPath=function(j){if(!(j in e._cache)){var h=f(j);e._cache[j]=h}return new e(e._cache[j])};return e});d.define("bis_select2/diacritics",[],function(){var e={"\u24B6":"A","\uFF21":"A","\u00C0":"A","\u00C1":"A","\u00C2":"A","\u1EA6":"A","\u1EA4":"A","\u1EAA":"A","\u1EA8":"A","\u00C3":"A","\u0100":"A","\u0102":"A","\u1EB0":"A","\u1EAE":"A","\u1EB4":"A","\u1EB2":"A","\u0226":"A","\u01E0":"A","\u00C4":"A","\u01DE":"A","\u1EA2":"A","\u00C5":"A","\u01FA":"A","\u01CD":"A","\u0200":"A","\u0202":"A","\u1EA0":"A","\u1EAC":"A","\u1EB6":"A","\u1E00":"A","\u0104":"A","\u023A":"A","\u2C6F":"A","\uA732":"AA","\u00C6":"AE","\u01FC":"AE","\u01E2":"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B","\uFF22":"B","\u1E02":"B","\u1E04":"B","\u1E06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24B8":"C","\uFF23":"C","\u0106":"C","\u0108":"C","\u010A":"C","\u010C":"C","\u00C7":"C","\u1E08":"C","\u0187":"C","\u023B":"C","\uA73E":"C","\u24B9":"D","\uFF24":"D","\u1E0A":"D","\u010E":"D","\u1E0C":"D","\u1E10":"D","\u1E12":"D","\u1E0E":"D","\u0110":"D","\u018B":"D","\u018A":"D","\u0189":"D","\uA779":"D","\u01F1":"DZ","\u01C4":"DZ","\u01F2":"Dz","\u01C5":"Dz","\u24BA":"E","\uFF25":"E","\u00C8":"E","\u00C9":"E","\u00CA":"E","\u1EC0":"E","\u1EBE":"E","\u1EC4":"E","\u1EC2":"E","\u1EBC":"E","\u0112":"E","\u1E14":"E","\u1E16":"E","\u0114":"E","\u0116":"E","\u00CB":"E","\u1EBA":"E","\u011A":"E","\u0204":"E","\u0206":"E","\u1EB8":"E","\u1EC6":"E","\u0228":"E","\u1E1C":"E","\u0118":"E","\u1E18":"E","\u1E1A":"E","\u0190":"E","\u018E":"E","\u24BB":"F","\uFF26":"F","\u1E1E":"F","\u0191":"F","\uA77B":"F","\u24BC":"G","\uFF27":"G","\u01F4":"G","\u011C":"G","\u1E20":"G","\u011E":"G","\u0120":"G","\u01E6":"G","\u0122":"G","\u01E4":"G","\u0193":"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H","\uFF28":"H","\u0124":"H","\u1E22":"H","\u1E26":"H","\u021E":"H","\u1E24":"H","\u1E28":"H","\u1E2A":"H","\u0126":"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I","\uFF29":"I","\u00CC":"I","\u00CD":"I","\u00CE":"I","\u0128":"I","\u012A":"I","\u012C":"I","\u0130":"I","\u00CF":"I","\u1E2E":"I","\u1EC8":"I","\u01CF":"I","\u0208":"I","\u020A":"I","\u1ECA":"I","\u012E":"I","\u1E2C":"I","\u0197":"I","\u24BF":"J","\uFF2A":"J","\u0134":"J","\u0248":"J","\u24C0":"K","\uFF2B":"K","\u1E30":"K","\u01E8":"K","\u1E32":"K","\u0136":"K","\u1E34":"K","\u0198":"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L","\uFF2C":"L","\u013F":"L","\u0139":"L","\u013D":"L","\u1E36":"L","\u1E38":"L","\u013B":"L","\u1E3C":"L","\u1E3A":"L","\u0141":"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L","\u01C7":"LJ","\u01C8":"Lj","\u24C2":"M","\uFF2D":"M","\u1E3E":"M","\u1E40":"M","\u1E42":"M","\u2C6E":"M","\u019C":"M","\u24C3":"N","\uFF2E":"N","\u01F8":"N","\u0143":"N","\u00D1":"N","\u1E44":"N","\u0147":"N","\u1E46":"N","\u0145":"N","\u1E4A":"N","\u1E48":"N","\u0220":"N","\u019D":"N","\uA790":"N","\uA7A4":"N","\u01CA":"NJ","\u01CB":"Nj","\u24C4":"O","\uFF2F":"O","\u00D2":"O","\u00D3":"O","\u00D4":"O","\u1ED2":"O","\u1ED0":"O","\u1ED6":"O","\u1ED4":"O","\u00D5":"O","\u1E4C":"O","\u022C":"O","\u1E4E":"O","\u014C":"O","\u1E50":"O","\u1E52":"O","\u014E":"O","\u022E":"O","\u0230":"O","\u00D6":"O","\u022A":"O","\u1ECE":"O","\u0150":"O","\u01D1":"O","\u020C":"O","\u020E":"O","\u01A0":"O","\u1EDC":"O","\u1EDA":"O","\u1EE0":"O","\u1EDE":"O","\u1EE2":"O","\u1ECC":"O","\u1ED8":"O","\u01EA":"O","\u01EC":"O","\u00D8":"O","\u01FE":"O","\u0186":"O","\u019F":"O","\uA74A":"O","\uA74C":"O","\u01A2":"OI","\uA74E":"OO","\u0222":"OU","\u24C5":"P","\uFF30":"P","\u1E54":"P","\u1E56":"P","\u01A4":"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q","\uFF31":"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R","\uFF32":"R","\u0154":"R","\u1E58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1E5A":"R","\u1E5C":"R","\u0156":"R","\u1E5E":"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S","\uFF33":"S","\u1E9E":"S","\u015A":"S","\u1E64":"S","\u015C":"S","\u1E60":"S","\u0160":"S","\u1E66":"S","\u1E62":"S","\u1E68":"S","\u0218":"S","\u015E":"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T","\uFF34":"T","\u1E6A":"T","\u0164":"T","\u1E6C":"T","\u021A":"T","\u0162":"T","\u1E70":"T","\u1E6E":"T","\u0166":"T","\u01AC":"T","\u01AE":"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U","\uFF35":"U","\u00D9":"U","\u00DA":"U","\u00DB":"U","\u0168":"U","\u1E78":"U","\u016A":"U","\u1E7A":"U","\u016C":"U","\u00DC":"U","\u01DB":"U","\u01D7":"U","\u01D5":"U","\u01D9":"U","\u1EE6":"U","\u016E":"U","\u0170":"U","\u01D3":"U","\u0214":"U","\u0216":"U","\u01AF":"U","\u1EEA":"U","\u1EE8":"U","\u1EEE":"U","\u1EEC":"U","\u1EF0":"U","\u1EE4":"U","\u1E72":"U","\u0172":"U","\u1E76":"U","\u1E74":"U","\u0244":"U","\u24CB":"V","\uFF36":"V","\u1E7C":"V","\u1E7E":"V","\u01B2":"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W","\uFF37":"W","\u1E80":"W","\u1E82":"W","\u0174":"W","\u1E86":"W","\u1E84":"W","\u1E88":"W","\u2C72":"W","\u24CD":"X","\uFF38":"X","\u1E8A":"X","\u1E8C":"X","\u24CE":"Y","\uFF39":"Y","\u1EF2":"Y","\u00DD":"Y","\u0176":"Y","\u1EF8":"Y","\u0232":"Y","\u1E8E":"Y","\u0178":"Y","\u1EF6":"Y","\u1EF4":"Y","\u01B3":"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z","\uFF3A":"Z","\u0179":"Z","\u1E90":"Z","\u017B":"Z","\u017D":"Z","\u1E92":"Z","\u1E94":"Z","\u01B5":"Z","\u0224":"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a","\uFF41":"a","\u1E9A":"a","\u00E0":"a","\u00E1":"a","\u00E2":"a","\u1EA7":"a","\u1EA5":"a","\u1EAB":"a","\u1EA9":"a","\u00E3":"a","\u0101":"a","\u0103":"a","\u1EB1":"a","\u1EAF":"a","\u1EB5":"a","\u1EB3":"a","\u0227":"a","\u01E1":"a","\u00E4":"a","\u01DF":"a","\u1EA3":"a","\u00E5":"a","\u01FB":"a","\u01CE":"a","\u0201":"a","\u0203":"a","\u1EA1":"a","\u1EAD":"a","\u1EB7":"a","\u1E01":"a","\u0105":"a","\u2C65":"a","\u0250":"a","\uA733":"aa","\u00E6":"ae","\u01FD":"ae","\u01E3":"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b","\uFF42":"b","\u1E03":"b","\u1E05":"b","\u1E07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24D2":"c","\uFF43":"c","\u0107":"c","\u0109":"c","\u010B":"c","\u010D":"c","\u00E7":"c","\u1E09":"c","\u0188":"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d","\uFF44":"d","\u1E0B":"d","\u010F":"d","\u1E0D":"d","\u1E11":"d","\u1E13":"d","\u1E0F":"d","\u0111":"d","\u018C":"d","\u0256":"d","\u0257":"d","\uA77A":"d","\u01F3":"dz","\u01C6":"dz","\u24D4":"e","\uFF45":"e","\u00E8":"e","\u00E9":"e","\u00EA":"e","\u1EC1":"e","\u1EBF":"e","\u1EC5":"e","\u1EC3":"e","\u1EBD":"e","\u0113":"e","\u1E15":"e","\u1E17":"e","\u0115":"e","\u0117":"e","\u00EB":"e","\u1EBB":"e","\u011B":"e","\u0205":"e","\u0207":"e","\u1EB9":"e","\u1EC7":"e","\u0229":"e","\u1E1D":"e","\u0119":"e","\u1E19":"e","\u1E1B":"e","\u0247":"e","\u025B":"e","\u01DD":"e","\u24D5":"f","\uFF46":"f","\u1E1F":"f","\u0192":"f","\uA77C":"f","\u24D6":"g","\uFF47":"g","\u01F5":"g","\u011D":"g","\u1E21":"g","\u011F":"g","\u0121":"g","\u01E7":"g","\u0123":"g","\u01E5":"g","\u0260":"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h","\uFF48":"h","\u0125":"h","\u1E23":"h","\u1E27":"h","\u021F":"h","\u1E25":"h","\u1E29":"h","\u1E2B":"h","\u1E96":"h","\u0127":"h","\u2C68":"h","\u2C76":"h","\u0265":"h","\u0195":"hv","\u24D8":"i","\uFF49":"i","\u00EC":"i","\u00ED":"i","\u00EE":"i","\u0129":"i","\u012B":"i","\u012D":"i","\u00EF":"i","\u1E2F":"i","\u1EC9":"i","\u01D0":"i","\u0209":"i","\u020B":"i","\u1ECB":"i","\u012F":"i","\u1E2D":"i","\u0268":"i","\u0131":"i","\u24D9":"j","\uFF4A":"j","\u0135":"j","\u01F0":"j","\u0249":"j","\u24DA":"k","\uFF4B":"k","\u1E31":"k","\u01E9":"k","\u1E33":"k","\u0137":"k","\u1E35":"k","\u0199":"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l","\uFF4C":"l","\u0140":"l","\u013A":"l","\u013E":"l","\u1E37":"l","\u1E39":"l","\u013C":"l","\u1E3D":"l","\u1E3B":"l","\u017F":"l","\u0142":"l","\u019A":"l","\u026B":"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l","\u01C9":"lj","\u24DC":"m","\uFF4D":"m","\u1E3F":"m","\u1E41":"m","\u1E43":"m","\u0271":"m","\u026F":"m","\u24DD":"n","\uFF4E":"n","\u01F9":"n","\u0144":"n","\u00F1":"n","\u1E45":"n","\u0148":"n","\u1E47":"n","\u0146":"n","\u1E4B":"n","\u1E49":"n","\u019E":"n","\u0272":"n","\u0149":"n","\uA791":"n","\uA7A5":"n","\u01CC":"nj","\u24DE":"o","\uFF4F":"o","\u00F2":"o","\u00F3":"o","\u00F4":"o","\u1ED3":"o","\u1ED1":"o","\u1ED7":"o","\u1ED5":"o","\u00F5":"o","\u1E4D":"o","\u022D":"o","\u1E4F":"o","\u014D":"o","\u1E51":"o","\u1E53":"o","\u014F":"o","\u022F":"o","\u0231":"o","\u00F6":"o","\u022B":"o","\u1ECF":"o","\u0151":"o","\u01D2":"o","\u020D":"o","\u020F":"o","\u01A1":"o","\u1EDD":"o","\u1EDB":"o","\u1EE1":"o","\u1EDF":"o","\u1EE3":"o","\u1ECD":"o","\u1ED9":"o","\u01EB":"o","\u01ED":"o","\u00F8":"o","\u01FF":"o","\u0254":"o","\uA74B":"o","\uA74D":"o","\u0275":"o","\u01A3":"oi","\u0223":"ou","\uA74F":"oo","\u24DF":"p","\uFF50":"p","\u1E55":"p","\u1E57":"p","\u01A5":"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q","\uFF51":"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r","\uFF52":"r","\u0155":"r","\u1E59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1E5B":"r","\u1E5D":"r","\u0157":"r","\u1E5F":"r","\u024D":"r","\u027D":"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s","\uFF53":"s","\u00DF":"s","\u015B":"s","\u1E65":"s","\u015D":"s","\u1E61":"s","\u0161":"s","\u1E67":"s","\u1E63":"s","\u1E69":"s","\u0219":"s","\u015F":"s","\u023F":"s","\uA7A9":"s","\uA785":"s","\u1E9B":"s","\u24E3":"t","\uFF54":"t","\u1E6B":"t","\u1E97":"t","\u0165":"t","\u1E6D":"t","\u021B":"t","\u0163":"t","\u1E71":"t","\u1E6F":"t","\u0167":"t","\u01AD":"t","\u0288":"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u","\uFF55":"u","\u00F9":"u","\u00FA":"u","\u00FB":"u","\u0169":"u","\u1E79":"u","\u016B":"u","\u1E7B":"u","\u016D":"u","\u00FC":"u","\u01DC":"u","\u01D8":"u","\u01D6":"u","\u01DA":"u","\u1EE7":"u","\u016F":"u","\u0171":"u","\u01D4":"u","\u0215":"u","\u0217":"u","\u01B0":"u","\u1EEB":"u","\u1EE9":"u","\u1EEF":"u","\u1EED":"u","\u1EF1":"u","\u1EE5":"u","\u1E73":"u","\u0173":"u","\u1E77":"u","\u1E75":"u","\u0289":"u","\u24E5":"v","\uFF56":"v","\u1E7D":"v","\u1E7F":"v","\u028B":"v","\uA75F":"v","\u028C":"v","\uA761":"vy","\u24E6":"w","\uFF57":"w","\u1E81":"w","\u1E83":"w","\u0175":"w","\u1E87":"w","\u1E85":"w","\u1E98":"w","\u1E89":"w","\u2C73":"w","\u24E7":"x","\uFF58":"x","\u1E8B":"x","\u1E8D":"x","\u24E8":"y","\uFF59":"y","\u1EF3":"y","\u00FD":"y","\u0177":"y","\u1EF9":"y","\u0233":"y","\u1E8F":"y","\u00FF":"y","\u1EF7":"y","\u1E99":"y","\u1EF5":"y","\u01B4":"y","\u024F":"y","\u1EFF":"y","\u24E9":"z","\uFF5A":"z","\u017A":"z","\u1E91":"z","\u017C":"z","\u017E":"z","\u1E93":"z","\u1E95":"z","\u01B6":"z","\u0225":"z","\u0240":"z","\u2C6C":"z","\uA763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038A":"\u0399","\u03AA":"\u0399","\u038C":"\u039F","\u038E":"\u03A5","\u03AB":"\u03A5","\u038F":"\u03A9","\u03AC":"\u03B1","\u03AD":"\u03B5","\u03AE":"\u03B7","\u03AF":"\u03B9","\u03CA":"\u03B9","\u0390":"\u03B9","\u03CC":"\u03BF","\u03CD":"\u03C5","\u03CB":"\u03C5","\u03B0":"\u03C5","\u03C9":"\u03C9","\u03C2":"\u03C3"};return e});d.define("bis_select2/data/base",["../utils"],function(f){function e(g,h){e.__super__.constructor.call(this)}f.Extend(e,f.Observable);e.prototype.current=function(g){throw new Error("The `current` method must be defined in child classes.")};e.prototype.query=function(g,h){throw new Error("The `query` method must be defined in child classes.")};e.prototype.bind=function(g,h){};e.prototype.destroy=function(){};e.prototype.generateResultId=function(g,h){var j=g.id+"-result-";j+=f.generateChars(4);if(h.id!=null){j+="-"+h.id.toString()}else{j+="-"+f.generateChars(4)}return j};return e});d.define("bis_select2/data/select",["./base","../utils","jquery"],function(e,h,g){function f(j,k){this.$element=j;this.options=k;f.__super__.constructor.call(this)}h.Extend(f,e);f.prototype.current=function(l){var k=[];var j=this;this.$element.find(":selected").each(function(){var n=g(this);var m=j.item(n);k.push(m)});l(k)};f.prototype.select=function(k){var j=this;k.selected=true;if(g(k.element).is("option")){k.element.selected=true;this.$element.trigger("change");return}if(this.$element.prop("multiple")){this.current(function(m){var o=[];k=[k];k.push.apply(k,m);for(var n=0;n<k.length;n++){var p=k[n].id;if(g.inArray(p,o)===-1){o.push(p)}}j.$element.val(o);j.$element.trigger("change")})}else{var l=k.id;this.$element.val(l);this.$element.trigger("change")}};f.prototype.unselect=function(k){var j=this;if(!this.$element.prop("multiple")){return}k.selected=false;if(g(k.element).is("option")){k.element.selected=false;this.$element.trigger("change");return}this.current(function(l){var n=[];for(var m=0;m<l.length;m++){var o=l[m].id;if(o!==k.id&&g.inArray(o,n)===-1){n.push(o)}}j.$element.val(n);j.$element.trigger("change")})};f.prototype.bind=function(j,l){var k=this;this.container=j;j.on("select",function(m){k.select(m.data)});j.on("unselect",function(m){k.unselect(m.data)})};f.prototype.destroy=function(){this.$element.find("*").each(function(){g.removeData(this,"data")})};f.prototype.query=function(m,n){var l=[];var k=this;var j=this.$element.children();j.each(function(){var r=g(this);if(!r.is("option")&&!r.is("optgroup")){return}var o=k.item(r);var p=k.matches(m,o);if(p!==null){l.push(p)}});n({results:l})};f.prototype.addOptions=function(j){h.appendMany(this.$element,j)};f.prototype.option=function(k){var j;if(k.children){j=document.createElement("optgroup");j.label=k.text}else{j=document.createElement("option");if(j.textContent!==undefined){j.textContent=k.text}else{j.innerText=k.text}}if(k.id){j.value=k.id}if(k.disabled){j.disabled=true}if(k.selected){j.selected=true}if(k.title){j.title=k.title}var l=g(j);var m=this._normalizeItem(k);m.element=j;g.data(j,"data",m);return l};f.prototype.item=function(n){var m={};m=g.data(n[0],"data");if(m!=null){return m}if(n.is("option")){m={id:n.val(),text:n.text(),disabled:n.prop("disabled"),selected:n.prop("selected"),title:n.prop("title")}}else{if(n.is("optgroup")){m={text:n.prop("label"),children:[],title:n.prop("title")};var j=n.children("option");var k=[];for(var p=0;p<j.length;p++){var l=g(j[p]);var o=this.item(l);k.push(o)}m.children=k}}m=this._normalizeItem(m);m.element=n[0];g.data(n[0],"data",m);return m};f.prototype._normalizeItem=function(j){if(!g.isPlainObject(j)){j={id:j,text:j}}j=g.extend({},{text:""},j);var k={selected:false,disabled:false};if(j.id!=null){j.id=j.id.toString()}if(j.text!=null){j.text=j.text.toString()}if(j._resultId==null&&j.id&&this.container!=null){j._resultId=this.generateResultId(this.container,j)}return g.extend({},k,j)};f.prototype.matches=function(l,j){var k=this.options.get("matcher");return k(l,j)};return f});d.define("bis_select2/data/array",["./select","../utils","jquery"],function(e,g,f){function h(j,k){var l=k.get("data")||[];h.__super__.constructor.call(this,j,k);this.addOptions(this.convertToOptions(l))}g.Extend(h,e);h.prototype.select=function(j){var k=this.$element.find("option").filter(function(l,m){return m.value==j.id.toString()});if(k.length===0){k=this.option(j);this.addOptions(k)}h.__super__.select.call(this,j)};h.prototype.convertToOptions=function(l){var w=this;var o=this.$element.find("option");var k=o.map(function(){return w.item(f(this)).id}).get();var n=[];function t(y){return function(){return f(this).val()==y.id}}for(var s=0;s<l.length;s++){var v=this._normalizeItem(l[s]);if(f.inArray(v.id,k)>=0){var p=o.filter(t(v));var r=this.item(p);var x=f.extend(true,{},v,r);var m=this.option(x);p.replaceWith(m);continue}var j=this.option(v);if(v.children){var u=this.convertToOptions(v.children);g.appendMany(j,u)}n.push(j)}return n};return h});d.define("bis_select2/data/ajax",["./array","../utils","jquery"],function(h,g,f){function e(j,k){this.ajaxOptions=this._applyDefaults(k.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}e.__super__.constructor.call(this,j,k)}g.Extend(e,h);e.prototype._applyDefaults=function(j){var k={data:function(l){return f.extend({},l,{q:l.term})},transport:function(o,n,m){var l=f.ajax(o);l.then(n);l.fail(m);return l}};return f.extend({},k,j,true)};e.prototype.processResults=function(j){return j};e.prototype.query=function(n,o){var m=[];var j=this;if(this._request!=null){if(f.isFunction(this._request.abort)){this._request.abort()}this._request=null}var k=f.extend({type:"GET"},this.ajaxOptions);if(typeof k.url==="function"){k.url=k.url.call(this.$element,n)}if(typeof k.data==="function"){k.data=k.data.call(this.$element,n)}function l(){var p=k.transport(k,function(s){var r=j.processResults(s,n);if(j.options.get("debug")&&window.console&&console.error){if(!r||!r.results||!f.isArray(r.results)){console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")}}o(r)},function(){j.trigger("results:message",{message:"errorLoading"})});j._request=p}if(this.ajaxOptions.delay&&n.term!==""){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(l,this.ajaxOptions.delay)}else{l()}};return e});d.define("bis_select2/data/tags",["jquery"],function(f){function e(h,l,o){var p=o.get("tags");var j=o.get("createTag");if(j!==undefined){this.createTag=j}var k=o.get("insertTag");if(k!==undefined){this.insertTag=k}h.call(this,l,o);if(f.isArray(p)){for(var n=0;n<p.length;n++){var r=p[n];var m=this._normalizeItem(r);var g=this.option(m);this.$element.append(g)}}}e.prototype.query=function(h,j,l){var g=this;this._removeOldTags();if(j.term==null||j.page!=null){h.call(this,j,l);return}function k(r,n){var s=r.results;for(var t=0;t<s.length;t++){var u=s[t];var o=(u.children!=null&&!k({results:u.children},true));var p=u.text===j.term;if(p||o){if(n){return false}r.data=s;l(r);return}}if(n){return true}var v=g.createTag(j);if(v!=null){var m=g.option(v);m.attr("data-bis_select2-tag",true);g.addOptions([m]);g.insertTag(s,v)}r.results=s;l(r)}h.call(this,j,k)};e.prototype.createTag=function(h,j){var g=f.trim(j.term);if(g===""){return null}return{id:g,text:g}};e.prototype.insertTag=function(h,j,g){j.unshift(g)};e.prototype._removeOldTags=function(j){var h=this._lastTag;var g=this.$element.find("option[data-bis_select2-tag]");g.each(function(){if(this.selected){return}f(this).remove()})};return e});d.define("bis_select2/data/tokenizer",["jquery"],function(f){function e(k,g,h){var j=h.get("tokenizer");if(j!==undefined){this.tokenizer=j}k.call(this,g,h)}e.prototype.bind=function(h,g,j){h.call(this,g,j);this.$search=g.dropdown.$search||g.selection.$search||j.find(".bis_select2-search__field")};e.prototype.query=function(j,k,m){var h=this;function g(n){h.trigger("select",{data:n})}k.term=k.term||"";var l=this.tokenizer(k,this.options,g);if(l.term!==k.term){if(this.$search.length){this.$search.val(l.term);this.$search.focus()}k.term=l.term}j.call(this,k,m)};e.prototype.tokenizer=function(o,j,t,s){var k=t.get("tokenSeparators")||[];var h=j.term;var m=0;var n=this.createTag||function(u){return{id:u.term,text:u.term}};while(m<h.length){var r=h[m];if(f.inArray(r,k)===-1){m++;continue}var g=h.substr(0,m);var p=f.extend({},j,{term:g});var l=n(p);if(l==null){m++;continue}s(l);h=h.substr(m+1)||"";m=0}return{term:h}};return e});d.define("bis_select2/data/minimumInputLength",[],function(){function e(h,g,f){this.minimumInputLength=f.get("minimumInputLength");h.call(this,g,f)}e.prototype.query=function(f,g,h){g.term=g.term||"";if(g.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:g.term,params:g}});return}f.call(this,g,h)};return e});d.define("bis_select2/data/maximumInputLength",[],function(){function e(h,g,f){this.maximumInputLength=f.get("maximumInputLength");h.call(this,g,f)}e.prototype.query=function(f,g,h){g.term=g.term||"";if(this.maximumInputLength>0&&g.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:g.term,params:g}});return}f.call(this,g,h)};return e});d.define("bis_select2/data/maximumSelectionLength",[],function(){function e(h,g,f){this.maximumSelectionLength=f.get("maximumSelectionLength");h.call(this,g,f)}e.prototype.query=function(g,h,j){var f=this;this.current(function(k){var l=k!=null?k.length:0;if(f.maximumSelectionLength>0&&l>=f.maximumSelectionLength){f.trigger("results:message",{message:"maximumSelected",args:{maximum:f.maximumSelectionLength}});return}g.call(f,h,j)})};return e});d.define("bis_select2/dropdown",["jquery","./utils"],function(g,f){function e(h,j){this.$element=h;this.options=j;e.__super__.constructor.call(this)}f.Extend(e,f.Observable);e.prototype.render=function(){var h=g('<span class="bis_select2-dropdown"><span class="bis_select2-results"></span></span>');h.attr("dir",this.options.get("dir"));this.$dropdown=h;return h};e.prototype.bind=function(){};e.prototype.position=function(h,j){};e.prototype.destroy=function(){this.$dropdown.remove()};return e});d.define("bis_select2/dropdown/search",["jquery","../utils"],function(g,f){function e(){}e.prototype.render=function(j){var k=j.call(this);var h=g('<span class="bis_select2-search bis_select2-search--dropdown"><input class="bis_select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');this.$searchContainer=h;this.$search=h.find("input");k.prepend(h);return k};e.prototype.bind=function(k,h,l){var j=this;k.call(this,h,l);this.$search.on("keydown",function(m){j.trigger("keypress",m);j._keyUpPrevented=m.isDefaultPrevented()});this.$search.on("input",function(m){g(this).off("keyup")});this.$search.on("keyup input",function(m){j.handleSearch(m)});h.on("open",function(){j.$search.attr("tabindex",0);j.$search.focus();window.setTimeout(function(){j.$search.focus()},0)});h.on("close",function(){j.$search.attr("tabindex",-1);j.$search.val("")});h.on("results:all",function(n){if(n.query.term==null||n.query.term===""){var m=j.showSearch(n);if(m){j.$searchContainer.removeClass("bis_select2-search--hide")}else{j.$searchContainer.addClass("bis_select2-search--hide")}}})};e.prototype.handleSearch=function(h){if(!this._keyUpPrevented){var j=this.$search.val();this.trigger("query",{term:j})}this._keyUpPrevented=false};e.prototype.showSearch=function(h,j){return true};return e});d.define("bis_select2/dropdown/hidePlaceholder",[],function(){function e(h,f,g,j){this.placeholder=this.normalizePlaceholder(g.get("placeholder"));h.call(this,f,g,j)}e.prototype.append=function(g,f){f.results=this.removePlaceholder(f.results);g.call(this,f)};e.prototype.normalizePlaceholder=function(f,g){if(typeof g==="string"){g={id:"",text:g}}return g};e.prototype.removePlaceholder=function(f,j){var h=j.slice(0);for(var k=j.length-1;k>=0;k--){var g=j[k];if(this.placeholder.id===g.id){h.splice(k,1)}}return h};return e});d.define("bis_select2/dropdown/infiniteScroll",["jquery"],function(f){function e(j,g,h,k){this.lastParams={};j.call(this,g,h,k);this.$loadingMore=this.createLoadingMore();this.loading=false}e.prototype.append=function(h,g){this.$loadingMore.remove();this.loading=false;h.call(this,g);if(this.showLoadingMore(g)){this.$results.append(this.$loadingMore)}};e.prototype.bind=function(j,g,k){var h=this;j.call(this,g,k);g.on("query",function(l){h.lastParams=l;h.loading=true});g.on("query:append",function(l){h.lastParams=l;h.loading=true});this.$results.on("scroll",function(){var n=f.contains(document.documentElement,h.$loadingMore[0]);if(h.loading||!n){return}var m=h.$results.offset().top+h.$results.outerHeight(false);var l=h.$loadingMore.offset().top+h.$loadingMore.outerHeight(false);if(m+50>=l){h.loadMore()}})};e.prototype.loadMore=function(){this.loading=true;var g=f.extend({},{page:1},this.lastParams);g.page++;this.trigger("query:append",g)};e.prototype.showLoadingMore=function(g,h){return h.pagination&&h.pagination.more};e.prototype.createLoadingMore=function(){var h=f('<li class="bis_select2-results__option bis_select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>');var g=this.options.get("translations").get("loadingMore");h.html(g(this.lastParams));return h};return e});d.define("bis_select2/dropdown/attachBody",["jquery","../utils"],function(g,f){function e(k,h,j){this.$dropdownParent=j.get("dropdownParent")||g(document.body);k.call(this,h,j)}e.prototype.bind=function(l,h,m){var k=this;var j=false;l.call(this,h,m);h.on("open",function(){k._showDropdown();k._attachPositioningHandler(h);if(!j){j=true;h.on("results:all",function(){k._positionDropdown();k._resizeDropdown()});h.on("results:append",function(){k._positionDropdown();k._resizeDropdown()})}});h.on("close",function(){k._hideDropdown();k._detachPositioningHandler(h)});this.$dropdownContainer.on("mousedown",function(n){n.stopPropagation()})};e.prototype.destroy=function(h){h.call(this);this.$dropdownContainer.remove()};e.prototype.position=function(h,j,k){j.attr("class",k.attr("class"));j.removeClass("bis_select2");j.addClass("bis_select2-container--open");j.css({position:"absolute",top:-999999});this.$container=k};e.prototype.render=function(h){var k=g("<span></span>");var j=h.call(this);k.append(j);this.$dropdownContainer=k;return k};e.prototype._hideDropdown=function(h){this.$dropdownContainer.detach()};e.prototype._attachPositioningHandler=function(o,h){var j=this;var l="scroll.bis_select2."+h.id;var n="resize.bis_select2."+h.id;var m="orientationchange.bis_select2."+h.id;var k=this.$container.parents().filter(f.hasScroll);k.each(function(){g(this).data("bis_select2-scroll-position",{x:g(this).scrollLeft(),y:g(this).scrollTop()})});k.on(l,function(r){var p=g(this).data("bis_select2-scroll-position");g(this).scrollTop(p.y)});g(window).on(l+" "+n+" "+m,function(p){j._positionDropdown();j._resizeDropdown()})};e.prototype._detachPositioningHandler=function(n,h){var k="scroll.bis_select2."+h.id;var m="resize.bis_select2."+h.id;var l="orientationchange.bis_select2."+h.id;var j=this.$container.parents().filter(f.hasScroll);j.off(k);g(window).off(k+" "+m+" "+l)};e.prototype._positionDropdown=function(){var l=g(window);var v=this.$dropdown.hasClass("bis_select2-dropdown--above");var k=this.$dropdown.hasClass("bis_select2-dropdown--below");var s=null;var m=this.$container.offset();m.bottom=m.top+this.$container.outerHeight(false);var j={height:this.$container.outerHeight(false)};j.top=m.top;j.bottom=m.top+j.height;var u={height:this.$dropdown.outerHeight(false)};var p={top:l.scrollTop(),bottom:l.scrollTop()+l.height()};var o=p.top<(m.top-u.height);var r=p.bottom>(m.bottom+u.height);var n={left:m.left,top:j.bottom};var t=this.$dropdownParent;if(t.css("position")==="static"){t=t.offsetParent()}var h=t.offset();n.top-=h.top;n.left-=h.left;if(!v&&!k){s="below"}if(!r&&o&&!v){s="above"}else{if(!o&&r&&v){s="below"}}if(s=="above"||(v&&s!=="below")){n.top=j.top-u.height}if(s!=null){this.$dropdown.removeClass("bis_select2-dropdown--below bis_select2-dropdown--above").addClass("bis_select2-dropdown--"+s);this.$container.removeClass("bis_select2-container--below bis_select2-container--above").addClass("bis_select2-container--"+s)}this.$dropdownContainer.css(n)};e.prototype._resizeDropdown=function(){var h={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){h.minWidth=h.width;h.width="auto"}this.$dropdown.css(h)};e.prototype._showDropdown=function(h){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return e});d.define("bis_select2/dropdown/minimumResultsForSearch",[],function(){function f(j){var h=0;for(var k=0;k<j.length;k++){var g=j[k];if(g.children){h+=f(g.children)}else{h++}}return h}function e(j,g,h,k){this.minimumResultsForSearch=h.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}j.call(this,g,h,k)}e.prototype.showSearch=function(g,h){if(f(h.data.results)<this.minimumResultsForSearch){return false}return g.call(this,h)};return e});d.define("bis_select2/dropdown/selectOnClose",[],function(){function e(){}e.prototype.bind=function(h,f,j){var g=this;h.call(this,f,j);f.on("close",function(){g._handleSelectOnClose()})};e.prototype._handleSelectOnClose=function(){var f=this.getHighlightedResults();if(f.length<1){return}var g=f.data("data");if((g.element!=null&&g.element.selected)||(g.element==null&&g.selected)){return}this.trigger("select",{data:g})};return e});d.define("bis_select2/dropdown/closeOnSelect",[],function(){function e(){}e.prototype.bind=function(h,f,j){var g=this;h.call(this,f,j);f.on("select",function(k){g._selectTriggered(k)});f.on("unselect",function(k){g._selectTriggered(k)})};e.prototype._selectTriggered=function(h,g){var f=g.originalEvent;if(f&&f.ctrlKey){return}this.trigger("close",{})};return e});d.define("bis_select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var g=e.input.length-e.maximum;var f="Please delete "+g+" character";if(g!=1){f+="s"}return f},inputTooShort:function(e){var g=e.minimum-e.input.length;var f="Please enter "+g+" or more characters";return f},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var f="You can only select "+e.maximum+" item";if(e.maximum!=1){f+="s"}return f},noResults:function(){return"No results found"},searching:function(){return"Searching"}}});d.define("bis_select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(g,l,G,p,v,I,k,E,H,e,w,K,D,u,f,z,h,F,J,y,C,n,s,B,t,x,m,j,A){function r(){this.reset()}r.prototype.apply=function(ab){ab=g.extend(true,{},this.defaults,ab);if(ab.dataAdapter==null){if(ab.ajax!=null){ab.dataAdapter=f}else{if(ab.data!=null){ab.dataAdapter=u}else{ab.dataAdapter=D}}if(ab.minimumInputLength>0){ab.dataAdapter=e.Decorate(ab.dataAdapter,F)}if(ab.maximumInputLength>0){ab.dataAdapter=e.Decorate(ab.dataAdapter,J)}if(ab.maximumSelectionLength>0){ab.dataAdapter=e.Decorate(ab.dataAdapter,y)}if(ab.tags){ab.dataAdapter=e.Decorate(ab.dataAdapter,z)}if(ab.tokenSeparators!=null||ab.tokenizer!=null){ab.dataAdapter=e.Decorate(ab.dataAdapter,h)}if(ab.query!=null){var T=l(ab.amdBase+"compat/query");ab.dataAdapter=e.Decorate(ab.dataAdapter,T)}if(ab.initSelection!=null){var aa=l(ab.amdBase+"compat/initSelection");ab.dataAdapter=e.Decorate(ab.dataAdapter,aa)}}if(ab.resultsAdapter==null){ab.resultsAdapter=G;if(ab.ajax!=null){ab.resultsAdapter=e.Decorate(ab.resultsAdapter,B)}if(ab.placeholder!=null){ab.resultsAdapter=e.Decorate(ab.resultsAdapter,s)}if(ab.selectOnClose){ab.resultsAdapter=e.Decorate(ab.resultsAdapter,m)}}if(ab.dropdownAdapter==null){if(ab.multiple){ab.dropdownAdapter=C}else{var N=e.Decorate(C,n);ab.dropdownAdapter=N}if(ab.minimumResultsForSearch!==0){ab.dropdownAdapter=e.Decorate(ab.dropdownAdapter,x)}if(ab.closeOnSelect){ab.dropdownAdapter=e.Decorate(ab.dropdownAdapter,j)}if(ab.dropdownCssClass!=null||ab.dropdownCss!=null||ab.adaptDropdownCssClass!=null){var M=l(ab.amdBase+"compat/dropdownCss");ab.dropdownAdapter=e.Decorate(ab.dropdownAdapter,M)}ab.dropdownAdapter=e.Decorate(ab.dropdownAdapter,t)}if(ab.selectionAdapter==null){if(ab.multiple){ab.selectionAdapter=v}else{ab.selectionAdapter=p}if(ab.placeholder!=null){ab.selectionAdapter=e.Decorate(ab.selectionAdapter,I)}if(ab.allowClear){ab.selectionAdapter=e.Decorate(ab.selectionAdapter,k)}if(ab.multiple){ab.selectionAdapter=e.Decorate(ab.selectionAdapter,E)}if(ab.containerCssClass!=null||ab.containerCss!=null||ab.adaptContainerCssClass!=null){var V=l(ab.amdBase+"compat/containerCss");ab.selectionAdapter=e.Decorate(ab.selectionAdapter,V)}ab.selectionAdapter=e.Decorate(ab.selectionAdapter,H)}if(typeof ab.language==="string"){if(ab.language.indexOf("-")>0){var Q=ab.language.split("-");var S=Q[0];ab.language=[ab.language,S]}else{ab.language=[ab.language]}}if(g.isArray(ab.language)){var P=new w();ab.language.push("en");var Y=ab.language;for(var O=0;O<Y.length;O++){var L=Y[O];var R={};try{R=w.loadPath(L)}catch(U){try{L=this.defaults.amdLanguageBase+L;R=w.loadPath(L)}catch(X){if(ab.debug&&window.console&&console.warn){console.warn('Select2: The language file for "'+L+'" could not be automatically loaded. A fallback will be used instead.')}continue}}P.extend(R)}ab.translations=P}else{var W=w.loadPath(this.defaults.amdLanguageBase+"en");var Z=new w(ab.language);Z.extend(W);ab.translations=Z}return ab};r.prototype.reset=function(){function M(O){function N(P){return K[P]||P}return O.replace(/[^\u0000-\u007E]/g,N)}function L(S,R){if(g.trim(S.term)===""){return R}if(R.children&&R.children.length>0){var N=g.extend(true,{},R);for(var U=R.children.length-1;U>=0;U--){var T=R.children[U];var Q=L(S,T);if(Q==null){N.children.splice(U,1)}}if(N.children.length>0){return N}return L(S,N)}var P=M(R.text).toUpperCase();var O=M(S.term).toUpperCase();if(P.indexOf(O)>-1){return R}return null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:e.escapeMarkup,language:A,matcher:L,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,sorter:function(N){return N},templateResult:function(N){return N.text},templateSelection:function(N){return N.text},theme:"default",width:"resolve"}};r.prototype.set=function(M,O){var L=g.camelCase(M);var N={};N[L]=O;var P=e._convertData(N);g.extend(this.defaults,P)};var o=new r();return o});d.define("bis_select2/options",["require","jquery","./defaults","./utils"],function(f,h,j,g){function e(m,k){this.options=m;if(k!=null){this.fromElement(k)}this.options=j.apply(this.options);if(k&&k.is("input")){var l=f(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=g.Decorate(this.options.dataAdapter,l)}}e.prototype.fromElement=function(k){var m=["bis_select2"];if(this.options.multiple==null){this.options.multiple=k.prop("multiple")}if(this.options.disabled==null){this.options.disabled=k.prop("disabled")}if(this.options.language==null){if(k.prop("lang")){this.options.language=k.prop("lang").toLowerCase()}else{if(k.closest("[lang]").prop("lang")){this.options.language=k.closest("[lang]").prop("lang")}}}if(this.options.dir==null){if(k.prop("dir")){this.options.dir=k.prop("dir")}else{if(k.closest("[dir]").prop("dir")){this.options.dir=k.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}}k.prop("disabled",this.options.disabled);k.prop("multiple",this.options.multiple);if(k.data("bis_select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn('Select2: The `data-bis_select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.')}k.data("data",k.data("bis_select2Tags"));k.data("tags",true)}if(k.data("ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2.")}k.attr("ajax--url",k.data("ajaxUrl"));k.data("ajax--url",k.data("ajaxUrl"))}var o={};if(h.fn.jquery&&h.fn.jquery.substr(0,2)=="1."&&k[0].dataset){o=h.extend(true,{},k[0].dataset,k.data())}else{o=k.data()}var n=h.extend(true,{},o);n=g._convertData(n);for(var l in n){if(h.inArray(l,m)>-1){continue}if(h.isPlainObject(this.options[l])){h.extend(this.options[l],n[l])}else{this.options[l]=n[l]}}return this};e.prototype.get=function(k){return this.options[k]};e.prototype.set=function(k,l){this.options[k]=l};return e});d.define("bis_select2/core",["jquery","./options","./utils","./keys"],function(j,g,h,e){var f=function(p,t){if(p.data("bis_select2")!=null){p.data("bis_select2").destroy()}this.$element=p;this.id=this._generateId(p);t=t||{};this.options=new g(t,p);f.__super__.constructor.call(this);var n=p.attr("tabindex")||0;p.data("old-tabindex",n);p.attr("tabindex","-1");var m=this.options.get("dataAdapter");this.dataAdapter=new m(p,this.options);var s=this.render();this._placeContainer(s);var o=this.options.get("selectionAdapter");this.selection=new o(p,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,s);var k=this.options.get("dropdownAdapter");this.dropdown=new k(p,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,s);var l=this.options.get("resultsAdapter");this.results=new l(p,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var r=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(u){r.trigger("selection:update",{data:u})});p.addClass("bis_select2-hidden-accessible");p.attr("aria-hidden","true");this._syncAttributes();p.data("bis_select2",this)};h.Extend(f,h.Observable);f.prototype._generateId=function(k){var l="";if(k.attr("id")!=null){l=k.attr("id")}else{if(k.attr("name")!=null){l=k.attr("name")+"-"+h.generateChars(2)}else{l=h.generateChars(4)}}l=l.replace(/(:|\.|\[|\]|,)/g,"");l="bis_select2-"+l;return l};f.prototype._placeContainer=function(l){l.insertAfter(this.$element);var k=this._resolveWidth(this.$element,this.options.get("width"));if(k!=null){l.css("width",k)}};f.prototype._resolveWidth=function(w,k){var u=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(k=="resolve"){var o=this._resolveWidth(w,"style");if(o!=null){return o}return this._resolveWidth(w,"element")}if(k=="element"){var t=w.outerWidth(false);if(t<=0){return"auto"}else{t=t+30}return t+"px"}if(k=="style"){var m=w.attr("style");if(typeof(m)!=="string"){return null}var v=m.split(";");for(var p=0,n=v.length;p<n;p=p+1){var s=v[p].replace(/\s/g,"");var r=s.match(u);if(r!==null&&r.length>=1){return r[1]}}return null}return k};f.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};f.prototype._registerDomEvents=function(){var l=this;this.$element.on("change.bis_select2",function(){l.dataAdapter.current(function(m){l.trigger("selection:update",{data:m})})});this._sync=h.bind(this._syncAttributes,this);if(this.$element[0].attachEvent){this.$element[0].attachEvent("onpropertychange",this._sync)}var k=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(k!=null){this._observer=new k(function(m){j.each(m,l._sync)});this._observer.observe(this.$element[0],{attributes:true,subtree:false})}else{if(this.$element[0].addEventListener){this.$element[0].addEventListener("DOMAttrModified",l._sync,false)}}};f.prototype._registerDataEvents=function(){var k=this;this.dataAdapter.on("*",function(l,m){k.trigger(l,m)})};f.prototype._registerSelectionEvents=function(){var k=this;var l=["toggle","focus"];this.selection.on("toggle",function(){k.toggleDropdown()});this.selection.on("focus",function(m){k.focus(m)});this.selection.on("*",function(m,n){if(j.inArray(m,l)!==-1){return}k.trigger(m,n)})};f.prototype._registerDropdownEvents=function(){var k=this;this.dropdown.on("*",function(l,m){k.trigger(l,m)})};f.prototype._registerResultsEvents=function(){var k=this;this.results.on("*",function(l,m){k.trigger(l,m)})};f.prototype._registerEvents=function(){var k=this;this.on("open",function(){k.$container.addClass("bis_select2-container--open")});this.on("close",function(){k.$container.removeClass("bis_select2-container--open")});this.on("enable",function(){k.$container.removeClass("bis_select2-container--disabled")});this.on("disable",function(){k.$container.addClass("bis_select2-container--disabled")});this.on("blur",function(){k.$container.removeClass("bis_select2-container--focus")});this.on("query",function(l){if(!k.isOpen()){k.trigger("open",{})}this.dataAdapter.query(l,function(m){k.trigger("results:all",{data:m,query:l})})});this.on("query:append",function(l){this.dataAdapter.query(l,function(m){k.trigger("results:append",{data:m,query:l})})});this.on("keypress",function(l){var m=l.which;if(k.isOpen()){if(m===e.ESC||m===e.TAB||(m===e.UP&&l.altKey)){k.close();l.preventDefault()}else{if(m===e.ENTER){k.trigger("results:select",{});l.preventDefault()}else{if((m===e.SPACE&&l.ctrlKey)){k.trigger("results:toggle",{});l.preventDefault()}else{if(m===e.UP){k.trigger("results:previous",{});l.preventDefault()}else{if(m===e.DOWN){k.trigger("results:next",{});l.preventDefault()}}}}}}else{if(m===e.ENTER||m===e.SPACE||(m===e.DOWN&&l.altKey)){k.open();l.preventDefault()}}})};f.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.options.get("disabled")){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};f.prototype.trigger=function(n,m){var o=f.__super__.trigger;var p={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(m===undefined){m={}}if(n in p){var l=p[n];var k={prevented:false,name:n,args:m};o.call(this,l,k);if(k.prevented){m.prevented=true;return}}o.call(this,n,m)};f.prototype.toggleDropdown=function(){if(this.options.get("disabled")){return}if(this.isOpen()){this.close()}else{this.open()}};f.prototype.open=function(){if(this.isOpen()){return}this.trigger("query",{})};f.prototype.close=function(){if(!this.isOpen()){return}this.trigger("close",{})};f.prototype.isOpen=function(){return this.$container.hasClass("bis_select2-container--open")};f.prototype.hasFocus=function(){return this.$container.hasClass("bis_select2-container--focus")};f.prototype.focus=function(k){if(this.hasFocus()){return}this.$container.addClass("bis_select2-container--focus");this.trigger("focus",{})};f.prototype.enable=function(k){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `bis_select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.')}if(k==null||k.length===0){k=[true]}var l=!k[0];this.$element.prop("disabled",l)};f.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `bis_select2("data")`. You should consider setting the value instead using `$element.val()`.')}var k=[];this.dataAdapter.current(function(l){k=l});return k};f.prototype.val=function(l){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `bis_select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.')}if(l==null||l.length===0){return this.$element.val()}var k=l[0];if(j.isArray(k)){k=j.map(k,function(m){return m.toString()})}this.$element.val(k).trigger("change")};f.prototype.destroy=function(){this.$container.remove();if(this.$element[0].detachEvent){this.$element[0].detachEvent("onpropertychange",this._sync)}if(this._observer!=null){this._observer.disconnect();this._observer=null}else{if(this.$element[0].removeEventListener){this.$element[0].removeEventListener("DOMAttrModified",this._sync,false)}}this._sync=null;this.$element.off(".bis_select2");this.$element.attr("tabindex",this.$element.data("old-tabindex"));this.$element.removeClass("bis_select2-hidden-accessible");this.$element.attr("aria-hidden","false");this.$element.removeData("bis_select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};f.prototype.render=function(){var k=j('<span class="bis_select2 bis_select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');k.attr("dir",this.options.get("dir"));this.$container=k;this.$container.addClass("bis_select2-container--"+this.options.get("theme"));k.data("element",this.$element);return k};return f});d.define("bis_select2/compat/utils",["jquery"],function(f){function e(m,g,h){var k,l=[],j;k=f.trim(m.attr("class"));if(k){k=""+k;f(k.split(/\s+/)).each(function(){if(this.indexOf("bis_select2-")===0){l.push(this)}})}k=f.trim(g.attr("class"));if(k){k=""+k;f(k.split(/\s+/)).each(function(){if(this.indexOf("bis_select2-")!==0){j=h(this);if(j!=null){l.push(j)}}})}m.attr("class",l.join(" "))}return{syncCssClasses:e}});d.define("bis_select2/compat/containerCss",["jquery","./utils"],function(h,e){function g(j){return null}function f(){}f.prototype.render=function(l){var n=l.call(this);var j=this.options.get("containerCssClass")||"";if(h.isFunction(j)){j=j(this.$element)}var m=this.options.get("adaptContainerCssClass");m=m||g;if(j.indexOf(":all:")!==-1){j=j.replace(":all:","");var o=m;m=function(p){var r=o(p);if(r!=null){return r+" "+p}return p}}var k=this.options.get("containerCss")||{};if(h.isFunction(k)){k=k(this.$element)}e.syncCssClasses(n,this.$element,m);n.css(k);n.addClass(j);return n};return f});d.define("bis_select2/compat/dropdownCss",["jquery","./utils"],function(h,f){function g(j){return null}function e(){}e.prototype.render=function(l){var n=l.call(this);var j=this.options.get("dropdownCssClass")||"";if(h.isFunction(j)){j=j(this.$element)}var k=this.options.get("adaptDropdownCssClass");k=k||g;if(j.indexOf(":all:")!==-1){j=j.replace(":all:","");var o=k;k=function(p){var r=o(p);if(r!=null){return r+" "+p}return p}}var m=this.options.get("dropdownCss")||{};if(h.isFunction(m)){m=m(this.$element)}f.syncCssClasses(n,this.$element,k);n.css(m);n.addClass(j);return n};return e});d.define("bis_select2/compat/initSelection",["jquery"],function(f){function e(j,g,h){if(h.get("debug")&&window.console&&console.warn){console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2")}this.initSelection=h.get("initSelection");this._isInitialized=false;j.call(this,g,h)}e.prototype.current=function(h,j){var g=this;if(this._isInitialized){h.call(this,j);return}this.initSelection.call(null,this.$element,function(k){g._isInitialized=true;if(!f.isArray(k)){k=[k]}j(k)})};return e});d.define("bis_select2/compat/inputData",["jquery"],function(f){function e(j,g,h){this._currentData=[];this._valueSeparator=h.get("valueSeparator")||",";if(g.prop("type")==="hidden"){if(h.get("debug")&&console&&console.warn){console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead.")}}j.call(this,g,h)}e.prototype.current=function(h,m){function g(p,n){var o=[];if(p.selected||f.inArray(p.id,n)!==-1){p.selected=true;o.push(p)}else{p.selected=false}if(p.children){o.push.apply(o,g(p.children,n))}return o}var j=[];for(var l=0;l<this._currentData.length;l++){var k=this._currentData[l];j.push.apply(j,g(k,this.$element.val().split(this._valueSeparator)))}m(j)};e.prototype.select=function(g,j){if(!this.options.get("multiple")){this.current(function(k){f.map(k,function(l){l.selected=false})});this.$element.val(j.id);this.$element.trigger("change")}else{var h=this.$element.val();h+=this._valueSeparator+j.id;this.$element.val(h);this.$element.trigger("change")}};e.prototype.unselect=function(h,j){var g=this;j.selected=false;this.current(function(m){var k=[];for(var n=0;n<m.length;n++){var l=m[n];if(j.id==l.id){continue}k.push(l.id)}g.$element.val(k.join(g._valueSeparator));g.$element.trigger("change")})};e.prototype.query=function(g,m,n){var h=[];for(var l=0;l<this._currentData.length;l++){var k=this._currentData[l];var j=this.matches(m,k);if(j!==null){h.push(j)}}n({results:h})};e.prototype.addOptions=function(j,g){var h=f.map(g,function(k){return f.data(k[0],"data")});this._currentData.push.apply(this._currentData,h)};return e});d.define("bis_select2/compat/matcher",["jquery"],function(f){function e(g){function h(m,l){var j=f.extend(true,{},l);if(m.term==null||f.trim(m.term)===""){return j}if(l.children){for(var o=l.children.length-1;o>=0;o--){var n=l.children[o];var k=g(m.term,n.text,n);if(!k){j.children.splice(o,1)}}if(j.children.length>0){return j}}if(g(m.term,l.text,l)){return j}return null}return h}return e});d.define("bis_select2/compat/query",[],function(){function e(h,f,g){if(g.get("debug")&&window.console&&console.warn){console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2.")}h.call(this,f,g)}e.prototype.query=function(f,h,j){h.callback=j;var g=this.options.get("query");g.call(null,h)};return e});d.define("bis_select2/dropdown/attachContainer",[],function(){function e(h,f,g){h.call(this,f,g)}e.prototype.position=function(g,h,j){var f=j.find(".dropdown-wrapper");f.append(h);h.addClass("bis_select2-dropdown--below");j.addClass("bis_select2-container--below")};return e});d.define("bis_select2/dropdown/stopPropagation",[],function(){function e(){}e.prototype.bind=function(h,f,j){h.call(this,f,j);var g=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(g.join(" "),function(k){k.stopPropagation()})};return e});d.define("bis_select2/selection/stopPropagation",[],function(){function e(){}e.prototype.bind=function(h,f,j){h.call(this,f,j);var g=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(g.join(" "),function(k){k.stopPropagation()})};return e});
/*
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
(function(e){if(typeof d.define==="function"&&d.define.amd){d.define("jquery-mousewheel",["jquery"],e)}else{if(typeof exports==="object"){module.exports=e}else{e(c)}}}(function(g){var h=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],m=Array.prototype.slice,n,f;if(g.event.fixHooks){for(var j=h.length;j;){g.event.fixHooks[h[--j]]=g.event.mouseHooks}}var k=g.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var r=o.length;r;){this.addEventListener(o[--r],p,false)}}else{this.onmousewheel=p}g.data(this,"mousewheel-line-height",k.getLineHeight(this));g.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var r=o.length;r;){this.removeEventListener(o[--r],p,false)}}else{this.onmousewheel=null}g.removeData(this,"mousewheel-line-height");g.removeData(this,"mousewheel-page-height")},getLineHeight:function(s){var r=g(s),t=r["offsetParent" in g.fn?"offsetParent":"parent"]();if(!t.length){t=g("body")}return parseInt(t.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(r){return g(r).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};g.fn.extend({mousewheel:function(r){return r?this.bind("mousewheel",r):this.trigger("mousewheel")},unmousewheel:function(r){return this.unbind("mousewheel",r)}});function p(r){var u=r||window.event,A=m.call(arguments,1),C=0,w=0,v=0,z=0,y=0,x=0;r=g.event.fix(u);r.type="mousewheel";if("detail" in u){v=u.detail*-1}if("wheelDelta" in u){v=u.wheelDelta}if("wheelDeltaY" in u){v=u.wheelDeltaY}if("wheelDeltaX" in u){w=u.wheelDeltaX*-1}if("axis" in u&&u.axis===u.HORIZONTAL_AXIS){w=v*-1;v=0}C=v===0?w:v;if("deltaY" in u){v=u.deltaY*-1;C=v}if("deltaX" in u){w=u.deltaX;if(v===0){C=w*-1}}if(v===0&&w===0){return}if(u.deltaMode===1){var B=g.data(this,"mousewheel-line-height");C*=B;v*=B;w*=B}else{if(u.deltaMode===2){var t=g.data(this,"mousewheel-page-height");C*=t;v*=t;w*=t}}z=Math.max(Math.abs(v),Math.abs(w));if(!f||z<f){f=z;if(e(u,z)){f/=40}}if(e(u,z)){C/=40;w/=40;v/=40}C=Math[C>=1?"floor":"ceil"](C/f);w=Math[w>=1?"floor":"ceil"](w/f);v=Math[v>=1?"floor":"ceil"](v/f);if(k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();y=r.clientX-s.left;x=r.clientY-s.top}r.deltaX=w;r.deltaY=v;r.deltaFactor=f;r.offsetX=y;r.offsetY=x;r.deltaMode=0;A.unshift(r,C,w,v);if(n){clearTimeout(n)}n=setTimeout(l,200);return(g.event.dispatch||g.event.handle).apply(this,A)}function l(){f=null}function e(s,r){return k.settings.adjustOldDeltas&&s.type==="mousewheel"&&r%120===0}}));d.define("jquery.bis_select2",["jquery","jquery-mousewheel","./bis_select2/core","./bis_select2/defaults"],function(h,g,e,j){if(h.fn.bis_select2==null){var f=["open","close","destroy"];h.fn.bis_select2=function(l){l=l||{};if(typeof l==="object"){this.each(function(){var n=h.extend(true,{},l);var m=new e(h(this),n)});return this}else{if(typeof l==="string"){var k;this.each(function(){var m=h(this).data("bis_select2");if(m==null&&window.console&&console.error){console.error("The bis_select2('"+l+"') method was called on an element that is not using Select2.")}var n=Array.prototype.slice.call(arguments,1);k=m[l].apply(m,n)});if(h.inArray(l,f)>-1){return this}return k}else{throw new Error("Invalid arguments for Select2: "+l)}}}}if(h.fn.bis_select2.defaults==null){h.fn.bis_select2.defaults=j}return e});return{define:d.define,require:d.require}}());var a=b.require("jquery.bis_select2");c.fn.bis_select2.amd=b;return a}));!(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return b(a,c)})}else{if(typeof exports==="object"){b(a,require("jquery"))}else{b(a,a.jQuery||a.Zepto)}}})(this,function(u,f){var t="remodal";var e=u.REMODAL_GLOBALS&&u.REMODAL_GLOBALS.NAMESPACE||t;var l=f.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(A){return A+"."+e}).join(" ");var j=f.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(A){return A+"."+e}).join(" ");var a=f.extend({hashTracking:true,closeOnConfirm:true,closeOnCancel:true,closeOnEscape:true,closeOnOutsideClick:true,modifier:"",appendTo:null},u.REMODAL_GLOBALS&&u.REMODAL_GLOBALS.DEFAULTS);var v={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"};var d={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"};var w=(function(){var A=document.createElement("div").style;return A.animationName!==undefined||A.WebkitAnimationName!==undefined||A.MozAnimationName!==undefined||A.msAnimationName!==undefined||A.OAnimationName!==undefined})();var p=/iPad|iPhone|iPod/.test(navigator.platform);var s;var c;function n(D){if(w&&D.css("animation-name")==="none"&&D.css("-webkit-animation-name")==="none"&&D.css("-moz-animation-name")==="none"&&D.css("-o-animation-name")==="none"&&D.css("-ms-animation-name")==="none"){return 0}var H=D.css("animation-duration")||D.css("-webkit-animation-duration")||D.css("-moz-animation-duration")||D.css("-o-animation-duration")||D.css("-ms-animation-duration")||"0s";var F=D.css("animation-delay")||D.css("-webkit-animation-delay")||D.css("-moz-animation-delay")||D.css("-o-animation-delay")||D.css("-ms-animation-delay")||"0s";var C=D.css("animation-iteration-count")||D.css("-webkit-animation-iteration-count")||D.css("-moz-animation-iteration-count")||D.css("-o-animation-iteration-count")||D.css("-ms-animation-iteration-count")||"1";var B;var A;var E;var G;H=H.split(", ");F=F.split(", ");C=C.split(", ");for(G=0,A=H.length,B=Number.NEGATIVE_INFINITY;G<A;G++){E=parseFloat(H[G])*parseInt(C[G],10)+parseFloat(F[G]);if(E>B){B=E}}return B}function h(){if(f(document.body).height()<=f(window).height()){return 0}var D=document.createElement("div");var B=document.createElement("div");var A;var C;D.style.visibility="hidden";D.style.width="100px";document.body.appendChild(D);A=D.offsetWidth;D.style.overflow="scroll";B.style.width="100%";D.appendChild(B);C=B.offsetWidth;D.parentNode.removeChild(D);return A-C}function o(){if(p){return}var A=f("html");var B=g("is-locked");var D;var C;if(!A.hasClass(B)){C=f(document.body);D=parseInt(C.css("padding-right"),10)+h();C.css("padding-right",D+"px");A.addClass(B)}}function x(){if(p){return}var A=f("html");var B=g("is-locked");var D;var C;if(A.hasClass(B)){C=f(document.body);D=parseInt(C.css("padding-right"),10)-h();C.css("padding-right",D+"px");A.removeClass(B)}}function r(B,C,F,E){var D=g("is",C);var A=[g("is",v.CLOSING),g("is",v.OPENING),g("is",v.CLOSED),g("is",v.OPENED)].join(" ");B.$bg.removeClass(A).addClass(D);B.$overlay.removeClass(A).addClass(D);B.$wrapper.removeClass(A).addClass(D);B.$modal.removeClass(A).addClass(D);B.state=C;!F&&B.$modal.trigger({type:C,reason:E},[{reason:E}])}function z(F,B,A){var E=0;var C=function(G){if(G.target!==this){return}E++};var D=function(G){if(G.target!==this){return}if(--E===0){f.each(["$bg","$overlay","$wrapper","$modal"],function(H,I){A[I].off(l+" "+j)});B()}};f.each(["$bg","$overlay","$wrapper","$modal"],function(G,H){A[H].on(l,C).on(j,D)});F();if(n(A.$bg)===0&&n(A.$overlay)===0&&n(A.$wrapper)===0&&n(A.$modal)===0){f.each(["$bg","$overlay","$wrapper","$modal"],function(G,H){A[H].off(l+" "+j)});B()}}function k(A){if(A.state===v.CLOSED){return}f.each(["$bg","$overlay","$wrapper","$modal"],function(B,C){A[C].off(l+" "+j)});A.$bg.removeClass(A.settings.modifier);A.$overlay.removeClass(A.settings.modifier).hide();A.$wrapper.hide();x();r(A,v.CLOSED,true)}function b(F){var D={};var B;var A;var E;var C;F=F.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",");B=F.split(",");for(C=0,A=B.length;C<A;C++){B[C]=B[C].split(":");E=B[C][1];if(typeof E==="string"||E instanceof String){E=E==="true"||(E==="false"?false:E)}if(typeof E==="string"||E instanceof String){E=!isNaN(E)?+E:E}D[B[C][0]]=E}return D}function g(){var A=e;for(var B=0;B<arguments.length;++B){A+="-"+arguments[B]}return A}function m(){var D=location.hash.replace("#","");var A;var B;if(!D){if(s&&s.state===v.OPENED&&s.settings.hashTracking){s.close()}}else{try{B=f("[data-"+t+'-id="'+D+'"]')}catch(C){}if(B&&B.length){A=f[t].lookup[B.data(t)];if(A&&A.settings.hashTracking){A.open()}}}}function y(C,B){var D=f(document.body);var A=D;var E=this;E.settings=f.extend({},a,B);E.index=f[t].lookup.push(E)-1;E.state=v.CLOSED;E.$overlay=f("."+g("overlay"));if(E.settings.appendTo!==null&&E.settings.appendTo.length){A=f(E.settings.appendTo)}if(!E.$overlay.length){E.$overlay=f("<div>").addClass(g("overlay")+" "+g("is",v.CLOSED)).hide();A.append(E.$overlay)}E.$bg=f("."+g("bg")).addClass(g("is",v.CLOSED));E.$modal=C.addClass(e+" "+g("is-initialized")+" "+E.settings.modifier+" "+g("is",v.CLOSED)).attr("tabindex","-1");E.$wrapper=f("<div>").addClass(g("wrapper")+" "+E.settings.modifier+" "+g("is",v.CLOSED)).hide().append(E.$modal);A.append(E.$wrapper);E.$wrapper.on("click."+e,"[data-"+t+'-action="close"]',function(F){F.preventDefault();E.close()});E.$wrapper.on("click."+e,"[data-"+t+'-action="cancel"]',function(F){F.preventDefault();E.$modal.trigger(d.CANCELLATION);if(E.settings.closeOnCancel){E.close(d.CANCELLATION)}});E.$wrapper.on("click."+e,"[data-"+t+'-action="confirm"]',function(F){F.preventDefault();E.$modal.trigger(d.CONFIRMATION);if(E.settings.closeOnConfirm){E.close(d.CONFIRMATION)}});E.$wrapper.on("click."+e,function(G){var F=f(G.target);if(!F.hasClass(g("wrapper"))){return}if(E.settings.closeOnOutsideClick){E.close()}})}y.prototype.open=function(){var A=this;var B;if(A.state===v.OPENING||A.state===v.CLOSING){return}B=A.$modal.attr("data-"+t+"-id");if(B&&A.settings.hashTracking){c=f(window).scrollTop();location.hash=B}if(s&&s!==A){k(s)}s=A;o();A.$bg.addClass(A.settings.modifier);A.$overlay.addClass(A.settings.modifier).show();A.$wrapper.show().scrollTop(0);A.$modal.focus();z(function(){r(A,v.OPENING)},function(){r(A,v.OPENED)},A)};y.prototype.close=function(A){var B=this;if(B.state===v.OPENING||B.state===v.CLOSING){return}if(B.settings.hashTracking&&B.$modal.attr("data-"+t+"-id")===location.hash.substr(1)){location.hash="";f(window).scrollTop(c)}z(function(){r(B,v.CLOSING,false,A)},function(){B.$bg.removeClass(B.settings.modifier);B.$overlay.removeClass(B.settings.modifier).hide();B.$wrapper.hide();x();r(B,v.CLOSED,false,A)},B)};y.prototype.getState=function(){return this.state};y.prototype.destroy=function(){var B=f[t].lookup;var A;k(this);this.$wrapper.remove();delete B[this.index];A=f.grep(B,function(C){return !!C}).length;if(A===0){this.$overlay.remove();this.$bg.removeClass(g("is",v.CLOSING)+" "+g("is",v.OPENING)+" "+g("is",v.CLOSED)+" "+g("is",v.OPENED))}};f[t]={lookup:[]};f.fn[t]=function(C){var A;var B;this.each(function(D,E){B=f(E);if(B.data(t)==null){A=new y(B,C);B.data(t,A.index);if(A.settings.hashTracking&&B.attr("data-"+t+"-id")===location.hash.substr(1)){A.open()}}else{A=f[t].lookup[B.data(t)]}});return A};f(document).ready(function(){f(document).on("click","[data-"+t+"-target]",function(C){C.preventDefault();var B=C.currentTarget;var D=B.getAttribute("data-"+t+"-target");var A=f("[data-"+t+'-id="'+D+'"]');f[t].lookup[A.data(t)].open()});f(document).find("."+e).each(function(C,A){var D=f(A);var B=D.data(t+"-options");if(!B){B={}}else{if(typeof B==="string"||B instanceof String){B=b(B)}}D[t](B)});f(document).on("keydown."+e,function(A){if(s&&s.settings.closeOnEscape&&s.state===v.OPENED&&A.keyCode===27){s.close()}});f(window).on("hashchange."+e,m)})});