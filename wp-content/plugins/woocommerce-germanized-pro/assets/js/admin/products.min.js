jQuery(function(a){function b(a){var b=parseInt(2,10),c=Math.pow(10,b),d=parseFloat(a),e=Math.round(Math.round(d*c*10)/10)/c;return e.toFixed(2).toString().replace(".",",")}function c(c){var d=["#_regular_price, input[name*=variable_regular_price]","#_unit_base"],e=!1;if(a.each(d,function(b,d){a(c).find(d).removeClass("wc_input_error"),a(c).find(d).val()||a("#general_product_data").find(d).val()||(e=!0,a(c).find(d).addClass("wc_input_error"))}),!e){a(c).find("#_unit_price_regular, input[name*=variable_unit_price_regular]").attr("readonly","readonly"),a(c).find("#_unit_price_sale, input[name*=variable_unit_price_sale]").attr("readonly","readonly");var f=a("#general_product_data #_unit_base").val(),g=parseFloat(a(c).find("#_regular_price, input[name*=variable_regular_price]").val().replace(",",".")),h=f;a(c).find("input[name*=variable_unit_product]").val()?h=parseFloat(a(c).find("input[name*=variable_unit_product]").val().replace(",",".")):a("#general_product_data").find("#_unit_product").val()?h=parseFloat(a("#general_product_data").find("#_unit_product").val().replace(",",".")):f=1;var i=b(g/h*f);if(a(c).find("#_unit_price_regular, input[name*=variable_unit_price_regular]").val(i),a(c).find("#_sale_price, input[name*=variable_sale_price]").val()){var j=parseFloat(a(c).find("#_sale_price, input[name*=variable_sale_price]").val().replace(",",".")),k=b(j/h*f);a(c).find("#_unit_price_sale, input[name*=variable_unit_price_sale]").val(k)}else a(c).find("#_unit_price_sale, input[name*=variable_unit_price_sale]").val("")}}a(document).bind("woocommerce_variations_save_variations_button",function(){var b=["unit","unit_base","unit_product"],c=a(".woocommerce_variations").find(".woocommerce_variation");a.each(b,function(b,d){var e=a("#_"+d).val();c.each(function(){a(this).find(".wc-gzd-parent-"+d).val(e)})})}),a("#general_product_data, .woocommerce_variable_attributes").bind("recalculate_unit_prices",function(){c(a(this))}),a(document).on("click","#_unit_price_auto",function(){a(this).is(":checked")?a(this).parents("#general_product_data").trigger("recalculate_unit_prices"):(a("input").removeClass("wc_input_error"),a("#general_product_data").find("#_unit_price_regular").removeAttr("readonly"),a("#general_product_data").find("#_unit_price_sale").removeAttr("readonly"))}),a(document).on("change","#_regular_price, #_sale_price, #_unit_base, #_unit_product",function(){a("#_unit_price_auto").is(":checked")&&a(this).parents("#general_product_data").trigger("recalculate_unit_prices")}),a("#_regular_price").trigger("change"),a(document).find(".woocommerce_variable_attributes").addClass("event-bound"),a(document).on("click","input[name*=variable_unit_price_auto]",function(){a(this).parents(".woocommerce_variable_attributes").hasClass("event-bound")||(a(this).parents(".woocommerce_variable_attributes").addClass("event-bound"),a(this).parents(".woocommerce_variable_attributes").bind("recalculate_unit_prices",function(){c(a(this))})),a(this).is(":checked")?a(this).parents(".woocommerce_variable_attributes").trigger("recalculate_unit_prices"):(a(this).parents(".woocommerce_variable_attributes").find("input").removeClass("wc_input_error"),a(this).parents(".woocommerce_variable_attributes").find("input[name*=variable_unit_price_regular]").removeAttr("readonly"),a(this).parents(".woocommerce_variable_attributes").find("input[name*=variable_unit_price_sale]").removeAttr("readonly"))}),a(document).on("change","input[name*=variable_regular_price], input[name*=variable_sale_price], input[name*=variable_unit_product]",function(){a(this).parents(".woocommerce_variable_attributes").find("input[name*=variable_unit_price_auto]").is(":checked")&&c(a(this).parents(".woocommerce_variable_attributes"))}),a("#woocommerce-product-data").on("click",".woocommerce_variation",function(){a(this).find("input[name*=variable_unit_price_auto]").is(":checked")&&(a(this).find("input[name*=variable_unit_price_regular]").attr("readonly","readonly"),a(this).find("input[name*=variable_unit_price_sale]").attr("readonly","readonly"),c(a(this).find(".woocommerce_variable_attributes")))})});